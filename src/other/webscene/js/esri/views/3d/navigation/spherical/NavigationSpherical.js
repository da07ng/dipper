// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("../Navigation ./ConstraintsSpherical ./AnimationSpherical ./actions/PanSpherical ./actions/ZoomSpherical ./actions/RotateSpherical ../../lib/glMatrix".split(" "),function(q,r,s,t,u,v,l){var a=l.vec3d,d=l.mat4d,m=a.create(),n=a.create(),p=a.create(),g=d.create();return q.createSubclass([r,s],{declaredClass:"esri.views.3d.navigation.spherical.NavigationSpherical",initialize:function(){this.pan=new t(this);this.zoom=new u(this);this.rotate=new v(this)},fixTargetUpVector:function(){this.cameras.target.computeUpOnSphere()},
setPoiAuto:function(b,c){var e=this.picker.pickAlongRay(this.cameras.target.eye,this.cameras.target.center,null,b);this.picker.pickedIntersectionPoint(e,m)&&(this.setCameraFromEyeAndCenter(this.cameras.target.eye,m),a.set(this.cameras.target.center,this.cameras.current.center),c&&this.setCurrentToTarget())},rotateCameraWithPointsOnSphere:function(b,c,e,k,f){var h;null==f&&(f=a.length(b));1E-4<=Math.abs(a.length(b)-f)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere]: invalid radius for source point (got "+
f+", but expected "+a.length(b)+", "+b+")"),h=a.length(b));1E-4<=Math.abs(a.length(c)-f)&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere: invalid radius for target point (got "+f+", but expected "+a.length(c)+")"),void 0===h&&(h=a.length(c)));void 0!==h&&(f=h);b=this.rotationFromPointsOnSphere(b,c,f,p);d.identity(g);d.rotate(g,b,p);d.multiplyVec3(g,e.eye,k.eye);d.multiplyVec3(g,e.center,k.center);d.multiplyVec3(g,e.up,k.up)},rotationFromPointsOnSphere:function(b,c,e,d){a.cross(b,
c,d);return-Math.acos(1-a.dist2(b,c)/(2*e*e))},preserveHeadingTiltFrame:function(b){var c=a.length(this.cameras.current.center);a.scale(b,c/a.length(b),n);this.rotateCameraWithPointsOnSphere(n,this.cameras.current.center,this.cameras.current,this.cameras.target,c)}})});