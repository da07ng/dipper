// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
require({cache:{"url:webSceneViewer/widgets/LayerWidget/templates/LayerItemEditable.html":'\x3cdiv class\x3d"editable"\x3e\r\n  \x3cdiv class\x3d"LayerItem" data-dojo-attach-point\x3d"layerItemDomNode"\x3e\r\n    \x3cdiv class\x3d"layerItemIcon" data-dojo-attach-point\x3d"layerItemIcon"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"titleInlineEditBoxWrapper" data-dojo-attach-point\x3d"titleBox" title\x3d""\x3e\r\n      \x3cdiv class\x3d"titleInlineEditBox" data-dojo-attach-point\x3d"titleInlineEditBox" data-dojo-type\x3d"dijit/InlineEditBox" data-dojo-props\x3d"disabled:true,editor:\'dijit/form/ValidationTextBox\',editorParams:{regExp:\'\\[^\x3c\x3e]+\'}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"layerEditButton" data-dojo-attach-point\x3d"layerEditButton"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/core/declare dojo/dom-construct dojo/dom-class dojo/on dojo/_base/lang ./LayerItem dijit/_WidgetsInTemplateMixin dojo/text!./templates/LayerItemEditable.html ../OptionsMenu/OptionsMenu dojo/i18n!../nls/widgets esri/layers/ArcGISElevationLayer".split(" "),function(s,b,d,f,k,t,u,v,w,e,x){function p(a){d.remove(a,"layerGroupTypeCheckbox");d.remove(a,"layerGroupTypeRadios");d.remove(a,"layerGroupTypeMerge");d.remove(a,"layerGroupTypeHidden")}function y(a,g){var c=b.create("div",{className:"groupTypeSwitchButton dropdown-navigation dropdown-wrapper"}),
q=b.create("a",{className:"dropdown  btnLogo",href:"JavaScript:void(0);"},c);switch(a.layer.visibilityMode){case "independent":d.add(c,"layerGroupTypeCheckbox");break;case "exclusive":d.add(c,"layerGroupTypeRadios");break;case "inherited":"hide-children"===a.layer.listMode?d.add(c,"layerGroupTypeMerge"):d.add(c,"layerGroupTypeHidden")}a.dropDownContent=b.create("div",{className:"dropdown-content"},c);var h=b.create("ul",{},a.dropDownContent);d.add(a.dropDownContent,"hide");a._onHandles.push(f(a.titleInlineEditBox,
"click",function(){d.toggle(a.dropDownContent,"hide")}));a._onHandles.push(f(q,"click",function(){d.toggle(a.dropDownContent,"hide")}));a._onHandles.push(f(dojo.doc,"click",function(b){b.target!=q&&(b.target!=a.titleInlineEditBox.domNode&&(!b.target.parentNode||"grouptype"!==b.target.parentNode.id))&&d.add(a.dropDownContent,"hide")}));var k=b.create("li",{},h),l=b.create("div",{},k);b.create("div",{className:"layerGroupTypeCheckbox"},l);b.create("div",{className:"layerGroupTypeText"},l).textContent=
e.layerItemEditable.groupTypeCheckbox;var l=b.create("li",{},h),m=b.create("div",{},l);b.create("div",{className:"layerGroupTypeRadios"},m);b.create("div",{className:"layerGroupTypeText"},m).textContent=e.layerItemEditable.groupTypeRadio;var m=b.create("li",{},h),n=b.create("div",{},m);b.create("div",{className:"layerGroupTypeMerge"},n);b.create("div",{className:"layerGroupTypeText"},n).textContent=e.layerItemEditable.groupTypeCompact;h=b.create("li",{},h);n=b.create("div",{},h);b.create("div",{className:"layerGroupTypeHidden"},
n);b.create("div",{className:"layerGroupTypeText"},n).textContent=e.layerItemEditable.groupTypeHide;a._onHandles.push(f(k,"click",function(){p(c);d.add(c,"layerGroupTypeCheckbox");a.layer.set("visibilityMode","independent");a.layer.set("listMode","show");a.layer._websceneEditorProperties.editedFlags.visibilityMode=!0;a.layer._websceneEditorProperties.editedFlags.listMode=!0;g.setWebSceneChanged()}));a._onHandles.push(f(l,"click",function(){p(c);d.add(c,"layerGroupTypeRadios");a.layer.set("visibilityMode",
"exclusive");a.layer.set("listMode","show");a.layer._websceneEditorProperties.editedFlags.visibilityMode=!0;a.layer._websceneEditorProperties.editedFlags.listMode=!0;g.setWebSceneChanged()}));a._onHandles.push(f(m,"click",function(){p(c);d.add(c,"layerGroupTypeMerge");a.layer.set("visibilityMode","inherited");a.layer.set("listMode","hide-children");a.layer._websceneEditorProperties.editedFlags.visibilityMode=!0;a.layer._websceneEditorProperties.editedFlags.listMode=!0;a._layerItemOptionMenu.enableDisableMenuEntry("hide",
"inherited"!=a.layer.visibilityMode);g.setWebSceneChanged()}));a._onHandles.push(f(h,"click",function(){p(c);d.add(c,"layerGroupTypeHidden");a.layer.set("visibilityMode","inherited");a.layer.set("listMode","hide");a._layerItemOptionMenu.enableDisableMenuEntry("hide","inherited"!=a.layer.visibilityMode);a.layer._websceneEditorProperties.editedFlags.visibilityMode=!0;a.layer._websceneEditorProperties.editedFlags.listMode=!0;g.setWebSceneChanged()}));return c}var r=s([t,u],{name:"LayerItemEditable",
templateString:v,editor:void 0,dropDownContent:void 0,configurable:void 0,constructor:function(a,b){this.configurable=!0},_setLayerTitleAttr:function(a){this._set("layerTitle",a);this.titleNode&&(this.titleNode.textContent=a,this.titleNode.title=a);this.titleBox&&this.titleBox.title!==a&&(this.titleBox.title=a);this.titleInlineEditBox&&this.titleInlineEditBox.value!==a&&this.titleInlineEditBox.set("value",a)},destroy:function(){this.inherited(arguments);this._layerItemOptionMenu&&this._layerItemOptionMenu.destroy()},
_init:function(){this.titleInlineEditBox.editorParams.invalidMessage=e.invalidTitle;this.isGroupLayer?this._initGroupLayerItems():this.configurable=!this.layer.isInstanceOf(x);var a=[];this.isGroupLayer?a.push({id:"grouptype",title:e.layerItemEditable.changeGroupType,func:function(a){d.remove(this.dropDownContent,"hide")}.bind(this)}):a.push({id:"configure",title:e.layerItemEditable.configureLayer,func:function(a){this.layerWidget.emit("edit-layer",{layer:this.layer,parentGroup:this.parentGroup,parentLayerItem:this})}.bind(this)});
a.push({id:"zoomTo",title:e.layerItemEditable.zoomToLayer,func:this._zoomToLayer.bind(this)},{id:"moveUp",title:e.moveUp,func:function(){var a=this.parentGroup||this.view.map,b=a.layers.indexOf(this.layer);b<a.layers.get("length")&&a.reorder(this.layer,b+1)}.bind(this),className:this._isFirstLayerInParent()?"disabled":""},{id:"moveDown",title:e.moveDown,func:function(){var a=this.parentGroup||this.view.map,b=a.layers.indexOf(this.layer);b<a.layers.get("length")&&0<b&&a.reorder(this.layer,b-1)}.bind(this),
className:this._isLastLayerInParent()?"disabled":""});this.isGroupLayer||a.push({id:"hide",title:"show"===this.layer.listMode?e.hideInMapLayers:e.showInMapLayers,func:function(a){this.layer.set("listMode","show"===this.layer.listMode?"hide":"show");this.layer._websceneEditorProperties.editedFlags.listMode=!0}.bind(this)});a.push({id:"rename",title:e.rename,func:function(a){this.titleInlineEditBox.set("disabled",!1);this.titleInlineEditBox.edit()}.bind(this)},{id:"delete",title:e.layerItemEditable.deleteLayer,
func:this._deleteLayer.bind(this)});this._layerItemOptionMenu=new w({entries:a});this.parentGroup&&this._layerItemOptionMenu.enableDisableMenuEntry("hide","inherited"!=this.parentGroup.visibilityMode);this.isGroupLayer||(this._layerItemOptionMenu.enableDisableMenuEntry("configure",this.configurable),this._layerItemOptionMenu.setMenuEntryTitle("hide","show"===this.layer.listMode?e.hideInMapLayers:e.showInMapLayers));this._layerItemOptionMenu.placeAt(this.layerEditButton);var g=function(){this.titleInlineEditBox.set("disabled",
!0)}.bind(this);this.titleInlineEditBox.on("change",function(a){g();this.editor.setWebSceneChanged();this.layer.set("title",a)}.bind(this));this.titleInlineEditBox.on("cancel",g);if(!this.isGroupLayer){var a=b.create("div",{className:"thumbOther"},this.layerItemIcon),c=b.create("div",{className:"framethumb"},this.layerItemIcon);this._onHandles.push(f(c,"click",k.hitch(this,this._zoomToLayer)));if(null!=this.layer._websceneEditorProperties.thumbnailUrl)a.style.backgroundImage="url("+this.layer._websceneEditorProperties.thumbnailUrl+
")";else if(this.layer._websceneEditorProperties.portalLayerItem&&"scene service"===(this.layer._websceneEditorProperties.portalLayerItem.item.type&&this.layer._websceneEditorProperties.portalLayerItem.item.type.toLowerCase()||""))a.className="thumbScene";this.configurable?this._onHandles.push(f(this.titleInlineEditBox,"click",k.hitch(this,function(){this.layerWidget.emit("edit-layer",{layer:this.layer,parentGroup:this.parentGroup,parentLayerItem:this})}))):d.add(this.titleInlineEditBox.domNode,"non-configurable")}},
_addLayerItem:function(a,b){var c=new r({view:this.view,layer:a,layerWidget:this.layerWidget,parentGroup:this.layer,parentLayerItem:this,editor:this.editor});c.placeAt(this.layersDomNode,b);this._layerItems.push(c)},_initGroupLayerItems:function(){this.inherited(arguments);this.isGroupLayer&&(this.groupTypeSwitchButton=y(this,this.editor),b.place(this.groupTypeSwitchButton,this.layerItemDomNode,"first"))},_deleteLayer:function(){this.parentGroup?this.parentGroup.remove(this.layer):this.view.map.remove(this.layer);
this.editor.setWebSceneChanged()},_zoomToLayer:function(){this.view.animateTo(this.layer.get("fullExtent"))},_isFirstLayerInParent:function(){var a=this.parentGroup||this.view.map;return a.layers.indexOf(this.layer)===a.layers.length-1},_isLastLayerInParent:function(){return 0===(this.parentGroup||this.view.map).layers.indexOf(this.layer)}});return r});