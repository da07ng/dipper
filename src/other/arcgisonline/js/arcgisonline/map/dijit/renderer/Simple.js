// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/map/dijit/renderer/templates/Simple.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" region\x3d"top" style\x3d"height:100%;"\x3e\r\n  \x3cdiv id\x3d"renderer-simple-main" class\x3d"panel panel_left" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"padding:7px;"\x3e\r\n    \x3cdiv id\x3d"rendererSimpleHeader" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"top"\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"display:inline;"\x3e\r\n        \x3ca href\x3d"JavaScript:void(0);" data-dojo-attach-point\x3d"_closeBtn" data-dojo-attach-event\x3d"onClick:_onCancel" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse"\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"rendererSimpleTitle" class\x3d"esriFloatLeading panel_title"\x3e\r\n        ${i18n.rendererPanelTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleLayer" class\x3d"esriFloatLeading panel_title" style\x3d"clear:both;"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; height:1px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-dojo-attach-point\x3d"_rendererSimpleTop" region\x3d"center" style\x3d"padding:10px 0;overflow-y:auto;"\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading strong" style\x3d"margin-top: 2px;"\x3e\r\n        ${i18n.location}\r\n      \x3c/div\x3e\r\n      \x3c!--\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleAttribute" class\x3d"esriFloatTrailing"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" data-dojo-attach-point\x3d"_rendererSimpleChangeButton" class\x3d"calcite tiny" data-dojo-attach-event\x3d"onClick:_onChangeField"\x3e\x3cspan\x3e${i18n.change}\x3c/span\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      --\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"renderer-simple-bottom" class\x3d"panel panel_left" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"padding:2px 7px 7px 7px; margin-bottom:-5px; overflow-y:auto;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleSymbolTitle"\x3e\r\n      \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleSymbol" class\x3d"esriFloatLeading" style\x3d"padding:5px"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"middle"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_rendererSimpleSymbolText" class\x3d"toolsLabel"\x3e${i18n.symbols}\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleStream" class\x3d"esriFloatLeading" style\x3d"margin-bottom:15px;"\x3e\r\n      \x3cdiv\x3e\r\n        ${i18n.streamMsg}\r\n      \x3c/div\x3e\r\n      \x3ctable style\x3d"padding-top:10px;" data-dojo-attach-point\x3d"rendererStreamPreviousMsg"\x3e\r\n        \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding-top:2px;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"rendererStreamPreviousCheck" data-dojo-attach-event\x3d"onChange:_onChangeStreamPrevious" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox" /\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd nowrap\x3e\r\n              \x3cspan id\x3d"rendererStreamMsgPart1" class\x3d"esriLeadingMargin05"\x3e\r\n              \x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"rendererStreamMaxTrackPts" data-dojo-attach-event\x3d"onChange:_onChangeStreamMaxTrackPts" intermediateChanges\x3d"true" data-dojo-type\x3d"dijit.form.NumberSpinner" value\x3d"5" smallDelta\x3d"1" constraints\x3d"{min:2,max:100,places:0}" style\x3d"width:40px; margin: 0 5px;"/\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd nowrap\x3e\r\n              \x3cspan id\x3d"rendererStreamMsgPart2"\x3e\r\n              \x3c/span\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n      \x3cdiv class\x3d"esriLeadingMargin108"\x3e\r\n        \x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\r\n          ${i18n.symbolLabel}\r\n        \x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streamSymbolImage" id\x3d"panelStreamSymbolImage" class\x3d"esriFloatLeading" style\x3d"padding:5px"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading" data-dojo-attach-point\x3d"rendererStreamConnectObservationsMsg" style\x3d"clear:both; margin-top:5px"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"rendererStreamConnectCheck" data-dojo-attach-event\x3d"onChange:_onChangeStreamConnect" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox" /\x3e\r\n          \x3cspan class\x3d"esriLeadingMargin05"\x3e\r\n            ${i18n.connectObservations}\r\n          \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin108" style\x3d"clear:both;"\x3e\r\n          \x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\r\n            ${i18n.symbolLabel}\r\n          \x3c/td\x3e\x3ctd\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_streamLineSymbolImage" id\x3d"panelStreamLineSymbolImage" class\x3d"esriFloatLeading" style\x3d"padding:5px"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleRotation" style\x3d"clear:both;"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ctable cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd valign\x3d"top"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"_rendererSimpleRotationCheck" data-dojo-attach-event\x3d"onChange:_onChangeRotation" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox"/\x3e\r\n        \x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleRotationText"\x3e\r\n            ${i18n.rotationMsg}\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleRotationContent" class\x3d"esriLeadingMargin107" style\x3d"clear:both;margin-top:3px;"\x3e\r\n        \x3cdiv style\x3d"clear:both;margin-top:3px;"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"_rendererSimpleRotationAttribute" data-dojo-attach-event\x3d"onChange:_onChangeRotationAttribute" data-dojo-type\x3d"dijit.form.Select" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"clear:both;margin-top:5px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererSimpleRotationClockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:true" name\x3d"clockwise"/\x3e\r\n          ${i18n.clockwise}\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"clear:both;margin-top:3px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererSimpleRotationCounterclockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:false" name\x3d"clockwise"/\x3e\r\n          ${i18n.counterclockwise}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"height:20px;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleTransparency" style\x3d"clear:both;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleTransparencyTitle" class\x3d"esriFloatLeading sectionTitle" \x3e\r\n        ${i18n.transparency}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both; padding: 5px 10px 0 10px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleTransparencyOverallTitle" class\x3d"esriFloatLeading sectionSubTitle rendererSimpleHasAttributeTransparency" \x3e\r\n          ${i18n.overallTransparency}\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"rendererSimpleTransparencySliderDiv" class\x3d"esriLeadingPadding1" style\x3d"clear:both;"\x3e\r\n          \x3cdiv id\x3d"rendererSimpleTransparencySliderInnerDiv" class\x3d"esriFloatLeading" style\x3d"padding: 6px 0 20px;"\x3e\r\n            \x3cdiv id\x3d"rendererSimpleTransparencySlider"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleTransparencyPerFeatureTitle" class\x3d"esriFloatLeading sectionSubTitle rendererSimpleHasAttributeTransparency" style\x3d"clear:both;"\x3e\r\n          ${i18n.perFeaturesTransparency}\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"clear:both;margin-top:3px;" class\x3d"esriItemLinks rendererSimpleHasAttributeTransparency esriLeadingPadding1"\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_rendererSimpleAttributeTransparencyLabel_part1" class\x3d"esriLeadingMargin025"\x3e\x3c/span\x3e\r\n          \x3cA data-dojo-attach-point\x3d"_rendererSimpleAttributeTransparencyLabel_part2" data-dojo-attach-event\x3d"onClick:_onClickAttributeTransparency" href\x3d"JavaScript:void(0);"\x3e\x3c/A\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_rendererSimpleAttributeTransparencyLabel_part3"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleScale" style\x3d"padding:20px 0 10px 0;clear:both;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleScaleTitle" class\x3d"esriFloatLeading sectionTitle"\x3e\r\n        ${i18n.visibleRange}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleScaleSuggest" data-dojo-attach-event\x3d"onClick:_onClickScaleSuggest" class\x3d"esriFloatTrailing suggestLabel"\x3e\r\n        \x26nbsp;${i18n.suggest}\x26nbsp;\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both;padding: 10px;"\x3e\r\n        \x3cdiv id\x3d"rendererSimpleScaleSlider"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_rendererSimpleSpacer"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererSimpleContentClose"\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite blue" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onDone"\x3e\x3cspan\x3e${i18n.ok}\x3c/span\x3e\x3c/button\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onCancel"\x3e\x3cspan\x3e${i18n.cancel}\x3c/span\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererSimpleFooterDiv" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px;"\x3e\r\n    \x3cdiv class\x3d"footer" id\x3d"rendererSimpleFooter" data-dojo-type\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("arcgisonline/map/dijit/renderer/Simple","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/html dojo/Evented dojo/on dojo/string dojo/dom dojo/has dojo/topic dojo/query dojo/dom-style dojo/dom-construct dojo/dom-class dojox/html/entities dijit/registry dijit/Tooltip dijit/Dialog esri/lang esri/styles/basic esri/Color esri/symbols/jsonUtils esri/renderers/jsonUtils arcgisonline/map/dijit/renderer/_SymbolsMixin arcgisonline/map/dijit/renderer/_SimpleMixin arcgisonline/map/dijit/renderer/_OpacityMixin arcgisonline/map/dijit/renderer/_RendererMixin esri/renderers/SimpleRenderer esri/renderers/TemporalRenderer esri/symbols/SimpleLineSymbol arcgisonline/map/dijit/renderer/AttributeTransparencyDlg arcgisonline/map/dijit/renderer/AttributeTransparency dojo/i18n!arcgisonline/nls/arcgisonline dijit/_Widget dijit/_Templated dojo/text!arcgisonline/map/dijit/renderer/templates/Simple.html".split(" "),
function(n,c,t,e,k,N,O,u,f,z,P,A,d,Q,B,v,l,g,C,w,s,x,h,R,D,E,F,G,p,y,q,H,I,m,J,K,L){n=n([J,K],{declaredClass:"arcgisonline.map.dijit.renderer.Simple",basePath:require.toUrl("arcgisonline/map/dijit/renderer"),baseClass:"esriAGORendererSimple",widgetsInTemplate:!0,templateString:L,_rConnects:[],tooltips:[],i18n:null,disableAllEvents:!0,container:null,subLayerId:null,mapLayer:null,layer:null,renderer:null,symbol:null,streamPreviousSymbol:null,streamConnectLineSymbol:null,origGalleryRenderer:null,constructor:function(a,
b){c.mixin(this,D);c.mixin(this,E);c.mixin(this,F);c.mixin(this,G);a&&(a.containerNode&&(this.container=a.containerNode),this.params=a.params,c.mixin(this,a.params),this._rConnects=[])},destroy:function(){this.hideSymbolStyler();this.transparencySlider&&this.transparencySlider.destroy();this.scaleSlider&&this.scaleSlider.destroy();t.forEach(this.tooltips,function(a){a.destroy()});t.forEach(this._rConnects,e.disconnect);delete this._rConnects;this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
this.i18n=c.clone(m.common);c.mixin(this.i18n,m.rendererCommon);c.mixin(this.i18n,m.rendererUniqueValuesPanel);c.mixin(this.i18n,m.rendererSimplePanel);c.mixin(this.i18n,m.rendererAttributeTransparencyDlg)},postCreate:function(){this.container.addChild(l.byId("rendererSimplePanel"));this.loadConnections()},loadConnections:function(){this._rConnects.push(e.connect(l.byId("leftContentPanel"),"resize",this,"adjustHeight"));e.connect(this._rendererSimpleSymbolTitle,"click",c.hitch(this,"onClickSymbol",
"main"));e.connect(this._streamSymbolImage,"click",c.hitch(this,"onClickSymbol","prevObs"));e.connect(this._streamLineSymbolImage,"click",c.hitch(this,"onClickSymbol","lineObs"))},_onClose:function(a){a.preventDefault();delete this.mapLayer._scaleChanged;delete this.mapLayer._opacityChanged;this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges();arcgisonline.map.leftPanel.openLeftTOCPanel()},_onDone:function(a){a.preventDefault();this.hideSymbolStyler();this.hideLegendPopup();
this.isGeoRSS||this.isSL?(this.mapLayer._scaleChanged&&(this.mapLayer.scaleChanged=!0),delete this.mapLayer._scaleChanged,this.mapLayer._opacityChanged&&(this.mapLayer.opacityChanged=!0),delete this.mapLayer._opacityChanged,dojo.toJson(this.origRenderer.renderer)!==dojo.toJson(this.renderer.toJson())&&(this.mapLayer.rendererChanged=!0),e.publish("_onRendererUpdate",[]),arcgisonline.map.leftPanel.openLeftTOCPanel(),l.byId("rendererPanel").properClose=!0):leftPanel.switchToRendererStack(this.renderer)},
_onCancel:function(a){a.preventDefault();delete this.mapLayer._scaleChanged;delete this.mapLayer._opacityChanged;this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges(this.origGalleryRenderer);this.isGeoRSS||this.isSL?arcgisonline.map.leftPanel.openLeftTOCPanel():leftPanel.switchToRendererStack()},_onChangeField:function(){leftPanel.switchToRendererStack()},startup:function(){this.inherited(arguments);this._init()},_init:function(){this.origGalleryRenderer=this.buildCurrentRendererInfo();
this._rendererSimpleLayer.innerHTML=v.encode(this.mapLayer.title.replace(/\_/g," "));-1!==this.subLayerId&&(this.layer.name&&this.mapLayer.title!==this.layer.name)&&(this._rendererSimpleLayer.innerHTML+=" - "+v.encode(this.layer.name.replace(/\_/g," ")));this.scheme=null;this.hasDynamic?d.set(this._rendererSimpleTransparency,"display","none"):this.transparencySlider=this.createTransparencySlider("rendererSimpleTransparencySlider");this.createScaleSlider("rendererSimpleScaleSlider").then(dojo.hitch(this,
function(a){this.scaleSlider=a}));if(this.isSL&&this.mapLayer.serviceInfo.timeInfo&&this.mapLayer.serviceInfo.timeInfo.trackIdField){var a=this.i18n.drawPastObservations,b=a.indexOf("${"),M=a.indexOf("}");f.byId("rendererStreamMsgPart1").innerHTML=a.substring(0,b);f.byId("rendererStreamMsgPart2").innerHTML=a.substring(M+1);this.symbol=this.renderer.latestObservationRenderer?h.fromJson(this.renderer.latestObservationRenderer.symbol.toJson()):h.fromJson(this.renderer.symbol.toJson());this.renderer.observationRenderer?
(this.rendererStreamPreviousCheck.set("checked",!0),this.streamPreviousSymbol=h.fromJson(this.renderer.observationRenderer.symbol.toJson()),this.renderer.trackRenderer?(this.rendererStreamConnectCheck.set("checked",!0),this.streamConnectLineSymbol=h.fromJson(this.renderer.trackRenderer.symbol.toJson())):(this.rendererStreamConnectCheck.set("checked",!1),a=s.getSchemes({theme:"default",basemap:this.getBasemapType(),geometryType:"esriGeometryPolyline"}).primaryScheme,this.streamConnectLineSymbol=new q(q.STYLE_SOLID,
new x(a.color),a.width))):(this.rendererStreamPreviousCheck.set("checked",!1),this.rendererStreamConnectCheck.set("checked",!1),this.streamPreviousSymbol=h.fromJson(this.symbol.toJson()),this.streamPreviousSymbol.size=2*this.streamPreviousSymbol.size/3,a=s.getSchemes({theme:"default",basemap:this.getBasemapType(),geometryType:"esriGeometryPolyline"}).primaryScheme,this.streamConnectLineSymbol=new q(q.STYLE_SOLID,new x(a.color),a.width));this.mapLayer.layerDefinition&&w.isDefined(this.mapLayer.layerDefinition.maximumTrackPoints)&&
2<this.mapLayer.layerDefinition.maximumTrackPoints?this.rendererStreamMaxTrackPts.set("value",this.mapLayer.layerDefinition.maximumTrackPoints-1):2<this.mapLayer.layer.maximumTrackPoints?this.rendererStreamMaxTrackPts.set("value",this.mapLayer.layer.maximumTrackPoints-1):this.rendererStreamMaxTrackPts.set("value",5);arcgisonline.map.symbol.drawSymbol(f.byId("panelStreamLineSymbolImage"),this.streamConnectLineSymbol,this.template);arcgisonline.map.symbol.drawSymbol(f.byId("panelStreamSymbolImage"),
this.streamPreviousSymbol,this.template);this._rConnects.push(e.connect(f.byId("panelStreamSymbolImage"),"onclick",c.hitch(this,"onClickSymbol","prevObs")));this._rConnects.push(e.connect(f.byId("panelStreamLineSymbolImage"),"onclick",c.hitch(this,"onClickSymbol","lineObs")))}else this.symbol=h.fromJson(this.renderer.symbol.toJson()),d.set(this._rendererSimpleStream,"display","none");!this.isGeoRSS&&this.hasNumericField&&("esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType)?
(this._rendererSimpleRotationAttribute.setStore(this.attributesStore,"",{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger') AND NOT name:'"+this.layer.objectIdField+"'"}),a=this.renderer.rotationInfo||(this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.rotationInfo:null),this._rendererSimpleRotationCheck.set("checked",a?!0:!1),a&&a.field&&this.attributesStore.fetchItemByIdentity({identity:a.field,
onItem:c.hitch(this,function(a){this._rendererSimpleRotationAttribute.set("value",a.alias)})}),d.set(this._rendererSimpleRotation,"display",""),d.set(this._rendererSimpleRotationContent,"display",a?"":"none")):d.set(this._rendererSimpleRotation,"display","none");if(!this.hasDynamic&&!this.isGeoRSS&&!this.isSL&&this.hasNumericField){a=this.i18n.setFromField;b=a.indexOf("${field}");this._rendererSimpleAttributeTransparencyLabel_part1.innerHTML=a.substring(0,b);this._rendererSimpleAttributeTransparencyLabel_part3.innerHTML=
a.substring(b+8);var r=this.getOpacityInfo();r?this.attributesStore.fetchItemByIdentity({identity:r.field,onItem:c.hitch(this,function(a){r.normalizationField?this.attributesStore.fetchItemByIdentity({identity:r.normalizationField,onItem:c.hitch(this,function(b){this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=u.substitute(this.i18n.setFromFieldDividedBy,{field1:a.alias||a.name,field2:b.alias||b.name})})}):this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=a.alias||a.name})}):
this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=this.i18n.attributeValues}else A(".rendererSimpleHasAttributeTransparency").forEach(function(a){d.set(a,"display","none")}),B.remove(f.byId("rendererSimpleTransparencySliderDiv"),"esriLeadingPadding1");(this.isSL||this.isGeoRSS)&&d.set(this._rendererSimpleScaleSuggest,"display","none");this.authoringInfo=c.clone(this.renderer.authoringInfo);this.isSymbolTransparent(this.symbol)?this.drawTransparentSymbol(this._rendererSimpleSymbol):(this.drawSymbol(this._rendererSimpleSymbol,
this.symbol,null,null,null,1),this.updateBackgroundForAlmostWhite(this.symbol,this._rendererSimpleSymbol));setTimeout(c.hitch(this,function(){this.disableAllEvents=!1}),1E3);this.createTooltips();this.showLegendPopup();this.adjustHeight()},createTooltips:function(){var a=function(a){return"\x3cdiv class\x3d'rendererTooltip'\x3e"+a+"\x3c/div\x3e"};this.tooltips.push(new g({connectId:this._rendererSimpleTransparencyTitle,label:a(this.i18n.transparencyTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleTransparencyOverallTitle,
label:a(this.i18n.overallTransparencyTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleTransparencyPerFeatureTitle,label:a(this.i18n.perFeaturesTransparencyTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleScaleTitle,label:a(this.i18n.visibleRangeTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleScaleSuggest,label:a(this.i18n.suggestTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleRotationText,label:a(this.i18n.rotateTooltip)}));
this.tooltips.push(new g({connectId:this._rendererSimpleRotationAttribute.domNode,label:a(this.i18n.rotationFieldTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleSymbol,label:a(this.i18n.symbolsTooltip)}));this.tooltips.push(new g({connectId:this._rendererSimpleSymbolText,label:a(this.i18n.symbolsTooltip)}));this.tooltips.push(new g({connectId:this.rendererStreamPreviousMsg,label:a(this.i18n.drawPastObservastionsTooltip)}));this.tooltips.push(new g({connectId:this.rendererStreamConnectObservationsMsg,
label:a(this.i18n.connectObservationsTooltip)}))},onUpdateSymbol:function(a,b){"prevObs"===a?(this.streamPreviousSymbol=b,this.renderer.observationRenderer&&(this.renderer.observationRenderer.symbol=h.fromJson(b.toJson())),this.drawSymbol(this._streamSymbolImage,this.streamPreviousSymbol,null,null,null,1),this.updateBackgroundForAlmostWhite(this.streamPreviousSymbol,this._streamSymbolImage)):"lineObs"===a?(this.streamConnectLineSymbol=b,this.renderer.trackRenderer&&(this.renderer.trackRenderer.symbol=
h.fromJson(b.toJson())),this.drawSymbol(this._streamLineSymbolImage,this.streamConnectLineSymbol,null,null,null,1),this.updateBackgroundForAlmostWhite(this.streamConnectLineSymbol,this._streamLineSymbolImage)):(this.symbol=b,this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.symbol=h.fromJson(b.toJson()):this.renderer.symbol=h.fromJson(b.toJson()),this.isSymbolTransparent(this.symbol)?this.drawTransparentSymbol(this._rendererSimpleSymbol):(this.drawSymbol(this._rendererSimpleSymbol,
this.symbol,null,null,null,1),this.updateBackgroundForAlmostWhite(this.symbol,this._rendererSimpleSymbol)));this.applySimpleRenderer(this.renderer);this.adjustHeight()},_onChangeRotation:function(a){this.disableAllEvents||(d.set(this._rendererSimpleRotationContent,"display",a?"":"none"),this.adjustHeight(),this.updateRotationInfo())},_onChangeRotationAttribute:function(a){this.disableAllEvents||this.updateRotationInfo()},_onChangeRotationDirection:function(){this.disableAllEvents||this.updateRotationInfo()},
updateRotationInfo:function(){if(this._rendererSimpleRotationCheck.get("checked")){var a={field:this._rendererSimpleRotationAttribute.get("value"),type:this._rendererSimpleRotationClockwiseRadio.get("checked")?"geographic":"arithmetic"};this.renderer.latestObservationRenderer?(this.renderer.observationRenderer.setRotationInfo(a),this.renderer.latestObservationRenderer.setRotationInfo(a)):this.renderer.setRotationInfo(a)}else this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.setRotationInfo(null):
this.renderer.setRotationInfo(null);this.applySimpleRenderer(this.renderer)},_onChangeStreamPrevious:function(){this.disableAllEvents||(this.rendererStreamPreviousCheck.get("checked")||this.rendererStreamConnectCheck.set("checked",!1),this.updateStreamSymbols())},_onChangeStreamMaxTrackPts:function(a){this.disableAllEvents||(this.rendererStreamPreviousCheck.get("checked")?this.updateStreamSymbols():this.rendererStreamPreviousCheck.set("checked",!0))},_onChangeStreamConnect:function(){this.disableAllEvents||
(this.rendererStreamConnectCheck.get("checked")?this.rendererStreamPreviousCheck.get("checked")?this.updateStreamSymbols():this.rendererStreamPreviousCheck.set("checked",!0):this.updateStreamSymbols())},updateStreamSymbols:function(){var a=this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.rotationInfo:this.renderer.rotationInfo;if(this.rendererStreamPreviousCheck.get("checked")){var b=new p(this.symbol);b.setRotationInfo(a);var c=new p(this.streamPreviousSymbol);c.setRotationInfo(a);
this.rendererStreamConnectCheck.get("checked")?(a=new p(this.streamConnectLineSymbol),this.renderer=new y(c,b,a,null)):this.renderer=new y(c,b,null,null);this.mapLayer.layerDefinition=this.mapLayer.layerDefinition||{};this.mapLayer.layerDefinition.maximumTrackPoints=this.rendererStreamMaxTrackPts.get("value")+1;this.mapLayer.layer.setMaximumTrackPoints(this.mapLayer.layerDefinition.maximumTrackPoints);this.mapLayer.maximumTrackPointsChanged=!0}else this.renderer=new p(this.symbol),this.renderer.setRotationInfo(a),
this.mapLayer.layerDefinition&&(w.isDefined(this.mapLayer.layerDefinition.maximumTrackPoints)&&1!==this.mapLayer.layerDefinition.maximumTrackPoints)&&(this.mapLayer.maximumTrackPointsChanged=!0,this.mapLayer.layerDefinition=this.mapLayer.layerDefinition||{},this.mapLayer.layerDefinition.maximumTrackPoints=1,this.mapLayer.layer.setMaximumTrackPoints(1));this.applySimpleRenderer(this.renderer)},onClickSymbol:function(a,b){var d=this.symbol;"prevObs"===a?d=this.streamPreviousSymbol:"lineObs"===a&&(d=
this.streamConnectLineSymbol);var f=s.getSchemes({theme:"default",basemap:this.getBasemapType(),geometryType:this.geometryType});this.showSymbolStyler(d,{externalSizing:!1,optimizeOutline:this.hasOptimizeOutline(this.renderer.visualVariables),schemes:f},c.hitch(this,"onSymbolChange",a))},onSymbolChange:function(a,b,d,f,e){this.scheme=f||this.scheme;d=b.toJson();if("esriPMS"==b.type&&(0==d.url.length||"http://"==d.url))b=h.fromJson(this.getMarkerJson());e?(b=this.setOutlineWidthOfSymbol(b,1),this.getSuggestedOutline().then(c.hitch(this,
function(a,c,b){this.replaceVisualVariable("sizeInfo","outline",b.widthInfo,this.renderer);this.onUpdateSymbol(a,c)},a,b),c.hitch(this,function(a,c,b){b=this.getVisualVariablesExceptTypes([{type:"sizeInfo",target:"outline"}],this.renderer.visualVariables);this.renderer.setVisualVariables(b);this.onUpdateSymbol(a,c)},a,b))):(e=this.getVisualVariablesExceptTypes([{type:"sizeInfo",target:"outline"}],this.renderer.visualVariables),this.renderer.setVisualVariables(e),this.onUpdateSymbol(a,b))},_onClickScaleSuggest:function(){this.suggestScale(this.scaleSlider)},
_onClickAttributeTransparency:function(){this.getVisualVariableByType("opacityInfo",null,this.renderer.visualVariables);this.attributeTransparencyDlg=(new C({id:"attributeTransparencyDlg",style:"visibility:hidden;"})).placeAt(document.body);this.attributeTransparencyDlgContent=new H({id:"attributeTransparencyDlgContent",dialog:this.attributeTransparencyDlg,style:"width:100%;"});this.attributeTransparencyDlgHideHandler=e.connect(this.attributeTransparencyDlg,"onHide",c.hitch(this,function(){this.destroyAttributeTransparencyDlg()}));
this.attributeTransparency=new I({attributesStore:this.attributesStore,layer:this.layer,mapLayer:this.mapLayer},"attributeTransparencyDlgContent");this.attributeTransparencyDlg.set({title:this.i18n.attributeTransparencyDlgTitle,content:this.attributeTransparency});this.attributeTransparencyCommitHandler=e.subscribe("attribute-transparency-commit",c.hitch(this,function(a){this.hideAttributeTransparencyDlg();if(a.opacityInfo)this.replaceVisualVariable("opacityInfo",null,a.opacityInfo,this.renderer),
this.renderer.authoringInfo=a.authoringInfo,this.applySimpleRenderer(this.renderer),this.attributesStore.fetchItemByIdentity({identity:a.opacityInfo.field,onItem:c.hitch(this,function(b){a.opacityInfo.normalizationField?this.attributesStore.fetchItemByIdentity({identity:a.opacityInfo.normalizationField,onItem:c.hitch(this,function(a){this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=u.substitute(this.i18n.setFromFieldDividedBy,{field1:b.alias||b.name,field2:a.alias||a.name})})}):this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=
b.alias||b.name})});else{var b=this.getVisualVariablesExceptType("opacityInfo",null,this.renderer.visualVariables);this.renderer.setVisualVariables(b);this.applySimpleRenderer(this.renderer);this._rendererSimpleAttributeTransparencyLabel_part2.innerHTML=this.i18n.attributeValues}}));this.attributeTransparencyStopHandler=e.subscribe("attribute-transparency-stop",c.hitch(this,function(){this.hideAttributeTransparencyDlg()}));this.attributeTransparencyDlg.show().then(c.hitch(this,function(){d.set(this.attributeTransparencyDlg.domNode,
"top","95px");esriGeowConfig.isRightToLeft?d.set(this.attributeTransparencyDlg.domNode,"right",arcgisonline.map.leftPanel.leftPanelWidth+18+"px"):d.set(this.attributeTransparencyDlg.domNode,"left",arcgisonline.map.leftPanel.leftPanelWidth+18+"px");d.set(this.attributeTransparencyDlg.domNode,"visibility","visible")}))},hideAttributeTransparencyDlg:function(){this.attributeTransparencyDlg&&this.attributeTransparencyDlg.hide()},destroyAttributeTransparencyDlg:function(){this.attributeTransparencyDlgHideHandler&&
e.disconnect(this.attributeTransparencyDlgHideHandler);this.attributeTransparencyDlgHideHandler=null;this.attributeTransparencyCommitHandler&&this.attributeTransparencyCommitHandler.remove();this.attributeTransparencyCommitHandler=null;this.attributeTransparencyStopHandler&&this.attributeTransparencyStopHandler.remove();this.attributeTransparencyStopHandler=null;this.attributeTransparency&&this.attributeTransparency.destroy();this.attributeTransparency=null;this.attributeTransparencyDlgContent&&this.attributeTransparencyDlgContent.destroy();
this.attributeTransparencyDlgContent=null;this.attributeTransparencyDlg&&this.attributeTransparencyDlg.destroy();this.attributeTransparencyDlg=null;l.byId("attributeTransparencyDlg")&&l.byId("attributeTransparencyDlg").destroy()},adjustHeight:function(a){if(!("undefined"==typeof leftPanel||"rendererSimpleStack"!=leftPanel.visibleStack)){a=k.coords(f.byId("leftContentStackContainer")).h;var b=k.coords(f.byId("rendererSimpleHeader")).h,c=k.coords(this._rendererSimpleTop.domNode).h,e=k.coords(this._doneChangingButton.domNode).h-
5,g=k.coords(f.byId("rendererSimpleFooter_links")).h+10;d.set(f.byId("rendererSimpleFooterDiv"),"height",g+"px");a=a-b-c-e-g-23;0<a&&d.set(f.byId("renderer-simple-bottom"),"height",a+"px");newWidth=k.coords(f.byId("leftContentStackContainer")).w-16;0<newWidth&&(d.set(this._rendererSimpleRotationAttribute.domNode,"width",newWidth-38+"px"),!this.hasDynamic&&!this.isGeoRSS&&!this.isSL?this.transparencySlider&&d.set(this.transparencySlider.domNode,"width",newWidth-40+"px"):this.transparencySlider&&d.set(this.transparencySlider.domNode,
"width",newWidth-30+"px"),this.scaleSlider&&d.set(this.scaleSlider.domNode,"width",newWidth-30+"px"))}}});z("extend-esri")&&c.setObject("arcgisonline.map.dijit.renderer.Simple",n);return n});