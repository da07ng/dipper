// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["./ObjectPool"],function(d){var h=window.MutationObserver||window.WebKitMutationObserver,k=new d(function(){this.isActive=!0;this.callback=null},function(){this.isActive=!1;this.callback=null}),m=function(){},n=function(){l.put(this)},l=new d(function(){this.remove=n},function(){this.remove=m;this.destructor&&this.destructor();this.item.isActive=!1;this.destructor=this.item=null}),p=function(b,e){var f=l.get();f.item=b;f.destructor=e;return f},g=function(b){b.isActive&&(b.isActive=!1,b.callback());
b.isActive||k.put(b)};return function(){var b,e,f=function(){if(window.postMessage&&!window.importScripts){var a=!0,b=window.onmessage;window.onmessage=function(){a=!1};window.postMessage("","*");window.onmessage=b;return a}},c=[];if(h){var d=document.createElement("div");(new h(function(){for(;0<c.length;){var a=c.shift();g(a)}})).observe(d,{attributes:!0});e=function(a){c.push(a);d.setAttribute("queueStatus","1")}}else f()?(window.addEventListener("message",function(a){if(a.source==window&&"esri-nexttick-message"==
a.data)for(a.stopPropagation();c.length;)g(c.shift())},!0),e=function(a){c.push(a);window.postMessage("esri-nexttick-message","*")}):window.setImmediate?(b=window.clearImmediate,e=function(a){return window.setImmediate(g.bind(null,a))}):(b=window.clearTimeout,e=function(a){return window.setTimeout(g.bind(null,a),0)});return function(a){var c=k.get();c.callback=a;var d=e(c);return p(c,b&&function(){b(d)})}}()});