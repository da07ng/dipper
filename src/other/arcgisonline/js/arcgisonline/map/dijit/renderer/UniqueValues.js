// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/map/dijit/renderer/templates/UniqueValues.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" region\x3d"top" style\x3d"height:100%;"\x3e\r\n  \x3cdiv id\x3d"renderer-unique-main" class\x3d"panel panel_left" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"padding:7px;"\x3e\r\n    \x3cdiv id\x3d"rendererUniqueHeader" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"top"\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"display:inline;"\x3e\r\n        \x3ca href\x3d"JavaScript:void(0);" data-dojo-attach-point\x3d"_closeBtn" data-dojo-attach-event\x3d"onClick:_onCancel" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse"\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"rendererUniqueTitle" class\x3d"esriFloatLeading panel_title"\x3e\r\n        ${i18n.rendererPanelTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueLayer" class\x3d"esriFloatLeading panel_title" style\x3d"clear:both;"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; height:1px;"\x3e\x3c/div\x3e\x3c!--border-bottom: #333 thin solid;--\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" data-dojo-attach-point\x3d"_rendererUniqueTop" region\x3d"center" style\x3d"padding:10px 0;overflow-y:auto;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueField" class\x3d"esriFloatLeading strong" style\x3d"margin-top: 2px;"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueAttribute" class\x3d"esriFloatTrailing"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" data-dojo-attach-point\x3d"_rendererUniqueChangeButton" class\x3d"calcite tiny" data-dojo-attach-event\x3d"onClick:_onChangeField"\x3e\x3cspan\x3e${i18n.change}\x3c/span\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      --\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"overflow-y:auto;"\x3e\r\n      \x3cdiv style\x3d"margin-bottom: 3px;"\x3e\r\n        \x3cspan class\x3d"small clickToEditMsg"\x3e${i18n.clickToEdit}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"uniqueValuesGridDiv" style\x3d"clear:both;"\x3e\r\n        \x3cdiv id\x3d"uniqueValuesGrid"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"renderer-unique-bottom" class\x3d"panel panel_left" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"padding:7px; margin-top:5px; margin-bottom:-5px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueRotation" class\x3d"esriFloatLeading" style\x3d"margin-bottom:15px;"\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" data-dojo-attach-point\x3d"_rendererUniqueRotationTitle"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"_rendererUniqueRotationCheck" data-dojo-attach-event\x3d"onChange:_onChangeRotation" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox"/\x3e\r\n        ${i18n.rotationMsg}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueRotationContent" class\x3d"esriFloatLeading esriLeadingMargin107" style\x3d"clear:both;margin-top:3px;"\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both;margin-top:3px;"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"_rendererUniqueRotationAttribute" data-dojo-attach-event\x3d"onChange:_onChangeRotationAttribute" data-dojo-type\x3d"dijit.form.Select" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both;margin-top:5px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererUniqueRotationClockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:true" name\x3d"clockwise"/\x3e\r\n          ${i18n.clockwise}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both;margin-top:3px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererUniqueRotationCounterclockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:false" name\x3d"clockwise"/\x3e\r\n          ${i18n.counterclockwise}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueTransparency" style\x3d"clear:both;"\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading sectionTitle" \x3e\r\n        ${i18n.transparency}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both; padding: 10px;"\x3e\r\n        \x3cdiv id\x3d"rendererUniqueTransparencySlider"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueTransparency" style\x3d"clear:both;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueTransparencyTitle" class\x3d"esriFloatLeading sectionTitle" \x3e\r\n        ${i18n.transparency}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both; padding: 5px 10px 0 10px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueTransparencyOverallTitle" class\x3d"esriFloatLeading sectionSubTitle rendererUniqueHasAttributeTransparency" \x3e\r\n          ${i18n.overallTransparency}\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"rendererUniqueTransparencySliderDiv" class\x3d"esriLeadingPadding1" style\x3d"clear:both;"\x3e\r\n          \x3cdiv id\x3d"rendererUniqueTransparencySliderInnerDiv" class\x3d"esriFloatLeading" style\x3d"padding:6px 0 20px;"\x3e\r\n            \x3cdiv id\x3d"rendererUniqueTransparencySlider"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueTransparencyPerFeatureTitle" class\x3d"esriFloatLeading sectionSubTitle rendererUniqueHasAttributeTransparency" style\x3d"clear:both;"\x3e\r\n          ${i18n.perFeaturesTransparency}\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"clear:both;margin-top:3px;" class\x3d"esriItemLinks rendererUniqueHasAttributeTransparency esriLeadingPadding1"\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_rendererUniqueAttributeTransparencyLabel_part1" class\x3d"esriLeadingMargin025"\x3e\x3c/span\x3e\r\n          \x3cA data-dojo-attach-point\x3d"_rendererUniqueAttributeTransparencyLabel_part2" data-dojo-attach-event\x3d"onClick:_onClickAttributeTransparency" href\x3d"JavaScript:void(0);"\x3e\x3c/A\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_rendererUniqueAttributeTransparencyLabel_part3"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueScale" style\x3d"clear:both; padding-top:20px;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueScaleTitle"  class\x3d"esriFloatLeading sectionTitle"\x3e\r\n        ${i18n.visibleRange}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererUniqueScaleSuggest" data-dojo-attach-event\x3d"onClick:_onClickScaleSuggest" class\x3d"esriFloatTrailing suggestLabel"\x3e\r\n        \x26nbsp;${i18n.suggest}\x26nbsp;\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both; padding: 10px;"\x3e\r\n        \x3cdiv id\x3d"rendererUniqueScaleSlider"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererUniqueContentClose"\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite blue" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onDone"\x3e\x3cspan\x3e${i18n.ok}\x3c/span\x3e\x3c/button\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onCancel"\x3e\x3cspan\x3e${i18n.cancel}\x3c/span\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererUniqueFooterDiv" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px;"\x3e\r\n    \x3cdiv class\x3d"footer" id\x3d"rendererUniqueFooter" data-dojo-type\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("arcgisonline/map/dijit/renderer/UniqueValues","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/html dojo/Evented dojo/on dojo/string dojo/dom dojo/has dojo/topic dojo/query dojo/dom-style dojo/dom-construct dojo/dom-class dojox/html/entities dijit/TooltipDialog dijit/Tooltip dijit/Dialog dijit/registry esri/lang esri/symbols/jsonUtils esri/renderers/jsonUtils arcgisonline/map/dijit/renderer/_SymbolsMixin arcgisonline/map/dijit/renderer/_UniqueValuesMixin arcgisonline/map/dijit/renderer/_OpacityMixin arcgisonline/map/dijit/renderer/_RendererMixin arcgisonline/map/dijit/renderer/UniqueValuesGrid arcgisonline/map/dijit/renderer/AttributeTransparencyDlg arcgisonline/map/dijit/renderer/AttributeTransparency esri/tasks/GenerateRendererTask dojo/i18n!arcgisonline/nls/arcgisonline dijit/_Widget dijit/_Templated dojo/text!arcgisonline/map/dijit/renderer/templates/UniqueValues.html".split(" "),
function(m,b,g,e,k,J,K,q,f,u,L,v,c,w,x,r,M,h,y,s,t,N,O,z,A,B,C,D,E,F,P,l,G,H,I){m=m([G,H],{declaredClass:"arcgisonline.map.dijit.renderer.UniqueValues",basePath:require.toUrl("arcgisonline/map/dijit/renderer"),baseClass:"esriAGORendererUniqueValues",widgetsInTemplate:!0,templateString:I,_rConnects:[],tooltips:[],i18n:null,disableAllEvents:!0,container:null,subLayerId:null,mapLayer:null,layer:null,renderer:null,symbol:null,attributesStore:null,datePattern:null,uniqueValueRendererGrid:null,transparencySlider:null,
origGalleryRenderer:null,isMultiAttributesRenderer:!1,constructor:function(a,n){b.mixin(this,z);b.mixin(this,A);b.mixin(this,B);b.mixin(this,C);a&&(a.containerNode&&(this.container=a.containerNode),this.params=a.params,b.mixin(this,a.params),this._rConnects=[],this._rSubscriptions=[])},destroy:function(){this.destroyBusy();this.hideSymbolStyler();this.hideLegendPopup();this._destroyUniqueValueRendererGrid();this.transparencySlider&&this.transparencySlider.destroy();this.scaleSlider&&this.scaleSlider.destroy();
g.forEach(this.tooltips,function(a){a.destroy()});g.forEach(this._rConnects,e.disconnect);delete this._rConnects;g.forEach(this._rSubscriptions,e.unsubscribe);delete this._rSubscriptions;this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.clone(l.common);b.mixin(this.i18n,l.generalDlg);b.mixin(this.i18n,l.viewer.time);b.mixin(this.i18n,l.rendererCommon);b.mixin(this.i18n,l.rendererAttributeTransparencyDlg);b.mixin(this.i18n,l.rendererUniqueValuesPanel)},
postCreate:function(){this.container.addChild(dijit.byId("rendererUniqueValuesPanel"));this.loadConnections()},loadConnections:function(){this._rConnects.push(e.connect(dijit.byId("leftContentPanel"),"resize",this,"adjustHeight"));this._rSubscriptions.push(e.subscribe("onUngroupUniqueValues",b.hitch(this,"onUngroup")));this._rSubscriptions.push(e.subscribe("onReorderUniqueValues",b.hitch(this,"onReorder")));this._rSubscriptions.push(e.subscribe("onUpdateUniqueValue",b.hitch(this,"onUpdateInfo")));
this._rSubscriptions.push(e.subscribe("onUpdateUniqueValueDefault",b.hitch(this,"onUpdateDefault")));this._rSubscriptions.push(e.subscribe("onUpdateUniqueValueSymbols",b.hitch(this,"onUpdateSymbols")))},_onClose:function(a){a.preventDefault();this.hideBusy();delete this.mapLayer._scaleChanged;this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges();arcgisonline.map.leftPanel.openLeftTOCPanel()},_onDone:function(a){a.preventDefault();this.hideBusy();this.hideSymbolStyler();this.hideLegendPopup();
this.isMultiAttributesRenderer?leftPanel.switchToMultiAttributesRendererStack(this.renderer):leftPanel.switchToRendererStack(this.renderer)},_onCancel:function(a){a.preventDefault();this.hideBusy();delete this.mapLayer._scaleChanged;this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges(this.origGalleryRenderer);this.isMultiAttributesRenderer?leftPanel.switchToMultiAttributesRendererStack():leftPanel.switchToRendererStack()},_onChangeField:function(){leftPanel.switchToRendererStack()},
startup:function(){this.inherited(arguments);this._init()},_init:function(){this.origGalleryRenderer=this.buildCurrentRendererInfo();this.isMultiAttributesRenderer="uniquesize"===this.getRendererStyle(this.renderer);this._rendererUniqueLayer.innerHTML=r.encode(this.mapLayer.title.replace(/\_/g," "));-1!==this.subLayerId&&this.mapLayer.title!==this.layer.name&&(this._rendererUniqueLayer.innerHTML+=" - "+r.encode(this.layer.name.replace(/\_/g," ")));this._rendererUniqueField.innerHTML=this.attributeItem.alias;
this.scheme=null;this.hasDynamic?c.set(this._rendererUniqueTransparency,"display","none"):this.transparencySlider=this.createTransparencySlider("rendererUniqueTransparencySlider");this.createScaleSlider("rendererUniqueScaleSlider").then(dojo.hitch(this,function(a){this.scaleSlider=a}));if(this.hasNumericField&&("esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType)){this._rendererUniqueRotationAttribute.setStore(this.attributesStore,"",{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger') AND NOT name:'"+
this.layer.objectIdField+"'"});var a=this.renderer.rotationInfo||(this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.rotationInfo:null);this._rendererUniqueRotationCheck.set("checked",a?!0:!1);a&&a.field&&this.attributesStore.fetchItemByIdentity({identity:a.field,onItem:b.hitch(this,function(a){this._rendererUniqueRotationAttribute.set("value",a.alias)})});c.set(this._rendererUniqueRotation,"display","");c.set(this._rendererUniqueRotationContent,"display",a?"":"none")}else c.set(this._rendererUniqueRotation,
"display","none");if(!this.hasDynamic&&this.hasNumericField){var a=this.i18n.setFromField,n=a.indexOf("${field}");this._rendererUniqueAttributeTransparencyLabel_part1.innerHTML=a.substring(0,n);this._rendererUniqueAttributeTransparencyLabel_part3.innerHTML=a.substring(n+8);var d=this.getOpacityInfo();d?this.attributesStore.fetchItemByIdentity({identity:d.field,onItem:b.hitch(this,function(a){d.normalizationField?this.attributesStore.fetchItemByIdentity({identity:d.normalizationField,onItem:b.hitch(this,
function(b){this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=q.substitute(this.i18n.setFromFieldDividedBy,{field1:a.alias||a.name,field2:b.alias||b.name})})}):this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=a.alias||a.name})}):this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=this.i18n.attributeValues}else v(".rendererUniqueHasAttributeTransparency").forEach(function(a){c.set(a,"display","none")}),x.remove(f.byId("rendererUniqueTransparencySliderDiv"),"esriLeadingPadding1");
setTimeout(b.hitch(this,function(){this._buildUniqueValuesList()}),1);setTimeout(b.hitch(this,function(){this.disableAllEvents=!1}),1E3);this.createTooltips();this.showLegendPopup()},updateUIWithRenderer:function(){},createTooltips:function(){var a=function(a){return"\x3cdiv class\x3d'rendererTooltip'\x3e"+a+"\x3c/div\x3e"};this.tooltips.push(new h({connectId:this._rendererUniqueTransparencyTitle,label:a(this.i18n.transparencyTooltip)}));this.tooltips.push(new h({connectId:this._rendererUniqueTransparencyOverallTitle,
label:a(this.i18n.overallTransparencyTooltip)}));this.tooltips.push(new h({connectId:this._rendererUniqueTransparencyPerFeatureTitle,label:a(this.i18n.perFeaturesTransparencyTooltip)}));this.tooltips.push(new h({connectId:this._rendererUniqueScaleTitle,label:a(this.i18n.visibleRangeTooltip)}));this.tooltips.push(new h({connectId:this._rendererUniqueScaleSuggest,label:a(this.i18n.suggestTooltip)}));this.tooltips.push(new h({connectId:this._rendererUniqueRotationTitle,label:a(this.i18n.rotateTooltip)}));
this.tooltips.push(new h({connectId:this._rendererUniqueRotationAttribute.domNode,label:a(this.i18n.rotationFieldTooltip)}))},onUngroup:function(){var a=this.renderer.rotationInfo,b=this.renderer.visualVariables,d=this.ungroupUniqueValues();d.setRotationInfo(a);b&&b.length&&d.setVisualVariables(b);this.applyUniqueRenderer(d);this._updateUniqueValueRendererGrid(d)},onReorder:function(a,b){var d=this.renderer.rotationInfo,p=this.renderer.visualVariables,c=this.reorderUniqueValues(a,b);c.setRotationInfo(d);
p&&p.length&&c.setVisualVariables(p);this.applyUniqueRenderer(c);this._updateUniqueValueRendererGrid(c)},onUpdateInfo:function(a,c){if(!t.isDefined(a.value)&&this.renderer.defaultSymbol)this.renderer.defaultLabel=a.label;else if(t.isDefined(a.value)){var d=[];g.forEach(this.renderer.infos,function(a){d.push(b.clone(a))});g.forEach(d,function(a){this.renderer.removeValue(a.value)},this);g.forEach(d,function(b){a.value===b.value?this.renderer.addValue({value:b.value,symbol:a.symbol,label:a.label}):
this.renderer.addValue({value:b.value,symbol:c?this.setOutlineWidthOfSymbol(b.symbol,1):b.symbol,label:b.label})},this)}this.updateUniqueRenderer(c);this._updateUniqueValueRendererGrid(this.renderer)},onUpdateDefault:function(a,b){a?(this.renderer.defaultSymbol=a.symbol,this.renderer.defaultLabel=a.label):(delete this.renderer.defaultSymbol,delete this.renderer.defaultLabel);this.updateUniqueRenderer(b);this._updateUniqueValueRendererGrid(this.renderer)},onUpdateSymbols:function(a,c,d){this.scheme=
c||this.scheme;this.updateUniqueRenderer(d);this.getAllUniqueValues(a).then(b.hitch(this,function(){this.hideBusy();this._updateUniqueValueRendererGrid(this.renderer)}),b.hitch(this,function(a){}),b.hitch(this,function(a,b){this.showBusy("rendererUniqueValuesStack",b)},d))},_onChangeRotation:function(a){this.disableAllEvents||(c.set(this._rendererUniqueRotationContent,"display",a?"":"none"),this.adjustHeight(),this.updateRotationInfo())},_onChangeRotationAttribute:function(a){this.disableAllEvents||
this.updateRotationInfo()},_onChangeRotationDirection:function(){this.disableAllEvents||this.updateRotationInfo()},updateRotationInfo:function(){if(this._rendererUniqueRotationCheck.get("checked")){var a={field:this._rendererUniqueRotationAttribute.get("value"),type:this._rendererUniqueRotationClockwiseRadio.get("checked")?"geographic":"arithmetic"};this.renderer.setRotationInfo(a)}else this.renderer.setRotationInfo(null);this.applyUniqueRenderer(this.renderer)},_onClickScaleSuggest:function(){this.suggestScale(this.scaleSlider)},
_buildUniqueValuesList:function(){this.allUniqueValues?this._updateUniqueValueRendererGrid():this.getAllUniqueValues().then(b.hitch(this,function(){this.hideBusy();this._updateUniqueValueRendererGrid()}),b.hitch(this,function(a){}),b.hitch(this,function(a){this.showBusy("rendererUniqueValuesStack",a)}))},_updateUniqueValueRendererGrid:function(a){a=a||this.renderer;this.uniqueValueRendererGrid?this.uniqueValueRendererGrid.updateGrid(a):this.uniqueValueRendererGrid=new D({id:"uniqueValueGrid",renderer:a,
allUniqueValues:this.allUniqueValues,defaultInfo:this.defaultInfo,style:"position: relative; width: 100%; height:100%; overflow-y:hidden; overflow-x:hidden; padding:0;",params:this.params},"uniqueValuesGrid");this.adjustHeight()},_destroyUniqueValueRendererGrid:function(){this.uniqueValueRendererGrid&&(this.uniqueValueRendererGrid.destroy(),this.uniqueValueRendererGrid=null,f.byId("uniqueValuesGrid")||w.create("div",{id:"uniqueValuesGrid"},f.byId("uniqueValuesGridDiv")))},_onClickAttributeTransparency:function(){this.getVisualVariableByType("opacityInfo",
null,this.renderer.visualVariables);this.attributeTransparencyDlg=(new y({id:"attributeTransparencyDlg",style:"visibility:hidden;"})).placeAt(document.body);this.attributeTransparencyDlgContent=new E({id:"attributeTransparencyDlgContent",dialog:this.attributeTransparencyDlg,style:"width:100%;"});this.attributeTransparencyDlgHideHandler=e.connect(this.attributeTransparencyDlg,"onHide",b.hitch(this,function(){this.destroyAttributeTransparencyDlg()}));this.attributeTransparency=new F({attributesStore:this.attributesStore,
layer:this.layer,mapLayer:this.mapLayer},"attributeTransparencyDlgContent");this.attributeTransparencyDlg.set({title:this.i18n.attributeTransparencyDlgTitle,content:this.attributeTransparency});this.attributeTransparencyCommitHandler=e.subscribe("attribute-transparency-commit",b.hitch(this,function(a){this.hideAttributeTransparencyDlg();if(a.opacityInfo)this.replaceVisualVariable("opacityInfo",null,a.opacityInfo,this.renderer),this.renderer.authoringInfo=a.authoringInfo,this.applyUniqueRenderer(this.renderer),
this.attributesStore.fetchItemByIdentity({identity:a.opacityInfo.field,onItem:b.hitch(this,function(c){a.opacityInfo.normalizationField?this.attributesStore.fetchItemByIdentity({identity:a.opacityInfo.normalizationField,onItem:b.hitch(this,function(a){this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=q.substitute(this.i18n.setFromFieldDividedBy,{field1:c.alias||c.name,field2:a.alias||a.name})})}):this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=c.alias||c.name})});else{var c=
this.getVisualVariablesExceptType("opacityInfo",null,this.renderer.visualVariables);this.renderer.setVisualVariables(c);this.applyUniqueRenderer(this.renderer);this._rendererUniqueAttributeTransparencyLabel_part2.innerHTML=this.i18n.attributeValues}}));this.attributeTransparencyStopHandler=e.subscribe("attribute-transparency-stop",b.hitch(this,function(){this.hideAttributeTransparencyDlg()}));this.attributeTransparencyDlg.show().then(b.hitch(this,function(){c.set(this.attributeTransparencyDlg.domNode,
"top","95px");esriGeowConfig.isRightToLeft?c.set(this.attributeTransparencyDlg.domNode,"right",arcgisonline.map.leftPanel.leftPanelWidth+18+"px"):c.set(this.attributeTransparencyDlg.domNode,"left",arcgisonline.map.leftPanel.leftPanelWidth+18+"px");c.set(this.attributeTransparencyDlg.domNode,"visibility","visible")}))},hideAttributeTransparencyDlg:function(){this.attributeTransparencyDlg&&this.attributeTransparencyDlg.hide()},destroyAttributeTransparencyDlg:function(){this.attributeTransparencyDlgHideHandler&&
e.disconnect(this.attributeTransparencyDlgHideHandler);this.attributeTransparencyDlgHideHandler=null;this.attributeTransparencyCommitHandler&&this.attributeTransparencyCommitHandler.remove();this.attributeTransparencyCommitHandler=null;this.attributeTransparencyStopHandler&&this.attributeTransparencyStopHandler.remove();this.attributeTransparencyStopHandler=null;this.attributeTransparency&&this.attributeTransparency.destroy();this.attributeTransparency=null;this.attributeTransparencyDlgContent&&this.attributeTransparencyDlgContent.destroy();
this.attributeTransparencyDlgContent=null;this.attributeTransparencyDlg&&this.attributeTransparencyDlg.destroy();this.attributeTransparencyDlg=null;s.byId("attributeTransparencyDlg")&&s.byId("attributeTransparencyDlg").destroy()},adjustHeight:function(a){if(!("undefined"==typeof leftPanel||"rendererUniqueValuesStack"!=leftPanel.visibleStack)){a=k.coords(f.byId("leftContentStackContainer")).h;var b=k.coords(f.byId("rendererUniqueHeader")).h,d=k.coords(this._rendererUniqueTop.domNode).h,e=k.coords(f.byId("renderer-unique-bottom")).h,
h=k.coords(this._doneChangingButton.domNode).h-5,g=k.coords(f.byId("rendererUniqueFooter_links")).h+10;c.set(f.byId("rendererUniqueFooterDiv"),"height",g+"px");a=Math.max(a-b-d-e-h-g-23,40);c.set(f.byId("uniqueValuesGridDiv"),"height",a+"px");newWidth=k.coords(f.byId("leftContentStackContainer")).w-16;0<newWidth&&(c.set(this._rendererUniqueRotationAttribute.domNode,"width",newWidth-23+"px"),this.transparencySlider&&c.set(this.transparencySlider.domNode,"width",this.hasDynamic?newWidth-10:newWidth-
32+"px"),this.scaleSlider&&c.set(this.scaleSlider.domNode,"width",newWidth-10+"px"),c.set(f.byId("uniqueValuesGridDiv"),"width",newWidth+"px"),this.uniqueValueRendererGrid&&this.uniqueValueRendererGrid.resize(),this.hasNumericField&&(c.set(f.byId("rendererUniqueTransparencySliderInnerDiv"),"width",newWidth-40+"px"),c.set(f.byId("rendererUniqueTransparencySliderDiv"),"width",newWidth-18+"px")))}}});u("extend-esri")&&b.setObject("arcgisonline.map.dijit.renderer.UniqueValues",m);return m});