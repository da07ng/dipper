// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["../../core/LinkedList","../../core/declare"],function(f,g){return g([f],{classMetadata:{computed:{view:["gestureManager.view"]}},constructor:function(){this.on("add, remove",this._collectEvents.bind(this))},removers:null,_gestureManager:null,_gestureManagerSetter:function(a){this._addCustomGestures();return a},_gestures:null,_eventsGetter:function(){return this._gestures},_customGestures:null,_customGesturesSetter:function(a){this._addCustomGestures();return a},_viewGetter:function(){return this.get("gestureManager.view")},
_gestureConfig:null,_phaseDict:{1:"start",2:"move",4:"end",8:"cancel",START:1,MOVE:2,END:4,CANCEL:8},processEvent:function(a){var b=a&&(a.type||a.name||a.eventType);a.lastEvent=this._lastEvt;"hammer.input"===b&&(b="input");for(var c=this.first,d=!0;c;){var e=c[b];e&&(c=e.call(c,a),d=!1!==c&&!0!==a.defaultPrevented);c=d&&this.next()}this._lastEvt=a.eventType<this._phaseDict.END?a:null;d&&this.view.emit(b,a)},_collectEvents:function(){var a=this.first,b=[];for(this._gestureConfig=this._collectCustoms();a;)b=
b.concat(a.get("events")),a=this.next();return this._gestures=b},_collectCustoms:function(){for(var a=this.first,b=null;a;){if(a=a.customGestures)if(b)for(var c=Object.keys(a),d=c.length-1;0<=d;d--){var e=c[d];b[e]||(b[e]=a[e])}else b=a;a=this.next()}if(null!=b&&this.gestureManager){this._gestureConfig=b;var f=this.gestureManager;b.forEach(function(a){f.addGesture(a)})}return b},_addCustomGestures:function(){if(this._gestureManager&&this._customGestures){var a=this._gestureManager;this.customGestures.forEach(function(b){a.addGesture(b)})}}})});