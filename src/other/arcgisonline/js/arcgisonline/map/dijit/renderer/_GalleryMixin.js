// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/dijit/renderer/_GalleryMixin","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom dojo/on dojo/Deferred dojo/dom-style dojo/dom-class dojo/dom-construct dijit/registry dijit/TooltipDialog dijit/Tooltip dijit/form/Button esri/renderers/jsonUtils dijit/layout/BorderContainer arcgisonline/map/dijit/renderer/UniqueValues arcgisonline/map/dijit/renderer/Color arcgisonline/map/dijit/renderer/Size arcgisonline/map/dijit/renderer/Predominance".split(" "),function(w,d,q,
x,r,k,e,l,h,g,y,f,p,m,n,s,t,u,v){return{_onOptions:function(a){switch(a){case "simple":this._goToSimplePanel();break;case "type":case "unique":this._goToUniqueValuesPanel();break;case "color":this._goToColorPanel();break;case "classedColor":this._goToColorPanel();break;case "size":this._goToSizePanel();break;case "classedSize":this._goToSizePanel();break;case "heatMap":this._goToHeatMapPanel();break;case "predominance":this._goToPredominancePanel();break;case "predominancesize":this._goToPredominanceSizePanel();
break;case "colorsize":this._goToColorSizePanel();break;case "uniquesize":this._goToUniqueSizePanel();break;case "watercolor":break;case "ratio":this._goToRatioPanel();break;default:this._goToSimplePanel()}},_goToUniqueValuesPanel:function(){this.hideLegendPopup();var a=g.byId("rendererUniqueValuesStack");this.rendererUniqueValuesStack=a?a:new n({id:"rendererUniqueValuesStack",region:"top",style:"margin:0; padding:0;",splitter:!1,gutters:!1});(a=g.byId("rendererUniqueValuesPanel"))&&a.destroy();this.getAttributeItem(this.renderer.attributeField||
this.renderer.field).then(d.hitch(this,function(a){"rendererPanel"===this.id&&("showLocationOnly"===a.name?a=null:this._rendererAttribute.set("value",a.name),this.setTypeOptions(a),e.set(this._vars.unique.select,"display","none"),e.set(this._vars.unique.options,"display",""),this.attributeItem2||e.set(this._vars.unique.check,"display",""),l.add(this._vars.unique.title,"checked"));this.rendererUniqueValuesPanel=new s({id:"rendererUniqueValuesPanel",params:{portalPanel:this,subLayerId:this.subLayerId,
mapLayer:this.mapLayer,layer:this.layer,fLayer:this.fLayer,renderer:m.fromJson(this.renderer.toJson()),geometryType:this.geometryType,origRenderer:this.origRenderer,isHosted:this.isHosted,isFeatColl:this.isFeatColl,isCSV:this.isCSV,isSL:this.isSL,isOwnerOfHostedFS:this.isOwnerOfHostedFS,hasDynamic:this.hasDynamic,attributeItem:a,attributesStore:this.attributesStore,hasNumericField:this.hasNumericField,defaultInfo:this.defaultInfo,allUniqueValues:this.allUniqueValues},containerNode:this.rendererUniqueValuesStack,
region:"top"});leftPanel.sc.addChild(this.rendererUniqueValuesStack);leftPanel.sc.startup();leftPanel.sc.selectChild(this.rendererUniqueValuesStack);leftPanel.visibleStack="rendererUniqueValuesStack";g.byId("rendererUniqueValuesPanel").adjustHeight()}))},_goToColorPanel:function(){this.hideLegendPopup();var a=g.byId("rendererColorStack");this.rendererColorStack=a?a:new n({id:"rendererColorStack",region:"top",style:"margin:0; padding:0;",splitter:!1,gutters:!1});(a=g.byId("rendererColorPanel"))&&a.destroy();
var b=function(a,c){"rendererPanel"===this.id&&("showLocationOnly"===a.name?a=null:this._rendererAttribute.set("value",a.name),"color"===this.getRendererStyle(this.renderer)?(this.setTypeOptions(a),e.set(this._vars.color.select,"display","none"),e.set(this._vars.color.options,"display",""),this.attributeItem2||e.set(this._vars.color.check,"display",""),l.add(this._vars.color.title,"checked")):"ratio"===this.getRendererStyle(this.renderer)&&(this.setTypeOptions(a,c),e.set(this._vars.ratio.select,"display",
"none"),e.set(this._vars.ratio.options,"display",""),e.set(this._vars.ratio.check,"display",""),l.add(this._vars.ratio.title,"checked")));this.rendererColorPanel=new t({id:"rendererColorPanel",params:{portalPanel:this,subLayerId:this.subLayerId,mapLayer:this.mapLayer,layer:this.layer,fLayer:this.fLayer,renderer:m.fromJson(this.renderer.toJson()),geometryType:this.geometryType,origRenderer:this.origRenderer,isHosted:this.isHosted,isFeatColl:this.isFeatColl,isCSV:this.isCSV,isSL:this.isSL,isOwnerOfHostedFS:this.isOwnerOfHostedFS,
hasDynamic:this.hasDynamic,attributeItem:a,attributeItem2:c,attributesStore:this.attributesStore,hasNumericField:this.hasNumericField},containerNode:this.rendererColorStack,region:"top"});leftPanel.sc.addChild(this.rendererColorStack);leftPanel.sc.startup();leftPanel.sc.selectChild(this.rendererColorStack);leftPanel.visibleStack="rendererColorStack";g.byId("rendererColorPanel").adjustHeight()},c=this.getVisualVariableByType("colorInfo",null,this.renderer.visualVariables);this.getAttributeItem(c&&
c.field||this.renderer.attributeField||this.renderer.field).then(d.hitch(this,function(a){"ratio"===this.getRendererStyle(this.renderer)?this.getAttributeItem(c.normalizationField).then(d.hitch(this,function(c){d.hitch(this,b,a,c)()})):d.hitch(this,b,a)()}))},_goToSizePanel:function(){this.hideLegendPopup();var a=g.byId("rendererSizeStack");this.rendererSizeStack=a?a:new n({id:"rendererSizeStack",region:"top",style:"margin:0; padding:0;",splitter:!1,gutters:!1});(a=g.byId("rendererSizePanel"))&&a.destroy();
a=this.getVisualVariableByType("sizeInfo",null,this.renderer.visualVariables);this.getAttributeItem(a&&a.field||this.renderer.attributeField||this.renderer.field).then(d.hitch(this,function(a){"rendererPanel"===this.id&&("showLocationOnly"===a.name?a=null:this._rendererAttribute.set("value",a.name),this.setTypeOptions(a),e.set(this._vars.size.select,"display","none"),e.set(this._vars.size.options,"display",""),this.attributeItem2||e.set(this._vars.size.check,"display",""),l.add(this._vars.size.title,
"checked"));this.rendererSizePanel=new u({id:"rendererSizePanel",params:{portalPanel:this,subLayerId:this.subLayerId,mapLayer:this.mapLayer,layer:this.layer,fLayer:this.fLayer,renderer:m.fromJson(this.renderer.toJson()),geometryType:this.geometryType,origRenderer:this.origRenderer,isHosted:this.isHosted,isFeatColl:this.isFeatColl,isCSV:this.isCSV,isSL:this.isSL,isOwnerOfHostedFS:this.isOwnerOfHostedFS,hasDynamic:this.hasDynamic,attributeItem:a,attributesStore:this.attributesStore,hasNumericField:this.hasNumericField},
containerNode:this.rendererSizeStack,region:"top"});leftPanel.sc.addChild(this.rendererSizeStack);leftPanel.sc.startup();leftPanel.sc.selectChild(this.rendererSizeStack);leftPanel.visibleStack="rendererSizeStack";g.byId("rendererSizePanel").adjustHeight()}))},_goToPredominancePanel:function(){this.hideLegendPopup();var a=g.byId("rendererPredominanceStack");this.rendererPredominanceStack=a?a:new n({id:"rendererPredominanceStack",region:"top",style:"margin:0; padding:0;",splitter:!1,gutters:!1});(a=
g.byId("rendererPredominancePanel"))&&a.destroy();var a=this.renderer.infos,b=a[1].value;this.getAttributeItem(a[0].value).then(d.hitch(this,function(a){"rendererPanel"===this.id&&this._rendererAttribute.set("value",a.name);this.getAttributeItem(b).then(d.hitch(this,function(b){"rendererPanel"===this.id&&this._rendererAttribute2.set("value",b.name);this.setTypeOptions(a,b);e.set(this._vars.predominance.select,"display","none");e.set(this._vars.predominance.options,"display","");e.set(this._vars.predominance.check,
"display","");l.add(this._vars.predominance.title,"checked");this.rendererPredominancePanel=new v({id:"rendererPredominancePanel",params:{portalPanel:this,subLayerId:this.subLayerId,mapLayer:this.mapLayer,layer:this.layer,fLayer:this.fLayer,renderer:m.fromJson(this.renderer.toJson()),geometryType:this.geometryType,origRenderer:this.origRenderer,isHosted:this.isHosted,isFeatColl:this.isFeatColl,isCSV:this.isCSV,isSL:this.isSL,isOwnerOfHostedFS:this.isOwnerOfHostedFS,hasDynamic:this.hasDynamic,attributeItem:a,
attributeItem2:b,attributesStore:this.attributesStore,hasNumericField:this.hasNumericField},containerNode:this.rendererPredominanceStack,region:"top"});leftPanel.sc.addChild(this.rendererPredominanceStack);leftPanel.sc.startup();leftPanel.sc.selectChild(this.rendererPredominanceStack);leftPanel.visibleStack="rendererPredominanceStack";g.byId("rendererPredominancePanel").adjustHeight()}))}))},destroyTooltips:function(){q.forEach(this.tooltips,function(a){a.destroy()})},createTooltips:function(){var a=
function(a){return"\x3cdiv class\x3d'galleryTooltip'\x3e"+a+"\x3c/div\x3e"};this.tooltips.push(new f({connectId:this._rendererSwitchAttribute12,label:this.i18n.switchAttributes}));this.tooltips.push(new f({connectId:this._rendererRemoveAttribute2,label:this.i18n.removeAttribute}));this.tooltips.push(new f({connectId:this._vars.color.thumb,label:a(this.i18n.ColorTooltip)}));this.tooltips.push(new f({connectId:this._vars.size.thumb,label:a(this.i18n.SizeTooltip)}));this.tooltips.push(new f({connectId:this._vars.simple.thumb,
label:a(this.i18n.LocationTooltip)}));this.tooltips.push(new f({connectId:this._vars.unique.thumb,label:a(this.i18n.CategoricalTooltip)}));this.tooltips.push(new f({connectId:this._vars.heatMap.thumb,label:a(this.i18n.HeatMapTooltip)}));this.tooltips.push(new f({connectId:this._vars.predominance.thumb,label:a("")}));this.tooltips.push(new f({connectId:this._vars.predominancesize.thumb,label:a("")}));this.tooltips.push(new f({connectId:this._vars.colorsize.thumb,label:a(this.i18n.ColorSizeTooltip)}));
this.tooltips.push(new f({connectId:this._vars.uniquesize.thumb,label:a(this.i18n.TypeSizeTooltip)}));this.tooltips.push(new f({connectId:this._vars.watercolor.thumb,label:a("")}));this.tooltips.push(new f({connectId:this._vars.ratio.thumb,label:a(this.i18n.RatioTooltip)}))},buildList:function(a){this.destroyTooltips();a=a||this.getRendererStyle(this.renderer);this._vars=[];this._rendererTypes.innerHTML="";switch(a){case "simple":this.createListItem("simple");this.createListItem("color");this.createListItem("size");
this.createListItem("unique");this.createListItem("heatMap");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("ratio");break;case "type":this.createListItem("unique");this.createListItem("color");this.createListItem("size");this.createListItem("heatMap");this.createListItem("simple");this.createListItem("predominance");this.createListItem("predominancesize");
this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("ratio");break;case "color":case "classedColor":this.createListItem("color");this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("heatMap");this.createListItem("simple");this.attributeItem&&"esriFieldTypeString"!==this.attributeItem.type&&this.createListItem("unique");this.createListItem("predominance");
this.createListItem("predominancesize");this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("ratio");break;case "size":case "classedSize":this.createListItem("size");this.createListItem("color");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("heatMap");this.createListItem("simple");this.attributeItem&&"esriFieldTypeString"!==this.attributeItem.type&&this.createListItem("unique");
this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("ratio");break;case "heatMap":this.createListItem("heatMap");this.createListItem("color");this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("simple");(!this.attributeItem||"esriFieldTypeString"!==this.attributeItem.type)&&
this.createListItem("unique");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("ratio");break;case "predominance":this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("colorsize");this.createListItem("ratio");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("heatMap");this.createListItem("color");
this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("simple");(!this.attributeItem||"esriFieldTypeString"!==this.attributeItem.type)&&this.createListItem("unique");break;case "predominancesize":this.createListItem("predominancesize");this.createListItem("predominance");this.createListItem("colorsize");this.createListItem("ratio");this.createListItem("uniquesize");this.createListItem("watercolor");this.createListItem("heatMap");
this.createListItem("color");this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("simple");(!this.attributeItem||"esriFieldTypeString"!==this.attributeItem.type)&&this.createListItem("unique");break;case "colorsize":this.createListItem("colorsize");this.createListItem("ratio");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("uniquesize");this.createListItem("watercolor");
this.createListItem("color");this.createListItem("size");this.createListItem("simple");this.createListItem("unique");this.createListItem("heatMap");break;case "uniquesize":this.createListItem("uniquesize");this.createListItem("colorsize");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("unique");this.createListItem("size");this.createListItem("simple");this.createListItem("color");this.createListItem("heatMap");this.createListItem("watercolor");this.createListItem("ratio");
break;case "watercolor":this.createListItem("watercolor");this.createListItem("colorsize");this.createListItem("ratio");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("uniquesize");this.createListItem("heatMap");this.createListItem("color");this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("simple");(!this.attributeItem||"esriFieldTypeString"!==this.attributeItem.type)&&
this.createListItem("unique");break;case "ratio":this.createListItem("ratio");this.createListItem("colorsize");this.createListItem("uniquesize");this.createListItem("predominance");this.createListItem("predominancesize");this.createListItem("watercolor");this.createListItem("heatMap");this.createListItem("color");this.createListItem("size");this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique");this.createListItem("simple");(!this.attributeItem||"esriFieldTypeString"!==
this.attributeItem.type)&&this.createListItem("unique");break;default:this.createListItem("color"),this.createListItem("size"),this.attributeItem&&"esriFieldTypeString"===this.attributeItem.type&&this.createListItem("unique"),this.createListItem("heatMap"),this.createListItem("simple"),this.attributeItem&&"esriFieldTypeString"!==this.attributeItem.type&&this.createListItem("unique"),this.createListItem("predominance"),this.createListItem("predominancesize"),this.createListItem("colorsize"),this.createListItem("uniquesize"),
this.createListItem("watercolor"),this.createListItem("ratio")}this.adjustHeight();this.createTooltips()},createListItem:function(a){var b=this._rendererTypes;this._vars[a]={};this._vars[a].root=h.create("div",{"class":"rendererType"},b);this._vars[a].field=h.create("div",{"class":"rendererTypeField",style:"display: none;"},this._vars[a].root);b=h.create("div",{"class":"rendererTypeThumbOuter"},this._vars[a].root);this._vars[a].thumb=h.create("div",{"class":"renderer_"+a+" rendererTypeThumb",style:"cursor: pointer;"},
b);r(this._vars[a].thumb,"click",d.hitch(this,function(a,c){c.preventDefault();"none"===e.get(this._vars[a].options,"display")?d.hitch(this,"_select_"+a)():d.hitch(this,"_onOptions")(a)},a));this._vars[a].title=h.create("div",{"class":"rendererTitle"},this._vars[a].thumb);var c;switch(a){case "simple":c=this.i18n.location;break;case "unique":c="rendererMultiAttributesPanel"===this.id?this.i18n.typesShort:this.i18n.types;break;case "color":c="rendererMultiAttributesPanel"===this.id?this.i18n.colorShort:
this.i18n.color;break;case "size":c="rendererMultiAttributesPanel"===this.id?this.i18n.sizeShort:this.i18n.size;break;case "heatMap":c=this.i18n.heatMap;break;case "density":c=this.i18n.dotDensity;break;case "cluster":c=this.i18n.pointClusters;break;case "predominance":c="Predominant Category";break;case "predominancesize":c="Predominant Category \x26 Size";break;case "colorsize":c=this.i18n.colorSize;break;case "uniquesize":c=this.i18n.typeSize;break;case "watercolor":c="Blended Style";break;case "ratio":c=
this.i18n.ratio}h.create("div",{"class":"rendererTitleText",innerHTML:c},this._vars[a].title);this._vars[a].check=h.create("div",{"class":"rendererCheck"},this._vars[a].title);this._vars[a].select=h.create("div",{"class":"rendererSelect"},this._vars[a].thumb);new p({label:this.i18n.select,"class":"calcite blue"},h.create("div",{},this._vars[a].select));this._vars[a].options=h.create("div",{"class":"rendererOptions"},this._vars[a].thumb);this._vars[a].optionsButton=new p({label:this.i18n.options,"class":"calcite blue"},
h.create("div",{},this._vars[a].options))},getAttributeItem:function(a){var b=new k;a=a||this._rendererAttribute.get("value");this.attributesStore.fetchItemByIdentity({identity:a,onItem:d.hitch(this,function(a){a=this.clean(a);b.resolve(a)})});return b.promise},getAttributeItem2:function(a){var b=new k;a=a||this._rendererAttribute2.get("value");this.attributesStore.fetchItemByIdentity({identity:a,onItem:d.hitch(this,function(a){a=this.clean(a);b.resolve(a)})});return b.promise},getAttributeItem3:function(a){var b=
new k;a=a||this._rendererAttribute3.get("value");this.attributesStore.fetchItemByIdentity({identity:a,onItem:d.hitch(this,function(a){a=this.clean(a);b.resolve(a)})});return b.promise},getAttributeItem4:function(a){var b=new k;a=a||this._rendererAttribute4.get("value");this.attributesStore.fetchItemByIdentity({identity:a,onItem:d.hitch(this,function(a){a=this.clean(a);b.resolve(a)})});return b.promise},getAttributeItem5:function(a){var b=new k;a=a||this._rendererAttribute5.get("value");this.attributesStore.fetchItemByIdentity({identity:a,
onItem:d.hitch(this,function(a){a=this.clean(a);b.resolve(a)})});return b.promise},clean:function(a){var b={};b.name=this.attributesStore.getValue(a,"name");b.alias=this.attributesStore.getValue(a,"alias");b.type=this.attributesStore.getValue(a,"type");b.hasCodedValues=this.attributesStore.getValue(a,"hasCodedValues");b.codedValues=this.attributesStore.getValue(a,"codedValues");return b},isTypeNumber:function(a){return"esriFieldTypeInteger"==a.type||"esriFieldTypeDouble"==a.type||"esriFieldTypeSingle"==
a.type||"esriFieldTypeSmallInteger"==a.type?!0:!1},isTypeString:function(a){return"esriFieldTypeString"==a.type?!0:!1},isTypeDate:function(a){return"esriFieldTypeDate"==a.type?!0:!1}}});