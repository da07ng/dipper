// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("esri/core/declare dojo/dom-class dojo/dom-construct dojo/on dojo/query dojo/fx dojox/fx/style esri/core/domUtils dojo/i18n!./../../nls/viewer".split(" "),function(n,g,e,p,h,m,f,k,q){function r(a){var b=[];b.push(f.addClass(a,"fade",{duration:50}));a=h("#viewerContainer .MenuContainer .MenuTabsContainer .tab.lastOne");0<a.length&&b.push(f.removeClass(a[0],"lastOne",{duration:50}));a=h("#viewerContainer .MenuContainer .MenuTabsContainer .tab.onlyExpand");for(var d=0;d<a.length;d++)b.push(f.removeClass(a[d],
"hideTab",{delay:20*d,duration:50}));m.combine(b).play();this._expanded=!0}function s(a){for(var b=h("#viewerContainer .MenuContainer .MenuTabsContainer .tab.onlyExpand"),d=[],c=b.length-1;0<=c;c--)d.push(f.addClass(b[c],"hideTab",{delay:20*(b.length-c-1)}));c=h("#viewerContainer .MenuContainer .MenuTabsContainer .tab");4<=c.length&&d.push(f.addClass(c[3],"lastOne",{delay:20*b.length}));d.push(f.removeClass(a,"fade",{delay:20*b.length}));m.combine(d).play();this._expanded=!1}return n(null,{name:"MenuContainer",
baseClass:"MenuContainer",_expanded:!1,_timeOutSinceExpanded:null,_collapseMenuTimeout:4E3,constructor:function(a){a=e.create("div",{"class":"MenuContainer vertical"},a);this.tabsContainer=e.create("div",{"class":"MenuTabsContainer"},a);this.panesContainer=e.create("div",{"class":"MenuPanesContainer"},a);this.tabs=[];this.panes=[];this._active=-1},add:function(a){var b=e.create("div",{"class":"tab inactive "+(a.show?"":" hide"),title:a.title});e.create("div",{"class":a.id+"_icon"},b);if(4<this.tabs.length&&
!this.expandTab){g.add(this.tabs[this.tabs.length-2],"lastOne");var d=e.create("div",{"class":"tab inactive expand",title:q.menu.moreTools});e.create("div",{"class":"expand_icon"},d);var c=this.tabs.pop();this.tabsContainer.insertBefore(d,this.tabsContainer.lastElementChild);this.tabs.push(d);this.tabs.push(c);this.expandTab=d;var c=e.create("div",{"class":"pane"},this.panesContainer),f=this.panes.pop();this.panes.push(c);this.panes.push(f);k.hide(c);d.onclick=function(){r(d);this._expanded=!0;this._timeOutSinceExpanded=
setTimeout(function(){this._collapseMenu()}.bind(this),2*this._collapseMenuTimeout)}.bind(this);g.add(this.tabs[5],"onlyExpand hideTab")}this.tabsContainer.appendChild(b);this.tabs.push(b);5<this.tabs.length&&g.add(b,"onlyExpand hideTab");b.onclick=function(){var c=this.tabs.indexOf(b)!==this._active;this.setActive(this.tabs.indexOf(b));if(a.onSelectMethod&&c)a.onSelectMethod()}.bind(this,a);var c=e.create("div",{"class":"pane"},this.panesContainer),f=e.create("div",{"class":"paneHeader"},c),h=e.create("div",
{"class":"paneContent"},c);e.create("div",{"class":"paneFooter"},c);var l=e.create("div",{"class":"closeButton"},f);p(l,"click",function(){this.setActive(this._active);if(a.onSelectMethod)a.onSelectMethod()}.bind(this));l="paneTitle";a.hideTitle&&(l+=" hide");e.create("div",{"class":l,innerHTML:a.title},f);this.panes.push(c);k.hide(c);return h},setActive:function(a){for(var b=0;b<this.panes.length;b++)k.hide(this.panes[b]),g.replace(this.tabs[b],"inactive","active");0>a||(a==this._active?(k.hide(this.panes[a]),
g.replace(this.tabs[a],"inactive","active"),this._active=-1,this._expanded&&(clearTimeout(this._timeOutSinceExpanded),this._timeOutSinceExpanded=setTimeout(function(){this._collapseMenu()}.bind(this),this._collapseMenuTimeout))):(4>a&&this._expanded&&(clearTimeout(this._timeOutSinceExpanded),this._timeOutSinceExpanded=setTimeout(function(){this._collapseMenu()}.bind(this),this._collapseMenuTimeout)),4<=a&&clearTimeout(this._timeOutSinceExpanded),k.show(this.panes[a]),g.replace(this.tabs[a],"active",
"inactive"),this._active=a))},_collapseMenu:function(){s(this.expandTab);this._expanded=!1}})});