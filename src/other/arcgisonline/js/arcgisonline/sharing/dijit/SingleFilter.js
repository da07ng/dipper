// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/SingleFilter",["dijit","dojo","dojox"],function(c,b,n){b.provide("arcgisonline.sharing.dijit.SingleFilter");b.declare("arcgisonline.sharing.dijit.SingleFilter",[c._Widget,c._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"singleFilter" id\x3d"${id}.singleFilter"\x3e\r\n  \x3cdiv\x3e\r\n    \x3ctable id\x3d"${id}.exprTable" class\x3d"rowTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column1"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column2"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column3"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column4"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column5"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column6"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column7"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3ca id\x3d"${id}.deleteExpression" href\x3d"JavaScript:void(0);" style\x3d"margin:0 5px;display:none;" class\x3d"esriAGOFilterRemoveIcon" title\x3d"${i18n.deleteExpression}"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"8"\x3e\r\n            \x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"interactiveFilter"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3cinput dojoAttachPoint\x3d"interactiveCheck" type\x3d"checkbox" class\x3d"promptCheckBox" title\x3d"${i18n.promptMsg}"/\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3clabel class\x3d"labels" for\x3d"promptCheckBox"\x3e\r\n                              \x26nbsp;\x26nbsp;${i18n.askForValues}\r\n                            \x3c/label\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cspan dojoAttachPoint\x3d"interactiveArrow" style\x3d"color:#cbcbcb;cursor:pointer;" class\x3d"showHidePromptDiv"\x3e\x26nbsp;\x26#9660;\x3c/span\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr dojoAttachPoint\x3d"interactiveSpace" style\x3d"display:none"\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.prompt}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"promptText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.hint}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"hintText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"promptDiv" style\x3d"display:none;padding:10px 0px;"\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtPrompt"\x3e\r\n      ${i18n.prompt}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtPrompt" type\x3d"text"/\x3e\r\n    \x3cbr/\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtHint"\x3e\r\n      ${i18n.hint}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtHint" type\x3d"text" /\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
valueHandlers:[],onFieldChangeEnabled:!0,onOperatorChangeEnabled:!0,onPromptChangeHandler:null,onHintChangeHandler:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;this.i18n=b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").FilterDlg)},parseExpressionTemplate:function(){var a=function(a,g){b.byId(g).className="attributeValueContainer";"field_dropdown"==a?b.byId(g).innerHTML=c:"operator_dropdown"==
a?b.byId(g).innerHTML=e:"values_input"==a?b.byId(g).innerHTML=k+l:console.error("problem with expressionTemplate from localization file")},c='\x3cselect id\x3d"'+this.id+'.fieldsList" class\x3d"attributeField" dojotype\x3d"dijit.form.FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"true"\x3e\x3c/select\x3e',e='\x3cselect id\x3d"'+this.id+'.operatorList" class\x3d"operator" dojotype\x3d"dijit.form.FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\x3c/select\x3e',k='\x3cdiv id\x3d"'+
this.id+'.attributeValueContainer"\x3e\x3c/div\x3e',l='\x3cdiv class\x3d"attributeValueOptions"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e  \x3ctbody\x3e    \x3ctr\x3e      \x3ctd nowrap\x3d"nowrap"\x3e        \x3cinput id\x3d"'+this.id+'.radioValue" class\x3d"radioValue attributeValueRadio" checked\x3d"checked" name\x3d"'+this.id+'.inputOption" dojotype\x3d"dijit.form.RadioButton" title\x3d"'+this.i18n.valueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.valueTooltip+
'"\x3e'+this.i18n.value+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioFields" class\x3d"radioFields attributeValueRadio" name\x3d"'+this.id+'.inputOption" dojotype\x3d"dijit.form.RadioButton" title\x3d"'+this.i18n.fieldTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.fieldTooltip+'"\x3e'+this.i18n.field+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd id\x3d"'+this.id+
'.radioUniqueColumn" nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioUnique" class\x3d"radioUnique attributeValueRadio" name\x3d"'+this.id+'.inputOption" dojotype\x3d"dijit.form.RadioButton" title\x3d"'+this.i18n.uniqueValueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.uniqueValueTooltip+'"\x3e'+this.i18n.uniqueValues+"        \x3c/label\x3e      \x3c/td\x3e    \x3c/tr\x3e  \x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",h=this.i18n.expressionTemplate,
g=h.indexOf("${"),f=h.substring(0,g).trim();b.byId(this.id+".column1").innerHTML=f.length?"\x3cdiv class\x3d'attributeText'\x3e"+f+"\x3c/div\x3e":"";var f=h.indexOf("}",g+1),m=h.substring(g+2,f);a(m,this.id+".column2");g=h.indexOf("${",g+1);f=h.substring(f+1,g).trim();b.byId(this.id+".column3").innerHTML=f.length?"\x3cdiv class\x3d'attributeText'\x3e"+f+"\x3c/div\x3e":"";f=h.indexOf("}",g+1);m=h.substring(g+2,f);a(m,this.id+".column4");g=h.indexOf("${",g+1);f=h.substring(f+1,g).trim();b.byId(this.id+
".column5").innerHTML=f.length?"\x3cdiv class\x3d'attributeText'\x3e"+f+"\x3c/div\x3e":"";f=h.indexOf("}",g+1);m=h.substring(g+2,f);a(m,this.id+".column6");f=h.substring(f+1,h.length).trim();b.byId(this.id+".column7").innerHTML=f.length?"\x3cdiv class\x3d'attributeText'\x3e"+f+"\x3c/div\x3e":""},postCreate:function(){this.inherited(arguments);this.parseExpressionTemplate();b.parser.parse(b.byId(this.id+".exprTable")).then(b.hitch(this,function(a){b.connect(this.getFieldsList(),"onChange",this,"onChangeField");
b.connect(this.getOperatorList(),"onChange",this,"onChangeOperator");b.connect(c.byId(this.id+".radioValue"),"onClick",this,"showValueInput");b.connect(c.byId(this.id+".radioFields"),"onClick",this,"showFields");b.connect(c.byId(this.id+".radioUnique"),"onClick",this,"showUniqueList");10.1>this.version&&b.style(b.byId(this.id+".radioUniqueColumn"),"display","none");b.connect(b.byId(this.id+".deleteExpression"),"onclick",this,"onClickDeleteExpression");b.connect(this.interactiveCheck,"onclick",this,
"onInteractiveClick");b.connect(this.interactiveArrow,"onclick",this,"onClickShowHideInteractive");this.enableInteractiveHandlers()}))},constructor:function(a,b){this.id=a.id||"";this.owner=a.owner;this.version=a.version;this.part=a.part;!1===a.enableEvents&&(this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!1)},destroy:function(){this.clearAttributeValueDijits();this.inherited(arguments)},toJson:function(){var a=null;this.isInteractiveChecked()&&(a={prompt:this.promptText.attr("value"),hint:this.hintText.attr("value")});
return{fieldObj:this.getField(),operator:this.getOperator(),valueObj:this.getValue(),interactiveObj:a}},showDeleteIcon:function(){b.style(b.byId(this.id+".deleteExpression"),"display","block")},hideDeleteIcon:function(){b.style(b.byId(this.id+".deleteExpression"),"display","none")},getFieldsList:function(){return c.byId(this.id+".fieldsList")},getOperatorList:function(){return c.byId(this.id+".operatorList")},getValueFieldsList:function(){return c.byId(this.id+".valueFields")},getAttrValContNode:function(){return b.byId(this.id+
".attributeValueContainer")},getField:function(){var a=this.getFieldsList();return{name:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),shortType:a.store.getValue(a.item,"shortType"),type:a.store.getValue(a.item,"type")}},getOperator:function(){var a=this.getOperatorList();return!a.item?"":a.store.getValue(a.item,"name")},getValue:function(){return{}},isInteractiveChecked:function(){return this.interactiveCheck.checked},setInteractiveSection:function(a,c,e){this.disableInteractiveHandlers();
this.interactiveCheck.checked=a;this.promptText.attr("value",c);this.hintText.attr("value",e);b.style(this.interactiveSpace,"display","block");this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;";this.enableInteractiveHandlers()},enableInteractiveHandlers:function(){this.onPromptChangeHandler=b.connect(this.promptText,"onChange",this,"onChangeInteractive");this.onHintchangeHandler=b.connect(this.hintText,"onChange",this,"onChangeInteractive")},disableInteractiveHandlers:function(){b.disconnect(this.onPromptChangeHandler);
b.disconnect(this.onHintChangeHandler)},fillFieldsList:function(a){var b=this.getFieldsList();b.set("labelAttr","label");b.set("searchAttr","label");b.set("store",a);b.set("value",0)},fillOperatorList:function(a,c,e){var k=this.getOperatorList();k.set("labelAttr","name");k.set("searchAttr","name");k.set("query",e?e:{});k.set("store",a);if(c){var l=!1;for(e=0;20>e&&!(a.fetchItemByIdentity({identity:e,onItem:b.hitch(this,function(a){a&&a.name[0]==c&&(k.set("value",a.id[0]),l=!0)})}),l);e++);}else k.set("value",
0)},createValueString:function(a){var d=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(d);if(a){var d=new c.form.FilteringSelect({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},b.create("div",{},d)),e=this.buildCodedValuesStore(a);d.set("store",e);d.set("value",0)}else d=new c.form.TextBox({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0},b.create("div",{},d));this.valueHandlers.push(b.connect(d,"onChange",
this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var b=c.byId(this.id+".value"),d=!0;a?b.item?b=b.item.code[0]:(b="",d=!1):d=b=b.get("value");return{value:b,isValid:d}}},createValueDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(a);a=new c.form.DateTextBox({id:this.id+".value","class":"attributeValue",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},b.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(b.connect(a,
"onChange",this,"onValueChange"));this.getValue=function(){var a=c.byId(this.id+".value").get("value");return{value:a,isValid:esri.isDefined(a)}}},createValueNumber:function(a){var d=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(d);if(a){var d=new c.form.FilteringSelect({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},b.create("div",{},d)),e=this.buildCodedValuesStore(a);d.set("store",e);d.set("value",0)}else d=new c.form.NumberTextBox({id:this.id+".value",
"class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},b.create("div",{},d));this.valueHandlers.push(b.connect(d,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var b=c.byId(this.id+".value"),d=!0;a?b.item?b=b.item.code[0]:(b="",d=!1):(b=b.get("value"),d=esri.isDefined(b)&&!isNaN(b));return{value:b,isValid:d}}},createValueOID:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();
b.empty(a);a=new c.form.NumberTextBox({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0"}},b.create("div",{},a));this.valueHandlers.push(b.connect(a,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var a=c.byId(this.id+".value").get("value"),b=esri.isDefined(a)&&!isNaN(a);return{value:a,isValid:b}}},createValueBetweenDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();
b.empty(a);var d=new c.form.DateTextBox({id:this.id+".value1","class":"attributeValue1",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},b.create("div",{},a));b.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new c.form.DateTextBox({id:this.id+".value2","class":"attributeValue2",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},b.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(b.connect(d,"onChange",
this,"onValueChange"));this.valueHandlers.push(b.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=c.byId(this.id+".value1").get("value"),b=c.byId(this.id+".value2").get("value");return{value1:a,value2:b,isValid:esri.isDefined(a)&&esri.isDefined(b)}}},createValueBetweenNumber:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(a);var d=new c.form.NumberTextBox({id:this.id+".value1","class":"attributeValue1",required:!0,placeHolder:"",intermediateChanges:!0,
constraints:{pattern:"#####0.##########"}},b.create("div",{},a));b.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new c.form.NumberTextBox({id:this.id+".value2","class":"attributeValue2",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},b.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(b.connect(d,"onChange",this,"onValueChange"));this.valueHandlers.push(b.connect(a,"onChange",this,"onValueChange"));
this.getValue=function(){var a=c.byId(this.id+".value1").get("value"),b=c.byId(this.id+".value2").get("value");return{value1:a,value2:b,isValid:esri.isDefined(a)&&esri.isDefined(b)&&!isNaN(a)&&!isNaN(b)&&a<=b}}},createValueBetweenOID:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(a);var d=new c.form.NumberTextBox({id:this.id+".value1","class":"attributeValue1",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0"}},b.create("div",{},a));
b.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new c.form.NumberTextBox({id:this.id+".value2","class":"attributeValue2",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0"}},b.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(b.connect(d,"onChange",this,"onValueChange"));this.valueHandlers.push(b.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=c.byId(this.id+".value1").get("value"),
b=c.byId(this.id+".value2").get("value");return{value1:a,value2:b,isValid:esri.isDefined(a)&&esri.isDefined(b)&&!isNaN(a)&&!isNaN(b)&&a<=b}}},createValueInTheLastDate:function(){},createValueIsBlank:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(a);a.innerHTML="\x3cinput id\x3d'"+this.id+".value' class\x3d'attributeValue' type\x3d'text' disabled\x3d'true'/\x3e";this.checkDefaultOption();this.getValue=function(){return{value:null,isValid:!0}}},createValueFields:function(a,
d,e){var k=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(k);var l=new c.form.FilteringSelect({id:this.id+".valueFields","class":"attributeValue",maxHeight:150,labelAttr:"label",searchAttr:"label",store:a,query:d},b.create("div",{},k));if(e)for(var h=!1,k=0;100>k&&!(a.fetchItemByIdentity({identity:k,onItem:b.hitch(this,function(a){a&&(a.shortType[0]==d.shortType&&a.name[0]!==e)&&(l.set("value",a.id),h=!0)})}),h);k++);this.valueHandlers.push(b.connect(l,"onChange",this,"onValueChange"));
this.getValue=function(){var a=c.byId(this.id+".valueFields");return{value:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),type:"field",isValid:!0}}},createValueUnique:function(a){var d=this.getAttrValContNode();this.clearAttributeValueDijits();b.empty(d);a=new c.form.FilteringSelect({id:this.id+".valueUnique","class":"attributeValue",maxHeight:150,store:a},b.create("div",{},d));a.set("value",0);this.valueHandlers.push(b.connect(a,"onChange",this,"onValueChange"));this.getValue=
function(){var a=c.byId(this.id+".valueUnique");return{value:a.store.getValue(a.item,"value"),isValid:!0}}},setValue:function(a,b){if(b)for(var e=0;e<b.length;e++){if(a==b[e].code){c.byId(this.id+".value").set("value",e);break}}else if("date"==this.part.fieldObj.shortType)c.byId(this.id+".value").set("value",new Date(a));else{if("number"==this.part.fieldObj.shortType||"oid"==this.part.fieldObj.shortType)a=Number(a);c.byId(this.id+".value").set("value",a)}},setValue1:function(a){if("date"==this.part.fieldObj.shortType)a=
new Date(a);else if("number"==this.part.fieldObj.shortType||"oid"==this.part.fieldObj.shortType)a=Number(a);c.byId(this.id+".value1").set("value",a)},setValue2:function(a){if("date"==this.part.fieldObj.shortType)a=new Date(a);else if("number"==this.part.fieldObj.shortType||"oid"==this.part.fieldObj.shortType)a=Number(a);c.byId(this.id+".value2").set("value",a)},setValueFieldById:function(a){this.getValueFieldsList().set("value",a)},enableOnFieldChange:function(){this.onFieldChangeEnabled=!0},enableOnOperatorChange:function(){this.onOperatorChangeEnabled=
!0},onChangeField:function(a){if(this.onFieldChangeEnabled)this.owner.onChangeField(this.getFieldsList(),this)},onChangeOperator:function(a){if(this.onOperatorChangeEnabled)this.owner.onChangeOperator(this.getOperatorList(),this)},onClickDeleteExpression:function(a){this.owner.deleteExpression(this)},onInteractiveClick:function(a){this.isInteractiveChecked()?(b.style(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(b.style(this.interactiveSpace,"display",
"none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;");b.publish("onExprChange",this)},onClickShowHideInteractive:function(a){this.interactiveCheck.disabled||("none"==b.style(this.interactiveSpace,"display")?(b.style(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(b.style(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;"))},onChangeInteractive:function(){b.publish("onExprChange",this)},defaultToValueOrUnique:function(){this.owner.defaultToValueOrUnique(c.byId(this.id),
this)},showValueInput:function(a){this.owner.showValueInput(c.byNode(a.target),this)},showFields:function(a){this.owner.showFields(c.byNode(a.target),this)},showUniqueList:function(a){this.owner.showUniqueList(c.byNode(a.target),this)},onValueChange:function(){this.onValueChangeHandler&&clearTimeout(this.onValueChangeHandler);this.onValueChangeHandler=setTimeout(b.hitch(this,function(){this.onValueChangeHandler=null;b.publish("onExprChange",this)}),800)},buildCodedValuesStore:function(a){a=b.map(a,
function(a,b){return{name:a.name,code:a.code,id:b}});return new b.data.ItemFileWriteStore({data:{label:"name",identifier:"id",items:a}})},clearAttributeValueDijits:function(){b.forEach(this.valueHandlers,b.hitch(this,function(a){b.disconnect(a)}));this.valueHandlers=[];c.byId(this.id+".value")?c.byId(this.id+".value").destroy():b.byId(this.id+".value")&&this.getAttrValContNode().removeChild(b.byId(this.id+".value"));c.byId(this.id+".value1")?c.byId(this.id+".value1").destroy():b.byId(this.id+".value1")&&
this.getAttrValContNode().removeChild(b.byId(this.id+".value1"));c.byId(this.id+".value2")?c.byId(this.id+".value2").destroy():b.byId(this.id+".value2")&&this.getAttrValContNode().removeChild(b.byId(this.id+".value2"));c.byId(this.id+".valueFields")&&c.byId(this.id+".valueFields").destroy();c.byId(this.id+".valueUnique")&&c.byId(this.id+".valueUnique").destroy()},checkDefaultOption:function(){b.query(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){c.byNode(a).set("checked",
-1<a.className.indexOf("radioValue"))})},disableOptions:function(){b.query(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){c.byNode(a).set("disabled",!0)})},enableOptions:function(){b.query(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){c.byNode(a).set("disabled",!1)})},checkFieldOption:function(){c.byId(this.id+".radioFields").set("checked",!0)},disableFieldOption:function(){c.byId(this.id+".radioFields").set("disabled",!0)},disableUniqueOption:function(){c.byId(this.id+
".radioUnique").set("disabled",!0)},enableInteractiveCheck:function(){this.interactiveCheck.disabled=!1},disableInteractiveCheck:function(){this.interactiveCheck.checked=!1;this.interactiveCheck.disabled=!0}})});