// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/dijit/StructuredPopupWidget",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/blue,dojox/charting/action2d/Tooltip,dojox/charting/action2d/Highlight,dojox/charting/widget/Legend"],function(g,a,e){a.provide("arcgisonline.map.dijit.StructuredPopupWidget");a.require("dijit._Widget");a.require("dijit._Templated");a.require("dojox.charting.Chart2D");a.require("dojox.charting.themes.PlotKit.blue");a.require("dojox.charting.action2d.Tooltip");
a.require("dojox.charting.action2d.Highlight");a.require("dojox.charting.widget.Legend");a.declare("arcgisonline.map.dijit.StructuredPopupWidget",[g._Widget,g._Templated],{templateString:"\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d'_descriptionNode'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_pictureNode'\x3e\x3c/div\x3e\x3c/div\x3e",startup:function(){this.inherited(arguments);var d=this.definition,c=this.graphic.attributes,b=esri.substitute(c,d.description);this._descriptionNode.innerHTML=b;c.IMAGE_URL&&
c.IMAGE_LINK_URL?(b="\x3cA href\x3d'"+esri.substitute(c,d.pictureLink)+"' target\x3d'_blank'\x3e\x3cimg src\x3d'"+esri.substitute(c,d.picture)+"' /\x3e\x3c/A\x3e",a.place(b,this._pictureNode,"only")):c.IMAGE_URL?(b="\x3cimg src\x3d'"+esri.substitute(c,d.picture)+"' /\x3e",a.place(b,this._pictureNode,"only")):c.IMAGE_LINK_URL&&(b="\x3cA href\x3d'"+esri.substitute(c,d.pictureLink)+"' target\x3d'_blank'\x3e"+esri.substitute(c,d.pictureLink)+"\x3c/A\x3e",a.place(b,this._pictureNode,"only"));if(d.chart){var f=
d.chart,b=this._chart=new e.charting.Chart2D(this._chartNode);b.setTheme(e.charting.themes.PlotKit.blue);b.addPlot("default",{type:f.type,font:"14t",fontColor:"white"});b.addSeries("Series A",a.map(f.fields,function(b,a){return{y:c[b],text:esri.substitute(c,f.labels[a]),tooltip:c[b],color:f.colors[a]}}));this._actions=[new e.charting.action2d.Tooltip(b),new e.charting.action2d.Highlight(b)];b.render();this._legend=new e.charting.widget.Legend({chart:b},this._legendNode)}c.VIDEO_URL&&(d="\x3ciframe frameborder\x3d'0' width\x3d'250' height\x3d'212' src\x3d'"+
esri.substitute(c,d.video)+"'\x3e\x3c/iframe\x3e",this._mediaNode.innerHTML=d)},destroy:function(){a.forEach([this._chart,this._legend].concat(this._actions),function(a){a.destroy()});this.definition=this.graphic=this._chart=this._legend=this._actions=null;this.inherited(arguments)}})});