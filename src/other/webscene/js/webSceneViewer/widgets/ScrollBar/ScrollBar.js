// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
require({cache:{"url:webSceneViewer/widgets/ScrollBar/templates/ScrollBar.html":'\x3cdiv data-dojo-attach-point\x3d"scrollBarContainer" class\x3d"scrollBarContainer"\x3e\r\n    \x3cdiv class\x3d"scrollBarSpace" data-dojo-attach-point\x3d"scrollBarSpace" \x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"scrollBarHandleContainer" class\x3d"scrollBarHandleContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"scrollBarHandleHitArea" class\x3d"scrollBarHandleHitArea" \x3e\r\n            \x3cdiv class\x3d"scrollBarHandle" \x3e\r\n                \x3cdiv style\x3d"display: none;" class\x3d"handleT"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("esri/core/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ScrollBar.html dojo/_base/lang esri/core/domUtils dojo/on dojo/has dojo/dom-class".split(" "),function(m,n,p,q,c,k,e,f,g){var l=[],r=function(a,d,b){l.push(e(a,b,function(a){a.preventDefault();a.stopPropagation();var c=document.createEvent("MouseEvent");c.initMouseEvent(b,a.bubbles,a.cancelable,window,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);
a.wheelDelta&&(c.wheelDelta=a.wheelDelta);d.dispatchEvent(c)}))},b=function(a){a.stopPropagation();var d=a.changedTouches[0],c="";if(!(1<a.touches.length)){switch(a.type){case "touchstart":c="mousedown";break;case "touchmove":c="mousemove";break;case "touchend":var c="mouseup",b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);d.target.dispatchEvent(b);a.preventDefault();break;default:return}b=document.createEvent("MouseEvent");
b.initMouseEvent(c,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);d.target.dispatchEvent(b);a.preventDefault()}},h=function(a){a&&a.stopPropagation();return!1};return m([n,p],{templateString:q,scrollTarget:void 0,view:void 0,_onHandles:void 0,constructor:function(a,d){this._onHandles=[]},destroy:function(){this._onHandles.forEach(function(a){a.remove()});l.forEach(function(a){a.remove()});this._viewPortResize&&this._viewPortResize.remove();this.scrollTarget.removeEventListener("click",
h,!0);this.scrollTarget.removeEventListener("mousedown",c.hitch(this,function(){this._stopScrollTargetDragging(event)}),!0);this.scrollTarget.removeEventListener("touchmove",b,!0);this.scrollTarget.removeEventListener("touchstart",b,!0);this.scrollTarget.removeEventListener("touchend",b,!0);this.scrollTarget.removeEventListener("touchcancel",b,!0)},postCreate:function(){this.PAGE_Y=(this.vertical=!1,"pageX");this.DIMENSION=this.vertical?"height":"width";this.OFFSET_DIMENSION=this.vertical?"offsetHeight":
"offsetWidth";this.TOP=this.vertical?"top":"left";g.contains(dojo.doc.body.parentNode,"esriRtl")&&(this.TOP=this.vertical?"top":"right");this.wheelDir=this.vertical?-1:1;this.min=this.mousePosRelativeToHandle=this.state=this.relativeSliderPosition=0;this.max=1;this.originMousePos=this.easing=0;this._updatePosition(this.relativeSliderPosition,!0);this._viewPortResize=this.view.on("resize",c.hitch(this,function(){this._updatePosition(this.relativeSliderPosition,!0);this.updateWidth()}));this._setupEventHandlers()},
_startScrollTargetDragging:function(a){this.scrollTarget.removeEventListener("click",h,!0);document.addEventListener("mouseup",c.hitch(this,function(a){this._stopScrollTargetDragging(a)}),!0);a=a||window.event;a.preventDefault();this.originMousePos=a.clientX;this.startMouseCoords={x:0,y:0};this.startMouseCoords.x=a.clientX;this.startMouseCoords.y=a.clientY;document.onmousemove=c.hitch(this,function(a){this.scrollTarget.removeEventListener("click",h,!0);if(!(3>Math.abs(Math.abs(a.clientX)-Math.abs(this.startMouseCoords.x))&&
1>Math.abs(Math.abs(a.clientY)-Math.abs(this.startMouseCoords.y)))){this.scrollTarget.addEventListener("click",h,!0);a=a||window.event;a.preventDefault();a=a.clientX;var b=this.originMousePos-a;g.contains(dojo.doc.body.parentNode,"esriRtl")&&(b=-b);this.originMousePos=a;this._updatePosition(this._calcRelativePosition(this._calcPosition(this.relativeSliderPosition)+b));return!1}})},_stopScrollTargetDragging:function(a){document.onmousemove=function(){};a.preventDefault()},_setupEventHandlers:function(){var a=
e(this.scrollBarSpace,"click",c.hitch(this,function(a){a.preventDefault();this.updateWidth();this._updatePosition((a[this.PAGE_Y]-this.scrollBarContainer.getBoundingClientRect()[this.TOP])/this._getDimension());a.stopPropagation()}));this._onHandles.push(a);a=e(this.scrollTarget,void 0===f("mozilla")?"mousewheel":"DOMMouseScroll",c.hitch(this,function(a){a.preventDefault();a.stopPropagation();a=void 0===f("mozilla")?a.wheelDelta:-60*a.detail;this._updatePosition((this._getAbsoluteDimension()-a/(12*
this.wheelDir))/this._getTrackDimension())}));this._onHandles.push(a);a=e(this.scrollBarHandleHitArea,"mousedown",c.hitch(this,function(a){a.preventDefault();a.stopPropagation();1==a.which&&(this.state=1,g.contains(dojo.doc.body.parentNode,"esriRtl")?this.mousePosRelativeToHandle=Math.min(this.scrollBarHandleHitArea[this.OFFSET_DIMENSION],Math.max(0,-a[this.PAGE_Y]+this.scrollBarHandleHitArea.getClientRects()[0][this.TOP])):this.mousePosRelativeToHandle=Math.min(this.scrollBarHandleHitArea[this.OFFSET_DIMENSION],
Math.max(0,a[this.PAGE_Y]-this.scrollBarHandleHitArea.getClientRects()[0][this.TOP])))}));this._onHandles.push(a);a=e(document,"mousemove",c.hitch(this,function(a){1==this.state&&(a.preventDefault(),g.contains(dojo.doc.body.parentNode,"esriRtl")?this._updatePosition((this.scrollBarContainer.getBoundingClientRect()[this.TOP]-a[this.PAGE_Y]-this.mousePosRelativeToHandle)/this._getTrackDimension()):this._updatePosition((a[this.PAGE_Y]-this.scrollBarContainer.getBoundingClientRect()[this.TOP]-this.mousePosRelativeToHandle)/
this._getTrackDimension()))}));this._onHandles.push(a);a=e(document,"mouseup",c.hitch(this,function(a){1==this.state&&(a.preventDefault(),this.state=0)}));this._onHandles.push(a);r(this.scrollBarContainer,this.scrollTarget,void 0===f("mozilla")?"mousewheel":"DOMMouseScroll")},_calcRelativePosition:function(a){return a/(this.scrollTarget.scrollWidth-this.scrollTarget.offsetWidth)},_calcPosition:function(a){return a*(this.scrollTarget.scrollWidth-this.scrollTarget.offsetWidth)},_getDimension:function(){return this.scrollBarContainer[this.OFFSET_DIMENSION]},
_getTrackDimension:function(){return this.scrollBarHandleContainer[this.OFFSET_DIMENSION]},_getAbsoluteDimension:function(){return Math.round(this._getTrackDimension()*this.relativeSliderPosition)},_updatePosition:function(a,b,c){this.relativeSliderPosition=Math.min(Math.max(a,0.0010),0.999);this.scrollBarHandleHitArea.style[this.TOP]=this._getAbsoluteDimension()-this.scrollBarHandleHitArea[this.OFFSET_DIMENSION]/2+"px";b||this._scrollTo(this.relativeSliderPosition)},_scrollTo:function(a){var b=this.scrollTarget.scrollWidth-
this.scrollTarget.offsetWidth;a=Math.ceil(a*b);a=a<=b?a:b;a=0<a?a:0;if(g.contains(dojo.doc.body.parentNode,"esriRtl"))if(f("mozilla"))a=-a;else if(f("chrome")||f("safari"))a=b-a;this.scrollTarget.scrollLeft=a},setRange:function(a,b){this.min=a;this.max=b},get:function(){return this.relativeSliderPosition},set:function(a,b){0===this.state&&this.updatePos(a,b)},setInRange:function(a){this.set((a-this.min)/(this.max-this.min))},enableScrollTargetDrag:function(){this.scrollTarget&&(this.scrollTarget.addEventListener("mousedown",
c.hitch(this,function(a){this._startScrollTargetDragging(a)}),!0),this.scrollTarget.addEventListener("touchmove",b,!0),this.scrollTarget.addEventListener("touchstart",b,!0),this.scrollTarget.addEventListener("touchend",b,!0),this.scrollTarget.addEventListener("touchcancel",b,!0))},disableScrollTargetDrag:function(){this.scrollTarget&&(this.scrollTarget.removeEventListener("mousedown",c.hitch(this,function(a){this._stopScrollTargetDragging(a)}),!0),this.scrollTarget.removeEventListener("touchmove",
b,!0),this.scrollTarget.removeEventListener("touchstart",b,!0),this.scrollTarget.removeEventListener("touchend",b,!0),this.scrollTarget.removeEventListener("touchcancel",b,!0))},resize:function(){this.scrollBarHandleContainer.style[this.DIMENSION]=this._getDimension()+"px";this.scrollBarSpace.style[this.DIMENSION]=this._getDimension()+"px";this.scrollBarHandleHitArea.getClientRects()[0]&&(this.scrollBarHandleContainer.style[this.DIMENSION]=this._getDimension()-this.scrollBarHandleHitArea.getClientRects()[0][this.DIMENSION]+
"px");this._updatePosition(this.relativeSliderPosition)},updateWidth:function(){var a=0.2*this.scrollTarget.offsetWidth,a=Math.max(Math.min(this.scrollTarget.offsetWidth-(this.scrollTarget.scrollWidth-this.scrollTarget.offsetWidth),0.5*this.scrollTarget.offsetWidth),a);this.scrollBarHandleHitArea.style.width=a+"px";16>this.scrollTarget.scrollWidth-this.scrollTarget.offsetWidth?k.hide(this.scrollBarHandleHitArea):k.show(this.scrollBarHandleHitArea);this.resize()}})});