// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("esri/core/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/dom-class esri/layers/GroupLayer ./WebSceneEditorPaneBase webSceneViewer/widgets/LayerWidget/LayerWidgetEditable dojo/i18n!../nls/editor".split(" "),function(k,l,d,e,g,h,m,n,f){return k(m,{_onHandles:void 0,constructor:function(a){l.mixin(this,{id:"contents",title:f.panes.contents,actionButton:{title:f.buttons.saveScene,tooltip:f.buttons.saveTooltip,action:"_saveWebScene"},backButton:!1});this._onHandles=[];this._updateContent();
this._editor=a},destroy:function(){this._layerWidget.destroy();delete this._layerWidget;this._onHandles.forEach(function(a){a.remove()})},_saveWebScene:function(){this._editor.saveWebScene()},_updateContent:function(){var a=this,b=d.create("div",{className:"contentsPane"});this._layerWidget&&this._layerWidget.destroy();if(null==this.editor)d.place("\x3cp\x3enot initialized\x3c/p\x3e",b);else{var c=d.create("button",{"class":"blueButton"},b);c.textContent="+ "+f.panes.addLayers;this._onHandles.push(e(c,
"click",function(){a.emit("navigate",{to:"addLayer",from:this})}));this._layerWidget=new n({view:this.editor.view,editor:this.editor});this._layerWidget.placeAt(b);this._onHandles.push(e(this._layerWidget,"edit-layer",function(a){this.emit("navigate",{to:"editLayer",from:this,params:{layer:a.layer,parentGroup:a.parentGroup}})}.bind(this)));this._onHandles.push(e(this._layerWidget,"edit-group",function(a){this.emit("navigate",{to:"editLayer",from:this,params:{layer:a.group}})}.bind(this)));this.addLayerGroupBtn=
d.create("span",{"class":"CreateGroupLink"},b);this.addLayerGroupBtn.textContent=f.buttons.addGroup;this._onHandles.push(e(this.addLayerGroupBtn,"click",function(){var b=new h({title:f.contentsPane.newGroup+" "+(a.getNoOfGroupsInScene()+1)});b._websceneEditorProperties={editedFlags:{renderer:!1,labelingInfo:!1,elevationInfo:!1,listMode:!1,visibilityMode:!1,popupInfo:!1}};a.editor.map.add(b,0);this._onHandles.push(e.once(a.editor.map,"layer-add",function(c){a._layerWidget.focusAddedGroupTitle(b)}.bind(a)));
a.editor.setWebSceneChanged()}.bind(this)));this.toggleCreateLayerGroupLink(1<this.getNumberOfValidLayers());this._onHandles.push(e(this.editor.map,"layer-add",function(){this.toggleCreateLayerGroupLink(0<this.getNumberOfValidLayers())}.bind(this)));this._onHandles.push(e(this.editor.map,"layer-remove",function(){this.toggleCreateLayerGroupLink(0<this.getNumberOfValidLayers())}.bind(this)))}this._addToContentNode(b)},getNumberOfValidLayers:function(){return this.editor.map.layers.reduce(function(a,
b,c){return"SilentContentLayer"===b.id||"__basemapErrorFallbackLayer__"===b.id?a:a+1},0)},getNoOfGroupsInScene:function(){return this.editor.map.layers.reduce(function(a,b,c){return"SilentContentLayer"===b.id||"__basemapErrorFallbackLayer__"===b.id?a:a+(b instanceof h?1:0)},0)},toggleCreateLayerGroupLink:function(a){a?g.remove(this.addLayerGroupBtn,"hide"):g.add(this.addLayerGroupBtn,"hide")},_createBasemapTocEntry:function(a,b){var c=d.create("div",{"class":"LayerItem editable"});d.create("span",
{},c).textContent="Basemap ("+a.title+")";var f=d.create("div",{className:"tocEntryEditButton"},c);this._onHandles.push(e(f,"click",function(){this.emit("navigate",{to:"editBasemap",from:this})}.bind(this)));b&&d.place(c,b);return c}})});