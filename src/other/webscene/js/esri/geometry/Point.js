// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["../core/declare","dojo/_base/lang","dojo/_base/kernel","./SpatialReference","./Geometry"],function(s,t,k,u,v){function m(a,b,d,c){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=q;c||(c=[0,0]);c[0]=a*q*n;c[1]=n/2*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function p(a,b,d,c){a=a/n*r;c||(c=[0,0]);c[0]=d?a:a-360*Math.floor((a+180)/360);d=c;b=w/2-2*Math.atan(Math.exp(-1*b/n));d[1]=b*r;return c}var n=6378137,w=3.141592653589793,r=57.29577951308232,q=0.017453292519943,l=[0,0],g=s(v,
{declaredClass:"esri.geometry.Point",classMetadata:{computed:{cache:["x","y","z","m"],hasM:["m"],hasZ:["z"],longitude:["x"],latitude:["y"]}},normalizeCtorArgs:function(a,b,d,c,f){var e;Array.isArray(a)?(e=a,f=b,a=e[0],b=e[1],d=e[2],c=e[3]):t.isObject(a)?(e=a,a=null!=e.x?e.x:e.longitude,b=null!=e.y?e.y:e.latitude,d=null!=e.z?e.z:e.altitude,c=e.m,(f=e.spatialReference)&&"esri.SpatialReference"!==f.declaredClass&&(f=new u(f)),!e.declaredClass&&(f&&f.isWebMercator()&&null!=e.longitude&&null!=e.latitude)&&
(b=m(e.longitude,e.latitude,!1,l),a=b[0],b=b[1])):this.isSR(d)?(f=d,d=null):this.isSR(c)&&(f=c,c=null);a={x:a,y:b};null!=f&&(a.spatialReference=f);null!=d&&(a.z=d);null!=c&&(a.m=c);return a},_latitudeGetter:function(){var a=this.spatialReference;if(a){if(a.isWebMercator())return p(this.x,this.y,!1,l)[1];if(4326===a.wkid)return this.y}return null},_latitudeSetter:function(a){var b=this.spatialReference;b&&(b.isWebMercator()?this.y=m(this.x,a,!1,l)[1]:4326===b.wkid&&(this.y=a))},_longitudeGetter:function(){var a=
this.spatialReference;if(a){if(a.isWebMercator())return p(this.x,this.y,!1,l)[0];if(4326===a.wkid)return this.x}return null},_longitudeSetter:function(a){var b=this.spatialReference;b&&(b.isWebMercator()?this.x=m(a,this.y,!1,l)[0]:4326===b.wkid&&(this.x=a))},_hasMGetter:function(){return void 0!==this.m},_hasMSetter:function(a,b){return a!==b?(this.m=a?0:void 0,a):b},_hasZGetter:function(){return void 0!==this.z},_hasZSetter:function(a,b){return a!==b?(this.z=a?0:void 0,a):b},x:0,y:0,z:void 0,m:void 0,
type:"point",clone:function(){var a=new g;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a},copy:function(a){g.copy(a,this);return this},equals:function(a){if(!a)return!1;var b=this.x,d=this.y,c=this.z,f=this.m,e=this.spatialReference,g=a.x,h=a.y,k=a.z,l=a.m;a=a.spatialReference;if(!e.equals(a))if(e.isWebMercator()&&4326===a.wkid)h=m(g,h),g=h[0],h=h[1],a=e;else if(4326===e.wkid&&a.isWebMercator())h=p(g,h),g=h[0],h=h[1],a=e;else return!1;return b===g&&d===
h&&c===k&&f===l&&e.wkid===a.wkid},offset:function(a,b,d){var c=this.clone();c.x+=a;c.y+=b;null!=d&&c.hasZ&&(c.z+=d);return c},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var d=b._getInfo();if(d){var b=d.valid[0],c=d.valid[1],d=2*c;a>c?(b=Math.ceil(Math.abs(a-c)/d),a-=b*d):a<b&&(b=Math.ceil(Math.abs(a-b)/d),a+=b*d)}}b=this.clone();b.x=a;return b},distance:function(a){return g.distance(this,a)},toArray:function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:
a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,a={x:this.x,y:this.y,spatialReference:a&&a.toJSON()};this.hasZ&&(a.z=this.z);this.hasM&&(a.m=this.m);return a},setX:function(a){k.deprecated(this.declaredClass+".setX","Use .x \x3d value instead","4.0");this.x=a;return this},setY:function(a){k.deprecated(this.declaredClass+".setY","Use .y \x3d value instead","4.0");this.y=a;return this},setLongitude:function(a){k.deprecated(this.declaredClass+
".setLongitude","Use .longitude \x3d value; instead","4.0");this.longitude=a;return this},setLatitude:function(a){k.deprecated(this.declaredClass+".setLatitude","Use .latitude \x3d value; instead","4.0");this.latitude=a;return this},getLongitude:function(){k.deprecated(this.declaredClass+".getLongitude","Use .longitude instead","4.0");return this.longitude},getLatitude:function(){k.deprecated(this.declaredClass+".getLatitude","Use .latitude instead","4.0");return this.latitude},update:function(a,
b,d){k.deprecated(this.declaredClass+".update","Use .x/y/z \x3d value instead","4.0");a={x:a,y:b};null!=d&&(a.z=d);return this.set(a)}});g.lngLatToXY=m;g.xyToLngLat=p;g.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};g.distance=function(a,b){var d=a.x-b.x,c=a.y-b.y,f=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(d*d+c*c+f*f)};return g});