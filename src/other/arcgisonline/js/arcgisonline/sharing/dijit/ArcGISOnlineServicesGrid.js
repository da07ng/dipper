// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/ArcGISOnlineServicesGrid",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dojox/rpc/Service,dojo/rpc/JsonService,dijit/Dialog,dijit/TooltipDialog,dojox/grid/DataGrid,arcgisonline/sharing/geow/TooltipQueryReadStore,arcgisonline/sharing/util,arcgisonline/sharing/dijit/DropDownButton"],function(h,a,n){a.provide("arcgisonline.sharing.dijit.ArcGISOnlineServicesGrid");a.require("dijit._Widget");a.require("dojox.rpc.Service");a.require("dojo.rpc.JsonService");a.require("dijit.Dialog");
a.require("dijit.TooltipDialog");a.require("dojox.grid.DataGrid");a.require("arcgisonline.sharing.geow.TooltipQueryReadStore");a.require("arcgisonline.sharing.util");a.require("arcgisonline.sharing.dijit.DropDownButton");a.declare("arcgisonline.sharing.dijit.ArcGISOnlineServicesGrid",[h._Widget],{i18n:null,id:"",startupSearchString:"",searchGrid:null,ts:null,lastQueryString:"",lastWithinMapAreaCheck:!0,lastMapExtent:null,lastResultCount:-1,cleared:!1,gridId:"arcGISOnlineServicesNode",queryAdd:"",
executeQueryOnStartup:!1,lastOpenDropDown:null,gridScrollBox:null,scrollTopPos:0,queryFilter:' (type:"Map Service" OR type:"Image Service" OR type:"Feature Service" OR type:"Stream Service" OR type:"Vector Tile Service" OR type:"WMS" OR type:"KML" OR type:"Feature Collection") -type:"Feature Collection Template" ',queryFilterNoVTLSupport:' (type:"Map Service" OR type:"Image Service" OR type:"Feature Service" OR type:"Stream Service" OR type:"WMS" OR type:"KML" OR type:"Feature Collection") -type:"Feature Collection Template" ',
queryFilterIE9:' (type:"Map Service" OR type:"Image Service" OR type:"Feature Service" OR type:"WMS" OR type:"KML" OR type:"Feature Collection") -type:"Feature Collection Template" ',listExpanded:!1,layerAddedHandler:null,layerAddedNoRemoveHandler:null,layerAddFailedHandler:null,layerAddedIds:[],_eventConnections:[],_util:arcgisonline.sharing.util,constructor:function(d,e){null!=d&&(d.id&&(this.id=d.id),d.w&&(this.width=d.w),d.search&&(this.startupSearchString=d.search?d.search:""),d.gridId&&(this.gridId=
d.gridId),d.queryAdd&&(this.queryAdd=d.queryAdd),d.executeQueryOnStartup&&(this.executeQueryOnStartup=d.executeQueryOnStartup),9>=a.isIE&&(this.queryFilter=this.queryFilterIE9))},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").arcGISOnlineServices)},postCreate:function(){arcgisonline.map.vectorTile.checkSupport().then(a.hitch(this,function(a){a||(this.queryFilter=
this.queryFilterNoVTLSupport)}));this.createGrid()},newSearch:function(d,e){this.layerAddedHandler&&a.unsubscribe(this.layerAddedHandler);this.layerAddFailedHandler&&a.unsubscribe(this.layerAddFailedHandler);this.lastQueryString=d;this.lastWithinMapAreaCheck=e;this.lastMapExtent=null;var c=d.replace(/^[\t\n\r\s]*|[\t\n\r\s]*$/g,"");"*"==c&&(c="");-1<c.indexOf(" ")&&(c="("+c+")");0<c.length&&(c+=" AND ");this.ts.clearAllItemsByIdentity();if(e){var b=function(a,b){this.lastMapExtent=f;null==this.searchGrid.store?
this.searchGrid.setStore(this.ts,{q:c+this.queryFilter+this.queryAdd,bbox:arcgisonline.map.main.extentToString(a[0]),sortField:"numviews",sortOrder:"desc"}):this.searchGrid.setQuery({q:c+this.queryFilter+this.queryAdd,bbox:arcgisonline.map.main.extentToString(a[0]),sortField:"numviews",sortOrder:"desc"})},g=function(){null==this.searchGrid.store?this.searchGrid.setStore(this.ts,{q:c+this.queryFilter+this.queryAdd,sortField:"numviews",sortOrder:"desc"}):this.searchGrid.setQuery({q:c+this.queryFilter+
this.queryAdd,sortField:"numviews",sortOrder:"desc"})},f=arcgisonline.map.main.map.extent;f.spatialReference._isWrappable()?esri.geometry.normalizeCentralMeridian([f],null,a.hitch(this,function(d){if(d[0].rings){var c=(new esri.geometry.Polygon(f.spatialReference)).addRing(d[0].rings[0]).getExtent();d=(new esri.geometry.Polygon(f.spatialReference)).addRing(d[0].rings[1]).getExtent();f=c.getWidth()>d.getWidth()?c:d}else f=d[0];arcgisonline.map.main.projectExtent(f,new esri.SpatialReference({wkid:4326}),
a.hitch(this,b),a.hitch(this,g))})):arcgisonline.map.main.projectExtent(f,new esri.SpatialReference({wkid:4326}),a.hitch(this,b),a.hitch(this,g))}else null==this.searchGrid.store?this.searchGrid.setStore(this.ts,{q:c+this.queryFilter+this.queryAdd,sortField:"numviews",sortOrder:"desc"}):this.searchGrid.setQuery({q:c+this.queryFilter+this.queryAdd,sortField:"numviews",sortOrder:"desc"})},createGrid:function(){var d=[[{get:arcgisonline.sharing.dijit.ArcGISOnlineServicesGrid.formatters.title,formatter:arcgisonline.sharing.util.fix,
width:"auto"},{get:arcgisonline.sharing.dijit.ArcGISOnlineServicesGrid.formatters.blank,formatter:arcgisonline.sharing.util.fix,width:"10px"}]];this.ts=new arcgisonline.sharing.geow.TooltipQueryReadStore;this.ts.url=esriGeowConfig.restBaseUrl+"search";this.ts.gridId=this.id;var e=function(c,b){this.searchGrid=new n.grid.DataGrid({query:c,store:b,structure:d,rowsPerPage:20,noDataMessage:"\x3cspan style\x3d'font-size:1em;color:#7a7979;'\x3e"+this.i18n.error.noMatch+"\x3c/span\x3e",loadingMessage:'\x3cdiv class\x3d"throb-loading-grid"\x3e\x3cdiv class\x3d"throb-loading-grid-text"\x3e'+
this.i18n.searching+"\x3c/div\x3e\x3c/div\x3e",region:"center",id:this.gridId,selectionMode:"none",style:"width:"+this.width+"px"});container.addChild(this.searchGrid);this.searchGrid.startup();this.executeQueryOnStartup?this.searchGrid.showMessage('\x3cdiv class\x3d"throb-loading-grid"\x3e\x3cdiv class\x3d"throb-loading-grid-text"\x3e'+this.i18n.searching+"\x3c/div\x3e\x3c/div\x3e"):this.searchGrid.showMessage("\x3cspan style\x3d'font-size:1em;color:#7a7979;'\x3e"+this.i18n.clickToStart+"\x3c/span\x3e");
a.style(this.searchGrid.messagesNode,"height","100%");this.gridScrollBox=this.searchGrid.views.views[0].scrollboxNode;a.connect(this.searchGrid,"onRowClick",a.hitch(this,"onRowClick"));if(esri.isTouchEnabled){var e=esri.setScrollable(this.gridScrollBox);this._eventConnections.push(e[0],e[1])}};this.executeQueryOnStartup?arcgisonline.map.main.projectExtent(arcgisonline.map.main.map.extent,new esri.SpatialReference({wkid:4326}),a.hitch(this,function(d,b){var g={q:this.startupSearchString+" "+this.queryFilter+
this.queryAdd,bbox:arcgisonline.map.main.extentToString(d[0]),sortField:"numviews",sortOrder:"desc"};a.hitch(this,e,g,this.ts)()}),a.hitch(this,function(){a.hitch(this,e,{q:this.startupSearchString+" "+this.queryFilter+this.queryAdd,sortField:"numviews",sortOrder:"desc"},this.ts)()})):a.hitch(this,e,null,null)()},destroy:function(){this.inherited(arguments);this.disconnectHandlers();a.forEach(this._eventConnections,a.disconnect)},onRowClick:function(a){a&&a.preventDefault&&a.preventDefault();-1<a.target.id.indexOf("_title")&&
(this.scrollTopPos=this.gridScrollBox.scrollTop)},hide:function(){this.disconnectHandlers()},tooltipInfo:function(d,e){e&&e.preventDefault&&e.preventDefault();if(h.byId(d+"_tooltipDialog"))setTimeout(a.hitch(this,function(b){h.byId(b+"_dropDownButton")._openDropDown(a.byId(b+"_toolTipLaunch"));this.lastOpenDropDown=h.byId(b+"_dropDownButton");this.gridScrollBox.scrollTop=this.scrollTopPos},d),500);else{var c=this.ts.getAllItemsByIdentity(d);if(c){var b;b='\x3cdiv id\x3d"'+d+'_tooltipDialog" class\x3d"innerAlertDialog" dojoType\x3d"dijit.TooltipDialog" style\x3d"width:350px;"\x3e'+
('\x3cdiv class\x3d"esriFloatTrailing closeIcon"\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+this.id+'\').hideTooltip(event);" title\x3d"'+this.i18n.close+'" style\x3d"width:16px;"\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/A\x3e\x3c/div\x3e');b+='\x3cdiv class\x3d"tooltipTitle"\x3e'+c.title.replace(/\_/g," ")+"\x3c/div\x3e";b+="\x3ctable cellpadding\x3d'0' cellspacing\x3d'0' width\x3d'100%'\x3e\x3ctr width\x3d'100%'\x3e\x3ctd width\x3d'160'\x3e";b+='\t\x3cdiv id\x3d"'+
d+'_item-thumbnail" class\x3d"esriWebThumbnail"\x3e';if(c.thumbnail){var g=arcgisonline.sharing.util.getToken();b+='\x3cimg src\x3d"'+esriGeowConfig.restBaseUrl+"content/items/"+d+"/info/"+c.thumbnail+(g?"?token\x3d"+g:"")+'" alt\x3d"Thumbnail" width\x3d"150" height\x3d"100"/\x3e'}b+="\t\x3c/div\x3e";b+='\x3c/td\x3e\x3ctd width\x3d"15"\x3e';b+='\t\x3cdiv style\x3d"width:15px;"\x3e\x3c/div\x3e';b+='\x3c/td\x3e\x3ctd width\x3d"100%" valign\x3d"top"\x3e';b+='\t\x3cspan class\x3d"tooltipLink"\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+
this.id+"').addLayer('"+d+"', event);dijit.byId('"+this.id+"').hideTooltip(event);\"\x3e"+this.i18n.addToMap+"\x3c/A\x3e\x3c/span\x3e";b+='  \x3cdiv style\x3d"height:7px;"\x3e\x26nbsp;\x3c/div\x3e';if(!isEmbedded||!isEmbedded.hideExternalLinks)b+='\t\x3cspan class\x3d"tooltipLink"\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+this.id+"').openItemPropertiesPage('"+d+"', event);\"\x3e"+this.i18n.itemDetails+"\x3c/A\x3e\x3c/span\x3e";if("Map Service"==c.type||"Image Service"==
c.type||"Vector Tile Service"==c.type||"WMS"==c.type)b+='  \x3cdiv style\x3d"height:7px;"\x3e\x26nbsp;\x3c/div\x3e',b+='\t\x3cspan class\x3d"tooltipLink"\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:event \x26\x26 event.preventDefault \x26\x26 event.preventDefault(); arcgisonline.map.save_open.switchBaseMap(\''+d+"');dijit.byId('"+this.id+"').hideTooltip(event);\"\x3e"+this.i18n.useAsBasemap+"\x3c/A\x3e\x3c/span\x3e";b+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";var g=arcgisonline.sharing.geow.Content._getItemIconUrl(c),
f=arcgisonline.sharing.geow.Content.changeTypename(c,!1);b+='\x3ctable style\x3d"padding-top:3px; padding-bottom:5px;"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd width\x3d"20"\x3e';b+="  \x3cspan class\x3d'esriAlignLeading'\x3e\x3cimg src\x3d'"+g+"' border\x3d'0' title\x3d'"+f+"'/\x3e\x3c/span\x3e";b+="\x3c/td\x3e\x3ctd nowrap\x3d'nowrap'\x3e";b+="  \x3cspan class\x3d'esriAlignLeading' style\x3d'color:#656565;'\x3e"+a.string.substitute(this.i18n.byOwner,{owner:c.owner})+"\x3c/span\x3e";b+="\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e";
b+='\x3cspan class\x3d"tooltipTitle" style\x3d"line-height:20px;"\x3e'+this.i18n.summaryLabel+"\x3c/span\x3e";b+="\x3cbr /\x3e";b+='\x3cdiv id\x3d"item-summary"\x3e'+c.snippet+"\x3c/div\x3e";if(g=arcgisonline.sharing.geow.Content._getPremiumItemNode(c))f=a.create("p",{}),a.place("\x3cbr /\x3e",f,"first"),a.place(g,f,"last"),b+=f.innerHTML;b+="\x3c/div\x3e";a.parser.parse(a.byId(d+"_row"));h.byId(d+"_toolTip").set("content",b);a.addClass(a.byId(d+"_toolTip"),"layerTooltipDialog");setTimeout(a.hitch(this,
function(b){h.byId("addContentPanel").adjustHeight();h.byId(b+"_dropDownButton")._openDropDown(a.byId(b+"_toolTipLaunch"));this.lastOpenDropDown=h.byId(b+"_dropDownButton");this.gridScrollBox.scrollTop=this.scrollTopPos},d),500);if(!c.thumbnail){b=c.extent;var k="",k=b&&2==b.length&&2==b[0].length&&2==b[1].length?Math.round(1E3*b[0][0])/1E3+","+Math.round(1E3*b[0][1])/1E3+","+Math.round(1E3*b[1][0])/1E3+","+Math.round(1E3*b[1][1])/1E3:"-180,-90,180,90",l=function(b,c){a.byId(d+"_item-thumbnail").innerHTML=
'\x3cspan style\x3d"width:150px;height:100px;background-image:url('+b.href+");_background-image: none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true',sizingMethod\x3d'crop',src\x3d'"+b.href+"');background-repeat:no-repeat;display:inline-block;\"/\x3e"},m=function(b,a){};c.url&&-1<c.url.indexOf("StreamServer")||(c.url&&-1<c.url.indexOf("ImageServer")?arcgisonline.sharing.util.getJson(c.url,a.hitch(this,function(b,d){var e=arcgisonline.map.main.buildExportCall(c.url,k,"4326",
null,"150,100",null,"json",null,b);arcgisonline.sharing.util.getJson(e,a.hitch(this,l),a.hitch(this,m))}),a.hitch(this,function(b,d){var e=arcgisonline.map.main.buildExportCall(c.url,k,"4326",null,"150,100",null,"json",null,null);arcgisonline.sharing.util.getJson(e,a.hitch(this,l),a.hitch(this,m))})):c.url&&-1<c.url.indexOf("/FeatureServer")?(b=null,g=c.url,f=g.indexOf("/FeatureServer/"),-1==f?g=g.replace("/FeatureServer","/MapServer"):(b=g.substring(f+15,g.length),g=g.substring(0,f)+"/MapServer"),
b=arcgisonline.map.main.buildExportCall(g,k,"4326",null,"150,100",null,"json",b,null),arcgisonline.sharing.util.getJson(b,a.hitch(this,l),a.hitch(this,m))):c.url&&(b=arcgisonline.map.main.buildExportCall(c.url,k,"4326",null,"150,100",null,"json",null,null),arcgisonline.sharing.util.getJson(b,a.hitch(this,l),a.hitch(this,m))))}}}},hideTooltip:function(a){a&&a.preventDefault&&a.preventDefault();this.lastOpenDropDown&&this.lastOpenDropDown._closeDropDown();null==this.lastOpenDropDown},openItemPropertiesPage:function(a,
e){e&&e.preventDefault&&e.preventDefault();window.open("../item.html?id\x3d"+a)},addLayer:function(d,e){e&&e.preventDefault&&e.preventDefault();this.disconnectHandlers();a.byId(d+"_link").innerHTML="\x3cspan style\x3d'color:#999;'\x3e\x3cdiv class\x3d'circularLoadingIcon esriFloatTrailing'\x3e\x3c/div\x3e\x3c/span\x3e";this.layerAddedHandler=a.subscribe("layerAdded",a.hitch(this,"onLayerAdded"));this.layerAddFailedHandler=a.subscribe("layerAddFailed",a.hitch(this,"onLayerAddFailed",d));this.layerAddedNoRemoveHandler=
a.subscribe("layerAddedNoRemove",a.hitch(this,"onLayerAddedNoRemove",d));arcgisonline.map.save_open.openServiceItemCards(d,!1);10>a.isIE&&a.parser.parse(a.byId(d+"_row"))},removeLayer:function(d,e,c){c&&c.preventDefault&&c.preventDefault();if(c=this.ts.getAllItemsByIdentity(d))c.status="new";this.disconnectHandlers();e=e.split(",");for(c=0;c<e.length;c++)a.byId(d+"_link").innerHTML='\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+this.id+"').addLayer('"+d+"', event);\"\x3e"+
this.i18n.add+"\x3c/A\x3e",arcgisonline.map.layer.removeCompleteLayer(e[c])},onLayerAdded:function(d){var e=arcgisonline.map.main.map.getLayer(d),c;if(e)c=arcgisonline.map.main.getParameterList(e);else for(e=0;e<arcgisonline.map.main.mapTables.length;e++){var b=arcgisonline.map.main.mapTables[e];b.id===d&&(c=b)}if(c&&(c=c.itemId))if(this.layerAddedIds.push(d),d=this.ts.getAllItemsByIdentity(c))d.status="added",d.layerAddedIds=this.layerAddedIds.toString(),a.byId(c+"_link").innerHTML='\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+
this.id+"').removeLayer('"+c+"','"+this.layerAddedIds.toString().replace(/\'/g,"\\'")+"', event);\"\x3e"+this.i18n.remove+"\x3c/A\x3e"},onLayerAddedNoRemove:function(d,e){if(0==this.layerAddedIds.length){var c=this.ts.getAllItemsByIdentity(d);c&&(c.status="new")}a.byId(d+"_link").innerHTML='\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+this.id+"').addLayer('"+d+"', event);\"\x3e"+this.i18n.add+"\x3c/A\x3e";this.disconnectHandlers()},onLayerAddFailed:function(d){if(0==this.layerAddedIds.length){var e=
this.ts.getAllItemsByIdentity(d);e&&(e.status="unavailable");a.byId(d+"_link").innerHTML="\x3cspan style\x3d'color:#999;'\x3e"+this.i18n.unavailable+"\x3c/span\x3e"}this.disconnectHandlers()},disconnectHandlers:function(){this.layerAddedIds=[];this.layerAddedHandler&&a.unsubscribe(this.layerAddedHandler);this.layerAddedNoRemoveHandler&&a.unsubscribe(this.layerAddedNoRemoveHandler);this.layerAddFailedHandler&&a.unsubscribe(this.layerAddFailedHandler)},clearList:function(){this.cleared=!0},runLastQuery:function(){this.cleared&&
(this.cleared=!1,this.newSearch(this.lastQueryString,this.lastWithinMapAreaCheck))}});arcgisonline.sharing.dijit.ArcGISOnlineServicesGrid.formatters={title:function(d,e){this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").arcGISOnlineServices);if(!e)return this.defaultValue;var c=arcgisonline.sharing.geow.Content._getItemIconUrl(e.i),b=arcgisonline.sharing.geow.Content.changeTypename(e.i,!1),g=e.i.title,f="\x3cdiv id\x3d'"+
e.i.id+"_row' class\x3d'listServiceTitle'\x3e",f=f+"\x3ctable cellpadding\x3d'0' cellspacing\x3d'0' width\x3d'100%'\x3e\x3ctr width\x3d'100%'\x3e\x3ctd nowrap\x3d'nowrap'\x3e"+("  \x3cdiv id\x3d'"+e.i.id+"_toolTipLaunch' style\x3d\"position:absolute; "+(esriGeowConfig.isRightToLeft?"right":"left")+':80px; top:10px; width:1px; height:1px; background: transparent;"\x3e\x3c/div\x3e'),f=f+("\t \x3cdiv style\x3d'overflow:hidden;'\x3e\x3ca id\x3d'"+e.i.id+'_title\' href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+
e.i.gridId+"').tooltipInfo('"+e.i.id+'\', event);" style\x3d"height:16px;"\x3e'+g+"\x3c/a\x3e\x3c/div\x3e"),f=f+("\t \x3cdiv id\x3d'"+e.i.id+'_dropDownButton\' dojoType\x3d"arcgisonline.sharing.dijit.DropDownButton" style\x3d"display:none;line-height:5px;"\x3e\x3cspan\x3e\x26nbsp;\x3c/span\x3e'),f=f+("\t\t\t\x3cdiv id\x3d'"+e.i.id+"_toolTip' dojoType\x3d'dijit.TooltipDialog'\x3e\x3c/div\x3e"),f=f+"\t \x3c/div\x3e",f=f+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",f=f+"\x3ctable cellpadding\x3d'0' cellspacing\x3d'0' width\x3d'100%'\x3e\x3ctr width\x3d'100%' class\x3d'bottomRowTable'\x3e\x3ctd width\x3d'20'\x3e",
f=f+("  \x3cspan class\x3d'esriAlignLeading'\x3e\x3cimg src\x3d'"+c+"' border\x3d'0' title\x3d'"+b+"'/\x3e\x3c/span\x3e"),f=f+"\x3c/td\x3e\x3ctd nowrap\x3d'nowrap'\x3e",f=f+("  \x3cspan class\x3d'esriAlignLeading' style\x3d'color:#656565;'\x3e"+a.string.substitute(this.i18n.byOwner,{owner:e.i.owner})+"\x3c/span\x3e"),f=f+"\x3c/td\x3e\x3ctd style\x3d'padding-right:5px;padding-left:3px;'\x3e",f="added"===e.i.status?f+("  \x3cdiv class\x3d'esriAlignTrailing' id\x3d'"+e.i.id+'_link\'\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+
e.i.gridId+"').removeLayer('"+e.i.id+"','"+e.i.layerAddedIds.replace(/\'/g,"\\'")+"', event);\"\x3e"+this.i18n.remove+"\x3c/A\x3e\x3c/div\x3e"):"unavailable"===e.i.status?f+("  \x3cdiv class\x3d'esriAlignTrailing' id\x3d'"+e.i.id+"_link'\x3e\x3cspan style\x3d'color:#999;'\x3e"+this.i18n.unavailable+"\x3c/span\x3e\x3c/div\x3e"):f+("  \x3cdiv class\x3d'esriAlignTrailing' id\x3d'"+e.i.id+'_link\'\x3e\x3ca href\x3d"JavaScript:void(0);" onclick\x3d"JavaScript:dijit.byId(\''+e.i.gridId+"').addLayer('"+
e.i.id+"', event);\"\x3e"+this.i18n.add+"\x3c/A\x3e\x3c/div\x3e"),f=f+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";return f+="\x3c/div\x3e"},blank:function(a,e){return""}}});