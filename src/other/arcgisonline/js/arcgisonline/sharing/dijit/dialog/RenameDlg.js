// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/dialog/RenameDlg",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/Dialog"],function(c,b,d){b.provide("arcgisonline.sharing.dijit.dialog.RenameDlg");b.require("dijit._Widget");b.require("dijit._Templated");b.require("dijit.Dialog");b.declare("arcgisonline.sharing.dijit.dialog.RenameDlg",[c._Widget,c._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContainer"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"rename-dialog" dojoAttachPoint\x3d"_renameDialog" dojoAttachEvent\x3d"onKeyDown:onKeyDown" title\x3d"${i18n.renameDlgTitle}" execute\x3d""\x3e\r\n    \x3clabel class\x3d"long" for\x3d"layer_title"\x3e${i18n.layerName}\x3c/label\x3e\r\n    \x3cdiv id\x3d"layer_title" dojoAttachPoint\x3d"_layerTitle" dojotype\x3d"dijit.form.TextBox" maxlength\x3d"256" trim\x3d"true" required\x3d"true" style\x3d"width:73%; padding:2px;"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n      \x3cbutton dojoAttachEvent\x3d"onClick:rename" class\x3d"jevent primary" dojotype\x3d"dijit.form.Button"\x3e\r\n       ${i18n.ok} \r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"jevent cancel" type\x3d"cancel" dojotype\x3d"dijit.form.Button" dojoAttachEvent\x3d"onClick:_handleCancelBtnClick"\x3e\r\n       ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; width: 100%; height:1px;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
mapLayer:null,i18n:null,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.RenameDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").renameDlg)},postCreate:function(){this.inherited(arguments)},show:function(a,b){this.mapLayer=a;this.subLayerPos=b;if(esri.isDefined(this.subLayerPos)&&
-1<this.subLayerPos){var c=arcgisonline.map.main.hasDynamicLayers(this.mapLayer)?this.mapLayer.layer.dynamicLayerInfos[this.subLayerPos]:this.mapLayer.layer.layerInfos[this.subLayerPos];this._layerTitle.set("value",c.name)}else this._layerTitle.set("value",this.mapLayer.title);this._renameDialog.show()},hide:function(){this._renameDialog.hide()},_handleCancelBtnClick:function(a){a.preventDefault();this._renameDialog.hide()},rename:function(a){a.preventDefault();a=b.trim(this._layerTitle.get("value"));
if(0<a.length&&-1<a.indexOf("\x3c")||-1<a.indexOf("\x3e"))arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.errorLabel,message:this.i18n.error.specialCharacters});else if(0<a.length){if(esri.isDefined(this.subLayerPos)&&-1<this.subLayerPos)arcgisonline.map.dynLayer.renameDynamicLayer(this.mapLayer,this.subLayerPos,a);else if(this.mapLayer.title=a,arcgisonline.map.featColl.isFeatureCollection(this.mapLayer)&&this.mapLayer.layer||this.mapLayer.layer instanceof
esri.layers.CSVLayer)this.mapLayer.layer.name=a;b.publish("onLayerUpdate",["reopen"]);leftPanel&&leftPanel.deleteLegendStack();this._renameDialog.hide()}},onKeyDown:function(a){var b;window.event?b=a.keyCode:a.which&&(b=a.which);13==b&&this.rename(a)}})});