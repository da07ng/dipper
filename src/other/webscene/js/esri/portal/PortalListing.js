// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["./PortalComment","../core/declare","dojo/_base/lang","dojo/_base/array"],function(b,c,d,e){return c([],{declaredClass:"esri.arcgis.PortalListing",portal:null,constructor:function(b){d.mixin(this,b);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?this.portal.portalUtil.formatUrl(this.url+"/info/"+
this.banner):"";this.thumbnail=this.thumbnail?this.portal.portalUtil.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?this.portal.portalUtil.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var a in this.listingProperties)this.listingProperties.hasOwnProperty(a)&&
this[a]&&(this.listingProperties[a]=this[a]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=e.map(this.screenshots,function(a){return this.portal.portalUtil.formatUrl(this.url+"/info/"+a)},this);this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?this.portal.portalUtil.formatUrl(this.portal.portalUrl+"/accounts/self/resources/"+this.vendor.thumbnail):this.portal.portalUtil.formatUrl(this.url+"/vendorinfo/"+
this.vendor.thumbnail):""},getComments:function(){return this.portal.portalUtil.requestToTypedArray(this.commentsUrl,null,null,b,{item:this})},getVendor:function(){return this.vendor}})});