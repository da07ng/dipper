// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/sharing/dijit/dialog/templates/AddGeocoderDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv id\x3d"addGeocoder-dialog" data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.addGeocoderTitle}"\x3e\r\n    \x3ctable style\x3d"width:100%;"\x3e\r\n      \x3ctbody\x3e\r\n      \x3ctr class\x3d"${baseClass} no-edit"\x3e\r\n        \x3ctd class\x3d"${baseClass} valign-top" colspan\x3d"2"\x3e\r\n          \x3cinput type\x3d"radio" id\x3d"esriGeocoderOption" name\x3d"geocoderOption" data-dojo-attach-point\x3d"_esriGeocoderOption" data-dojo-attach-event\x3d"onClick:onEsriSelected" data-dojo-type\x3d"dijit/form/RadioButton" checked\x3d"true"/\x3e\r\n          \x3clabel data-dojo-attach-point\x3d"_esriGeocoderOptionLabel" for\x3d"esriGeocoderOption" class\x3d"${baseClass} optionTitle"\x3e\x26nbsp;${i18n.esriWorldGeocoder}\x3c/label\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"no-edit"\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"${baseClass} valign-top no-edit" colspan\x3d"2"\x3e\r\n          \x3cinput type\x3d"radio" id\x3d"newGeocoderOption" name\x3d"geocoderOption" data-dojo-attach-point\x3d"_newGeocoderOption" data-dojo-attach-event\x3d"onClick:onNewSelected" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n          \x3clabel for\x3d"newGeocoderOption" class\x3d"${baseClass} optionTitle no-edit"\x3e\x26nbsp;${i18n.newGeocoder}\x3c/label\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"${baseClass} valign-top" style\x3d"width:16px;"\x3e\x26nbsp;\x3c/td\x3e\r\n        \x3ctd class\x3d"${baseClass} valign-top" id\x3d"newGeocoderContainer" data-dojo-attach-point\x3d"_newGeocoderContainer"\x3e\r\n          \x3ctable style\x3d"width:100%;border-spacing:0;"\x3e\r\n            \x3ctbody\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriAlignLeading"\x3e\x3clabel for\x3d"geocoderUrl"\x3e${i18n.urlLabel}\x3c/label\x3e\x3c/td\x3e\r\n              \x3ctd\x3e\x3cinput type\x3d"text" id\x3d"geocoderUrl" data-dojo-attach-point\x3d"_geocoderUrl" data-dojo-attach-event\x3d"onChange:onGeocoderUrlChange,onKeyPress:onGeocoderUrlKeyPress" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"trim:true,required:true"/\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd colspan\x3d"2" class\x3d"esriAlignLeading"\x3e\x3clabel class\x3d"${baseClass} example" data-dojo-attach-point\x3d"_exampleUrl"\x3e${i18n.exampleLabel}\x3cbr\x3e${i18n.exampleGeocoderUrl}\x3c/label\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriAlignLeading"\x3e\x3clabel for\x3d"geocoderName"\x3e${i18n.nameLabel}\x3c/label\x3e\x3c/td\x3e\r\n              \x3ctd\x3e\x3cinput type\x3d"text" id\x3d"geocoderName" data-dojo-attach-point\x3d"_geocoderName" data-dojo-attach-event\x3d"onChange:onGeocoderNameChange,onKeyPress:onGeocoderNameKeyPress" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"trim:true,required:true"/\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriAlignLeading"\x3e\x3clabel for\x3d"geocoderHint"\x3e${i18n.hintTextLabel}\x3c/label\x3e\x3c/td\x3e\r\n              \x3ctd\x3e\x3cinput type\x3d"text" id\x3d"geocoderHint" data-dojo-attach-point\x3d"_geocoderHint" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"trim:true"/\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\x26nbsp;\x3c/td\x3e\r\n              \x3ctd\x3e\x3cinput type\x3d"checkbox" id\x3d"geocoderPlacefinder" data-dojo-attach-point\x3d"_geocoderPlacefinder" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e \x3clabel for\x3d"geocoderPlacefinder"\x3e${i18n.allowPlacefinding}\x3c/label\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\x26nbsp;\x3c/td\x3e\r\n              \x3ctd\x3e\x3cinput type\x3d"checkbox" id\x3d"geocoderBatch" data-dojo-attach-point\x3d"_geocoderBatch" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e \x3clabel data-dojo-attach-point\x3d"_geocoderBatchLabel" class\x3d"esriAddGeocoderDlg" for\x3d"geocoderBatch"\x3e${i18n.allowBatchGeocode}\x3c/label\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd colspan\x3d"2" data-dojo-attach-point\x3d"_dialogBtns" class\x3d"esriAlignTrailing"\x3e\r\n          \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"_okBtn" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onOk" class\x3d"calcite primary"\x3e${i18n.ok}\x3c/button\x3e\r\n          \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onCancel" class\x3d"calcite cancel"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("arcgisonline/sharing/dijit/dialog/AddGeocoderDlg","require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/keys dojo/query dojo/topic esri/lang esri/request arcgisonline/sharing/util arcgisonline/sharing/dijit/dialog/GeneralDlg dijit/_Widget dijit/_Templated dijit/Dialog dijit/form/Button dijit/form/RadioButton dijit/form/CheckBox dijit/form/TextBox dojo/text!arcgisonline/sharing/dijit/dialog/templates/AddGeocoderDlg.html".split(" "),
function(r,u,z,g,A,v,k,m,e,B,n,l,s,b,t,f,h,w,x,C,D,E,F,G,y){return u([w,x],{declaredClass:"arcgisonline.sharing.dijit.dialog.AddGeocoderDlg",basePath:r.toUrl("arcgisonline/sharing/dijit/dialog"),baseClass:"esriAddGeocoderDlg",widgetsInTemplate:!0,templateString:y,statics:{_instance:null,getInstance:function(){null===this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.AddGeocoderDlg);return this._instance}},_editMode:!1,_agoGeocodeServiceUrl:"arcgis.com/arcgis/rest/services/world/geocodeserver",
postMixInProperties:function(){this.inherited(arguments);this.i18n={};g.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").common);g.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").addGeocoderDlg)},postCreate:function(){this._geocoderUrlSpinner=m.create("span",{id:"geocoderSpinner",style:{visibility:"hidden"},innerHTML:" "},this._geocoderUrl.domNode,"after");m.create("img",{src:f.relativeToExplicitUrl("js/arcgisonline/css/images/spinner20.gif"),width:"14",
height:"14",style:{verticalAlign:"middle",paddingLeft:"5px",paddingRight:"5px"}},this._geocoderUrlSpinner,"only")},showAdd:function(a){this._configureForAdd(a);this._dialog.show()},showConfig:function(a){this._configureForEdit(a);this._dialog.show()},onGeocoderNameChange:function(){this._geocoder.name=this._geocoderName.get("value");this._validate()},onGeocoderNameKeyPress:function(a){a.keyCode==n.ENTER&&(dojo.stopEvent(a),document.activeElement.blur())},onGeocoderUrlKeyPress:function(a){a.keyCode==
n.ENTER&&(dojo.stopEvent(a),document.activeElement.blur())},onGeocoderUrlChange:function(){var a=this._geocoderUrl.get("value"),c={title:this.i18n.noticeLabel,message:this.i18n.invalidGeocoderUrl};if(b.isDefined(a)&&!this._configuringGeocoderUrl&&(this._okBtn.set("disabled",!0),0<a.length)){e.set(this._geocoderUrlSpinner,{visibility:"visible"});try{new r.toUrl(a);this._geocoder.singleLineFieldName=null;var p=this._isServiceProxyGeocoder(a),l=f.isPortal()&&f.onFederatedServer(a),q={f:"json"};if(p){var m=
f.getUser().token;m&&(q.token=m)}t({url:a,content:q,timeout:5E3,callbackParamName:"callback"},{useProxy:this._useProxyForRequest(a),disableIdentityLookup:!p&&!l}).then(g.hitch(this,function(d){e.set(this._geocoderUrlSpinner,{visibility:"hidden"});if(b.isDefined(d)&&b.isDefined(d.spatialReference)&&b.isDefined(d.locatorProperties)){this._geocoder.url=this._cleanUrl(a);b.isDefined(d.singleLineAddressField)&&b.isDefined(d.singleLineAddressField.name)&&(this._geocoder.singleLineFieldName=d.singleLineAddressField.name);
b.isDefined(d.locatorProperties.MaxBatchSize)&&0===d.locatorProperties.MaxBatchSize?(this._geocoderBatch.set("checked",!1),this._geocoderBatch.set("disabled",!0),k.add(this._geocoderBatchLabel,"disableLabel")):(this._geocoderBatch.set("disabled",!1),k.remove(this._geocoderBatchLabel,"disableLabel"));if(!b.isDefined(d.currentVersion)||10.1>d.currentVersion||!b.isDefined(this._geocoder.url)||0===this._geocoder.url.length||!b.isDefined(this._geocoder.singleLineFieldName)||0===this._geocoder.singleLineFieldName.length)c.message=
this.i18n.incompatibleGeocoderUrl,h.prototype.statics.getInstance().show(c);d.capabilities&&-1<dojo.indexOf(d.capabilities.split(","),"Suggest")&&(this._geocoder.suggest=!0);f.isPortal()&&this._isServiceProxyGeocoder(this._geocoder.url)?this._determineIfEsriGeocoderThroughProxy():this._validate()}else h.prototype.statics.getInstance().show(c)}),g.hitch(this,function(d){d&&d.code&&(499===d.code||498===d.code)?(e.set(this._geocoderUrlSpinner,{visibility:"hidden"}),h.prototype.statics.getInstance().show({title:this.i18n.noticeLabel,
message:this.i18n.securedGeocoderUrl})):t({url:a,content:q,timeout:5E3,callbackParamName:"callback"},{useProxy:this._useProxyForRequest(a,!1),disableIdentityLookup:!p&&!l}).then(g.hitch(this,function(d){e.set(this._geocoderUrlSpinner,{visibility:"hidden"});if(b.isDefined(d)&&b.isDefined(d.spatialReference)&&b.isDefined(d.locatorProperties)){this._geocoder.url=this._cleanUrl(a);b.isDefined(d.singleLineAddressField)&&b.isDefined(d.singleLineAddressField.name)&&(this._geocoder.singleLineFieldName=d.singleLineAddressField.name);
this._geocoderBatch.set("checked",!1);this._geocoderBatch.set("disabled",!0);k.add(this._geocoderBatchLabel,"disableLabel");if(!b.isDefined(d.currentVersion)||10.1>d.currentVersion||!b.isDefined(this._geocoder.url)||0===this._geocoder.url.length||!b.isDefined(this._geocoder.singleLineFieldName)||0===this._geocoder.singleLineFieldName.length)c.message=this.i18n.incompatibleGeocoderUrl,h.prototype.statics.getInstance().show(c);d.capabilities&&-1<dojo.indexOf(d.capabilities.split(","),"Suggest")&&(this._geocoder.suggest=
!0);this._validate()}else h.prototype.statics.getInstance().show(c)}),g.hitch(this,function(a){e.set(this._geocoderUrlSpinner,{visibility:"hidden"});if(a.code&&(499===a.code||498===a.code))c.message=this.i18n.securedGeocoderUrl;h.prototype.statics.getInstance().show(c)}))}))}catch(n){e.set(this._geocoderUrlSpinner,{visibility:"hidden"}),h.prototype.statics.getInstance().show(c)}}this._configuringGeocoderUrl=!1},onEsriSelected:function(){this._esriGeocoderOption.get("checked")&&(e.set(this._newGeocoderContainer,
"display","none"),this._okBtn.set("disabled",!1))},onNewSelected:function(){this._newGeocoderOption.get("checked")&&(e.set(this._newGeocoderContainer,"display",""),this._okBtn.set("disabled",!0))},onCancel:function(){this._dialog.hide()},onOk:function(){if(this._editMode)this._geocoder.placeholder=this._geocoderHint.get("value"),this._geocoderPlacefinder.get("checked")?this._geocoder.placefinding=!0:delete this._geocoder.placefinding,this._geocoderBatch.get("checked")?this._geocoder.batch=!0:delete this._geocoder.batch,
this._geocoder.zoomScale||(this._geocoder.zoomScale=1E4),s.publish("geocoder-altered",this._geocoder);else{if(!f.isPortal()||!this._esriGeocoderOption.get("checked"))this._esriGeocoderOption.get("checked")?this._geocoder=this._worldGeocoder:this._newGeocoderOption.get("checked")&&(this._geocoder.placeholder=this._geocoderHint.get("value"),this._geocoderPlacefinder.get("checked")&&(this._geocoder.placefinding=!0),this._geocoderBatch.get("checked")&&(this._geocoder.batch=!0));this._geocoder.zoomScale=
1E4;s.publish("geocoder-added",this._geocoder)}this._dialog.hide()},setWorldGeocodingService:function(a){this._worldGeocoder=a},_determineIfEsriGeocoderThroughProxy:function(){f.request({url:esriGeowConfig.restBaseUrl+"/search",content:{q:"orgid:"+esriGeowConfig.self.id+" type:'Geocode Service' typekeywords:'Geocoding Service' typekeywords:'Service Proxy'",start:1,num:100}}).then(g.hitch(this,function(a){if(a&&a.results){var c,b;for(b=0;b<a.results.length;b++)if(c=a.results[b],c.url&&this._cleanUrl(c.url)===
this._geocoder.url&&c.sourceUrl&&-1!==c.sourceUrl.toLowerCase().indexOf(this._agoGeocodeServiceUrl)){this._geocoder.suggest=!0;break}}this._validate()}),g.hitch(this,function(a){this._validate()}))},_isServiceProxyGeocoder:function(a){var c=(a||"").toLowerCase();a=-1<c.indexOf("/geocodeserver")&&(-1<c.indexOf("/sharing/servers/")||c.indexOf("/sharing/rest/services/"))&&-1<c.indexOf("/rest/services/");var b=f.isPortal()&&-1<c.indexOf(esriGeowConfig.self.portalHostname),c=!f.isPortal()&&c.indexOf("utility")&&
-1<c.indexOf(".arcgis.com");return a&&(b||c)},_clear:function(){this._geocoder=null;this._configuringGeocoderUrl=this._editMode=!1;this._dialog.set("title",this.i18n.addGeocoderTitle);l("."+this.baseClass+".no-edit").style("display","");e.set(this._newGeocoderContainer,"display","none");e.set(this._geocoderUrlSpinner,{visibility:"hidden"});this._esriGeocoderOption.set("disabled",!1);k.remove(this._esriGeocoderOptionLabel,"disableLabel");this._geocoderUrl.set("value","");this._geocoderName.set("value",
"");this._geocoderName.set("placeholder",this.i18n.exampleNameLabel);this._geocoderHint.set("value","");this._geocoderHint.set("placeholder",this.i18n.exampleHintTextLabel);this._geocoderPlacefinder.set("checked",!1);this._geocoderBatch.set("checked",!1);this._geocoderBatch.set("disabled",!1);k.remove(this._geocoderBatchLabel,"disableLabel");f.isPortal()&&v.set(this._exampleUrl,"innerHTML",this.i18n.exampleLabel+" "+this.i18n.exampleGeocoderUrl.replace("http:","https:"))},_configureForAdd:function(a){this._clear();
this._geocoder={};this._esriGeocoderOption.set("disabled",a);a?(k.add(this._esriGeocoderOptionLabel,"disableLabel"),this._newGeocoderOption.set("checked",!0),l("."+this.baseClass+".no-edit").style("display","none"),e.set(this._newGeocoderContainer,"display",""),this._okBtn.set("disabled",!0)):(this._esriGeocoderOption.set("checked",!0),this._okBtn.set("disabled",!1))},_configureForEdit:function(a){this._clear();this._geocoder=a;this._editMode=!0;this._dialog.set("title",this.i18n.editGeocoderTitle);
l("."+this.baseClass+".no-edit").style("display","none");e.set(this._newGeocoderContainer,"display","");this._configuringGeocoderUrl=!0;this._geocoderUrl.set("value",this._geocoder.url);this._geocoderName.set("value",this._geocoder.name);this._geocoderHint.set("value",this._geocoder.placeholder);this._geocoderPlacefinder.set("checked",!!this._geocoder.placefinding);this._geocoderBatch.set("checked",!!this._geocoder.batch);this._okBtn.set("disabled",!1);this.onGeocoderUrlChange()},_useProxyForRequest:function(a,
c){var e=f.getUser();return f.isPortal()?!(e.auth_tier&&"web"===e.auth_tier&&this._isServiceProxyGeocoder(a)):b.isDefined(c)?c:!0},_cleanUrl:function(a){return a?a.replace(/\s/g,"%20"):""},_validate:function(){this._okBtn.set("disabled",!(b.isDefined(this._geocoder.url)&&0<this._geocoder.url.length&&b.isDefined(this._geocoder.name)&&0<this._geocoder.name.length&&b.isDefined(this._geocoder.singleLineFieldName)&&0<this._geocoder.singleLineFieldName.length))}})});