// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/map/dijit/renderer/templates/MultiAttributes.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" region\x3d"top" style\x3d"height:100%;"\x3e\r\n  \x3cdiv class\x3d"panel panel_left" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"padding:7px;margin-bottom:-5px;"\x3e\r\n    \x3cdiv id\x3d"rendererMultiAttributesHeader" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"top"\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"display:inline;"\x3e\r\n        \x3ca href\x3d"JavaScript:void(0);" data-dojo-attach-point\x3d"_closeBtn" data-dojo-attach-event\x3d"onClick:_onClose" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse"\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"rendererTitle" class\x3d"esriFloatLeading panel_title"\x3e\r\n        ${i18n.rendererPanelTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererMultiAttributesLayer" class\x3d"esriFloatLeading panel_title" style\x3d"clear:both;"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; height:1px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" id\x3d"rendererMultiAttributesPane" style\x3d"padding-top:10px;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererTitle1"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"margin:5px 0 5px 0; clear:both;"\x3e    \r\n        \x3cdiv class\x3d"esriFloatLeading"\x3e    \r\n          \x3cdiv class\x3d"esriFloatLeading subTitle"\x3e${i18n.layerHasMultipleStyles}\x3c/div\x3e\r\n        \x3c/div\x3e    \r\n        \x3cdiv data-dojo-attach-point\x3d"_rendererTypes" class\x3d"esriFloatLeading rendererTypes" style\x3d"clear: both; overflow-y:auto;"\x3e  \r\n        \x3c/div\x3e    \r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererMultiAttributesContentClose"\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite blue" data-dojo-attach-point\x3d"_doneButton" data-dojo-attach-event\x3d"onClick:_onDone"\x3e\x3cspan\x3e${i18n.done}\x3c/span\x3e\x3c/button\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_cancelButton" data-dojo-attach-event\x3d"onClick:_onCancel"\x3e\x3cspan\x3e${i18n.cancel}\x3c/span\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"rendererMultiAttributesFooterDiv" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px;"\x3e\r\n    \x3cdiv class\x3d"footer" id\x3d"rendererMultiAttributesFooter" data-dojo-type\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("arcgisonline/map/dijit/renderer/MultiAttributes","dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/connect dojo/_base/array dojo/dom dojo/has dojo/query dojo/dom-style dojo/dom-class dojox/html/entities dijit/registry esri/symbols/jsonUtils esri/renderers/jsonUtils esri/styles/choropleth arcgisonline/map/dijit/renderer/_GalleryMixin arcgisonline/map/dijit/renderer/_SymbolsMixin arcgisonline/map/dijit/renderer/_RendererMixin arcgisonline/map/dijit/renderer/_ColorMixin dojo/i18n!arcgisonline/nls/arcgisonline dijit/_Widget dijit/_Templated dojo/text!arcgisonline/map/dijit/renderer/templates/MultiAttributes.html".split(" "),
function(l,e,g,m,d,k,r,f,b,c,p,q,A,B,s,t,u,v,w,h,x,y,z){l=l([x,y],{declaredClass:"arcgisonline.map.dijit.renderer.MultiAttributes",basePath:require.toUrl("arcgisonline/map/dijit/renderer"),baseClass:"esriAGORendererMultiAttributes",widgetsInTemplate:!0,templateString:z,_vars:[],_rConnects:null,tooltips:[],i18n:null,disableAllEvents:!0,container:null,subLayerId:null,mapLayer:null,layer:null,renderer:null,constructor:function(a,b){e.mixin(this,t);e.mixin(this,u);e.mixin(this,v);e.mixin(this,w);a&&(a.containerNode&&
(this.container=a.containerNode),this.params=a.params,e.mixin(this,a.params),this._rConnects=[])},destroy:function(){this.destroyBusy();this.hideLegendPopup();this.destroyTooltips();d.forEach(this._rConnects,m.disconnect);delete this._rConnects;this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.i18n=h.common;e.mixin(this.i18n,h.generalDlg);e.mixin(this.i18n,h.viewer.time);e.mixin(this.i18n,h.rendererCommon);e.mixin(this.i18n,h.rendererGalleryPanel);e.mixin(this.i18n,
h.rendererMultiAttributesPanel)},postCreate:function(){this.container.addChild(q.byId("rendererMultiAttributesPanel"));this.loadConnections()},loadConnections:function(){this._rConnects.push(m.connect(q.byId("leftContentPanel"),"resize",this,"adjustHeight"))},_onDone:function(a){a.preventDefault();this.hideBusy();this.hideLegendPopup();leftPanel.switchToRendererStack(this.renderer)},_onCancel:function(a){a.preventDefault();this.hideBusy();this.hideLegendPopup();this.dismissRendererChanges(this.origGalleryRenderer);
leftPanel.switchToRendererStack(this.renderer)},_onClose:function(a){a.preventDefault();this.hideBusy();this.hideLegendPopup();this.dismissRendererChanges(this.origGalleryRenderer);leftPanel.switchToRendererStack(this.renderer)},externalCancel:function(){delete this.mapLayer._scaleChanged;delete this.mapLayer._opacityChanged;this.hideBusy();this.destroyMultipleFieldsPopup();this.hideLegendPopup();this.dismissRendererChanges();this.properClose=!0},startup:function(){this.inherited(arguments);this._init()},
_init:function(){this.origGalleryRenderer=this.buildCurrentRendererInfo();this._rendererMultiAttributesLayer.innerHTML=p.encode(this.mapLayer.title.replace(/\_/g," "));-1!==this.subLayerId&&(this.layer.name&&this.mapLayer.title!==this.layer.name)&&(this._rendererMultiAttributesLayer.innerHTML+=" - "+p.encode(this.layer.name.replace(/\_/g," ")));this.updateUIWithRenderer();setTimeout(e.hitch(this,function(){this.disableAllEvents=!1}),1E3);this.showLegendPopup();this.basemapSwitchHandler&&m.unsubscribe(this.basemapSwitchHandler);
this.basemapSwitchHandler=m.subscribe("basemapSwitch",e.hitch(this,function(){if("rendererMultiAttributesStack"===arcgisonline.map.leftPanel.getLeftContentPanelStack()&&"colorsize"===this.getRendererType(this.renderer)){var a=this.getVisualVariableByType("colorInfo",null,this.renderer.authoringInfo.visualVariables);this.scheme=s.getSchemes({theme:a&&a.theme?a.theme:"high-to-low",basemap:this.getBasemapType(),geometryType:this.geometryType}).primaryScheme;a=this.updateSchemeOnColorRenderer({scheme:this.scheme});
this.applyColorRenderer(a,null,!0)}}))},updateUIWithRenderer:function(){if("colorsize"===this.getRendererStyle(this.renderer)||"uniquesize"===this.getRendererStyle(this.renderer)||"predominancesize"===this.getRendererStyle(this.renderer))this.buildList(),this.setTypeOptions(this.attributeItem,this.attributeItem2),this.selectTypeBox()},selectTypeBox:function(){switch(this.getRendererStyle(this.renderer)){case "colorsize":b.set(this._vars.color.title,"display","");b.set(this._vars.color.select,"display",
"none");b.set(this._vars.color.options,"display","");b.set(this._vars.color.check,"display","none");c.add(this._vars.color.title,"checked");b.set(this._vars.size.title,"display","");b.set(this._vars.size.select,"display","none");b.set(this._vars.size.options,"display","");b.set(this._vars.size.check,"display","none");c.add(this._vars.size.title,"checked");break;case "uniquesize":b.set(this._vars.unique.title,"display","");b.set(this._vars.unique.select,"display","none");b.set(this._vars.unique.options,
"display","");b.set(this._vars.unique.check,"display","none");c.add(this._vars.unique.title,"checked");b.set(this._vars.size.title,"display","");b.set(this._vars.size.select,"display","none");b.set(this._vars.size.options,"display","");b.set(this._vars.size.check,"display","none");c.add(this._vars.size.title,"checked");break;case "predominancesize":b.set(this._vars.predominance.title,"display",""),b.set(this._vars.predominance.select,"display","none"),b.set(this._vars.predominance.options,"display",
""),b.set(this._vars.predominance.check,"display","none"),c.add(this._vars.predominance.title,"checked"),b.set(this._vars.size.title,"display",""),b.set(this._vars.size.select,"display","none"),b.set(this._vars.size.options,"display",""),b.set(this._vars.size.check,"display","none"),c.add(this._vars.size.title,"checked")}this.adjustHeight()},resetTypeOptions:function(){d.forEach("simple unique color size heatMap predominance predominancesize colorsize uniquesize watercolor ratio".split(" "),function(a){b.set(this._vars[a].root,
"display","none");-1<d.indexOf(["unique","color","size","predominance"],a)&&(c.remove(this._vars[a].root,"point"),c.remove(this._vars[a].root,"line"),c.remove(this._vars[a].root,"polygon"),b.set(this._vars[a].field,"display",""),this._vars[a].field.innerHTML="")},this)},setTypeOptions:function(a,n){this.resetTypeOptions();if("colorsize"===this.getRendererStyle(this.renderer))this._vars.color.field.innerHTML=a.alias,this._vars.size.field.innerHTML=n.alias,"esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==
this.geometryType?d.forEach(["color","size"],function(a){c.add(this._vars[a].root,"point")},this):"esriGeometryPolyline"==this.geometryType?d.forEach(["color","size"],function(a){c.add(this._vars[a].root,"line")},this):"esriGeometryPolygon"==this.geometryType&&d.forEach(["color","size"],function(a){c.add(this._vars[a].root,"polygon")},this),d.forEach(["color","size"],function(a){b.set(this._vars[a].root,"display","")},this);else if("uniquesize"===this.getRendererStyle(this.renderer))this._vars.unique.field.innerHTML=
this.getFieldForUniqueRenderer(a,n).alias,this._vars.size.field.innerHTML=this.getFieldForSizeRenderer(a,n).alias,"esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType?d.forEach(["unique","size"],function(a){c.add(this._vars[a].root,"point")},this):"esriGeometryPolyline"==this.geometryType?d.forEach(["unique","size"],function(a){c.add(this._vars[a].root,"line")},this):"esriGeometryPolygon"==this.geometryType&&d.forEach(["unique","size"],function(a){c.add(this._vars[a].root,
"polygon")},this),d.forEach(["unique","size"],function(a){b.set(this._vars[a].root,"display","")},this);else if("predominancesize"===this.getRendererStyle(this.renderer)){var f="",g="";dojo.forEach(this.renderer.infos,e.hitch(this,function(a){f+=g+a.label;g="\x3cbr/\x3e"}));this._vars.predominance.field.innerHTML=f;this._vars.size.field.innerHTML=this.getFieldForSizeRenderer(a,n).alias;"esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType?d.forEach(["predominance","size"],
function(a){c.add(this._vars[a].root,"point")},this):"esriGeometryPolyline"==this.geometryType?d.forEach(["predominance","size"],function(a){c.add(this._vars[a].root,"line")},this):"esriGeometryPolygon"==this.geometryType&&d.forEach(["predominance","size"],function(a){c.add(this._vars[a].root,"polygon")},this);d.forEach(["predominance","size"],function(a){b.set(this._vars[a].root,"display","")},this)}},adjustHeight:function(a){if(!("undefined"==typeof leftPanel||"rendererMultiAttributesStack"!=leftPanel.visibleStack)){a=
g.coords(k.byId("leftContentStackContainer")).h;var c=g.coords(k.byId("rendererMultiAttributesHeader")).h,d=g.coords(this._rendererTitle1).h,e=g.coords(this._doneButton.domNode).h,h=g.coords(k.byId("rendererMultiAttributesFooter_links")).h+10;b.set(k.byId("rendererMultiAttributesFooterDiv"),"height",h+"px");a=a-c-d-e-h-53;0<a&&b.set(this._rendererTypes,"height",a+"px");a=g.coords(k.byId("leftContentStackContainer")).w-10;0<a&&(b.set(k.byId("rendererMultiAttributesPane"),"width",a+"px"),b.set(this._rendererTypes,
"width",a+"px"),a=Math.min(a-15,500),f(".rendererType").style("width",a+"px"),f(".rendererTypeThumb").style("width",a-20+"px"),d=300<a?150:Math.min(a/2,150),f(".rendererTypeThumb").style("height",d+"px"),300>a?f(".rendererTypeThumb").style("backgroundSize","cover"):f(".rendererTypeThumb").style("backgroundSize","500px 150px"),c=0,f(".rendererTitleText").forEach(function(a){c=Math.max(c,g.coords(a).h)}),a=(d-c)/2-17,f(".rendererSelect").style("top",a+"px"),f(".rendererOptions").style("top",a+"px"))}}});
r("extend-esri")&&e.setObject("arcgisonline.map.dijit.renderer.MultiAttributes",l);return l});