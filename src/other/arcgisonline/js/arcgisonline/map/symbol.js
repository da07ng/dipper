// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/symbol",["dijit","dojo","dojox","dojo/require!arcgisonline/map/main"],function(l,f,k){f.provide("arcgisonline.map.symbol");f.require("arcgisonline.map.main");arcgisonline.map.symbol={drawSymbol:function(a,b,c){a.innerHTML="";var d=30;if("simplemarkersymbol"===b.type)d=Math.min(Math.max(d,b.size+12),125);else if("picturemarkersymbol"===b.type){if(!b.url||"http://"===b.url||-1===b.url.indexOf("http://")&&-1===b.url.indexOf("https://")&&-1===b.url.indexOf("data:"))return;d=Math.min(Math.max(d,
b.width),125)}var g=d;a=k.gfx.createSurface(a,d,g);if("vml"===k.gfx.renderer){var e=a.getEventSource();f.style(e,"position","relative");f.style(e.parentNode,"position","relative")}b=arcgisonline.map.symbol._getDrawingToolShape(b,c)||esri.symbol.getShapeDescriptors(b);var h;try{h=a.createShape(b.defaultShape).setFill(b.fill).setStroke(b.stroke)}catch(l){a.clear();a.destroy();return}b=a.getDimensions();b={dx:b.width/2,dy:b.height/2};e=h.getBoundingBox();c=e.width;e=e.height;if(c>d||e>g)d=((d<g?d:g)-
5)/(c>e?c:e),f.mixin(b,{xx:d,yy:d});h.applyTransform(b);return a},_getDrawingToolShape:function(a,b){var c;switch(b?b.drawingTool||null:null){case "esriFeatureEditToolArrow":c={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolTriangle":c={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":c={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":c=
{type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":c={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null}return{defaultShape:c,fill:a.getFill(),stroke:a.getStroke()}},_repaintItems:function(){f.forEach(arcgisonline.map.symbol._surfaceItems,function(a){arcgisonline.map.symbol._repaint(a)},arcgisonline.map.symbol)},_repaint:function(a){a.getStroke&&a.setStroke&&a.setStroke(a.getStroke());a.getFill&&a.setFill&&a.setFill(a.getFill());a.children&&f.isArray(a.children)&&
f.forEach(a.children,arcgisonline.map.symbol._repaint,arcgisonline.map.symbol)}}});