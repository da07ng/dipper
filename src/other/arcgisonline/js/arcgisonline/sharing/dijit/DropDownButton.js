// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/DropDownButton",["dijit","dojo","dojox","dojo/require!arcgisonline/sharing/dijit/Button"],function(d,c,h){c.provide("arcgisonline.sharing.dijit.DropDownButton");c.require("arcgisonline.sharing.dijit.Button");c.declare("arcgisonline.sharing.dijit.DropDownButton",[arcgisonline.sharing.dijit.Button,d._Container],{baseClass:"dijitDropDownButton",templateString:'\x3cspan class\x3d"dijit dijitReset dijitLeft dijitInline"\x3e\r\n\x3c!--\r\n\x3cspan class\x3d"dijit dijitReset dijitLeft dijitInline"\r\n\tdojoAttachEvent\x3d"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\r\n\t\x3e\r\n--\x3e  \r\n  \x3cspan class\x3d\'dijitReset dijitRight dijitInline\'\r\n\t\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\t\t\x3e\x3cbutton class\x3d"dijitReset dijitStretch dijitButtonContents" \r\n\t\t\t\t${nameAttrSetting} type\x3d"${type}" value\x3d"${value}"\r\n\t\t\t\tdojoAttachPoint\x3d"focusNode,titleNode" \r\n\t\t\t\twaiRole\x3d"button" waiState\x3d"haspopup-true,labelledby-${id}_label"\r\n\t\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline" \r\n\t\t\t\t\tdojoAttachPoint\x3d"iconNode"\r\n\t\t\t\t\x3e\x3c/span\r\n\t\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"  \r\n\t\t\t\t\tdojoAttachPoint\x3d"containerNode,popupStateNode" \r\n\t\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\t\x3e\x3c/span\r\n\t\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x26thinsp;\x3c/span\r\n\t\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\t\x3e\x3c/button\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
_fillContent:function(){if(this.srcNodeRef){var a=c.query("*",this.srcNodeRef);d.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown){var a=c.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=d.byNode(a);delete this.dropDownContainer}this.dijit_popup_prepare(this.dropDown.domNode);this.inherited(arguments)}},destroyDescendants:function(){this.dropDown&&(this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onArrowClick:function(a){!this.disabled&&!this.readOnly&&this._toggleDropDown()},_onDropDownClick:function(a){(!c.isFF||!(3>c.isFF&&-1!=navigator.appVersion.indexOf("Macintosh"))||0!=a.detail||this._seenKeydown)&&this._onArrowClick(a);this._seenKeydown=!1},_onDropDownKeydown:function(a){this._seenKeydown=!0},_onDropDownBlur:function(a){this._seenKeydown=!1},_onKey:function(a){if(!this.disabled&&!this.readOnly&&a.charOrCode==c.keys.DOWN_ARROW&&(!this.dropDown||
"hidden"==this.dropDown.domNode.style.visibility))c.stopEvent(a),this._toggleDropDown()},_onBlur:function(){this._closeDropDown();this.inherited(arguments)},_toggleDropDown:function(){if(!this.disabled&&!this.readOnly){d.focus(this.popupStateNode);var a=this.dropDown;if(a)if(this._opened)this._closeDropDown();else if(a.href&&!a.isLoaded){var b=this,f=c.connect(a,"onLoad",function(){c.disconnect(f);b._openDropDown()});a.refresh()}else this._openDropDown()}},_openDropDown:function(a){var b=this.dropDown,
f=b.domNode.style.width,e=this;d.popup.open({parent:this,popup:b,around:a||this.domNode,orient:this.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onExecute:function(){e._closeDropDown(!0)},onCancel:function(){e._closeDropDown(!0)},onClose:function(){b.domNode.style.width=f;e.popupStateNode.removeAttribute("popupActive");e._opened=!1}});if(this.domNode.offsetWidth>b.domNode.offsetWidth){a=null;if(!this.isLeftToRight()){a=b.domNode.parentNode;var g=a.offsetLeft+
a.offsetWidth}c.marginBox(b.domNode,{w:this.domNode.offsetWidth});a&&(a.style.left=g-this.domNode.offsetWidth+"px")}this.popupStateNode.setAttribute("popupActive","true");this._opened=!0;b.focus&&b.focus()},_closeDropDown:function(a){this._opened&&(d.popup.close(this.dropDown),a&&this.focus(),this._opened=!1)},_layoutHack:function(){if(2==c.isFF&&!this._layoutHackHandle){var a=this.domNode,b=a.style.opacity;a.style.opacity="0.999";this._layoutHackHandle=setTimeout(c.hitch(this,function(){this._layoutHackHandle=
null;a.style.opacity=b}),0)}},dijit_popup_prepare:function(a){var b=a.style;b.visibility="hidden";b.position="absolute";b.top="-9999px";"none"==b.display&&(b.display="");c.body().appendChild(a)}})});