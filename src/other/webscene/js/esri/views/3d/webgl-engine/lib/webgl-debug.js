// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define([],function(){function x(a){if(null==k){k={};for(var c in a)"number"==typeof a[c]&&(k[a[c]]=c)}}function y(){if(null==k)throw"WebGLDebugUtils.init(ctx) not called";}function m(a){y();var c=k[a];return void 0!==c?c:"*UNKNOWN WebGL ENUM (0x"+a.toString(16)+")"}function n(a,c,e){a=B[a];return void 0!==a&&a[c]?m(e):null===e?"null":void 0===e?"undefined":e.toString()}function z(a,c,e){a.__defineGetter__(e,function(){return c[e]});a.__defineSetter__(e,function(a){c[e]=a})}function A(a){var c=a.getParameter(a.MAX_VERTEX_ATTRIBS),
e=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e);for(var d=0;d<c;++d)a.disableVertexAttribArray(d),a.vertexAttribPointer(d,4,a.FLOAT,!1,0,0),a.vertexAttrib1f(d,0);a.deleteBuffer(e);c=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(d=0;d<c;++d)a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_CUBE_MAP,null),a.bindTexture(a.TEXTURE_2D,null);a.activeTexture(a.TEXTURE0);a.useProgram(null);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);
a.bindRenderbuffer(a.RENDERBUFFER,null);a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.DITHER);a.disable(a.SCISSOR_TEST);a.blendColor(0,0,0,0);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.clearColor(0,0,0,0);a.clearDepth(1);a.clearStencil(-1);a.colorMask(!0,!0,!0,!0);a.cullFace(a.BACK);a.depthFunc(a.LESS);a.depthMask(!0);a.depthRange(0,1);a.frontFace(a.CCW);a.hint(a.GENERATE_MIPMAP_HINT,a.DONT_CARE);a.lineWidth(1);a.pixelStorei(a.PACK_ALIGNMENT,4);a.pixelStorei(a.UNPACK_ALIGNMENT,
4);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);a.UNPACK_COLORSPACE_CONVERSION_WEBGL&&a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.BROWSER_DEFAULT_WEBGL);a.polygonOffset(0,0);a.sampleCoverage(1,!1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilMask(4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.viewport(0,0,a.canvas.width,a.canvas.height);for(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.getError(););
}var B={enable:{"0":!0},disable:{"0":!0},getParameter:{"0":!0},drawArrays:{"0":!0},drawElements:{"0":!0,2:!0},createShader:{"0":!0},getShaderParameter:{1:!0},getProgramParameter:{1:!0},getVertexAttrib:{1:!0},vertexAttribPointer:{2:!0},bindTexture:{"0":!0},activeTexture:{"0":!0},getTexParameter:{"0":!0,1:!0},texParameterf:{"0":!0,1:!0},texParameteri:{"0":!0,1:!0,2:!0},texImage2D:{"0":!0,2:!0,6:!0,7:!0},texSubImage2D:{"0":!0,6:!0,7:!0},copyTexImage2D:{"0":!0,2:!0},copyTexSubImage2D:{"0":!0},generateMipmap:{"0":!0},
bindBuffer:{"0":!0},bufferData:{"0":!0,2:!0},bufferSubData:{"0":!0},getBufferParameter:{"0":!0,1:!0},pixelStorei:{"0":!0,1:!0},readPixels:{4:!0,5:!0},bindRenderbuffer:{"0":!0},bindFramebuffer:{"0":!0},checkFramebufferStatus:{"0":!0},framebufferRenderbuffer:{"0":!0,1:!0,2:!0},framebufferTexture2D:{"0":!0,1:!0,2:!0},getFramebufferAttachmentParameter:{"0":!0,1:!0,2:!0},getRenderbufferParameter:{"0":!0,1:!0},renderbufferStorage:{"0":!0,1:!0},clear:{"0":!0},depthFunc:{"0":!0},blendFunc:{"0":!0,1:!0},blendFuncSeparate:{"0":!0,
1:!0,2:!0,3:!0},blendEquation:{"0":!0},blendEquationSeparate:{"0":!0,1:!0},stencilFunc:{"0":!0},stencilFuncSeparate:{"0":!0,1:!0},stencilMaskSeparate:{"0":!0},stencilOp:{"0":!0,1:!0,2:!0},stencilOpSeparate:{"0":!0,1:!0,2:!0,3:!0},cullFace:{"0":!0},frontFace:{"0":!0}},k=null;return{init:x,mightBeEnum:function(a){y();return void 0!==k[a]},glEnumToString:m,glFunctionArgToString:n,glFunctionArgsToString:function(a,c){for(var e="",d=0;d<c.length;++d)e+=(0==d?"":", ")+n(a,d,c[d]);return e},makeDebugContext:function(a,
c,e){function d(a,f){return function(){e&&e(f,arguments);var d=a[f].apply(a,arguments),p=a.getError();0!=p&&(q[p]=!0,c(p,f,arguments));return d}}x(a);c=c||function(a,d,c){for(var e="",l=0;l<c.length;++l)e+=(0==l?"":", ")+n(d,l,c[l]);a="WebGL error "+m(a)+" in "+d+"("+e+")";window.console&&window.console.error?window.console.error(a):window.console&&window.console.log&&window.console.log(a)};var q={},r={},s;for(s in a)"function"==typeof a[s]?r[s]=d(a,s):z(r,a,s);r.getError=function(){for(var d in q)if(q.hasOwnProperty(d)&&
q[d])return q[d]=!1,d;return a.NO_ERROR};return r},makeLostContextSimulatingCanvas:function(a){function c(a){return"function"==typeof a?a:function(b){a.handleEvent(b)}}function e(){for(var a=Object.keys(t),b=0;b<a.length;++b)delete t[a]}function d(){++u;g||n==u&&a.loseContext()}function q(a,b){var c=a[b];return function(){d();if(!g)return c.apply(a,arguments)}}function r(a){return{statusMessage:a,preventDefault:function(){v=!0}}}function s(a){for(var b in a)"function"==typeof a[b]?f[b]=q(a,b):z(f,
a,b);f.getError=function(){d();if(!g)for(var a;a=h.getError();)t[a]=!0;for(a in t)if(t[a])return delete t[a],a;return f.NO_ERROR};var c="createBuffer createFramebuffer createProgram createRenderbuffer createShader createTexture".split(" ");for(b=0;b<c.length;++b){var e=c[b];f[e]=function(b){return function(){d();if(g)return null;var c=b.apply(a,arguments);c.__webglDebugContextLostId__=l;m.push(c);return c}}(a[e])}c="getActiveAttrib getActiveUniform getBufferParameter getContextAttributes getAttachedShaders getFramebufferAttachmentParameter getParameter getProgramParameter getProgramInfoLog getRenderbufferParameter getShaderParameter getShaderInfoLog getShaderSource getTexParameter getUniform getUniformLocation getVertexAttrib".split(" ");
for(b=0;b<c.length;++b)e=c[b],f[e]=function(b){return function(){d();return g?null:b.apply(a,arguments)}}(f[e]);c="isBuffer isEnabled isFramebuffer isProgram isRenderbuffer isShader isTexture".split(" ");for(b=0;b<c.length;++b)e=c[b],f[e]=function(b){return function(){d();return g?!1:b.apply(a,arguments)}}(f[e]);f.checkFramebufferStatus=function(b){return function(){d();return g?f.FRAMEBUFFER_UNSUPPORTED:b.apply(a,arguments)}}(f.checkFramebufferStatus);f.getAttribLocation=function(b){return function(){d();
return g?-1:b.apply(a,arguments)}}(f.getAttribLocation);f.getVertexAttribOffset=function(b){return function(){d();return g?0:b.apply(a,arguments)}}(f.getVertexAttribOffset);f.isContextLost=function(){return g};return f}var h,f,k=[],p=[];f={};var l=1,g=!1,m=[],n=0,u=0,v=!1,w=0,t={};a.getContext=function(c){return function(){var b=c.apply(a,arguments);if(b instanceof WebGLRenderingContext){if(b!=h){if(h)throw"got different context";h=b;f=s(h)}return f}return b}}(a.getContext);(function(a){var b=a.addEventListener;
a.addEventListener=function(d,e,f){switch(d){case "webglcontextlost":k.push(c(e));break;case "webglcontextrestored":p.push(c(e));break;default:b.apply(a,arguments)}}})(a);a.loseContext=function(){if(!g){g=!0;n=0;for(++l;h.getError(););e();t[h.CONTEXT_LOST_WEBGL]=!0;var c=r("context lost"),b=k.slice();setTimeout(function(){for(var d=0;d<b.length;++d)b[d](c);0<=w&&setTimeout(function(){a.restoreContext()},w)},0)}};a.restoreContext=function(){g&&p.length&&setTimeout(function(){if(!v)throw"can not restore. webglcontestlost listener did not call event.preventDefault";
for(var a=0;a<m.length;++a){var b=m[a];b instanceof WebGLBuffer?h.deleteBuffer(b):b instanceof WebGLFramebuffer?h.deleteFramebuffer(b):b instanceof WebGLProgram?h.deleteProgram(b):b instanceof WebGLRenderbuffer?h.deleteRenderbuffer(b):b instanceof WebGLShader?h.deleteShader(b):b instanceof WebGLTexture&&h.deleteTexture(b)}A(h);g=!1;u=0;v=!1;for(var a=p.slice(),b=r("context restored"),c=0;c<a.length;++c)a[c](b)},0)};a.loseContextInNCalls=function(a){if(g)throw"You can not ask a lost contet to be lost";
n=u+a};a.getNumCalls=function(){return u};a.setRestoreTimeout=function(a){w=a};return a},resetToInitialState:A}});