// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("../../core/declare dojo/_base/lang dojo/_base/array ../../core/Accessor ../../geometry/support/jsonUtils ./SpatialRelationship".split(" "),function(n,p,q,r,s,d){var f=n(r,{declaredClass:"esri.tasks.Query",spatialRelationship:d.SPATIAL_REL_INTERSECTS,text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,maxAllowableOffset:null,multipatchOption:null,num:null,start:null,orderByFields:null,outSpatialReference:null,
outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(c){try{throw Error("toJson is deprecated, use toJSON instead");}catch(a){console.warn(a.stack)}return this.toJSON(c)},
toJSON:function(c){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,returnM:this.returnM},b=c&&c.geometry||this.geometry,d=this.objectIds,g=this.outFields,e=this.outSpatialReference,h=this.groupByFieldsForStatistics,k=this.orderByFields,l=this.outStatistics;c=this.distance;b&&(a.geometry=b,a.geometryType=s.getJsonType(b),a.inSR=b.spatialReference.wkid||
JSON.stringify(b.spatialReference.toJSON()));d&&(a.objectIds=d.join(","));g&&(a.outFields=g.join(","));this.returnDistinctValues&&(a.returnDistinctValues=!0);h&&(a.groupByFieldsForStatistics=h.join(","));k&&(a.orderByFields=k.join(","));if(l){var m=[];q.forEach(l,function(a){m.push(a.toJSON())});a.outStatistics=JSON.stringify(m)}e?a.outSR=e.wkid||JSON.stringify(e.toJSON()):b&&(a.outSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON()));b=this.timeExtent;a.time=b?b.toJSON().join(","):
null;if((b=this.relationParam)&&this.spatialRelationship===f.SPATIAL_REL_RELATION)a.relationParam=b;c&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),a.units=this._units.meters));this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1\x3d1"));this.hasOwnProperty("num")&&(a.resultRecordCount=this.num);a.pixelSize=
this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=JSON.stringify(this.quantizationParameters));a._ts=this._ts;return a}});p.mixin(f,d);return f});