// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/sharing/dijit/dialog/templates/PasswordPolicyDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv class\x3d"${baseClass}" id\x3d"password-policy-dialog" data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.dialogTitle}" execute\x3d""\x3e\r\n    \x3cdiv class\x3d"section"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_policyDesc"\x3e${i18n.policyDesc}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"section"\x3e\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cspan style\x3d"display:none;"\x3e\r\n          \x3cinput type\x3d"checkbox" id\x3d"enable-password-length" data-dojo-attach-point\x3d"_enableLength" data-dojo-type\x3d"dijit/form/CheckBox" checked\x3d"true" disabled\x3d"true"\x3e\r\n        \x3c/span\x3e\r\n        \x3clabel for\x3d"enable-password-length"\x3e${i18n.isAtLeast}\x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"smallInt" id\x3d"password-length" data-dojo-attach-point\x3d"_passwordLength" data-dojo-type\x3d"dijit/form/TextBox"\x3e\r\n        \x3clabel for\x3d"enable-password-length"\x3e${i18n.charsLong}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-letter" data-dojo-attach-point\x3d"_enableLetter" data-dojo-type\x3d"dijit/form/CheckBox"\r\n            data-dojo-attach-event\x3d"onClick:onMinLetterClick"\x3e\r\n        \x3clabel for\x3d"enable-letter"\x3e${i18n.containsLetter}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-upper-case" data-dojo-attach-point\x3d"_enableUpperCase" data-dojo-type\x3d"dijit/form/CheckBox"\x3e\r\n        \x3clabel for\x3d"enable-upper-case"\x3e${i18n.containsUpperCase}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-lower-case" data-dojo-attach-point\x3d"_enableLowerCase" data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-event\x3d"onChange:onCasingChange"\x3e\r\n        \x3clabel for\x3d"enable-lower-case"\x3e${i18n.containsLowerCase}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-number" data-dojo-attach-point\x3d"_enableNumber" data-dojo-type\x3d"dijit/form/CheckBox"\x3e\r\n        \x3clabel for\x3d"enable-number"\x3e${i18n.containsNumber}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-special" data-dojo-attach-point\x3d"_enableSpecial" data-dojo-type\x3d"dijit/form/CheckBox"\x3e\r\n        \x3clabel for\x3d"enable-special" data-dojo-attach-point\x3d"_specialCharsLabel"\x3e\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"section"\x3e\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-password-expire" data-dojo-attach-point\x3d"_enableExpire"\r\n               data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:onExpireChange"\x3e\r\n        \x3clabel for\x3d"enable-password-expire"\x3e${i18n.passwordExpires}\x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"smallInt" id\x3d"password-days" data-dojo-attach-point\x3d"_expirationDays" data-dojo-type\x3d"dijit/form/TextBox"\x3e\r\n        \x3clabel for\x3d"enable-password-expire"\x3e${i18n.days}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"pwdOption"\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"enable-password-history" data-dojo-attach-point\x3d"_enableHistory"\r\n               data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:onHistoryChange"\x3e\r\n        \x3clabel for\x3d"enable-password-history"\x3e${i18n.numPrevPasswords}\x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"smallInt" id\x3d"password-history-num" data-dojo-attach-point\x3d"_numHistory" data-dojo-type\x3d"dijit/form/TextBox"\x3e\r\n        \x3clabel for\x3d"enable-password-history"\x3e${i18n.passwords}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"buttonBar esriFloatTrailing"\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"calcite primary" data-dojo-attach-point\x3d"_okBtn"\r\n              data-dojo-attach-event\x3d"onClick:onOk" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.setPasswordPolicy}\r\n      \x3c/button\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_cancelBtn"\r\n              data-dojo-attach-event\x3d"onClick:onCancel" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("arcgisonline/sharing/dijit/dialog/PasswordPolicyDlg","require dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/sniff dojo/i18n dojo/string dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/Tooltip dijit/form/Button dijit/form/CheckBox dijit/form/TextBox esri/lang esri/request arcgisonline/sharing/util arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/text!./templates/PasswordPolicyDlg.html".split(" "),
function(k,l,d,u,g,v,c,w,h,x,f,m,n,p,q,y,r,z,A,B,C,D,e,s,t){return l([n,p,q],{declaredClass:"arcgisonline.sharing.dijit.dialog.PasswordPolicyDlg",basePath:k.toUrl("arcgisonline/sharing/dijit/dialog"),baseClass:"esriPwdPolicyDlg",widgetsInTemplate:!0,templateString:t,statics:{_instance:null,getInstance:function(){null===this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.PasswordPolicyDlg);return this._instance}},policyAPI:"portals/self/securitypolicy",policyUpdateAPI:"/update",policy:null,
tooltips:[],valueOne:"1",valueNinety:"90",valueFive:"5",postMixInProperties:function(){this.inherited(arguments);this.i18n={};d.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").common);d.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").passwordPolicyDlg)},postCreate:function(){this.inherited(arguments);this._generalDlg=s.prototype.statics.getInstance()},show:function(a){a&&(this.policy=a);this._initUI()},hide:function(){this._dialog.hide()},onCancel:function(){this.hide()},
onOk:function(){this._okBtn.set("disabled",!0);if(this._validValues()){var a=this._readValues();e.request({url:e.getSecureUrl(esriGeowConfig.restBaseUrl)+this.policyAPI+this.policyUpdateAPI,form:a},{usePost:!0}).then(d.hitch(this,function(a){a&&!a.code&&!a.messageCode?(this._okBtn.set("disabled",!1),this._generalDlg.show({title:this.i18n.notice,message:this.i18n.policyUpdated}),m.publish("password-policy-change",[]),this.hide()):(console.log("password policy update error",a),this._okBtn.set("disabled",
!1),this._generalDlg.show({title:this.i18n.notice,message:this.i18n.errors.cantSave}))}),d.hitch(this,function(a){console.log("unexpected password policy update error",a);this._okBtn.set("disabled",!1);this._generalDlg.show({title:this.i18n.notice,message:this.i18n.errors.cantSave})}))}else this._okBtn.set("disabled",!1)},_initUI:function(){this._clear();this.policy?(this._setValues(),this._dialog.show()):e.request({url:e.getSecureUrl(esriGeowConfig.restBaseUrl)+this.policyAPI}).then(d.hitch(this,
function(a){a&&!a.code&&!a.messageCode?(this.policy=a,this._setValues(),this._dialog.show()):(console.log("retrieve password policy error",a),this._generalDlg.show({title:this.i18n.notice,message:this.i18n.cantRetrieve}))}))},_clear:function(){e.isPortal()&&g.set(this._policyDesc,"innerHTML",this.i18n.policyPortalDesc);this._enableLength.set("checked",!0);this._enableLetter.set("checked",!1);this._enableUpperCase.set("checked",!1);this._enableLowerCase.set("checked",!1);this._enableNumber.set("checked",
!1);this._enableSpecial.set("checked",!1);this._enableExpire.set("checked",!1);this._enableHistory.set("checked",!1);this._passwordLength.set("value","");this._expirationDays.set("value","");this._numHistory.set("value","");this._initTooltips()},_initTooltips:function(){if(0===this.tooltips.length){var a=esri.substitute({startSpan:'\x3cspan id\x3d"special-chars-span" class\x3d"tooltipText"\x3e',endSpan:"\x3c/span\x3e"},this.i18n.containsSpecialChars);g.set(this._specialCharsLabel,"innerHTML",a);this.tooltips.push(new r({label:'\x3cdiv style\x3d"max-width:300px;"\x3e'+
this.i18n.specialCharsTooltip+"\x3c/div\x3e",connectId:["special-chars-span"],id:"tooltip_special-chars-span",showDelay:200}))}},_setValues:function(){var a=this.policy.passwordPolicy;a.minLength&&(this._enableLength.set("checked",!0),this._passwordLength.set("value",a.minLength));a.minLetter&&this._enableLetter.set("checked",!0);a.minUpper?(this._enableLetter.set("checked",!0),this._enableUpperCase.set("checked",!0)):this._enableLetter.get("checked")?this._enableUpperCase.set("disabled",!1):this._enableUpperCase.set("disabled",
!0);a.minLower?(this._enableLetter.set("checked",!0),this._enableLowerCase.set("checked",!0)):this._enableLetter.get("checked")?this._enableLowerCase.set("disabled",!1):this._enableLowerCase.set("disabled",!0);a.minDigit&&this._enableNumber.set("checked",!0);a.minOther&&this._enableSpecial.set("checked",!0);a.expirationInDays?(this._enableExpire.set("checked",!0),this._expirationDays.set("value",a.expirationInDays),this._expirationDays.set("disabled",!1)):(this._enableExpire.set("checked",!1),this._expirationDays.set("value",
this.valueNinety),this._expirationDays.set("disabled",!0));a.historySize?(this._enableHistory.set("checked",!0),this._numHistory.set("value",a.historySize)):(this._enableHistory.set("checked",!1),this._numHistory.set("value",this.valueFive),this._numHistory.set("disabled",!0))},onMinLetterClick:function(){this._enableLetter.get("checked")?(this._enableUpperCase.set("disabled",!1),this._enableLowerCase.set("disabled",!1)):(this._enableUpperCase.set("checked",!1),this._enableUpperCase.set("disabled",
!0),this._enableLowerCase.set("checked",!1),this._enableLowerCase.set("disabled",!0))},onCasingChange:function(){this._enableUpperCase.get("checked")||this._enableLowerCase.get("checked")},onExpireChange:function(){this._enableExpire.get("checked")?this._expirationDays.set("disabled",!1):this._expirationDays.set("disabled",!0)},onHistoryChange:function(){this._enableHistory.get("checked")?this._numHistory.set("disabled",!1):this._numHistory.set("disabled",!0)},_readValues:function(){var a=c.create("form",
{enctype:"multipart/form-data",method:"post"}),b;if(9>h("ie")||5>h("trident"))a.encoding="multipart/form-data";this._enableLength.get("checked")&&(b=f.trim(this._passwordLength.get("value")),c.create("input",{type:"hidden",name:"minLength",value:b},a));this._enableLetter.get("checked")&&c.create("input",{type:"hidden",name:"minLetter",value:this.valueOne},a);this._enableUpperCase.get("checked")&&c.create("input",{type:"hidden",name:"minUpper",value:this.valueOne},a);this._enableLowerCase.get("checked")&&
c.create("input",{type:"hidden",name:"minLower",value:this.valueOne},a);this._enableNumber.get("checked")&&c.create("input",{type:"hidden",name:"minDigit",value:this.valueOne},a);this._enableSpecial.get("checked")&&c.create("input",{type:"hidden",name:"minOther",value:this.valueOne},a);this._enableExpire.get("checked")&&(b=f.trim(this._expirationDays.get("value")),c.create("input",{type:"hidden",name:"expirationInDays",value:b},a));this._enableHistory.get("checked")&&(b=f.trim(this._numHistory.get("value")),
c.create("input",{type:"hidden",name:"historySize",value:b},a));return a},_validValues:function(){var a=[],b=!1,c,d,e;if(this._enableLength.get("checked"))try{c=parseInt(f.trim(this._passwordLength.get("value"))),8>c&&(b=!0,a.push(this.i18n.errors.passwordLength)),1E3<c&&(b=!0,a.push(this.i18n.errors.passwordMaxLength))}catch(g){b=!0,a.push(this.i18n.errors.passwordLength)}if(this._enableExpire.get("checked"))try{if(d=parseInt(f.trim(this._expirationDays.get("value"))),1>d||1095<d)b=!0,a.push(this.i18n.errors.passwordExpiration)}catch(h){b=
!0,a.push(this.i18n.errors.passwordExpiration)}if(this._enableHistory.get("checked"))try{if(e=parseInt(f.trim(this._numHistory.get("value"))),1>e||24<e)b=!0,a.push(this.i18n.errors.passwordHistory)}catch(k){b=!0,a.push(this.i18n.errors.passwordHistory)}return b?(this._generalDlg.show({title:this.i18n.notice,message:a.join("\x3cbr/\x3e")}),!1):!0}})});