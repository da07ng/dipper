// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/dijit/renderer/_PrecisionMixin","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dojo/dom dojo/dom-style dojo/dom-class dojo/string dojo/number esri/lang dojox/data/AndOrWriteStore".split(" "),function(l,m,g,n,p,q,r,s,h,e,t,k){return{pattern:"#,###,###,##0.######",updateValues:function(a){var b=this.renderer.infos;this.renderer.clearBreaks();g.forEach(b,function(c,d){c=this.updateMinMax(c,a,d,0===d?"first":d===b.length-1?"last":null);this.renderer.addBreak({minValue:c.minValue,
maxValue:c.maxValue,symbol:c.symbol,label:c.label})},this)},updateMinMax:function(a,b,c,d){if(esri.isDefined(b))if("percent-of-total"===this.renderer.normalizationType){if(0!==b){if(1>b){var f=e.round(1/b);a.minValue="first"===d?Math.floor(a.minValue/b)/f:e.round(a.minValue/b)/f;a.maxValue="last"===d?Math.ceil(a.maxValue/b)/f:e.round(a.maxValue/b)/f}else a.minValue="first"===d?Math.floor(a.minValue/b)*b:e.round(a.minValue/b)*b,a.maxValue="last"===d?Math.ceil(a.maxValue/b)*b:e.round(a.maxValue/b)*
b;a.label=(0<c?"\x3e ":"")+h.substitute(this.i18n.percentValue,{num:e.format(a.minValue,{pattern:this.pattern})})+" "+this.i18n.to+" "+h.substitute(this.i18n.percentValue,{num:e.format(a.maxValue,{pattern:this.pattern})})}}else 0!==b&&(1>b?(f=e.round(1/b),a.minValue="first"===d?Math.floor(a.minValue/b)/f:e.round(a.minValue/b)/f,a.maxValue="last"===d?Math.ceil(a.maxValue/b)/f:e.round(a.maxValue/b)/f):(a.minValue="first"===d?Math.floor(a.minValue/b)*b:e.round(a.minValue/b)*b,a.maxValue="last"===d?Math.ceil(a.maxValue/
b)*b:e.round(a.maxValue/b)*b),a.label=(0<c?"\x3e ":"")+e.format(a.minValue,{pattern:this.pattern})+" "+this.i18n.to+" "+e.format(a.maxValue,{pattern:this.pattern}));return a},disableOptionsBelow:function(a,b){g.forEach(a.options,function(a){var d=a.item;"select"!==d.type[0]&&parseFloat(d.name[0])<b&&(a.disabled=!0)});a.startup()},enableAllOptions:function(a){g.forEach(a.options,function(a){delete a.disabled});a.startup()},buildPrecisionsStore:function(){var a=[];a.push({name:this.i18n.selectAnOptions,
type:"select"});var b=0;g.forEach(this.renderer.infos,function(a){b=Math.max(b,this.getPrecision(a.minValue));b=Math.max(b,this.getPrecision(a.maxValue))},this);var c=Math.abs(this.renderer.infos[0].minValue-this.renderer.infos[this.renderer.infos.length-1].maxValue);1E7<c?(2E7<c&&a.push({name:"10000000",type:"10000000"}),a.push({name:"1000000",type:"1000000"}),a.push({name:"100000",type:"100000"}),a.push({name:"10000",type:"10000"}),a.push({name:"1000",type:"1000"}),a.push({name:"100",type:"100"}),
a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"})):1E6<c?(2E6<c&&a.push({name:"1000000",type:"1000000"}),a.push({name:"100000",type:"100000"}),a.push({name:"10000",type:"10000"}),a.push({name:"1000",type:"1000"}),a.push({name:"100",type:"100"}),a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"})):1E5<c?(2E5<c&&a.push({name:"100000",
type:"100000"}),a.push({name:"10000",type:"10000"}),a.push({name:"1000",type:"1000"}),a.push({name:"100",type:"100"}),a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"})):1E4<c?(2E4<c&&a.push({name:"10000",type:"10000"}),a.push({name:"1000",type:"1000"}),a.push({name:"100",type:"100"}),a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"})):
1E3<c?(2E3<c&&a.push({name:"1000",type:"1000"}),a.push({name:"100",type:"100"}),a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"}),3<b&&a.push({name:"0.001",type:"0.001"})):100<c?(200<c&&a.push({name:"100",type:"100"}),a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"}),3<b&&a.push({name:"0.001",type:"0.001"}),4<b&&a.push({name:"0.0001",
type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"})):10<c?(20<c&&a.push({name:"10",type:"10"}),0<b&&a.push({name:"1",type:"1"}),1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"}),3<b&&a.push({name:"0.001",type:"0.001"}),4<b&&a.push({name:"0.0001",type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&a.push({name:"0.000001",type:"0.000001"})):1<c?(1<b&&a.push({name:"0.1",type:"0.1"}),2<b&&a.push({name:"0.01",type:"0.01"}),3<b&&a.push({name:"0.001",type:"0.001"}),
4<b&&a.push({name:"0.0001",type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&a.push({name:"0.000001",type:"0.000001"})):0.1<c?(2<b&&a.push({name:"0.01",type:"0.01"}),3<b&&a.push({name:"0.001",type:"0.001"}),4<b&&a.push({name:"0.0001",type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&a.push({name:"0.000001",type:"0.000001"})):0.01<c?(3<b&&a.push({name:"0.001",type:"0.001"}),4<b&&a.push({name:"0.0001",type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&
a.push({name:"0.000001",type:"0.000001"})):0.0010<c?(4<b&&a.push({name:"0.0001",type:"0.0001"}),5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&a.push({name:"0.000001",type:"0.000001"}),7<b&&a.push({name:"0.0000001",type:"0.0000001"})):1E-4<c?(5<b&&a.push({name:"0.00001",type:"0.00001"}),6<b&&a.push({name:"0.000001",type:"0.000001"}),7<b&&a.push({name:"0.0000001",type:"0.0000001"}),8<b&&a.push({name:"0.00000001",type:"0.00000001"})):1E-5<c&&(6<b&&a.push({name:"0.000001",type:"0.000001"}),7<b&&a.push({name:"0.0000001",
type:"0.0000001"}),8<b&&a.push({name:"0.00000001",type:"0.00000001"}),9<b&&a.push({name:"0.000000001",type:"0.000000001"}));return new k({data:{label:"name",identifier:"type",items:a}})},getPrecision:function(a){for(var b=1;Math.round(a*b)/b!==a;)b*=10;return Math.log(b)/Math.LN10}}});