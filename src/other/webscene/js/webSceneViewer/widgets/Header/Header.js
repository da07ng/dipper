// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
require({cache:{"url:webSceneViewer/widgets/Header/templates/Header.html":'\x3cdiv id\x3d"webmap-header" class\x3d"top-nav clearfix" \x3e\r\n\r\n  \x3cdiv id\x3d"header_map_home" class\x3d"esriFloatLeading gutter-right-1"\x3e\r\n    \x3cdiv id\x3d"home-navigation" class\x3d"dropdown" data-dojo-attach-point\x3d"navDropdown"\x3e\r\n      \x3ca id\x3d"homeTitle" class\x3d"top-nav-link dropdown-btn js-dropdown-toggle" data-dojo-attach-point\x3d"homeTitle"\x3e\x3c/a\x3e\r\n      \x3cdiv class\x3d"dropdown-menu"\x3e\r\n        \x3ca class\x3d"dropdown-link homeHome" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeFeatures hide" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homePlans hide" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeGallery" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeMap" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeGroups hide" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeMyContent hide" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeMyOrg hide" href\x3d""\x3e\x3c/a\x3e\r\n        \x3ca class\x3d"dropdown-link homeHelp" href\x3d""\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3ch1 id\x3d"webmap-title" class\x3d"avenir-light font-size-1 esriFloatLeading leader-1 text-ellipsis"\x3e\r\n    \x3ca id\x3d"webmap-title-text" target\x3d"_blank"\x3e\x3c/a\x3e\x3cdiv id\x3d"sceneType" class\x3d"sceneType hide"\x3e\x3c/div\x3e\r\n  \x3c/h1\x3e\r\n\r\n  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n\r\n    \x3cdiv id\x3d"header_map_newMap" class\x3d"esriFloatLeading gutter-right-1"\x3e\r\n      \x3cdiv id\x3d"new-scene-navigation" class\x3d"dropdown esriFloatTrailing" data-dojo-attach-point\x3d"newSceneDropdown"\x3e\r\n        \x3ca id\x3d"webmap-newMap" class\x3d"dropdown-btn top-nav-link" data-dojo-attach-point\x3d"newScene"\x3e\r\n          \x3cspan id\x3d"newMapLabel"\x3e\x3c/span\x3e\r\n        \x3c/a\x3e\r\n        \x3cdiv class\x3d"dropdown-menu dropdown-right"\x3e\r\n          \x3ca class\x3d"dropdown-link" id\x3d"global-scene-link" data-dojo-attach-event\x3d"click:_newGlobalSceneClickHandler" \x3eNew Global Scene!!!\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link" id\x3d"local-scene-link" data-dojo-attach-event\x3d"click:_newLocalSceneClickHandler" \x3eNew Local Scene!!!\x3c/a\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv id\x3d"header_map_modifyMap" class\x3d"esriFloatLeading esriTrailingMargin1" style\x3d"display:none;"\x3e\r\n      \x3ca id\x3d"webmap-modifyMap" class\x3d"top-nav-link" \x3e\r\n        \x3cspan id\x3d"modifyMapLabel"\x3e\x3c/span\x3e\r\n      \x3c/a\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv id\x3d"header_map_presentation" class\x3d"esriFloatLeading esriTrailingMargin1" style\x3d"display:none;"\x3e\r\n      \x3ca id\x3d"webmap-presentation" class\x3d"top-nav-link" \x3e\r\n        \x3cspan id\x3d"presentationLabel"\x3e\x3c/span\x3e\r\n      \x3c/a\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv id\x3d"header_map_signin" class\x3d"status esriFloatTrailing"\x3e\r\n\r\n       \x3c!-- Log in --\x3e\r\n      \x3cdiv id\x3d"logged-out-navigation" class\x3d"hide esriFloatTrailing esriAlignTrailing"\x3e\r\n        \x3ca id\x3d"login-link" class\x3d"top-nav-link icon-ui-user link-gray" data-dojo-attach-event\x3d"click:_signInLinkClickHandler"\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3c!-- User Menu --\x3e\r\n      \x3cdiv id\x3d"logged-in-navigation" class\x3d"dropdown hide esriFloatTrailing" data-dojo-attach-point\x3d"userDropdown"\x3e\r\n        \x3ca class\x3d"top-nav-link dropdown-btn top-nav-username text-ellipsis" data-dojo-attach-point\x3d"userProfile"\x3e\r\n          \x3cimg id\x3d"profileImgSmall" width\x3d"16" height\x3d"16" alt\x3d""\x3e\r\n          \x3cspan id\x3d"username"\x3e\x3c/span\x3e\r\n        \x3c/a\x3e\r\n        \x3cdiv class\x3d"dropdown-menu dropdown-right"\x3e\r\n          \x3ca id\x3d"profileLink" class\x3d"dropdown-link" href\x3d"#"\x3e\r\n            \x3cimg id\x3d"dropdown-image" width\x3d"32" height\x3d"32" class\x3d"gutter-right-half gutter-left-0 left"\x3e\r\n            \x3cdiv id\x3d"logged-in-myProfile" class\x3d"text-ellipsis dropdown-username"\x3e\x3c/div\x3e\r\n          \x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link dropdown-link-external hide" id\x3d"esri-community-link"  data-dojo-attach-event\x3d"click:_communityLinkClickHandler, contextmenu:_disableEvent"\x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link dropdown-link-external hide" id\x3d"my-esri-link" data-dojo-attach-event\x3d"click:_myEsriLinkClickHandler, contextmenu:_disableEvent" \x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link dropdown-link-external hide" id\x3d"esri-training-link" data-dojo-attach-event\x3d"click:_trainingLinkClickHandler, contextmenu:_disableEvent" \x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link hide" id\x3d"trial-download-link" data-dojo-attach-event\x3d"click:_trialLinkClickHandler, contextmenu:_disableEvent" \x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link loggedInHelp" id\x3d"logged-in-help"\x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link hide" id\x3d"logged-in-adminhelp" data-dojo-attach-event\x3d"click:_loggedInAdminHelpLinkClickHandler, contextmenu:_disableEvent" class\x3d"loggedInAdminHelp" \x3e\x3c/a\x3e\r\n          \x3ca class\x3d"dropdown-link" id\x3d"logged-in-signOut" data-dojo-attach-event\x3d"click:_signOutLinkClickHandler, contextmenu:_disableEvent" \x3e\x3c/a\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n'}});
define("esri/core/declare dojo/io-query dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/Header.html ./Role dojo/dom dojo/dom-class dojo/dom-attr dojo/dom-style dojo/dom-construct dojo/_base/event dojo/on dojo/query dojo/_base/window dojo/i18n!../nls/widgets".split(" "),function(u,h,v,w,x,y,t,f,d,p,z,q,k,c,m,e){function r(a){var b=f.contains(a,"is-active");c(".dropdown").removeClass("is-active");n&&n.remove();b||(f.add(a,"is-active"),n=k(document.body,"click",A.bind(null,a)))}function A(a,
b){var d=c(".dropdown-menu",a)[0];t.isDescendant(b.target||b.srcElement,d)||(f.remove(a,"is-active"),n.remove())}function B(a){var b=a=a&&a.fullName||"";-1<a.indexOf("_")?b=a.split("_")[0]:-1<a.indexOf(",")?b=a.split(",").slice(1).join(" "):-1<a.indexOf(" ")&&(b=a.split(" ")[0]);return b.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")}function l(){return"undefined"!==typeof esriGeowConfig}function s(a){if(a)return String(a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,
"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#039;").replace(/\//g,"\x26#x2F;")}var n;return u([v,w],{name:"Header",templateString:x,userProceedsToLogout:!0,websceneId:null,loggedIn:!1,viewingMode:null,sceneSR:null,_setLoggedInAttr:function(a){this._set("loggedIn",a);this._started&&this._setupHeaderLinks()},portal:null,_setPortalAttr:function(a){this._set("portal",a);a?(this.baseUrl=l()?esriGeowConfig.baseUrl:"../",this.portal.isPortal&&(this.helpUrl=a.helpBase,this.helpAdminUrl=this.helpUrl.replace("/website/",
"/admin/")),this._updateSignedInStatus(),this.own(k(a,"sign-in",function(){this.set("loggedIn",!0)}.bind(this))),this.own(k(a,"sign-out",function(){this.set("loggedIn",!1)}.bind(this))),this._showPortalUI()):this._hidePortalUI();this._setupHeaderLinkUrls()},map:null,title:null,_setTitleAttr:function(a){this._set("title",a);null==a&&(a="");d.set("webmap-title-text","textContent",a);d.set("webmap-title-text","title",a);this.portal?this.portal.isPortal?m.doc.title=this.portal.name+" - "+a:this.portal.isOrg()?
m.doc.title=a:m.doc.title="ArcGIS - "+a:m.doc.title=a},_setViewingModeAttr:function(a){this._set("viewingMode",a);"global"===a?d.set("sceneType","class",""):d.set("sceneType","class","local");this._updateSceneIconTooltip()},_setSceneSRAttr:function(a){this._set("sceneSR",a);this._updateSceneIconTooltip()},_updateSceneIconTooltip:function(){var a="";this.sceneSR&&(a=" ("+e.header.spatialRef+" "+this.sceneSR+")");"global"===this.viewingMode?(d.set("webmap-title-text","title",e.header.globalScene+a),
d.set("sceneType","title",e.header.globalScene+a)):(d.set("webmap-title-text","title",e.header.localScene+a),d.set("sceneType","title",e.header.localScene+a))},_setWebsceneIdAttr:function(a){this._set("websceneId",a);if(void 0===a||-1!==a.indexOf(".json"))d.set("webmap-title-text","class","disableLink");else{f.remove("webmap-title-text","disableLink");var b="",b="undefined"!==typeof esriGeowConfig?esriGeowConfig.baseUrl+"item.html?id\x3d"+a:this.portal.url+"/home/item.html?id\x3d"+a;d.set("webmap-title-text",
"href",b)}},constructor:function(a,b){},destroy:function(){this.inherited(arguments);z.empty(t.byId("webscene-header"))},postCreate:function(){this._hidePortalUI();c(".homeHome",this.domNode)[0].innerHTML=e.header.home_link;c(".homeFeatures",this.domNode)[0].innerHTML=e.header.features;c(".homePlans",this.domNode)[0].innerHTML=e.header.plans;c(".homeGallery",this.domNode)[0].innerHTML=e.header.gallery;c(".homeGroups",this.domNode)[0].innerHTML=e.header.groups;c(".homeMyContent",this.domNode)[0].innerHTML=
e.header.myContent;c(".homeMyOrg",this.domNode)[0].innerHTML=e.header.myAccount;c(".homeHelp",this.domNode)[0].innerHTML=e.header.support;c(".homeMap",this.domNode)[0].innerHTML=e.header.map;d.set("newMapLabel","innerHTML",e.header.newScene);d.set("global-scene-link","innerHTML",'\x3cdiv id\x3d"globe-img"\x3e\x3c/div\x3e'+e.header.newGlobal);d.set("local-scene-link","innerHTML",'\x3cdiv id\x3d"local-img"\x3e\x3c/div\x3e'+e.header.newLocal);d.set("modifyMapLabel","innerHTML",e.header.modifyMap);d.set("login-link",
"innerHTML",e.header.signIn);d.set("logged-in-signOut","innerHTML",e.header.signOut);d.set("logged-in-help","innerHTML",e.header.help);d.set("logged-in-adminhelp","innerHTML",e.header.adminGuide);d.set("esri-community-link","innerHTML",'\x3cspan class\x3d"icon-ui-link-external dropdown-link-external-icon"\x3e\x3c/span\x3e'+e.header.esriCommunity);d.set("my-esri-link","innerHTML",'\x3cspan class\x3d"icon-ui-link-external dropdown-link-external-icon"\x3e\x3c/span\x3e'+e.header.myEsri+"\x26nbsp;\x26nbsp;");
d.set("esri-training-link","innerHTML",'\x3cspan class\x3d"icon-ui-link-external dropdown-link-external-icon"\x3e\x3c/span\x3e'+e.header.training+"\x26nbsp;\x26nbsp;");d.set("trial-download-link","innerHTML",e.header.trialDownloads+"\x26nbsp;\x26nbsp;");k(this.homeTitle,"click",function(a){q.stop(a);r(this.navDropdown)}.bind(this));k(this.userProfile,"click",function(a){q.stop(a);r(this.userDropdown)}.bind(this));k(this.newScene,"click",function(a){q.stop(a);r(this.newSceneDropdown)}.bind(this))},
_showPortalUI:function(){p.set("header_map_home","display","")},_hidePortalUI:function(){p.set("header_map_home","display","none")},_setupHeaderLinks:function(){var a=this.portal.isPortal,b=this.portal.isSignedIn(),h=this.portal.isOrg(),g=this.portal.getPortalUser(),g=b&&g;!a&&(this.portal.user&&this.portal.user.role)&&(this.portal.userRole=new y({id:this.portal.user.roleId?this.portal.user.roleId:this.portal.user.role,role:this.portal.user.role}),this.portal.user.privileges&&this.portal.userRole.setPrivileges(this.portal.user.privileges));
if(b){d.set("username","textContent",B(g));d.set("username","title",s(g.fullName));d.set("logged-in-myProfile","innerHTML",e.header.myProfile+"\x3cbr/\x3e"+s(g.username));d.set("logged-in-myProfile","title",s(g.fullName));var k;k=null!==g.thumbnail&&null!==g.thumbnailUrl?g.thumbnailUrl:"../js/arcgisonline/css/images/no-user-thumb.jpg";d.set("dropdown-image","src",k);d.set("profileImgSmall","src",k)}a||h?(f.remove("homeTitle","site_logo top-nav-title"),f.add("homeTitle","top-nav-link"),d.set("homeTitle",
"innerHTML",e.header.simpleHome)):(f.add("homeTitle","site_logo top-nav-title"),f.remove("homeTitle","top-nav-link"),d.set("homeTitle","innerHTML","Arc\x3cspan\x3eGIS\x3c/span\x3e"));a||h?c(".homeFeatures",this.domNode).addClass("hide"):c(".homeFeatures",this.domNode).removeClass("hide");a||h?c(".homePlans",this.domNode).addClass("hide"):c(".homePlans",this.domNode).removeClass("hide");b?c(".homeHelp",this.domNode).addClass("hide"):c(".homeHelp",this.domNode).removeClass("hide");b&&this.portal.userHasEditingPrivileges()?
c(".homeMyContent",this.domNode).removeClass("hide"):c(".homeMyContent",this.domNode).addClass("hide");b?c(".homeGroups",this.domNode).removeClass("hide"):c(".homeGroups",this.domNode).addClass("hide");b&&(h||a)?l()&&esriGeowConfig.restrictOrganizationPageToAdmin&&g.role&&"account_admin"!==g.role?c(".homeMyOrg",this.domNode).addClass("hide"):c(".homeMyOrg",this.domNode).removeClass("hide"):c(".homeMyOrg",this.domNode).addClass("hide");b?c("#header_map_newMap").removeClass("hide"):c("#header_map_newMap").addClass("hide");
b?f.add("logged-out-navigation","hide"):f.remove("logged-out-navigation","hide");b?f.remove("logged-in-navigation","hide"):f.add("logged-in-navigation","hide");a&&"org_admin"===g.role?f.remove("logged-in-adminhelp","hide"):f.add("logged-in-adminhelp","hide");!a&&b&&("both"===g.userType&&(f.remove("esri-community-link","hide"),f.remove("my-esri-link","hide")),f.remove("esri-training-link","hide"),this.portal.subscriptionInfo&&"Trial"===this.portal.subscriptionInfo.type&&f.remove("trial-download-link",
"hide"));this._setupHeaderLinkUrls()},_setupHeaderLinkUrls:function(){c(".homeHome",this.domNode)[0].href=this.portal.getHomeLink();c(".homeFeatures",this.domNode)[0].href=this.portal.getFeaturesLink();c(".homePlans",this.domNode)[0].href=this.portal.getPlansLink();c(".homeGallery",this.domNode)[0].href=this.portal.getGalleryLink();c(".homeMap",this.domNode)[0].href=this._homeMapLink();c(".homeGroups",this.domNode)[0].href=this.portal.getGroupsLink();c(".homeMyContent",this.domNode)[0].href=this.portal.getMyContentLink();
c(".homeMyOrg",this.domNode)[0].href=this.portal.getMyOrgLink();c(".homeHelp",this.domNode)[0].href=this._loggedInHelpLink();c(".loggedInHelp",this.domNode)[0].href=this._loggedInHelpLink();c("#profileLink",this.domNode)[0].href=this.portal.getProfileLink()},_disableEvent:function(a){a.preventDefault();return!1},_signInLinkClickHandler:function(a){a.preventDefault();this.portal.signIn()},_signOutLinkClickHandler:function(a){this.emit("before-sign-out");this.userProceedsToLogout?(a.preventDefault(),
this.portal.signOut().then(function(){l()&&(document.location.href=esriGeowConfig.baseUrl)})):this.userProceedsToLogout=!0},_homeMapLink:function(){var a=window.location.href.replace("/webscene/","/webmap/"),b=a.indexOf("?"),b=-1===b?a.length:b;return a.substr(0,b)},_communityLinkClickHandler:function(a){a.preventDefault();a=l()&&esriGeowConfig.esriCommunityLink;window.open(a,"_blank")},_myEsriLinkClickHandler:function(a){a.preventDefault();a=l()&&esriGeowConfig.myEsriLink;window.open(a,"_blank")},
_trainingLinkClickHandler:function(a){a.preventDefault();a=this.portal.userRole;var b;a?a.isAdmin()||a.isBasedOnAdmin()?b="//www.esri.com/training/main/arcgis-online-training/administrators":a.isPublisher()||a.isBasedOnPublisher()?b="//www.esri.com/training/main/arcgis-online-training/publishers":a.isUser()||a.isBasedOnUser()?b="//www.esri.com/training/main/arcgis-online-training/users":a.isCustom()&&(b="//www.esri.com/training/main/arcgis-online-training"):b="//www.esri.com/training/main/arcgis-online-training";
window.open(b,"_blank")},_trialLinkClickHandler:function(a){a.preventDefault();a=this.portal.user&&this.portal.user.culture||this.portal&&this.portal.culture||dojoConfig.locale||"en";var b=a.split("-")[0].toLowerCase();"pt"==b?b="pt-br"==a.toLowerCase()?"pt-BR":"pt-PT":"zh"==b&&(b="zh-CN");window.open("https://learn.arcgis.com/"+b+"/trial","_blank")},_loggedInHelpLink:function(a){return this.portal&&!this.portal.isPortal?this.portal.helpBase:this.helpUrl},_loggedInAdminHelpLinkClickHandler:function(a){a.preventDefault();
a=this.portal.getloggedInAdminHelpLink();window.open(a,"_blank")},_modifyMapClickHandler:function(a){a.preventDefault();p.set("header_map_modifyMap","display","none");this.emit("modify-scene",{})},_newSceneClickHandler:function(a){a.preventDefault();a=h.queryToObject(window.location.search.replace(/^\?/,""));delete a.webscene;delete a.url;delete a.layers;a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+decodeURIComponent(h.objectToQuery(a));window.location=a},_newGlobalSceneClickHandler:function(a){a.preventDefault();
a=h.queryToObject(window.location.search.replace(/^\?/,""));delete a.webscene;delete a.url;delete a.layers;delete a.viewingmode;delete a.viewpoint;a=decodeURIComponent(h.objectToQuery(a));window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+a+(""===a?"":"\x26")+"viewingmode\x3dglobal"},_newLocalSceneClickHandler:function(a){a.preventDefault();a=h.queryToObject(window.location.search.replace(/^\?/,""));delete a.webscene;delete a.url;delete a.layers;delete a.viewingmode;
delete a.viewpoint;a=decodeURIComponent(h.objectToQuery(a));window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+a+(""===a?"":"\x26")+"viewingmode\x3dlocal"},_updateSignedInStatus:function(){null!=this.portal&&this.portal.isSignedIn()?this.set("loggedIn",!0):this.set("loggedIn",!1)}})});