// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/SiteFooter",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util,arcgisonline/sharing/geow/Account,arcgisonline/sharing/geow/Geow"],function(h,a,p){a.provide("arcgisonline.sharing.dijit.SiteFooter");a.require("dijit._Widget");a.require("dijit._Templated");a.require("arcgisonline.sharing.util");a.require("arcgisonline.sharing.geow.Account");a.require("arcgisonline.sharing.geow.Geow");a.declare("arcgisonline.sharing.dijit.SiteFooter",
[h._Widget,h._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"footer"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e  \r\n\x3c/div\x3e',id:"",geow:arcgisonline.sharing.geow.Geow,isSignInPage:!1,isTroubleshootPage:!1,postMixInProperties:function(){this.inherited(arguments);this.i18n=a.mixin({},a.i18n.getLocalization("arcgisonline",
"arcgisonline").common);a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").siteFooter);a.mixin(this.i18n,{help:a.i18n.getLocalization("arcgisonline","arcgisonline").supportPage.helpLabel})},postCreate:function(){var a=window.location.pathname.toLowerCase();this.isSignInPage=-1!==a.indexOf(esriGeowConfig.signin);this.isTroubleshootPage=-1!==a.indexOf("troubleshoot.html")},startup:function(){this._loadLinks()},refresh:function(){a.destroy(this.id+"_links");a.create("span",{id:this.id+
"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()},_loadLinks:function(){arcgisonline.sharing.geow.Account.getSelf(a.hitch(this,function(c){var g=arcgisonline.sharing.util.getUser(),e=document.location.href;-1<e.indexOf("?useExisting\x3d1")&&(e=e.substring(0,e.length-14));var m=!1;-1<e.indexOf("viewer.html")&&-1===e.indexOf("returnUrl")&&(m=!0);var k=a.byId(this.id+"_links"),l=null;a.forEach(esriGeowConfig.footerLinks,function(b){var d=b&&"ArcGIS Marketplace"===b.title&&!g;l&&!d&&
a.place(l,k,"last");var f=this._getTitle(b.title);b.url?(-1===b.url.indexOf("http")&&m&&(b.url="support.html"===b.url?c.helpBase||esriGeowConfig.baseUrl+b.url:esriGeowConfig.baseUrl+b.url),("${i18n.help}"===b.title||"support.html"===b.url)&&(this.isSignInPage||this.isTroubleshootPage)&&!g&&!c.id&&c.urlKey&&c.access&&"private"===c.access&&!c.isPortal?b.url=c.helpBase:"support.html"===b.url&&!c.isPortal&&(b.url=c.helpBase),"ArcGIS Marketplace"===b.title&&(b.url=esriGeowConfig.marketplaceUrl),f=a.create("a",
{href:b.url,target:"_blank",innerHTML:f}),d||a.place(f,k,"last")):"contactUs"===b.type?(d="mailto:"+b.email,d+="?subject\x3d"+esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},"A comment about ${appTitle}"),d+="\x26body\x3d"+esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com",referringPage:escape(e)},"I have the following comment about the ${appTitle} Web site. %0AReferring page: ${referringPage} %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"),
f=a.create("a",{id:this.id+"_contactEsri",href:d,innerHTML:f}),a.place(f,k,"last")):"reportAbuse"===b.type&&(d="mailto:"+b.email+"?subject\x3dConcerns about an item",d+="\x26body\x3d"+esri.substitute({referringPage:escape(e)},"I have concerns about the following. %0AReferring page: ${referringPage} %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)"),
f=a.create("a",{href:d,innerHTML:f}),a.place(f,k,"last"));l=m?a.create("span",{innerHTML:"\x26nbsp;. "}):a.create("span",{innerHTML:"\x26nbsp;\x26nbsp;|\x26nbsp;\x26nbsp;"})},this);if(esri.isDefined(c.portalProperties)&&esri.isDefined(c.portalProperties.links)&&esri.isDefined(c.portalProperties.links.contactUs)&&c.portalProperties.links.contactUs.visible&&!a.byId(this.id+"_customContactUs")){var h=a.create("a",{href:c.portalProperties.links.contactUs.url,innerHTML:this.i18n.customContactUs,id:this.id+
"_customContactUs"}),n=a.byId(this.id+"_contactEsri");esri.isDefined(n)?(a.place(h,n,"after"),a.place(l,n,"after")):(0<esriGeowConfig.footerLinks.length&&a.place(l,k,"last"),a.place(h,k,"last"))}}))},_getTitle:function(a){for(var g=a.indexOf("${");-1<g;){var e=a.indexOf("}",g),h=a.substring(g+2,e);a=a.substring(0,g)+eval("this."+h)+a.substring(e+1,a.length);g=a.indexOf("${")}return a}})});