// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("dojo/io/script dojo/io-query esri/geometry/Point esri/Viewpoint esri/Camera esri/geometry/SpatialReference".split(" "),function(l,f,m,n,p,g){var k={viewpointFromUrlParameter:function(b){var a=b.split(";"),d=null;if(0<a.length){var c="";b="";for(var e=0;e<a.length;e++)-1!==a[e].indexOf("cam:")?c=a[e]:b=a[e];if(""!==c&&(c=c.substr(4,c.length-4),a=c.split(","),3<=a.length)){var e=c=d=0,d=parseFloat(a[0]),c=parseFloat(a[1]),e=parseFloat(a[2]),h=g.WGS84;4===a.length&&(h=new g(parseInt(a[3],10)));
a=new m(d,c,e,h);c=d=0;""!==b&&(b=b.split(","),0<=b.length&&(d=parseFloat(b[0]),1<b.length&&(c=parseFloat(b[1]))));d=new n({targetGeometry:void 0,scale:void 0,rotation:void 0,camera:new p({position:a,heading:d,tilt:c})})}}return d},viewpointToUrlParameter:function(b,a,d){var c=b;d=d?d:!1;b=-1===b.indexOf("?")?"?":"\x26";c+=b+"viewpoint\x3dcam:";b=a.position.spatialReference.isWebMercator()&&!d?a.position.longitude:a.position.x;b=Math.round(1E8*b)/1E8;var e=a.position.spatialReference.isWebMercator()&&
!d?a.position.latitude:a.position.y,e=Math.round(1E8*e)/1E8,h=Math.round(1E3*a.position.z)/1E3,f=Math.round(1E3*a.heading)/1E3,g=Math.round(1E3*a.tilt)/1E3;a=a.position.spatialReference.isWebMercator()&&!d?"":","+a.position.spatialReference.wkid;return c+(b+","+e+","+h+a+";"+f+","+g)},shortenUrl:function(b,a,d){if("undefined"===typeof esriGeowConfig)d&&d(b);else{var c=esriGeowConfig.bitlyUrl;"https:"==location.protocol&&(c=esriGeowConfig.bitlyUrlSSL);c+="\x26longUrl\x3d"+encodeURIComponent(b)+"\x26format\x3djson";
l.get({url:c,callbackParamName:"callback",load:function(c){c&&200==c.status_code&&c.data&&c.data.url&&0<c.data.url.length?a(c.data.url,b):d&&d(b)},error:function(a){d&&d(b)}})}},urlParams:function(){var b=f.queryToObject(window.location.search.replace(/^\?/,"")),b=b||{},a;for(a in b)b.hasOwnProperty(a)&&(b[a]=b[a].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,""));return b},cleanUrl:function(){var b=f.queryToObject(window.location.search.replace(/^\?/,"")),b=b||{},a=k.urlParams();if(a.hasOwnProperty("viewingmode")&&
(a.hasOwnProperty("layers")||a.hasOwnProperty("url")||a.hasOwnProperty("webscene")))delete b.viewingmode,b=decodeURIComponent(f.objectToQuery(b)),window.history.pushState(null,null,location.pathname+"?"+b)}};return k});