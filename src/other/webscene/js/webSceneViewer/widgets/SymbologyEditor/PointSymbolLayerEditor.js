// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
require({cache:{"url:webSceneViewer/widgets/SymbologyEditor/templates/PointSymbolLayerEditor.html":'\x3cdiv\x3e\r\n  \x3ctable\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"shapeText" class\x3d"paneSectionTitle symbolLayerText"\x3e\x3c/td\x3e\r\n      \x3ctd colspan\x3d"2"\x3e\r\n        \x3cdiv class\x3d"iconDropdown"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"shapePickerDropdown" class\x3d"shapeButton" data-dojo-type\x3d"dijit/form/DropDownButton" data-dojo-props\x3d"dropDownPosition: [\'after-centered\']"\x3e\r\n            \x3cspan\x3e\x3c/span\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"shapePickerDomNode"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"sizeText" class\x3d"paneSectionTitle symbolLayerText"\x3e\x3c/td\x3e\r\n      \x3ctd\x3e\r\n        \x3cdiv class\x3d"numberText"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"sizeInput" data-dojo-type\x3d"dijit/form/NumberTextBox" type\x3d"text" data-dojo-props\x3d"minimum: 0.001, maximum:99999999, className:\'sizeInputTextBox\'" data-dojo-attach-event\x3d"keypress:_onSizeInputKeypressHandler,change:_updateSizeInputSelectedValue"\x3e\x3c/input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd\x3e\r\n        \x3cdiv class\x3d"colorButton" data-dojo-attach-point\x3d"selectedColorDropdown" data-dojo-type\x3d"dijit/form/DropDownButton"\x3e\r\n          \x3cspan \x3e\r\n            \x3cdiv class\x3d"colorSwatchContainer"\x3e\r\n              \x3cdiv class\x3d"colorSwatch"\x3e\x26nbsp;\x26nbsp;\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/span\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog" data-dojo-attach-point\x3d"colorPalette"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/ColorPalette" data-dojo-attach-point\x3d"colorPaletteWidget" data-dojo-attach-event\x3d"change:_onColorPaletteWidgetChange"\x3e\x3c/div\x3e\r\n            \x3ctable class\x3d"transparencyTable"\x3e\r\n             \x3ctr\x3e\r\n              \x3ctd data-dojo-attach-point\x3d"transparencyText"\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"transparencyInputColumn"\x3e\r\n                \x3cdiv \x3e\r\n                  \x3cinput class\x3d"transparencyInput" data-dojo-attach-point\x3d"transparencyInput" data-dojo-type\x3d"dijit/form/NumberTextBox" type\x3d"text" data-dojo-props\x3d"minimum: 0, maximum:100, className:\'transparencyInput\'" data-dojo-attach-event\x3d"keypress:_onTransparencyInputKeypressHandler,change:_updateTransparencyInputSelectedValue"\x3e\x3c/input\x3e\r\n                \x3c/div\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n          \x3c/table\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n\r\n    \x3c/tr\x3e\r\n\r\n    \x3ctr\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"outlineSizeText" class\x3d"paneSectionTitle symbolLayerText"\x3e\x3c/td\x3e\r\n      \x3ctd\x3e\r\n        \x3cdiv class\x3d"numberText"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"outlineSizeInput" data-dojo-type\x3d"dijit/form/NumberTextBox" type\x3d"text" data-dojo-props\x3d"minimum: 0.001, maximum:99999999, className:\'sizeInputTextBox\'" data-dojo-attach-event\x3d"keypress:_onOutlineSizeInputKeypressHandler,change:_updateOutlineSizeInputSelectedValue"\x3e\x3c/input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd\x3e\r\n        \x3cdiv class\x3d"colorButton" data-dojo-attach-point\x3d"selectedOutlineColorDropdown" data-dojo-type\x3d"dijit/form/DropDownButton"\x3e\r\n          \x3cspan \x3e\r\n            \x3cdiv class\x3d"colorSwatchContainer"\x3e\r\n              \x3cdiv class\x3d"colorSwatch"\x3e\x26nbsp;\x26nbsp;\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/span\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/TooltipDialog" data-dojo-attach-point\x3d"outlineColorPalette"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/ColorPalette" data-dojo-attach-point\x3d"outlineColorPaletteWidget" data-dojo-attach-event\x3d"change:_onOutlineColorPaletteWidgetChange"\x3e\x3c/div\x3e\r\n            \x3ctable class\x3d"transparencyTable"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd data-dojo-attach-point\x3d"OutlineTransparencyText"\x3e\x3c/td\x3e\r\n                \x3ctd class\x3d"transparencyInputColumn"\x3e\r\n                  \x3cdiv \x3e\r\n                    \x3cinput class\x3d"transparencyInput" data-dojo-attach-point\x3d"outlineTransparencyInput" data-dojo-type\x3d"dijit/form/NumberTextBox" type\x3d"text" data-dojo-props\x3d"minimum: 0, maximum:100, className:\'transparencyInput\'" data-dojo-attach-event\x3d"keypress:_onOutlineTransparencyInputKeypressHandler,change:_updateOutlineTransparencyInputSelectedValue"\x3e\x3c/input\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/core/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/keys dojo/text!./templates/PointSymbolLayerEditor.html dojo/dom-style dojo/dom-class dojo/on dojo/query dojo/_base/lang dojox/gfx/_base esri/views/3d/layers/graphics/SymbolConverter ./BaseSymbolLayerEditor ./ShapePicker".split(" "),function(m,n,p,q,e,r,g,d,s,f,k,l,t,u,v){function w(a){a="#"==a.charAt(0)?a.substring(1,7):a;var b=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16);a=parseInt(a.substring(4,
6),16);return[b,c,a]}return m([u,n,p,q],{name:"PointSymbolLayerEditor",baseClass:"SymbolLayerEditor",templateString:r,_setDimensionTypeAttr:function(a){this.inherited(arguments);this._shapePicker&&this._shapePicker.set("symbolLayerDimensionType",a)},constructor:function(a,b){},destroy:function(){this.inherited(arguments)},postCreate:function(){this._shapePicker=new v({geometryType:"esriGeometryPoint",symbolLayerDimensionType:this.dimensionType,baseClass:"ShapePicker"},this.shapePickerDomNode);s(this._shapePicker,
"selection-change",this._onShapePickerSelectChange.bind(this));this._shapePicker.startup();this.setSelectedShape(this._selectedShape[this.dimensionType]);this.setSelectedColor(this._selectedColor[this.dimensionType]);this.setSelectedSize(this._selectedSize[this.dimensionType]);this.setSelectedOutlineSize(this._selectedOutlineSize[this.dimensionType]);this.setSelectedOutlineColor(this._selectedOutlineColor[this.dimensionType]);this.updateUIFromSelectedValues();this._initUIStrings();"3d"===this.dimensionType&&
(d.add(this.outlineSizeText,"hide"),d.add(this.selectedOutlineColorDropdown.domNode,"hide"),d.add(this.outlineSizeInput.domNode,"hide"))},setSelectedOutlineColor:function(a){this._setOutlineColorSwatch(a,this.getSelectedOutlineTransparency());this._selectedOutlineColor["2d"]=a;this._selectedOutlineColor["3d"]=a},getSelectedOutlineColor:function(){return this._selectedOutlineColor[this.dimensionType]},setSelectedOutlineTransparency:function(a,b){this.outlineTransparencyInput&&this.outlineTransparencyInput.get("value")!==
a&&(b?this.outlineTransparencyInput._set("value",a):this.outlineTransparencyInput.set("value",a));this._setOutlineColorSwatch(this.getSelectedOutlineColor(),a);this._selectedOutlineTransparency["2d"]=a;this._selectedOutlineTransparency["3d"]=a},getSelectedOutlineTransparency:function(){return this._selectedOutlineTransparency[this.dimensionType]},getSelectedOutlineSize:function(){return this._selectedOutlineSize[this.dimensionType]},setSelectedOutlineSize:function(a,b){this.outlineSizeInput&&this.outlineSizeInput.get("value")!==
a&&(b?this.outlineSizeInput._set("value",a):this.outlineSizeInput.set("value",a));this._selectedOutlineSize[this.dimensionType]=a},_onOutlineSizeInputKeypressHandler:function(a){(a.charOrCode||a.keyCode)==e.ENTER&&this._updateOutlineSizeInputSelectedValue()},_updateOutlineSizeInputSelectedValue:function(){0>this.outlineSizeInput.get("value")?this.outlineSizeInput.set("value",this._selectedOutlineSize[this.dimensionType]):null!=this.outlineSizeInput.get("value")&&this.outlineSizeInput.get("value")!==
this.getSelectedOutlineSize()&&(this.setSelectedOutlineSize(this.outlineSizeInput.get("value")),this.updateSymbolLayerFromUI())},updateUIFromSelectedValues:function(){var a=this.getSelectedShape();this.shapePickerDropdown.set("iconClass","smallShapeIcon shapeIcon"+a.charAt(0).toUpperCase()+a.slice(1));a=this.getSelectedSize();this.sizeInput.set("value",a,!1);a=this.getSelectedOutlineSize();this.outlineSizeInput.set("value",a,!1);a=this.getSelectedOutlineTransparency();this.outlineTransparencyInput.set("value",
a,!1);var b=this.getSelectedOutlineColor();this._setOutlineColorSwatch(b,a);a=this.getSelectedTransparency();this.transparencyInput.set("value",a,!1);b=this.getSelectedColor();this._setColorSwatch(b,a)},updateSymbolLayerFromUI:function(){var a=this.getSelectedShape(),b=this.getSelectedColor(),c=this.getSelectedSize(),d=this.getSelectedTransparency(),f=this.getSelectedOutlineSize(),e=this.getSelectedOutlineTransparency(),g=this.getSelectedOutlineColor(),h=!0;this.symbolLayer&&100===d&&100===e&&(h=
!1);a="2d"===this.dimensionType?{type:"Icon",size:l.px2pt(c),outline:{color:g,size:l.px2pt(f),transparency:e},material:{color:k.clone(b),transparency:d},resource:{primitive:a},enable:h}:{type:"Object",width:c,height:c,depth:c,material:{color:k.clone(b),transparency:d},resource:{primitive:a},enable:h};this.set("symbolLayer",a)},setSelectedShape:function(a){this.shapePickerDropdown&&this.shapePickerDropdown.set("iconClass","smallShapeIcon shapeIcon"+a.charAt(0).toUpperCase()+a.slice(1));this._selectedShape[this.dimensionType]=
a},getSelectedShape:function(){return this._selectedShape[this.dimensionType]},_readLayerSymbology:function(a){if(a&&a.symbol)if(a=t.toWeb3DRenderer(a).symbol.symbolLayers[0],this._readColorFromSymbolLayer(a),"Object"===a.type){this._selectedShape["3d"]=a.resource.primitive||this._selectedShape["3d"];var b=a.width?a.width:a.height?a.height:a.depth;this._selectedSize["3d"]=Math.round(100*((b+(a.height?a.height:b)+(a.depth?a.depth:b))/3))/100;this._initialSize=!1}else this._selectedShape["2d"]=a.resource.primitive||
this._selectedShape["2d"],this._selectedSize["2d"]=Math.round(1E3*a.size)/1E3,this._selectedOutlineSize["2d"]=a.outline?Math.round(1E3*a.outline.size)/1E3:this._selectedOutlineSize["2d"],this._selectedOutlineColor["2d"]=a.outline?a.outline.color.toRgb():this._selectedOutlineColor["2d"],this._selectedOutlineTransparency["2d"]=a.outline?100*(1-a.outline.color.a):this._selectedOutlineTransparency["2d"]},_setOutlineColorSwatch:function(a,b){var c=1-b/100;isNaN(c)&&(c=1);"string"!==typeof a&&(a="rgba("+
a[0]+","+a[1]+","+a[2]+","+c+")");1<f(".colorSwatch",this.domNode).length?g.set(f(".colorSwatch",this.domNode)[1],"backgroundColor",a):setTimeout(function(){g.set(f(".colorSwatch",this.domNode)[1],"backgroundColor",a)}.bind(this),200)},_onShapePickerSelectChange:function(a){this.shapePickerDropdown.closeDropDown();a.shape!==this.getSelectedShape()&&(this.setSelectedShape(a.shape),this.updateSymbolLayerFromUI())},_updateOutlineTransparencyInputSelectedValue:function(){0>this.outlineTransparencyInput.get("value")||
100<this.outlineTransparencyInput.get("value")?this.outlineTransparencyInput.set("value",this._selectedOutlineTransparency[this.dimensionType]):null!=this.outlineTransparencyInput.get("value")&&this.outlineTransparencyInput.get("value")!==this.getSelectedOutlineTransparency()&&(this.setSelectedOutlineTransparency(this.outlineTransparencyInput.get("value")),this.updateSymbolLayerFromUI())},_onOutlineTransparencyInputKeypressHandler:function(a){(a.charOrCode||a.keyCode)==e.ENTER&&this._updateOutlineTransparencyInputSelectedValue()},
_onOutlineColorPaletteWidgetChange:function(a){this.selectedOutlineColorDropdown.closeDropDown();a!==this.getSelectedOutlineColor()&&(this.setSelectedOutlineColor(w(a)),this.updateSymbolLayerFromUI())}})});