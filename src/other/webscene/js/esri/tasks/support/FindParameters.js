// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["../../core/declare","dojo/_base/array","../../core/Accessor","../../layers/support/layerUtils"],function(h,e,k,l){return h(k,{declaredClass:"esri.tasks.FindParameters",contains:!0,dynamicLayerInfos:null,layerDefinitions:null,layerIds:null,maxAllowableOffset:null,outSpatialReference:null,returnGeometry:!1,searchFields:null,searchText:null,toJson:function(){try{throw Error("toJson is deprecated, use toJSON instead");}catch(a){console.warn(a.stack)}return this.toJSON()},toJSON:function(){var a=
{searchText:this.searchText,contains:this.contains,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},b=this.layerIds,f=this.searchFields,c=this.outSpatialReference;b&&(a.layers=b.join(","));f&&(a.searchFields=f.join(","));c&&(a.sr=c.wkid||JSON.stringify(c.toJSON()));a.layerDefs=l._serializeLayerDefinitions(this.layerDefinitions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var g=[];e.forEach(this.dynamicLayerInfos,function(a){if(!a.subLayerIds){var b=a.id;
if(this.layerIds&&-1!==e.indexOf(this.layerIds,b)){var c={id:b};c.source=a.source&&a.source.toJSON();var d;this.layerDefinitions&&this.layerDefinitions[b]&&(d=this.layerDefinitions[b]);d&&(c.definitionExpression=d);g.push(c)}}},this);b=JSON.stringify(g);"[]"===b&&(b="[{}]");a.dynamicLayers=b}return a}})});