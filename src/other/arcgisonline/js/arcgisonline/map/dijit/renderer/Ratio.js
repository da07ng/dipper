// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/map/dijit/renderer/templates/Ratio.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" region\x3d"top" style\x3d"height:100%; padding:5px;"\x3e\r\n  \x3cdiv id\x3d"rendererRatioTop" data-dojo-type\x3d"dijit.layout.ContentPane" class\x3d"panel panel_left" region\x3d"top" style\x3d"padding:2px;"\x3e\r\n    \x3cdiv id\x3d"rendererRatioHeader"\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"display:inline;"\x3e\r\n        \x3ca href\x3d"JavaScript:void(0);" data-dojo-attach-point\x3d"_closeBtn" data-dojo-attach-event\x3d"onClick:_onCancel" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse"\x3e\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"rendererRatioTitle" class\x3d"esriFloatLeading panel_title"\x3e\r\n        ${i18n.rendererPanelTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioLayer" class\x3d"panel_title" style\x3d"clear:both;"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; height:1px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin: 2px 0 20px 0; padding:10px 0;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioField" class\x3d"esriFloatLeading strong"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioAttribute" class\x3d"esriFloatTrailing"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" data-dojo-attach-point\x3d"_rendererRatioChangeButton" class\x3d"calcite tiny" data-dojo-attach-event\x3d"onClick:_onChangeField"\x3e\x3cspan\x3e${i18n.change}\x3c/span\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      --\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"renderer-ratio-content" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"overflow-y:auto;padding:2px;"\x3e\r\n    \x3ctable style\x3d"width:100%;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd height\x3d"271"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioSliderDiv"\x3e\r\n              \x3cdiv id\x3d"rendererRatioSlider"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioGridDiv" style\x3d"padding-top: 10px;"\x3e\r\n              \x3cdiv style\x3d"margin-bottom: 3px;"\x3e\r\n                \x3cspan class\x3d"small clickToEditMsg"\x3e${i18n.clickToEdit}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioGridContainer" class\x3d"rendererRatioGridContainer" style\x3d"overflow-y: auto;overflow-x: none;"\x3e\r\n                \x3cdiv id\x3d"rendererRatioGrid"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd nowrap class\x3d"toolsColumnTD" style\x3d"text-align:center; vertical-align:top; padding-top:20px;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioSymbolsTitle" data-dojo-attach-event\x3d"onClick:_onClickSymbols" class\x3d"rightIcons"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioSymbols" class\x3d"symbolIconClassed"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"padding-top: 5px;"\x3e\r\n                \x3cspan class\x3d"toolsLabel"\x3e${i18n.symbols}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioZoomTitle" data-dojo-attach-event\x3d"onClick:_onClickZoom" class\x3d"rightIcons" style\x3d"padding-top: 12px;"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioZoomIcon" class\x3d"zoomIcon"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"padding-top: 5px;"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_rendererRatioZoomLabel" class\x3d"toolsLabel"\x3e${i18n.zoomIn}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioStyleTitle" data-dojo-attach-event\x3d"onClick:_onClickStyle" class\x3d"rightIcons" style\x3d"padding-top: 12px;"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioStyleIcon" class\x3d"styleIcon"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"padding-top: 5px;"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_rendererRatioStyleLabel" class\x3d"toolsLabel"\x3e${i18n.labels}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioCenterEqualTitle" data-dojo-attach-event\x3d"onClick:_onClickCenterEqual" class\x3d"rightIcons" style\x3d"padding-top: 12px;"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioCenterEqualIcon" class\x3d"centerEqualIcon"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"padding-top: 5px;"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_rendererRatioCenterEqualLabel" class\x3d"toolsLabel"\x3e${i18n.centerAt}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererRatioCenterMeanTitle" data-dojo-attach-event\x3d"onClick:_onClickCenterMean" class\x3d"rightIcons" style\x3d"padding-top: 12px;"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererRatioCenterMeanIcon" class\x3d"centerMeanIcon"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"padding-top: 5px;"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_rendererRatioCenterMeanLabel" class\x3d"toolsLabel"\x3e${i18n.centerAt}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_estimatedValuesMsg" class\x3d"small estimateMsg"\x3e\r\n      ${i18n.estimatedValuesMsg}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_zeroFeaturesMsg" class\x3d"small zeroFeaturesMsg"\x3e\r\n      ${i18n.zeroFeaturesMsg}\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both;margin-top:5px;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioOtherCheckMsg" \x3e\r\n        \x3ctable cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd valign\x3d"top"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"_rendererRatioOtherCheck" data-dojo-attach-event\x3d"onChange:_onChangeOther" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox"/\x3e\r\n        \x3c/td\x3e\x3ctd\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_rendererRatioOtherTxt"\x3e\r\n            ${i18n.drawOthers}\r\n          \x3c/span\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioOther" class\x3d"esriLeadingMargin107" style\x3d"clear:both;"\x3e\r\n        \x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_rendererRatioOtherSymbolText"\x3e\r\n            ${i18n.symbolLabel}\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_rendererRatioOtherSymbol" style\x3d"padding: 0 5px;"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererRatioRotation" style\x3d"clear:both;margin-top:5px;"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ctable cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd valign\x3d"top"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"_rendererRatioRotationCheck" data-dojo-attach-event\x3d"onChange:_onChangeRotation" data-dojo-type\x3d"dijit.form.CheckBox" checked\x3d"false" type\x3d"checkbox"/\x3e\r\n        \x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_rendererRatioRotationText"\x3e\r\n            ${i18n.rotationMsg}\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioRotationContent" class\x3d"esriLeadingMargin107" style\x3d"clear:both;margin-top:3px;"\x3e\r\n        \x3cdiv style\x3d"margin-top:3px;"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"_rendererRatioRotationAttribute" data-dojo-attach-event\x3d"onChange:_onChangeRotationAttribute" data-dojo-type\x3d"dijit.form.Select" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"margin-top:5px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererRatioRotationClockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:true" name\x3d"clockwise"/\x3e\r\n          ${i18n.clockwise}\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"margin-top:3px;"\x3e\r\n          \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-attach-point\x3d"_rendererRatioRotationCounterclockwiseRadio" data-dojo-attach-event\x3d"onChange:_onChangeRotationDirection" data-dojo-props\x3d"checked:false" name\x3d"clockwise"/\x3e\r\n          ${i18n.counterclockwise}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"height:20px;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererRatioTransparency"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioTransparencyTitle" class\x3d"esriFloatLeading sectionTitle" \x3e\r\n        ${i18n.transparency}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both; padding: 16px 10px 30px 10px;"\x3e\r\n        \x3cdiv id\x3d"rendererRatioTransparencySlider"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererRatioScale" style\x3d"clear:both;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioScaleTitle" class\x3d"esriFloatLeading sectionTitle"\x3e\r\n        ${i18n.visibleRange}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererRatioScaleSuggest" data-dojo-attach-event\x3d"onClick:_onClickScaleSuggest" class\x3d"esriFloatTrailing suggestLabel"\x3e\r\n        \x26nbsp;${i18n.suggest}\x26nbsp;\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading" style\x3d"clear:both;padding: 10px;"\x3e\r\n        \x3cdiv id\x3d"rendererRatioScaleSlider"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom"\x3e\r\n\t\t\x3cdiv id\x3d"rendererRatioContentClose" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"center" \x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite blue" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onDone"\x3e\x3cspan\x3e${i18n.ok}\x3c/span\x3e\x3c/button\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onCancel"\x3e\x3cspan\x3e${i18n.cancel}\x3c/span\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"rendererRatioFooterDiv" data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0;"\x3e\r\n      \x3cdiv class\x3d"footer" id\x3d"rendererRatioFooter" data-dojo-type\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("arcgisonline/map/dijit/renderer/Ratio","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/html dojo/string dojo/dom dojo/has dojo/topic dojo/query dojo/number dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-style dojo/dom-construct dojox/html/entities dijit/registry dijit/TooltipDialog dijit/Tooltip dojo/store/Memory dojo/data/ObjectStore esri/lang esri/styles/basic esri/Color esri/symbols/jsonUtils esri/renderers/jsonUtils esri/styles/choropleth arcgisonline/map/dijit/renderer/_SymbolsMixin arcgisonline/map/dijit/renderer/_LabelsMixin arcgisonline/map/dijit/renderer/_ColorMixin arcgisonline/map/dijit/renderer/_RatioMixin arcgisonline/map/dijit/renderer/_RendererMixin arcgisonline/map/dijit/renderer/_PrecisionMixin esri/renderers/SimpleRenderer esri/symbols/SimpleLineSymbol dojo/i18n!arcgisonline/nls/arcgisonline dijit/_Widget dijit/_Templated dojo/text!arcgisonline/map/dijit/renderer/templates/Ratio.html".split(" "),
function(l,d,m,n,h,g,k,s,H,q,I,J,x,e,c,K,t,u,L,f,M,N,O,P,Q,v,R,r,y,z,A,B,C,D,S,T,p,E,F,G){l=l([E,F],{declaredClass:"arcgisonline.map.dijit.renderer.Ratio",basePath:require.toUrl("arcgisonline/map/dijit/renderer"),baseClass:"esriAGORendererRatio",widgetsInTemplate:!0,templateString:G,_rConnects:[],tooltips:[],i18n:null,disableAllEvents:!0,container:null,subLayerId:null,mapLayer:null,layer:null,renderer:null,symbol:null,scheme:null,colorRendererGrid:null,origGalleryRenderer:null,constructor:function(a,
b){d.mixin(this,y);d.mixin(this,z);d.mixin(this,A);d.mixin(this,B);d.mixin(this,C);d.mixin(this,D);a&&(a.containerNode&&(this.container=a.containerNode),this.params=a.params,d.mixin(this,a.params),this._rConnects=[])},destroy:function(){this.destroyBusy();this.hideSymbolStyler();this.hideLegendPopup();this.colorSlider&&this.colorSlider.destroy();this.scaleSlider&&this.scaleSlider.destroy();this.transparencySlider&&this.transparencySlider.destroy();this.destroyColorRendererGrid();m.forEach(this.tooltips,
function(a){a.destroy()});m.forEach(this._rConnects,n.disconnect);delete this._rConnects;this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.i18n=d.clone(p.common);d.mixin(this.i18n,p.rendererCommon);d.mixin(this.i18n,p.rendererColorPanel);d.mixin(this.i18n,p.rendererRatioPanel)},postCreate:function(){this.container.addChild(u.byId("rendererRatioPanel"));this.loadConnections()},loadConnections:function(){this._rConnects.push(n.connect(u.byId("leftContentPanel"),
"resize",this,"adjustHeight"));this._rConnects.push(n.subscribe("onUpdateColor",d.hitch(this,"onUpdateInfo")));n.connect(this._rendererRatioOtherSymbol,"click",d.hitch(this,"onClickOtherSymbol","main"))},_onClose:function(a){a.preventDefault();delete this.mapLayer._scaleChanged;this.hideBusy();this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges();arcgisonline.map.leftPanel.openLeftTOCPanel()},_onDone:function(a){a.preventDefault();this.hideBusy();this.hideSymbolStyler();this.hideLegendPopup();
leftPanel.switchToRendererStack(this.renderer)},_onCancel:function(a){a.preventDefault();delete this.mapLayer._scaleChanged;this.hideBusy();this.hideSymbolStyler();this.hideLegendPopup();this.dismissRendererChanges(this.origGalleryRenderer);leftPanel.switchToRendererStack()},_onChangeField:function(){leftPanel.switchToRendererStack()},startup:function(){this.inherited(arguments);this._init()},_init:function(){this.origGalleryRenderer=this.buildCurrentRendererInfo();this._rendererRatioLayer.innerHTML=
t.encode(this.mapLayer.title.replace(/\_/g," "));-1!==this.subLayerId&&this.mapLayer.title!==this.layer.name&&(this._rendererRatioLayer.innerHTML+=" - "+t.encode(this.layer.name.replace(/\_/g," ")));this.createTooltips();if(this.renderer.authoringInfo){this.getVisualVariableByType("colorInfo",null,this.renderer.visualVariables);var a=this.getVisualVariableByType("colorInfo",null,this.renderer.authoringInfo.visualVariables);a&&"percent"===a.style?(e.add(this._rendererRatioStyleIcon,"percent"),this._rendererRatioField.innerHTML=
g.substitute(this.i18n.percentTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias})):a&&"percentTotal"===a.style?(e.add(this._rendererRatioStyleIcon,"percentTotal"),this._rendererRatioField.innerHTML=g.substitute(this.i18n.percentTotalTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias})):this._rendererRatioField.innerHTML=g.substitute(this.i18n.ratioTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias})}else this._rendererRatioField.innerHTML=
g.substitute(this.i18n.ratioTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias});c.set(this._estimatedValuesMsg,"display","none");c.set(this._zeroFeaturesMsg,"display","none");c.set(this._rendererRatioGridDiv,"display","none");e.add(this._rendererRatioSymbols,"symbolIconRatioContinuous");this.scheme=null;this.hasDynamic?c.set(this._rendererColorTransparency,"display","none"):this.transparencySlider=this.createTransparencySlider("rendererRatioTransparencySlider");this.createScaleSlider("rendererRatioScaleSlider").then(d.hitch(this,
function(a){this.scaleSlider=a}));this.hasNumericField&&("esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType)?(this._rendererRatioRotationAttribute.setStore(this.attributesStore,"",{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger') AND NOT name:'"+this.layer.objectIdField+"'"}),c.set(this._rendererRatioRotation,"display","")):c.set(this._rendererRatioRotation,"display","none");this.updateUIWithRenderer();
this.showLegendPopup()},updateUIWithRenderer:function(){this.disableAllEvents=!0;this.authoringInfo=d.clone(this.renderer.authoringInfo);this.renderer.defaultSymbol?(this.defaultInfo={defaultSymbol:this.renderer.defaultSymbol,defaultLabel:this.renderer.defaultLabel},c.set(this._rendererRatioOther,"display",""),this._rendererRatioOtherCheck.set("checked",!0)):(this.defaultInfo={defaultSymbol:this.getDefaultSymbol(this.geometryType),defaultLabel:this.i18n.other},c.set(this._rendererRatioOther,"display",
"none"),this._rendererRatioOtherCheck.set("checked",!1));this.isSymbolTransparent(this.defaultInfo.defaultSymbol)?this.drawTransparentSymbol(this._rendererRatioOtherSymbol):(this.drawSymbol(this._rendererRatioOtherSymbol,this.defaultInfo.defaultSymbol,null,null,null,1),this.updateBackgroundForAlmostWhite(this.defaultInfo.defaultSymbol,this._rendererRatioOtherSymbol));this._rendererRatioZoomLabel.innerHTML=this.i18n.zoomIn;this._rendererRatioOtherTxt.innerHTML=this.i18n.drawOthers;if(this.hasNumericField&&
("esriGeometryPoint"==this.geometryType||"esriGeometryMultipoint"==this.geometryType)){var a=this.renderer.rotationInfo||(this.renderer.latestObservationRenderer?this.renderer.latestObservationRenderer.rotationInfo:null);this._rendererRatioRotationCheck.set("checked",a?!0:!1);a&&a.field&&this.attributesStore.fetchItemByIdentity({identity:a.field,onItem:d.hitch(this,function(a){this._rendererRatioRotationAttribute.set("value",a.alias)})});c.set(this._rendererRatioRotationContent,"display",a?"":"none")}this.getParams().then(d.hitch(this,
function(a){9>s("ie")?setTimeout(d.hitch(this,function(){this.createColorInfoSlider(a).then(d.hitch(this,function(){this.hideBusy();this.adjustHeight()}),d.hitch(this,function(){this.hideBusy()}),d.hitch(this,function(a){this.showBusy("rendererRatioStack",a)}))}),1E3):this.createColorInfoSlider(a).then(d.hitch(this,function(){this.hideBusy();this.adjustHeight()}),d.hitch(this,function(){this.hideBusy()}),d.hitch(this,function(a){this.showBusy("rendererRatioStack",a)}))}));a=this.getVisualVariableByType("colorInfo",
null,this.renderer.visualVariables);this.getStatistics({field:a.field,normalizationType:"field",normalizationField:a.normalizationField}).then(d.hitch(this,function(a){if(1<=a.min||1>=a.max)c.set(this._rendererRatioCenterEqualTitle,"display","none"),c.set(this._rendererRatioCenterMeanTitle,"display","none")}));setTimeout(d.hitch(this,function(){this.disableAllEvents=!1}),1E3)},wrapTooltipText:function(a){return"\x3cdiv class\x3d'rendererTooltip'\x3e"+a+"\x3c/div\x3e"},createTooltips:function(){this.tooltips.push(new f({connectId:this._rendererRatioTransparencyTitle,
label:this.wrapTooltipText(this.i18n.transparencyTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioScaleTitle,label:this.wrapTooltipText(this.i18n.visibleRangeTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioScaleSuggest,label:this.wrapTooltipText(this.i18n.suggestTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioRotationText,label:this.wrapTooltipText(this.i18n.rotateTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioRotationAttribute.domNode,
label:this.wrapTooltipText(this.i18n.rotationFieldTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioSymbolsTitle,label:this.wrapTooltipText(this.i18n.symbolsTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioZoomTitle,label:this.wrapTooltipText(this.i18n.zoomTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioStyleTitle,label:this.wrapTooltipText("\x3cdiv\x3e"+this.i18n.headerTooltip+"\x3cdiv\x3e\x3cul\x3e\x3cli\x3e"+this.i18n.ratioTooltip+"\x3c/li\x3e\x3cli\x3e"+
this.i18n.percentTotalTooltip+"\x3c/li\x3e\x3cli\x3e"+this.i18n.percentTooltip+"\x3c/li\x3e\x3c/ul\x3e")}));this.tooltips.push(new f({connectId:this._rendererRatioCenterEqualTitle,label:this.wrapTooltipText(this.i18n.centerEqualTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioCenterMeanTitle,label:this.wrapTooltipText(this.i18n.centerMeanTooltip)}));this.otherTooltip=new f({connectId:this._rendererRatioOtherTxt,label:this.wrapTooltipText(this.i18n.drawOthersTooltip)});this.tooltips.push(this.otherTooltip);
this.tooltips.push(new f({connectId:this._rendererRatioOtherSymbol,label:this.wrapTooltipText(this.i18n.otherSymbolTooltip)}));this.tooltips.push(new f({connectId:this._rendererRatioOtherSymbolText,label:this.wrapTooltipText(this.i18n.otherSymbolTooltip)}))},_onClickSymbols:function(){var a=r.getSchemes({theme:"above-and-below",basemap:this.getBasemapType(),geometryType:this.geometryType}),b=this.getVisualVariableByType("colorInfo",null,this.renderer.visualVariables);if(!b){var c=r.getSchemes({theme:"above-and-below",
basemap:this.getBasemapType(),geometryType:this.geometryType});a.secondarySchemes.push(c.primaryScheme);a.secondarySchemes=a.secondarySchemes.concat(c.secondarySchemes)}var c=[],w=0;if(b)for(var e=b.stops,b=0;b<e.length;b++)c.push(e[b].color);else{for(b=0;b<this.renderer.infos.length;b++)c.push(this.renderer.infos[b].symbol.color);w=this.renderer.infos.length}b=this.renderer.infos&&this.renderer.infos.length?this.renderer.infos[0].symbol:this.getDefaultSymbol(this.geometryType);this.showSymbolStyler(b,
{externalSizing:!1,optimizeOutline:this.hasOptimizeOutline(this.renderer.visualVariables),schemes:a,colorRamp:{colors:c,numStops:w,scheme:this.scheme}},d.hitch(this,"onSymbolsChange"))},onSymbolsChange:function(a,b,d,c){this.scheme=d||this.scheme;this.updateSymbolOnColorRenderer({symbol:a,colors:b});this.updateColorRenderer(c,this._rendererRatioOtherSymbol)},_onClickLegendClasses:function(){-1===this._rendererRatioLegendClassesIcon.className.indexOf("active")?(e.add(this._rendererRatioLegendClassesIcon,
"active"),this._rendererRatioLegendClassesText.innerHTML=this.i18n.classes,this.legendClassesTooltip.set("label",this.wrapTooltipText(this.i18n.classesTooltip)),c.set(this._rendererColorSliderDiv,"display","none"),c.set(this._rendererRatioGridDiv,"display",""),this.updateColorRendererGrid()):(e.remove(this._rendererColorLegendClassesIcon,"active"),this._rendererRatioLegendClassesText.innerHTML=this.i18n.legend,this.legendClassesTooltip.set("label",this.wrapTooltipText(this.i18n.legendTooltip)),c.set(this._rendererRatioSliderDiv,
"display",""),c.set(this._rendererRatioGridDiv,"display","none"))},_onClickZoom:function(){!this.disableAllEvents&&this.colorSlider&&(this.colorSlider.get("zoomOptions")?(this.zoomOutSlider(),e.remove(this._rendererRatioZoomIcon,"active"),this._rendererRatioZoomLabel.innerHTML=this.i18n.zoomIn):this.getParams().then(d.hitch(this,function(a){this.zoomInSlider(a).then(d.hitch(this,function(a){this.hideBusy();e.add(this._rendererRatioZoomIcon,"active");this._rendererRatioZoomLabel.innerHTML=this.i18n.zoomOut}),
d.hitch(this,function(a){this.hideBusy()}),d.hitch(this,function(a){this.showBusy("rendererRatioStack",a)}))})))},clearZoom:function(){if(("color"===this.getRendererStyle(this.renderer)||"ratio"===this.getRendererStyle(this.renderer))&&this.colorSlider)this.colorSlider.get("zoomOptions")&&this.zoomOutSlider(),e.remove(this._rendererRatioZoomIcon,"active"),this._rendererRatioZoomLabel.innerHTML=this.i18n.zoomIn},_onClickStyle:function(){if(!this.disableAllEvents){var a=this.getVisualVariableByType("colorInfo",
null,this.authoringInfo.visualVariables);a&&"ratio"===a.style?(this.switchStyleOnSlider("percentTotal"),a.style="percentTotal",this.colorSlider.set("showRatioLabels","percentTotal"),e.remove(this._rendererRatioStyleIcon,"percent"),e.add(this._rendererRatioStyleIcon,"percentTotal"),this._rendererRatioField.innerHTML=g.substitute(this.i18n.percentTotalTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias})):a&&"percentTotal"===a.style?(this.switchStyleOnSlider("percent"),a.style="percent",
this.colorSlider.set("showRatioLabels","percent"),e.remove(this._rendererRatioStyleIcon,"percentTotal"),e.add(this._rendererRatioStyleIcon,"percent"),this._rendererRatioField.innerHTML=g.substitute(this.i18n.percentTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias})):(this.switchStyleOnSlider("ratio"),a.style="ratio",this.colorSlider.set("showRatioLabels",null),e.remove(this._rendererRatioStyleIcon,"percent"),e.remove(this._rendererRatioStyleIcon,"percentTotal"),this._rendererRatioField.innerHTML=
g.substitute(this.i18n.ratioTitle,{field1:this.attributeItem.alias,field2:this.attributeItem2.alias}));this.replaceVisualVariable("colorInfo",null,a,this.authoringInfo);this.applyColorRenderer(this.renderer)}},_onClickCenterEqual:function(){this.colorSlider&&(this.clearZoom(),this.centerHandlesOnSlider("equal"))},_onClickCenterMean:function(){this.colorSlider&&(this.clearZoom(),this.centerHandlesOnSlider("average"))},_onChangeOther:function(a){this.disableAllEvents||(a?(c.set(this._rendererRatioOther,
"display",""),this.renderer.defaultSymbol=this.defaultInfo.defaultSymbol,this.renderer.defaultLabel=this.defaultInfo.defaultLabel):(c.set(this._rendererRatioOther,"display","none"),delete this.renderer.defaultSymbol,delete this.renderer.defaultLabel),this.applyColorRenderer(this.renderer))},onClickOtherSymbol:function(a,b){var c=r.getSchemes({theme:"above-and-below",basemap:this.getBasemapType(),geometryType:this.geometryType});this.showSymbolStyler(this.defaultInfo.defaultSymbol,{externalSizing:!1,
optimizeOutline:this.hasOptimizeOutline(this.renderer.visualVariables),schemes:c},d.hitch(this,"onOtherSymbolChange",a))},onOtherSymbolChange:function(a,b,c,d,e){a=b.toJson();if("esriPMS"===b.type&&(0===a.url.length||"http://"===a.url))b=v.fromJson(this.getMarkerJson());this.defaultInfo.defaultSymbol=b;this.renderer.defaultSymbol&&(this.renderer.defaultSymbol=v.fromJson(b.toJson()));this.updateColorRenderer(e,this._rendererRatioOtherSymbol);this.adjustHeight()},_onChangeRotation:function(a){this.disableAllEvents||
(c.set(this._rendererRatioRotationContent,"display",a?"":"none"),this.adjustHeight(),this.updateRotationInfo())},_onChangeRotationAttribute:function(a){this.disableAllEvents||this.updateRotationInfo()},_onChangeRotationDirection:function(){this.disableAllEvents||this.updateRotationInfo()},updateRotationInfo:function(){if(this._rendererRatioRotationCheck.get("checked")){var a={field:this._rendererRatioRotationAttribute.get("value"),type:this._rendererRatioRotationClockwiseRadio.get("checked")?"geographic":
"arithmetic"};this.renderer.setRotationInfo(a)}else this.renderer.setRotationInfo(null);this.applyColorRenderer(this.renderer)},onColorSliderChange:function(a){},onUpdateInfo:function(a,b){if("_default_"===a.minValue)this.renderer.defaultLabel=a.label,this.renderer.defaultSymbol=a.symbol,this.defaultInfo={defaultSymbol:this.renderer.defaultSymbol,defaultLabel:this.renderer.defaultLabel},this.updateColorRenderer(b,this._rendererRatioOtherSymbol);else{var c=this.renderer.infos;this.renderer.clearBreaks();
m.forEach(c,function(b,c){a.minValue===b.minValue&&a.maxValue===b.maxValue?this.renderer.addBreak({minValue:b.minValue,maxValue:b.maxValue,symbol:a.symbol,label:a.label}):this.renderer.addBreak({minValue:b.minValue,maxValue:b.maxValue,symbol:b.symbol,label:b.label})},this);this.updateColorRenderer(b,this._rendererRatioOtherSymbol);this.updateColorSlider()}},_onChangeColorPrecision:function(){if(!this.disableAllEvents){var a=this._rendererRatioPrecision.get("value");"select"!==a&&(this.updateValues(parseFloat(a)),
this.applyColorRenderer(this.renderer),"block"===c.get(this._rendererColorGridDiv,"display")&&this.updateColorRendererGrid(),this.updateColorSlider(),this.onColorSliderChange("precisionChange"))}},_onClickScaleSuggest:function(){this.suggestScale(this.scaleSlider)},getParams:function(){var a=new x,b={normalizationType:"field"};b.normalizationField=this.attributeItem2.name;b.theme="above-and-below";b.showOthers=this._rendererRatioOtherCheck.get("checked");b.symbol=this.renderer.infos&&this.renderer.infos.length?
this.renderer.infos[0].symbol:this.getDefaultSymbol(this.geometryType);b.rotationInfo=this.renderer.rotationInfo;b.defaultSymbol=this.defaultInfo&&this.defaultInfo.defaultSymbol;b.defaultLabel=this.defaultInfo&&this.defaultInfo.defaultLabel;b.optimizeOutline=this.getVisualVariableByType("sizeInfo","outline",this.renderer.visualVariables)?!0:!1;var c=this.getVisualVariableByType("colorInfo",null,this.renderer.authoringInfo.visualVariables);c&&"percent"===c.style?b.showRatioLabels="percent":c&&"percentTotal"===
c.style&&(b.showRatioLabels="percentTotal");b.colorSliderDivId="rendererRatioSlider";a.resolve(b);return a},adjustHeight:function(a){if(!("undefined"===typeof leftPanel||"rendererRatioStack"!==leftPanel.visibleStack)){a=h.coords(k.byId("leftContentStackContainer")).h;var b=h.coords(k.byId("rendererRatioTop")).h,d=h.coords(this._doneChangingButton.domNode).h-5,e=h.coords(k.byId("rendererRatioFooter_links")).h+10;c.set(k.byId("rendererRatioFooterDiv"),"height",e+"px");a=a-b-d-e-18;0<a&&c.set(k.byId("renderer-ratio-content"),
"height",a+"px");var f=60;m.forEach(q(".firstColumnLabel",this.domNode),function(a){f=Math.max(f,h.coords(a).w)});var g=40;q(".toolsLabel").forEach(function(a){g=Math.max(g,h.coords(a).w)});q(".toolsColumnTD").style("width",g+4+"px");a=h.coords(k.byId("leftContentStackContainer")).w;c.set(this._rendererRatioGridDiv,"width",a-g-42+"px");this.colorRendererGrid&&this.colorRendererGrid.resize();newWidth=a-35;0<newWidth&&(c.set(this._rendererRatioRotationAttribute.domNode,"width",newWidth-21+"px"),this.transparencySlider&&
c.set(this.transparencySlider.domNode,"width",newWidth-15+"px"),this.scaleSlider&&c.set(this.scaleSlider.domNode,"width",newWidth-15+"px"))}}});s("extend-esri")&&d.setObject("arcgisonline.map.dijit.renderer.Ratio",l);return l});