// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("../../../core/declare dojo/_base/lang ../../../core/Accessor ../math/common ../math/mat2d ../math/vec2 ./bitFlagUtil".split(" "),function(l,m,n,k,g,c,h){var p=0,e=0,d={TRANSFORM:1<<e++,VISIBLE:1<<e++,SIZE:1<<e++,BLENDMODE:1<<e++,CLIP:1<<e++,OPACITY:1<<e++},f=l(n,{declaredClass:"esri.views.2d.engine.DisplayObject",classMetadata:{properties:{coords:{copy:c.copy},size:{copy:c.copy},surface:{},transform:{readOnly:!0,dependsOn:["rotation","coords","resolution","size"]}}},constructor:function(){this.id=
"esri-display-object-"+p++},_flags:0,_renderFlag:!1,_flipY:!0,tag:null,className:"esri-display-object",blendMode:"none",_blendModeSetter:function(a,b){if(b===a)return b;this._invalidateFlag(d.BLENDMODE);return a},coords:null,_coordsSetter:function(a,b){this._invalidateFlag(d.TRANSFORM);return c.copy(b||c.create(),a)},opacity:1,_opacitySetter:function(a,b){a=Math.min(1,Math.max(a,0));if(b===a)return b;this._invalidateFlag(d.OPACITY);return a},parent:null,_parentSetter:function(a,b){if(b===a)return b;
a&&this._renderFlag&&a.requestChildRender(this);return a},resolution:NaN,_resolutionSetter:function(a,b){if(b===a)return b;this._invalidateFlag(d.TRANSFORM);return a},rotation:0,_rotationSetter:function(a,b){if(b===a)return b;this._invalidateFlag(d.TRANSFORM);return a},_transformGetter:function(a){var b=this.coords,d=this.size,e=this.resolution,f=this.rotation;if(b)if(e){if(!a||6!==a.length)a=g.create();d&&g.translate(a,a,d);g.scale(a,a,c.fromValues(1/e,(this._flipY?-1:1)*(1/e)));g.rotate(a,a,k.toRadian(f));
g.translate(a,a,c.negate(c.create(),b))}else{if(!a||2!==a.length)return c.clone(b);c.copy(a,b)}else if(f){if(!a||6!==a.length)a=g.create();g.rotate(a,a,k.toRadian(f))}return a},size:null,_sizeSetter:function(a,b){if(b===a)return b;this._invalidateFlag(d.SIZE);return c.copy(b||c.create(),a)},visible:!0,_visibleSetter:function(a,b){if(b===a)return b;this._invalidateFlag(d.VISIBLE);return a},requestRender:function(){var a=this.parent;this._renderFlag||(this._renderFlag=!0,a&&a.requestChildRender(this))},
createSurface:function(){if(!this.surface){var a=document.createElement("div");a.className=this.className;this.surface=a}return this.surface},reflow:function(a){},render:function(a){var b=this._flags;this._renderFlag=!1;this._flags=0;b&&(h.isSet(b,f.SIZE)&&a.setSize(this.width,this.height),h.isSet(b,f.VISIBLE)&&a.setVisibility(this.visible),h.isSet(b,f.BLENDMODE)&&a.setBlendMode(this.blendMode),h.isSet(b,f.OPACITY)&&a.setOpacity(this.opacity))},_invalidateFlag:function(a){this._flags=h.set(this._flags,
a,!0);this.requestRender()}});m.mixin(f,d);return f});