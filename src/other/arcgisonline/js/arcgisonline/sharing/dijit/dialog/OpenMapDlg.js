// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/dialog/OpenMapDlg",["dijit","dojo","dojox","dojo/require!dijit/Dialog,arcgisonline/sharing/dijit/dialog/GeneralDlg,dijit/_Widget,dijit/_Templated"],function(f,a,n){a.provide("arcgisonline.sharing.dijit.dialog.OpenMapDlg");a.require("dijit.Dialog");a.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");a.require("dijit._Widget");a.require("dijit._Templated");a.declare("arcgisonline.sharing.dijit.dialog.OpenMapDlg",[f._Widget,f._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n    \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"open-map-dialog" title\x3d"${i18n.title}"\x3e\r\n  \t\t\x3cdiv id\x3d"open-map-dialog-content"\x3e\r\n  \t\t  \x3cdiv style\x3d"margin-bottom: 10px;"\x3e${i18n.unsavedChangesMsg}\x3c/div\x3e\r\n  \t\t  \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd valign\x3d"top"\x3e\r\n  \t\t    \x3cdiv\x3e${i18n.titleLabel}\x3c/div\x3e\r\n        \x3c/td\x3e\x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv id\x3d"open-map-dialog-title"\x3e\x3c/div\x3e\r\n  \t\t  \x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d"open-map-dialog-layersRow"\x3e\x3ctd valign\x3d"top"\x3e\r\n          \x3cdiv id\x3d"open-map-dialog-layersLabel"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv id\x3d"open-map-dialog-layers"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d"open-map-dialog-tablesRow"\x3e\x3ctd valign\x3d"top"\x3e\r\n          \x3cdiv id\x3d"open-map-dialog-tablesLabel"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\x3ctd\x3e\r\n          \x3cdiv id\x3d"open-map-dialog-tables"\x3e\x3c/div\x3e\r\n  \t\t  \x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\r\n        \x3cdiv style\x3d"margin-top: 10px;"\x3e${i18n.openAnotherMapQtn}\x3c/div\x3e\r\n  \t\t\x3cbr /\x3e  \r\n\t\t\x3cdiv style\x3d"float: right;"\x3e\r\n  \t\t\t\x3cbutton id\x3d"button_open-map-yes" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.yesOpen}\x3c/button\x3e\r\n  \t\t\t\x3cbutton id\x3d"button_open-map-no" class\x3d"jevent" dojoType\x3d"dijit.form.Button"\x3e${i18n.notOpen}\x3c/button\x3e\r\n\t\t\x3c/div\x3e\r\n  \t\x3cdiv style\x3d"clear:both;"/\x3e  \r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
handler:null,newMapUrl:"",i18n:null,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.OpenMapDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").openMapDlg)},postCreate:function(){this.loadConnections()},show:function(h,c,k,l,m){this.newMapUrl=h;h=document.getElementById("webmap-title-text")&&
document.getElementById("webmap-title-text").innerHTML;a.byId("open-map-dialog-title").innerHTML=h||m||c&&c.t||this.i18n.untitled;var d=[];c?a.forEach(c.operationalLayers,function(a){d.push(a.title)}):k&&a.forEach(k,function(a){("user"===a.type||"mapNotes"===a.type)&&d.push(a.title)});if(0===d.length)a.style(a.byId("open-map-dialog-layersRow"),"display","none");else{if(1===d.length)a.byId("open-map-dialog-layersLabel").innerHTML=this.i18n.layerLabel,a.byId("open-map-dialog-layers").innerHTML=d[0];
else{a.byId("open-map-dialog-layersLabel").innerHTML=this.i18n.layersLabel;var b="",g="";a.forEach(d,function(a){b+=g+a;g=", "});a.byId("open-map-dialog-layers").innerHTML=b}a.style(a.byId("open-map-dialog-layersRow"),"display","")}var e=[];c?a.forEach(c.tables,function(a){e.push(a.title)}):l&&a.forEach(l,function(a){e.push(a.title)});0===e.length?a.style(a.byId("open-map-dialog-tablesRow"),"display","none"):(1===e.length?(a.byId("open-map-dialog-tablesLabel").innerHTML=this.i18n.tableLabel,a.byId("open-map-dialog-tables").innerHTML=
e[0]):(a.byId("open-map-dialog-tablesLabel").innerHTML=this.i18n.tablesLabel,g=b="",a.forEach(e,function(a){b+=g+a;g=", "}),a.byId("open-map-dialog-tables").innerHTML=b),a.style(a.byId("open-map-dialog-tablesRow"),"display",""));f.byId("open-map-dialog").show()},loadConnections:function(){a.query(".jevent").connect("onclick",function(a){a.preventDefault()});a.query("#button_open-map-no").connect("onclick",function(){f.byId("open-map-dialog").hide()});a.query("#button_open-map-yes").connect("onclick",
a.hitch(this,"submitRequest"))},submitRequest:function(a){document.location=this.newMapUrl},hide:function(){f.byId("open-map-dialog").hide()}})});