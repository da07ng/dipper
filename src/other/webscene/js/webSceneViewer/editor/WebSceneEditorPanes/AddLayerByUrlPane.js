// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("esri/core/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/keys ./WebSceneEditorPaneBase webSceneViewer/webScene/WebSceneLayers dijit/form/ValidationTextBox dojo/i18n!../nls/editor".split(" "),function(p,q,b,f,h,r,k,l,c){return p(r,{constructor:function(){q.mixin(this,{id:"addLayerByUrl",title:c.panes.enterLayerUrl,actionButton:{title:c.buttons.done,action:"_navBackBtnNodeClickHandler"}});this._updateContent()},customDestroy:function(){this._textBox.destroy();this._nameTextBox.destroy()},
_updateContent:function(){function g(){if(d._textBox.isValid()){var a=d._textBox.get("value"),f=d._nameTextBox.get("value");d.editor.addLayerByUrl(a,f).then(function(){d.editor.setWebSceneChanged();d.emit("navigate",{to:"contents",from:this});d.customDestroy();d._updateContent()},function(){b.destroy(g)});var g=b.create("p",{className:"confirmMessage"},e);g.textContent=c.addLayerByUrlPane.addingLayer}}var d=this,e=b.create("div",{className:"addLayerByUrlPane"});if(null==this.editor)b.place("\x3cp\x3einitialization problem\x3c/p\x3e",
e);else{b.create("h4",{className:"paneSectionTitle"},e).textContent=c.addLayerByUrlPane.layerUrl;this._textBox=new l({className:"addLayerUrlTextBox",placeHolder:c.addLayerByUrlPane.placeholderLayerUrl,required:!0,pattern:k.URL_REGEXP,intermediateChanges:!0});this._textBox.placeAt(e);f(this._textBox,"keypress",function(a){(a.charOrCode||a.keyCode)==h.ENTER&&g()});b.create("h4",{className:"paneSectionTitle"},e).textContent=c.addLayerByUrlPane.layerName;this._nameTextBox=new l({className:"addLayerUrlTextBox",
placeHolder:c.addLayerByUrlPane.placeholderLayerName,required:!1});var m;f(this._textBox,"change",function(a){this._textBox.isValid()&&(a=k.parseTitleFromLayerUrl(a),a!==m&&(m=a,this._nameTextBox.set("value",a)))}.bind(this));this._nameTextBox.placeAt(e);f(this._nameTextBox,"keypress",function(a){(a.charOrCode||a.keyCode)==h.ENTER&&g()});var n=b.create("button",{className:"blueButton"},b.create("p",{},e));n.textContent=c.buttons.add;f(n,"click",g)}this._addToContentNode(e)},onPaneSelected:function(){this.inherited(arguments);
this._textBox.reset();this._nameTextBox.reset();this._textBox.focus()}})});