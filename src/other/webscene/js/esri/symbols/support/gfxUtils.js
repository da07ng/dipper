// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["require","dojo/_base/lang","dojox/gfx/_base","../../core/screenUtils"],function(s,m,n,t){var u=s.toUrl("../../images/symbol/sfs/"),p=function(d){var a=null,b=d.style;if(d){var c=d.constructor;switch(d.type){case "simplemarkersymbol":b!==c.STYLE_CROSS&&b!==c.STYLE_X&&(a=d.color);break;case "simplefillsymbol":b===c.STYLE_SOLID?a=d.color:b!==c.STYLE_NULL&&(a=m.mixin({},n.defaultPattern,{src:u+b+".png",width:10,height:10}));break;case "picturefillsymbol":a=m.mixin({},n.defaultPattern,{src:d.url,
width:d.width*d.xscale,height:d.height*d.yscale,x:d.xoffset,y:d.yoffset})}}return a},r=function a(b){var c=null;if(b){var e=b.constructor;switch(b.type){case "simplefillsymbol":case "picturefillsymbol":case "simplemarkersymbol":c=a(b.get("outline"));break;case "simplelinesymbol":b.style!==e.STYLE_NULL&&0!==b.width&&(c={color:b.color,style:q(b.style),width:b.width});break;case "cartographiclinesymbol":b.style!==e.STYLE_NULL&&0!==b.width&&(c={color:b.color,style:q(b.style),width:b.width,cap:b.cap,join:b.join===
e.JOIN_MITER?b.miterLimit:b.join});break;default:c=null}}return c},q=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();return{getFill:p,getStroke:r,getShapeDescriptors:function(a){if(!a)return{defaultShape:null,fill:null,stroke:null};var b={fill:p(a),stroke:r(a)},c=a.constructor,e=c.defaultProps,f=null;switch(a.type){case "simplemarkersymbol":var m=a.style,e=0.5*(a.size||t.pt2px(e.size)),g=-e,k=+e,l=-e,h=+e;switch(m){case c.STYLE_CIRCLE:f={type:"circle",
cx:0,cy:0,r:e};break;case c.STYLE_CROSS:f={type:"path",path:"M "+g+",0 L "+k+",0 M 0,"+l+" L 0,"+h+" E"};break;case c.STYLE_DIAMOND:f={type:"path",path:"M "+g+",0 L 0,"+l+" L "+k+",0 L 0,"+h+" L "+g+",0 E"};break;case c.STYLE_SQUARE:f={type:"path",path:"M "+g+","+h+" L "+g+","+l+" L "+k+","+l+" L "+k+","+h+" L "+g+","+h+" E"};break;case c.STYLE_X:f={type:"path",path:"M "+g+","+h+" L "+k+","+l+" M "+g+","+l+" L "+k+","+h+" E"};break;case c.STYLE_PATH:f={type:"path",path:a.path||""}}break;case "simplelinesymbol":case "cartographiclinesymbol":f=
{type:"path",path:"M -15,0 L 15,0 E"};break;case "picturefillsymbol":case "simplefillsymbol":f={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picturemarkersymbol":f={type:"image",x:-Math.round(a.width/2),y:-Math.round(a.height/2),width:a.width,height:a.height,src:a.source&&a.source.imageData?"data:"+a.source.contentType+";base64,"+a.source.imageData:a.url||""};break;case "textsymbol":c=a.font,f={type:"text",text:a.text,x:0,y:0.25*n.normalizedLength(c?c.size:0),align:"middle",
decoration:a.decoration||c&&c.decoration,rotated:a.rotated,kerning:a.kerning},b.font=c&&{size:c.size,style:c.style,variant:c.variant,decoration:c.decoration,weight:c.weight,family:c.family}}b.defaultShape=f;return b}}});