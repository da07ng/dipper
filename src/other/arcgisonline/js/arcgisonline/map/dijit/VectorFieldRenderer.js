// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/dijit/VectorFieldRenderer",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,esri/dijit/VectorFieldRenderer"],function(c,a,f){a.provide("arcgisonline.map.dijit.VectorFieldRenderer");a.require("dijit._Widget");a.require("dijit._Templated");a.require("esri.dijit.VectorFieldRenderer");a.declare("arcgisonline.map.dijit.VectorFieldRenderer",[c._Widget,c._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoType\x3d"dijit.layout.BorderContainer" region\x3d"top"\x3e \r\n    \x3cdiv id\x3d"vectorFieldRendererContentHeader" dojoType\x3d"dijit.layout.ContentPane" region\x3d"top" class\x3d"panel panel_left"\x3e\r\n        \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n            \x3ca href\x3d"#" dojoAttachPoint\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse"\x3e\r\n            \x3cimg src\x3d"images/close.gif" border\x3d"0"/\x3e\x3c/A\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"vectorFieldRendererContentTitle" class\x3d"esriFloatLeading" style\x3d"font-weight:bold;"\x3e\r\n            ${i18n.vectorFieldRendererDefaultTitle}\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"clear:both; border-bottom: #333 thin solid; height:1px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"vectorFieldRendererContentPane" dojoType\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"overflow-x:hidden;overflow-y:auto;position:relative;" class\x3d"scrollPane"\x3e\r\n        \x3cp id\x3d"vectorFieldRendererPanelTitle" style\x3d"margin:4px 0px 10px 0px;"\x3e\r\n            ${i18n.vectorFieldRendererPanelTitle}\r\n        \x3c/p\x3e\r\n        \x3cdiv style\x3d"width:100%;" id\x3d"vectorFieldRenderer-main"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv id\x3d"vectorFieldRendererContentButtons" style\x3d"padding:5px;"\x3e\r\n      \x3ccenter\x3e \r\n        \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_applyVectorFieldRenderer" class\x3d"calcite blue"\x3e\r\n            ${i18n.applyLabel}\r\n        \x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_resetVectorFieldRenderer" class\x3d"calcite light"\x3e\r\n            ${i18n.resetLabel}\r\n        \x3c/button\x3e         \r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"submit" dojoAttachPoint\x3d"_closeVectorFieldRenderer" class\x3d"calcite transparent"\x3e\r\n              ${i18n.closeLabel}\r\n        \x3c/button\x3e\r\n      \x3c/center\x3e\r\n    \x3c/div\x3e\r\n   \r\n    \x3cdiv id\x3d"vectorFieldRendererContentFooter" dojoType\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px; display:none;"\x3e \r\n      \x3cdiv class\x3d"footer" id\x3d"vectorFieldRendererSiteFooter" dojotype\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
i18n:null,mapLayer:null,vectorFieldRenderer:null,container:null,numCurrentLegendRequests:0,intervalTimer:null,needsRefresh:!1,_eventConnections:[],constructor:function(a,d){a&&(a.containerNode&&(this.container=a.containerNode),this.subLayerId=a.subLayerId,this.mapLayer=a.mapLayer)},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").vectorFieldRendererPanel)},
postCreate:function(){this.container.addChild(c.byId("vectorFieldRendererPanel"));isEmbedded||a.style(a.byId("vectorFieldRendererContentFooter"),"display","");this.loadConnections()},loadConnections:function(){a.connect(c.byId("leftContentPanel"),"resize",this,"adjustHeight");a.connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1));a.connect(this._closeVectorFieldRenderer,"onClick",a.hitch(this,"_onClose",!1));a.connect(this._applyVectorFieldRenderer,"onClick",a.hitch(this,"_onApply"));a.connect(this._resetVectorFieldRenderer,
"onClick",a.hitch(this,"_onReset"));if(esri.isTouchEnabled){var b=a.query(".scrollPane",this.domNode)[0],b=esri.setScrollable(b);this._eventConnections.push(b[0],b[1])}},destroy:function(){this.inherited(arguments);a.forEach(this._eventConnections,a.disconnect)},loadContent:function(){this.loadVectorFieldRenderer();setTimeout(function(){c.byId("vectorFieldRendererPanel").adjustHeight()},100)},loadVectorFieldRenderer:function(){this.vectorFieldRenderer=new esri.dijit.VectorFieldRenderer({layer:this.mapLayer.layer,
map:arcgisonline.map.main.map,hideApplyButton:!0},"vectorFieldRenderer-main");this._changeDialogTitle(this.mapLayer);this.vectorFieldRenderer.startup()},_setMapLayerAttr:function(a){this.inherited(arguments);this.mapLayer=a;this._changeDialogTitle(this.mapLayer);this.vectorFieldRenderer&&this.vectorFieldRenderer.set("layer",this.mapLayer.layer)},_onApply:function(){this.mapLayer.rendererChanged=!0;a.publish("onVectorFieldRendererApply");a.publish("_onRendererUpdate",[])},_onReset:function(){this.mapLayer.rendererChanged=
!0;a.publish("onVectorFieldRendererReset");a.publish("_onRendererUpdate",[])},_updateVectorFieldRenderer:function(a){leftPanel&&("undefined"==typeof leftPanel||"vectorFieldRendererstack"!==leftPanel.visiblestack)?this.needsrefresh=!0:(this.vectorFieldRenderer&&this.vectorFieldRenderer.set("layer",a),this.needsRefresh=!1)},_onClose:function(b,d){d.preventDefault();a.byId("vectorFieldRendererContentPane").scrollTop=0;b&&this.save();arcgisonline.map.leftPanel.openLeftTOCPanel()},_changeDialogTitle:function(b){var d=
a.byId("vectorFieldRendererPanelTitle");d&&(b&&b.title)&&(d.innerHTML=this.i18n.vectorFieldRendererPanelTitle+" "+b.title)},adjustHeight:function(b){if(!("undefined"==typeof leftPanel||"vectorFieldRendererStack"!=leftPanel.visibleStack)){b=a.coords(a.byId("leftPanelDiv")).h;var d=a.coords(a.byId("vectorFieldRendererContentHeader")).h,c=a.coords(a.byId("vectorFieldRendererSiteFooter_links")).h+25,e=c+a.coords(a.byId("vectorFieldRendererContentButtons")).h;a.style(a.byId("vectorFieldRendererContentFooter"),
"height",c+"px");a.style(a.byId("vectorFieldRendererContentPane"),"height",b-(d+e)+"px")}}})});