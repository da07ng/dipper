// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/sharing/dijit/dialog/templates/TableCalcFieldDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" data-dojo-attach-event\x3d"onHide:_handleDialogClose"\x3e\r\n    \x3cdiv style\x3d"width:40em;height:50em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_expressionForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("arcgisonline/sharing/dijit/dialog/TableCalcFieldDlg","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/form/Button dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/Dialog esri/kernel esri/lang esri/dijit/CalculateField arcgisonline/map/dijit/toc/analysis dojo/i18n!esri/nls/jsapi dojo/text!./templates/TableCalcFieldDlg.html".split(" "),
function(b,d,c,e,s,f,t,u,v,w,x,y,g,h,k,l,m,z,A,B,C,D,E,F,G,n,p,q,r){b=d([g,h,k,l,m],{widgetsInTemplate:!0,declaredClass:"arcgisonline.sharing.dijit.dialog.TableCalcFieldDlg",templateString:r,basePath:b.toUrl("."),statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.TableCalcFieldDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n={};c.mixin(this.i18n,q.calculateFields)},postCreate:function(){this.inherited(arguments);
this._dialog.set("title",this.i18n.expBuilderTitle)},show:function(a){if(a){this.set({table:a.table,mapLayer:a.mapLayer,field:a.field,layer:a.layer,subLayerId:a.subLayerId});this.layer.userIsAdmin||(this._resetAdminFlag=this.layer.userIsAdmin=!0);if(this.layer&&this.layer.fields){var b=this.mapLayer.popupInfo;b&&e.forEach(this.layer.fields,function(a){a.alias=p.getLabelFromPopup(b,a.name)||a.alias})}this._calcField?(this._calcField.reset(),this._calcField.set("layer",this.layer),this._calcField.set("field",
this.field.name)):(this._calcField=new n({layer:this.layer,field:this.field.name,addButtonClass:"btn calcite primary tiny",closeButtonClass:"btn calcite cancel tiny",showHeader:!1},this._expressionForm),this._calcField.startup(),this._calcField.on("calculate-success",c.hitch(this,this._handleCalculateSuccess)),this._calcField.on("close",c.hitch(this,function(){this._dialog.hide()})));this._dialog.show()}},_handleCalculateSuccess:function(a){this._dialog.hide();this._resetAdminFlag&&(this.layer.userIsAdmin=
!1);arcgisonline.map.main.map.infoWindow.hide();this.table.clearSelection(this.mapLayer,this.subLayerId);this.table.refreshTable(this.mapLayer,this.subLayerId)},_handleDialogClose:function(){this._resetAdminFlag&&(this.layer.userIsAdmin=!1)},_setMapLayerAttr:function(a){this._set("mapLayer",a)},_setSubLayerIdAttr:function(a){this._set("subLayerId",a)},_setFieldIdAttr:function(a){this._set("field",a)},_setTableAttr:function(a){this._set("table",a)},_setLayerAttr:function(a){this._set("layer",a)}});
f("extend-esri")&&c.setObject("arcgisonline.sharing.dijit.dialog.TableCalcFieldDlg",b);return b});