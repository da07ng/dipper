// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/map/dijit/toc/html",["dijit","dojo","dojox","dojo/require!arcgisonline/map/main"],function(w,t,x){t.provide("arcgisonline.map.dijit.toc.html");t.require("arcgisonline.map.main");arcgisonline.map.dijit.toc.html={buildBaseLayerTOCItem:function(){var e=w.byId("tocPanel").hasAnySubLayers,f=arcgisonline.map.main.mapLayers[0],e=""+('\x3cdiv id\x3d"'+f.id+'" class\x3d"toc_baseLayer '+(e?"esriLeadingMargin102":""));arcgisonline.map.role.isAllowed("toc_menu_move")&&(e+=" dojoDndItem");
var e=e+'"',d=arcgisonline.sharing.util.urlToObject(document.URL)||{};!esri.isTouchEnabled&&!d.query.useClick&&(e+=" onmouseover\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+f.id+"');\"");var e=e+'\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e',e=e+'\x3ctd width\x3d"10"\x3e\x3c/td\x3e',e=e+'\x3ctd valign\x3d"top" width\x3d"20"\x3e',e=e+'\x3cdiv class\x3d"esriFloatLeading" style\x3d"display:inline; width:17px;"\x3e\x3cimg src\x3d"images/globe16.png" border\x3d"0"/\x3e\x3c/div\x3e',
e=e+"\x3c/td\x3e\x3ctd\x3e",e=esri.isTouchEnabled||d.query.useClick?e+('\x3cspan class\x3d"toc_layerName" onclick\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+f.id+"');\"\x3e"+x.html.entities.encode(f.title.replace(/\_/g," "))+"\x3c/span\x3e"):e+('\x3cspan class\x3d"toc_layerName"\x3e'+x.html.entities.encode(f.title.replace(/\_/g," "))+"\x3c/span\x3e"),e=e+'\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e',e=e+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",c=arcgisonline.map.dijit.toc.options.toolOptionsHtml(f)||
"",e=esri.isTouchEnabled||d.query.useClick?e+('\x3cdiv id\x3d"'+f.id+'_tools" class\x3d"esriLeadingMargin22 toc_tools" style\x3d"display:none"\x3e'):e+('\x3cdiv id\x3d"'+f.id+'_tools" class\x3d"esriLeadingMargin22 toc_tools" style\x3d"visibility:hidden"\x3e'),e=e+c,e=e+"\x3c/div\x3e";return e+="\x3c/div\x3e"},buildTableTOCItem:function(e){var f=w.byId("tocPanel").hasAnySubLayers;e=arcgisonline.map.main.mapTables[e];if(!e||!e.layer)return"";var f=""+('\x3cdiv id\x3d"'+e.id+'" class\x3d"toc_layer '+
(f?"esriLeadingMargin102":"")+'"'),d=arcgisonline.sharing.util.urlToObject(document.URL)||{};!esri.isTouchEnabled&&!d.query.useClick&&(f+=" onmouseover\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+e.id+"');\"");var f=f+'\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e',f=f+'\x3ctd width\x3d"10"\x3e\x3c/td\x3e',f=f+'\x3ctd valign\x3d"top" width\x3d"20"\x3e',f=f+'\x3cdiv class\x3d"esriFloatLeading iconShowAttributeTable" style\x3d"display:inline; width:17px;"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e',
f=f+"\x3c/td\x3e\x3ctd\x3e",f=esri.isTouchEnabled||d.query.useClick?f+('\x3cspan class\x3d"toc_name toc_layerName" onclick\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+e.id+"');\"\x3e"+x.html.entities.encode(e.title.replace(/\_/g," "))+"\x3c/span\x3e"):f+('\x3cspan class\x3d"toc_layerName"\x3e'+x.html.entities.encode(e.title.replace(/\_/g," "))+"\x3c/span\x3e"),f=f+'\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e',f=f+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",c=arcgisonline.map.dijit.toc.options.toolOptionsHtml(e,
null,!0)||"",f=esri.isTouchEnabled||d.query.useClick?f+('\x3cdiv id\x3d"'+e.id+'_tools" class\x3d"esriLeadingMargin22 toc_tools" style\x3d"display:none"\x3e'):f+('\x3cdiv id\x3d"'+e.id+'_tools" class\x3d"esriLeadingMargin22 toc_tools" style\x3d"visibility:hidden"\x3e'),f=f+c,f=f+"\x3c/div\x3e",f=f+"\x3c/div\x3e";return f+="\x3c/div\x3e"},buildLayerTOCItem:function(e){var f=w.byId("tocPanel").hasAnySubLayers,d="",c="",a=arcgisonline.map.main.mapLayers[e];if(!a||!a.layer&&!a.layers&&!a.tables||a.layer&&
!a.layer.loaded||a.layers&&0==a.layers.length||a.layers&&0<a.layers.length&&(!a.layers[0]||!a.layers[0].loaded))return"";var q=a.visibleLayers;esri.isDefined(q)&&0<q.length&&(q=","+q+",");if(a.layers&&"mapNotes"!=a.type){var p=[];a.layers?p=a.layers:a.layer instanceof esri.layers.GeoRSSLayer&&(p=a.layer.getFeatureLayers());for(var l=p.length-1;0<=l;l--){var r=p[l],h=r.id,g=r.name;if(!g){switch(r.geometryType){case "esriGeometryPoint":g=esri.i18nBundle.tocPanel.points;break;case "esriGeometryPolyline":g=
esri.i18nBundle.tocPanel.lines;break;case "esriGeometryPolygon":g=esri.i18nBundle.tocPanel.polygons;break;default:g=""+l}r.name=g}c+='\x3cdiv id\x3d"'+a.id+"_"+h+'" class\x3d"toc_sublayer '+(f?"esriLeadingMargin36":"esriLeadingMargin27")+'"';r=arcgisonline.sharing.util.urlToObject(document.URL)||{};!esri.isTouchEnabled&&!r.query.useClick&&(c+=" onmouseover\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"','"+h+"');\"");c+="\x3e";c+='\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e\x3ctd valign\x3d"top" width\x3d"20"\x3e';
c+='\x3cdiv id\x3d"'+a.id+"_"+h+'_check" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;"\x3e\x3cinput id\x3d"'+a.id+"_"+h+'_checkbox" dojotype\x3d"dijit.form.CheckBox" type\x3d"checkbox" onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').onSubLayerCheckClick('+e+","+l+',null,null,event)"';if(!esri.isDefined(q)||""!=q&&-1<q.indexOf(","+l+","))c+=' checked\x3d"true"';c+="/\x3e\x3c/div\x3e";c+="\x3c/td\x3e\x3ctd\x3e";c=esri.isTouchEnabled||r.query.useClick?c+('\x3cspan id\x3d"'+a.id+"_"+
h+'_title" onclick\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"','"+h+'\');" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(g.replace(/\_/g," "))+"\x3c/span\x3e"):c+('\x3cspan id\x3d"'+a.id+"_"+h+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubLayerClick("+e+","+l+'); return false;" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(g.replace(/\_/g," "))+"\x3c/span\x3e");c+='\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e';c+=
"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";g=arcgisonline.map.dijit.toc.options.toolOptionsHtml(a,h)||"";c=esri.isTouchEnabled||r.query.useClick?c+('\x3cdiv id\x3d"'+a.id+"_"+h+'_tools" class\x3d"esriLeadingMargin102 toc_tools" style\x3d"display:none;"\x3e'):c+('\x3cdiv id\x3d"'+a.id+"_"+h+'_tools" class\x3d"esriLeadingMargin102 toc_tools" style\x3d"visibility:hidden"\x3e');c+=g;c+="\x3c/div\x3e";c+='\x3cdiv id\x3d"'+a.id+"_"+h+'_legend" class\x3d"toc_toggle_legend esriLeadingPadding08" style\x3d"display:none;"\x3e\x3c/div\x3e';
c+="\x3c/div\x3e"}if(a.tables){p=a.tables;for(l=p.length-1;0<=l;l--)r=p[l],h=r.id,g=r.name,r||(g=esri.i18nBundle.tocPanel.table,r.name=g),c+='\x3cdiv id\x3d"'+a.id+"_"+h+'" class\x3d"toc_sublayer esriLeadingMargin36"',r=arcgisonline.sharing.util.urlToObject(document.URL)||{},!esri.isTouchEnabled&&!r.query.useClick&&(c+=" onmouseover\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"','"+h+"');\""),c+="\x3e",c+='\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e\x3ctd valign\x3d"top" width\x3d"20"\x3e',
c+='\x3cdiv class\x3d"esriFloatLeading iconShowAttributeTable" style\x3d"display:inline; width:17px;"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e',c+="\x3c/td\x3e\x3ctd\x3e",c=esri.isTouchEnabled||r.query.useClick?c+('\x3cspan id\x3d"'+a.id+"_"+h+'_title" onclick\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"','"+h+'\');" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(g.replace(/\_/g," "))+"\x3c/span\x3e"):c+('\x3cspan id\x3d"'+a.id+"_"+h+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubLayerClick("+
e+","+l+'); return false;" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(g.replace(/\_/g," "))+"\x3c/span\x3e"),c+='\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e',c+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",g=arcgisonline.map.dijit.toc.options.toolOptionsHtml(a,h,!0)||"",c=esri.isTouchEnabled||r.query.useClick?c+('\x3cdiv id\x3d"'+a.id+"_"+h+'_tools" class\x3d"esriLeadingMargin102 toc_tools" style\x3d"display:none;"\x3e'):c+('\x3cdiv id\x3d"'+a.id+"_"+h+'_tools" class\x3d"esriLeadingMargin102 toc_tools" style\x3d"visibility:hidden"\x3e'),
c+=g,c+="\x3c/div\x3e",c+="\x3c/div\x3e"}}else if(a.layer&&(a.layer.layerInfos||a.layer.folders)){var u=a.layer instanceof esri.layers.KMLLayer,b=a.layer instanceof esri.layers.WMSLayer,E=a.layer instanceof esri.layers.GeoRSSLayer,y=a.layer instanceof esri.layers.ArcGISDynamicMapServiceLayer,r=function(c,d,h,f,g,l,r,m,p){l=arcgisonline.sharing.util.stripHTML(l);var s=c.subLayerIds;a.layer.folders&&(s=c.subFolderIds);s&&0<s.length&&(s=t.filter(s,function(a){return-1<p.indexOf(","+a+",")}));s&&0<s.length&&
r.push(s[s.length-1]);var n=arcgisonline.sharing.util.urlToObject(document.URL)||{},k="",k=k+('\x3cdiv id\x3d"'+a.id+"_"+g+'" class\x3d"toc_sublayer esriLeadingMargin27" ');a.layer.folders&&(k+='style\x3d"width:auto;"');!esri.isTouchEnabled&&!n.query.useClick&&!a.layer.folders&&(k+=" onmouseover\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"','"+g+"');\"");k+="\x3e";k+='\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e';if(esri.isTouchEnabled){if(k+='\x3ctd width\x3d"28" valign\x3d"top"\x3e',
s&&0!=s.length||c.networkLinkIds&&0!=c.networkLinkIds.length)k+='\x3cspan id\x3d"'+a.id+"_"+g+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+","+d+');" class\x3d"iconGroupClosed iconTouchPadding" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e'}else if(k+='\x3ctd width\x3d"16" valign\x3d"top"\x3e',s&&0!=s.length||c.networkLinkIds&&0!=c.networkLinkIds.length)k+='\x3cspan id\x3d"'+a.id+"_"+g+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+
e+","+d+');" class\x3d"iconGroupClosed" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e';k+="\x3c/td\x3e";k+='\x3ctd valign\x3d"top" width\x3d"20"\x3e';if(y&&!a.serviceInfo.singleFusedMapCache||b||u||E){k+='\x3cdiv id\x3d"'+a.id+"_"+g+'_check" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;"\x3e\x3cinput id\x3d"'+a.id+"_"+g+'_checkbox" dojotype\x3d"dijit.form.CheckBox" type\x3d"checkbox" onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').onSubLayerCheckClick('+e+","+d+","+h+',null,event)"';
if(!u&&!esri.isDefined(q)&&(c.defaultVisibility||!esri.isDefined(c.defaultVisibility))||esri.isDefined(q)&&-1<q.indexOf(","+g+",")||u&&c.visible)k+=' checked\x3d"true"';k+="/\x3e\x3c/div\x3e"}else k+='\x3cdiv id\x3d"'+a.id+"_"+g+'_icon" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;"\x3e\x3cimg src\x3d"images/Layer_LYR_File16.png" border\x3d"0"/\x3e\x3c/div\x3e';k+="\x3c/td\x3e\x3ctd\x3e";k=(!s||0==s.length)&&(!c.networkLinkIds||0==c.networkLinkIds.length)?esri.isTouchEnabled||n.query.useClick?
k+('\x3cspan id\x3d"'+a.id+"_"+g+'_title" onclick\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"','"+g+'\');" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(l.replace(/\_/g," "))+"\x3c/span\x3e"):a.layer.folders?k+('\x3cspan id\x3d"'+a.id+"_"+g+'_title" onmouseover\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"','"+g+'\');" class\x3d"toc_layerName"\x3e'+x.html.entities.encode(l.replace(/\_/g," "))+"\x3c/span\x3e"):k+('\x3cspan id\x3d"'+
a.id+"_"+g+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubLayerClick("+e+","+d+'); return false;" class\x3d"toc_name toc_layerName"\x3e'+x.html.entities.encode(l.replace(/\_/g," "))+"\x3c/span\x3e"):esri.isTouchEnabled||n.query.useClick?k+('\x3cspan id\x3d"'+a.id+"_"+g+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+","+d+"); arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"','"+g+'\');" class\x3d"toc_name toc_layerName"\x3e'+l+"\x3c/span\x3e"):
a.layer.folders?k+('\x3cspan id\x3d"'+a.id+"_"+g+'_title" onmouseover\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"','"+g+"');\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+","+d+'); return false;" class\x3d"toc_name toc_layerName"\x3e'+l+"\x3c/span\x3e"):k+('\x3cspan id\x3d"'+a.id+"_"+g+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+","+d+'); return false;" class\x3d"toc_name toc_layerName"\x3e'+l+"\x3c/span\x3e");
u&&(isKMLFeatColl=(d=a.layer.getFeatureCollection(a.layer.folders[d].id))&&0<d.length);if(!b&&(!u||isKMLFeatColl&&arcgisonline.map.role.isAllowed("toc_menu_analysis")))k+='\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e';k+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";if(!b&&(!u||isKMLFeatColl&&arcgisonline.map.role.isAllowed("toc_menu_analysis")))d=arcgisonline.map.dijit.toc.options.toolOptionsHtml(a,g,null)||"",k=esri.isTouchEnabled||n.query.useClick?k+('\x3cdiv id\x3d"'+a.id+"_"+g+'_tools" class\x3d"esriLeadingMargin26 toc_tools" style\x3d"display:none"\x3e'):
k+('\x3cdiv id\x3d"'+a.id+"_"+g+'_tools" class\x3d"esriLeadingMargin26 toc_tools" style\x3d"visibility:hidden"\x3e'),k+=d,k+="\x3c/div\x3e";null==s&&(!b&&!u)&&(k+='\x3cdiv id\x3d"'+a.id+"_"+g+'_legend" class\x3d"toc_toggle_legend esriLeadingPadding26" style\x3d"display:none;"\x3e\x3c/div\x3e');c.networkLinkIds&&0<c.networkLinkIds.length&&(k+='\x3cdiv id\x3d"'+a.id+"_"+g+'_netLink" class\x3d"toc_toggle_group" style\x3d"display:none;"\x3e',t.forEach(c.networkLinkIds,function(b){k+='\x3cdiv id\x3d"'+
a.id+"_"+g+"_netLink"+b+'" class\x3d"esriLeadingMargin2"\x3e\x3c/div\x3e'}),k+="\x3c/div\x3e");k+="\x3c/div\x3e";if(!s||0==s.length)for(s=g;r[r.length-1]==s;)if(m--,k+="\x3c/div\x3e",r.splice(r.length-1,1),g==s)s=c.parentLayerId,a.layer.folders&&(s=c.parentFolderId);else for(n=0;n<f.length;n++){if(f[n].id==s){s=f[n].parentLayerId;a.layer.folders&&(s=f[n].parentFolderId);break}}else m++,k+='\x3cdiv id\x3d"'+a.id+"_"+g+'_group" class\x3d"esriLeadingMargin2 toc_toggle_group" style\x3d"display:none;"\x3e';
return k},p=a.layer.layerInfos;arcgisonline.map.main.hasDynamicLayers(a)&&(p=a.itemLayers);var m=0,n=[];a.layer.folders&&(p=a.layer.folders,m=0);var v=",";t.forEach(p,function(a){v+=a.id+","});if(a.layer instanceof esri.layers.WMSLayer)for(l=p.length-1;l>=m;l--)h=p[l].name,g=p[l].title,c+=r(p[l],l,-1,p,h,g,n,1,v);else for(l=m;l<p.length;l++)if(h=p[l].id,!a.thematicGroup||!(a.thematicGroup.layerIds&&-1==t.indexOf(a.thematicGroup.layerIds,h)))a.layer.folders&&0==l&&-1<p[l].name.indexOf("?")&&(p[l].name=
p[l].name.substring(0,p[l].name.indexOf("?"))),g=p[l].name?p[l].name:"\x26lt;no name\x26gt;",c+=r(p[l],l,-1,p,h,g,n,1,v)}l=x.html.entities.encode(a.title.replace(/\_/g," "));h=!1;if(a.layer&&a.layer.dynamicLayerInfos&&a.layer.dynamicLayerInfos.length||a.layer&&a.layer.layerInfos&&a.layer.layerInfos.length||a.layer&&a.layer.folders||a.layers&&"mapNotes"!=a.type)h=!0;d+='\x3cdiv id\x3d"'+a.id+'" class\x3d"toc_layer ';arcgisonline.map.role.isAllowed("toc_menu_move")&&(d+=" dojoDndItem");r=arcgisonline.sharing.util.urlToObject(document.URL)||
{};!esri.isTouchEnabled&&!r.query.useClick&&(d+='" onmouseover\x3d"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools(\''+a.id+"');\"");d+=' style\x3d"-webkit-user-drag:element;-webkit-user-select:none;-khtml-user-drag:element;-khtml-user-select:none;" \x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e';d+='\x3ctd width\x3d"10"\x3e\x3cspan class\x3d"drag_handle" title\x3d"'+esri.i18nBundle.tocPanel.clickToDrag+'"\x3e\x3c/span\x3e';f&&(esri.isTouchEnabled?(d+='\x3c/td\x3e\x3ctd width\x3d"28" valign\x3d"top"\x3e',
h&&(d+='\x3cspan id\x3d"'+a.id+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onLayerClick("+e+');" class\x3d"iconGroupClosed iconTouchPadding" style\x3d"margin-top:2px;cursor:pointer;"\x3e\x3c/span\x3e')):(d+='\x3c/td\x3e\x3ctd width\x3d"16" valign\x3d"top"\x3e',h&&(d+='\x3cspan id\x3d"'+a.id+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onLayerClick("+e+');" class\x3d"iconGroupClosed" style\x3d"margin-top:2px;cursor:pointer;"\x3e\x3c/span\x3e')));d+='\x3c/td\x3e\x3ctd valign\x3d"top" width\x3d"20"\x3e';
d+='\x3cdiv id\x3d"'+a.id+'_check" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;padding-top:2px;"\x3e\x3cinput id\x3d"'+a.id+'_checkbox" dojotype\x3d"dijit.form.CheckBox" type\x3d"checkbox" onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').onLayerCheckClick('+e+',event)"';if(a.layers&&!0===a.visibility)d+=' checked\x3d"true"';else if(a.layer&&(!0===a.layer.visible||1===a.layer.visible))d+=' checked\x3d"true"';d+="/\x3e\x3c/div\x3e";d+="\x3c/td\x3e\x3ctd\x3e";esri.isTouchEnabled||
r.query.useClick?(h=h?" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onLayerClick("+e+"); arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"');\"":" onclick\x3d\"JavaScript:arcgisonline.map.dijit.toc.options.showTocTools('"+a.id+"');\"",d+='\x3cspan id\x3d"'+a.id+'_title"'+h+' class\x3d"toc_name toc_layerName"\x3e'+l+"\x3c/span\x3e"):d="mapNotes"===a.type||a.layer instanceof esri.layers.GeoRSSLayer||a.layer instanceof esri.layers.VectorTileLayer?d+('\x3cspan id\x3d"'+a.id+'_title" class\x3d"toc_layerName"\x3e'+
l+"\x3c/span\x3e"):d+('\x3cspan id\x3d"'+a.id+'_title"'+(" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onLayerClick("+e+'); return false;"')+' class\x3d"toc_name toc_layerName"\x3e'+l+"\x3c/span\x3e");d+='\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e';d+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";g=arcgisonline.map.dijit.toc.options.toolOptionsHtml(a)||"";d=esri.isTouchEnabled||r.query.useClick?d+('\x3cdiv id\x3d"'+a.id+'_tools" class\x3d"'+(f?"esriLeadingMargin36":"esriLeadingMargin22")+' toc_tools" style\x3d"display:none"\x3e'):
d+('\x3cdiv id\x3d"'+a.id+'_tools" class\x3d"'+(f?"esriLeadingMargin36":"esriLeadingMargin22")+' toc_tools" style\x3d"visibility:hidden"\x3e');d+=g;d+="\x3c/div\x3e";d+="\x3c/div\x3e";a.layer&&(a.layer.renderer||10.2<=a.layer.version&&a.layer instanceof esri.layers.ArcGISImageServiceLayer)?d+='\x3cdiv id\x3d"'+a.id+'_legend" class\x3d"'+(f?"esriLeadingPadding36":"esriLeadingPadding2")+' toc_toggle_legend" style\x3d"display:none;"\x3e\x3c/div\x3e':(d+='\x3cdiv id\x3d"'+a.id+'_sub" class\x3d"toc_toggle_layer" style\x3d"display:none;"\x3e',
d+=c);return d+="\x3c/div\x3e"},buildKMLNetworkLinkItems:function(e,f,d,c){if(f&&f.loaded&&f.folders){for(var a=!1,q=0;q<f.folders.length;q++)if(f.folders[q].networkLinkIds&&0<f.folders[q].networkLinkIds.length){var p=1;t.forEach(f.folders[q].networkLinkIds,function(l){var h=(d||f.id)+"_"+f.folders[q].id+"_netLink"+l,g=f.getFeature({type:"NetworkLink",id:l});if(g&&g.declaredClass){var u=g.linkInfo.href.split("?")[0].split("/"),u=g.linkInfo.name?g.linkInfo.name:u[u.length-1],b="",b=b+'\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e';
esri.isTouchEnabled?(b+='\x3ctd width\x3d"28" valign\x3d"top"\x3e',g.loaded&&(b+='\x3cspan id\x3d"'+h+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+'\',-2); return false;" class\x3d"iconGroupClosed iconTouchPadding" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e')):(b+='\x3ctd width\x3d"16" valign\x3d"top"\x3e',g.loaded&&(b+='\x3cspan id\x3d"'+h+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+'\',-2); return false;" class\x3d"iconGroupClosed" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e'));
b+="\x3c/td\x3e";b+='\x3ctd valign\x3d"top" width\x3d"20"\x3e';b+='\x3cdiv id\x3d"'+h+'_check" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;"\x3e\x3cinput id\x3d"'+h+'_checkbox" dojotype\x3d"dijit.form.CheckBox" type\x3d"checkbox" onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').onSubLayerCheckClick('+e+",null,"+l+",'"+d+"',event)\"";g.visible&&(b+=' checked\x3d"true"');b+="/\x3e\x3c/div\x3e";b+="\x3c/td\x3e\x3ctd\x3e";b=g.loaded?b+('\x3cspan id\x3d"'+h+"_title\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+
e+",'"+h+'\',-2); return false;" class\x3d"toc_name toc_layerName"\x3e'+u+"\x3c/span\x3e"):b+('\x3cspan id\x3d"'+h+'_title" class\x3d"toc_layerName"\x3e'+u+"\x3c/span\x3e");b+='\x3c/td\x3e\x3ctd width\x3d"18"\x3e';b+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";if(g.loaded){var u=[],x=","+t.map(g.folders,function(a){return a.id}).toString()+",";g.folders&&0<g.folders.length&&(b+='\x3cdiv id\x3d"'+h+'_group" class\x3d"esriLeadingMargin2 toc_toggle_group" style\x3d"display:none;"\x3e');for(var y=0;y<g.folders.length;y++){var m=
g.folders[y],n=m.id;-1<m.name.indexOf("?")&&(m.name=m.name.substring(0,m.name.indexOf("?")));var v=m.name&&0<m.name.length?m.name:"\x26lt;no name\x26gt;";m.subFolderIds&&0<m.subFolderIds.length&&(m.subFolderIds=t.filter(m.subFolderIds,function(a){return-1<x.indexOf(","+a+",")}));m.subFolderIds&&0<m.subFolderIds.length&&u.push(m.subFolderIds[m.subFolderIds.length-1]);b+='\x3cdiv id\x3d"'+h+"_"+n+'" class\x3d"toc_sublayer" style\x3d"width:auto;"\x3e';b+='\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e';
if(esri.isTouchEnabled){if(b+='\x3ctd width\x3d"28" valign\x3d"top"\x3e',m.subFolderIds&&0<m.subFolderIds.length||m.networkLinkIds&&0<m.networkLinkIds.length)b+='\x3cspan id\x3d"'+h+"_"+n+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+"',"+n+');" class\x3d"iconGroupClosed iconTouchPadding" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e'}else if(b+='\x3ctd width\x3d"16" valign\x3d"top"\x3e',m.subFolderIds&&0<m.subFolderIds.length||m.networkLinkIds&&0<m.networkLinkIds.length)b+=
'\x3cspan id\x3d"'+h+"_"+n+"_groupArrow\" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+"',"+n+');" class\x3d"iconGroupClosed" style\x3d"cursor:pointer;"\x3e\x3c/span\x3e';b+="\x3c/td\x3e";b+='\x3ctd valign\x3d"top" width\x3d"20"\x3e';b+='\x3cdiv id\x3d"'+h+"_"+n+'_check" class\x3d"esriFloatLeading" style\x3d"display:inline;width:17px;"\x3e\x3cinput id\x3d"'+h+"_"+n+'_checkbox" dojotype\x3d"dijit.form.CheckBox" type\x3d"checkbox" onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').onSubLayerCheckClick('+
e+","+n+","+l+",'"+d+"',event)\"";m.visible&&(b+=' checked\x3d"true"');var b=b+"/\x3e\x3c/div\x3e",b=b+"\x3c/td\x3e\x3ctd\x3e",z=g.getFeatureCollection(n);isKMLFeatColl=z&&0<z.length;var A="",B="";isKMLFeatColl&&arcgisonline.map.role.isAllowed("toc_menu_analysis")&&(B="arcgisonline.map.dijit.toc.options.showTocTools('"+h+"','"+n+"');");var F=arcgisonline.sharing.util.urlToObject(document.URL)||{};!esri.isTouchEnabled&&!F.query.useClick&&(A='onmouseover\x3d"'+B+'"',B="");b=m.subFolderIds&&0<m.subFolderIds.length?
b+('\x3cspan id\x3d"'+h+"_"+n+'_a" '+A+" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+"',"+n+"); "+B+' return false;" class\x3d"toc_name toc_layerName"\x3e'+v+"\x3c/span\x3e"):m.networkLinkIds&&0<m.networkLinkIds.length?b+('\x3cspan id\x3d"'+h+"_"+n+'_a" '+A+" onclick\x3d\"JavaScript:dijit.byId('tocPanel').onSubGroupLayerClick("+e+",'"+h+"',"+n+"); "+B+' return false;" class\x3d"toc_name toc_layerName"\x3e'+v+"\x3c/span\x3e"):b+("\x3cspan "+A+(B?'onclick\x3d"'+B+
'"':"")+"\x3e"+v+"\x3c/span\x3e");b+='\x3c/td\x3e\x3ctd width\x3d"18"\x3e';if(isKMLFeatColl&&arcgisonline.map.role.isAllowed("toc_menu_analysis")){var b=b+'\x3c/td\x3e\x3ctd width\x3d"18" valign\x3d"top"\x3e',C={layer:f,i:q,networkLinkId:l,link:g,k:y,folder:m,kmlFcollbycurfolder:z,baseId:h};c[q+"_"+l+"_"+y]=C}b+="\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";if(isKMLFeatColl&&arcgisonline.map.role.isAllowed("toc_menu_analysis")&&(z=C.kmlFcollbycurfolder,arcgisonline.map.dijit.toc.analysis.canPerformAnalysis()&&
0!==z.length))if(1===z.length)"esriGeometryPoint"===z[0].layerDefinition.geometryType&&(b+='\x3cdiv id\x3d"'+h+"_"+n+'_tools" class\x3d"esriLeadingMargin102 toc_tools"\x3e',b+='\x3cdiv class\x3d"iconPerformAnalysis toc_tool"\x3e\x3cspan onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').prepConfigureAnalysis('+q+", '"+l+"', "+y+"); dijit.byId('tocPanel').configureAnalysis({analysisType:'esriGeometryPoint'}, '"+f.id+'\',-1);" title\x3d"'+esri.i18nBundle.tocPanel.performAnalysis+'"\x3e\x3c/span\x3e\x3c/div\x3e',
b+="\x3c/div\x3e"),"esriGeometryPolyline"===z[0].layerDefinition.geometryType&&(b+='\x3cdiv id\x3d"'+h+"_"+n+'_tools" class\x3d"esriLeadingMargin102 toc_tools"\x3e',b+='\x3cdiv class\x3d"iconPerformAnalysis toc_tool"\x3e\x3cspan onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').prepConfigureAnalysis('+q+", '"+l+"', "+y+"); dijit.byId('tocPanel').configureAnalysis({analysisType:'esriGeometryPolyline'}, '"+f.id+'\',-1);" title\x3d"'+esri.i18nBundle.tocPanel.performAnalysis+'"\x3e\x3c/span\x3e\x3c/div\x3e',
b+="\x3c/div\x3e"),"esriGeometryPolygon"===z[0].layerDefinition.geometryType&&(b+='\x3cdiv id\x3d"'+h+"_"+n+'_tools" class\x3d"esriLeadingMargin102 toc_tools"\x3e',b+='\x3cdiv class\x3d"iconPerformAnalysis toc_tool"\x3e\x3cspan onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').prepConfigureAnalysis('+q+", '"+l+"', "+y+"); dijit.byId('tocPanel').configureAnalysis({analysisType:'esriGeometryPolygon'}, '"+f.id+'\',-1);" title\x3d"'+esri.i18nBundle.tocPanel.performAnalysis+'"\x3e\x3c/span\x3e\x3c/div\x3e',
b+="\x3c/div\x3e");else if(1<z.length){var v=h+"_"+n,b=b+('\x3cdiv id\x3d"'+v+'_tools" class\x3d"esriLeadingMargin102 toc_tools"\x3e'),b=b+"\x3c/div\x3e",D=0;arcgisonline.map.dijit.toc.options.intervalHandlers[v]&&clearInterval(arcgisonline.map.dijit.toc.options.intervalHandlers[v]);arcgisonline.map.dijit.toc.options.intervalHandlers[h+"_"+n]=setInterval(t.hitch(this,function(a,b){var c=t.byId(b+"_tools");if(c){clearInterval(arcgisonline.map.dijit.toc.options.intervalHandlers[b]);delete arcgisonline.map.dijit.toc.options.intervalHandlers[b];
w.byId(b+"_performAnalysisPopupMenu")&&w.byId(b+"_performAnalysisPopupMenu").destroy();c.innerHTML="";c=t.create("div",{"class":"iconPerformAnalysis toc_tool"},c);t.create("span",{id:b+"_performAnalysisPopup",title:esri.i18nBundle.tocPanel.performAnalysis},c);var d=new w.Menu({id:b+"_performAnalysisPopupMenu",targetNodeIds:[b+"_performAnalysisPopup"],leftClickToOpen:!0});t.forEach(z,function(b){if("esriGeometryPoint"===b.layerDefinition.geometryType){var c=new w.MenuItem({label:esri.i18nBundle.tocPanel.points,
onClick:t.hitch(this,function(a,c,d,e,f){w.byId("tocPanel").prepConfigureAnalysis(d,e,f);w.byId("tocPanel").configureAnalysis({analysisType:"esriGeometryPoint"},b.id,-1)},a,subId,q,l,y)});d.addChild(c)}"esriGeometryPolyline"===b.layerDefinition.geometryType&&(c=new w.MenuItem({label:esri.i18nBundle.tocPanel.lines,onClick:t.hitch(this,function(a,c,d,e,f){w.byId("tocPanel").prepConfigureAnalysis(d,e,f);w.byId("tocPanel").configureAnalysis({analysisType:"esriGeometryPolyline"},b.id,-1)},a,subId,q,l,
y)}),d.addChild(c));"esriGeometryPolygon"===b.layerDefinition.geometryType&&(c=new w.MenuItem({label:esri.i18nBundle.tocPanel.areas,onClick:t.hitch(this,function(a,c,d,e,f){w.byId("tocPanel").prepConfigureAnalysis(d,e,f);w.byId("tocPanel").configureAnalysis({analysisType:"esriGeometryPolygon"},b.id,-1)},a,subId,q,l,y)}),d.addChild(c))},this);d.startup()}else 10<D&&(clearInterval(arcgisonline.map.dijit.toc.options.intervalHandlers[b]),delete arcgisonline.map.dijit.toc.options.intervalHandlers[b]);
D++},parameterList,v),500)}else b+='\x3cdiv id\x3d"'+h+"_"+n+'_tools" class\x3d"esriLeadingMargin102 toc_tools"\x3e',b+='\x3cdiv class\x3d"iconPerformAnalysis toc_tool"\x3e\x3cspan onclick\x3d"JavaScript:dijit.byId(\'tocPanel\').prepConfigureAnalysis('+q+", '"+l+"', "+y+"); dijit.byId('tocPanel').configureAnalysis(null, '"+f.id+'\',-1);" title\x3d"'+esri.i18nBundle.tocPanel.performAnalysis+'"\x3e\x3c/span\x3e\x3c/div\x3e',b+="\x3c/div\x3e";m.networkLinkIds&&0<m.networkLinkIds.length&&(a=!0,b+='\x3cdiv id\x3d"'+
h+"_"+n+'_netLink" class\x3d"toc_toggle_group" style\x3d"display:none;"\x3e',t.forEach(m.networkLinkIds,function(a){b+='\x3cdiv id\x3d"'+h+"_"+n+"_netLink"+a+'" class\x3d"esriLeadingMargin2"\x3e\x3c/div\x3e'}),b+="\x3c/div\x3e");b+="\x3c/div\x3e";if(!m.subFolderIds||0==m.subFolderIds.length)for(v=n;u[u.length-1]==v;)if(p--,b+="\x3c/div\x3e",u.splice(u.length-1,1),m.id==v)v=m.parentFolderId;else for(A=0;A<g.folders.length;A++){if(g.folders[A].id==v){v=g.folders[A].parentFolderId;break}}else p++,b+=
'\x3cdiv id\x3d"'+h+"_"+n+'_group" class\x3d"esriLeadingMargin2 toc_toggle_group" style\x3d"display:none;"\x3e'}b+="\x3c/div\x3e"}t.byId(h).innerHTML=b}})}if(a)for(q=0;q<f.folders.length;q++){var l=f.folders[q];l.networkLinkIds&&0<l.networkLinkIds.length&&t.forEach(l.networkLinkIds,function(a){var h=f.getFeature({type:"NetworkLink",id:a});h.declaredClass&&arcgisonline.map.dijit.toc.html.buildKMLNetworkLinkItems(e,h,(d||f.id)+"_"+l.id+"_netLink"+a,c)})}}}}});