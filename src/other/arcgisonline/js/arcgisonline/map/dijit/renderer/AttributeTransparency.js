// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/map/dijit/renderer/templates/AttributeTransparency.html":'\x3cdiv data-dojo-type\x3d"dijit.layout.BorderContainer" region\x3d"top" style\x3d"height:100%; padding:5px;"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" id\x3d"AttributeTransparencyContent" region\x3d"center" style\x3d"overflow-y:auto;padding:2px;"\x3e\r\n    \x3cdiv style\x3d"padding-bottom:10px;"\x3e${i18n.attributeTransparencyMsg}\x3c/div\x3e\r\n    \x3ctable style\x3d"width:100%;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd nowrap\x3e\r\n            \x3cdiv\x3e\r\n              \x3clabel class\x3d"firstColumnLabel"\x3e\r\n              ${i18n.field}\x26nbsp;\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"_rendererAttributeTransparencyAttribute" data-dojo-attach-event\x3d"onChange:_onChangeAttribute" data-dojo-type\x3d"dijit.form.Select" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr class\x3d"AttributeTransparencyToggle"\x3e\r\n          \x3ctd nowrap\x3e\r\n            \x3cdiv\x3e\r\n              \x3clabel class\x3d"firstColumnLabel"\x3e\r\n              ${i18n.dividedBy}\x26nbsp;\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"_rendererAttributeTransparencyDividedByAttribute" data-dojo-attach-event\x3d"onChange:_onChangeDividedByAttribute" data-dojo-type\x3d"dijit.form.Select" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable style\x3d"width:100%;" class\x3d"AttributeTransparencyToggle"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd height\x3d"221" width\x3d"100%"\x3e\r\n            \x3cdiv id\x3d"rendererAttributeTransparencySliderDiv"\x3e\r\n              \x3cdiv id\x3d"rendererAttributeTransparencySlider"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd nowrap class\x3d"toolsColumnTD" style\x3d"text-align:center; vertical-align:top; padding-top:20px;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_rendererAttributeTransparencyZoomTitle" data-dojo-attach-event\x3d"onClick:_onClickZoom" class\x3d"rightIcons" style\x3d"padding-top: 15px;"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_rendererAttributeTransparencyZoomIcon" class\x3d"zoomIcon"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_rendererAttributeTransparencyZoomLabel" class\x3d"toolsLabel"\x3e${i18n.zoomIn}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_estimatedValuesMsg" class\x3d"small estimateMsg" style\x3d"display: none;"\x3e\r\n      ${i18n.estimatedValuesMsg}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_zeroFeaturesMsg" class\x3d"small zeroFeaturesMsg" style\x3d"display: none;"\x3e\r\n      ${i18n.zeroFeaturesMsg}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_rendererAttributeTransparencyTransparency" style\x3d"clear:both;margin-top:10px;" class\x3d"AttributeTransparencyToggle"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_rendererAttributeTransparencyTransparencyTitle" class\x3d"sectionTitle" \x3e\r\n        ${i18n.transparencyRange}\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; padding: 10px 10px 0 10px;"\x3e\r\n        \x3ctable\x3e\r\n          \x3ctbody\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd nowrap\x3e\r\n                \x3cspan\x3e${i18n.highValues}\x3c/span\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"_rendererAttributeTransparencyMin" data-dojo-attach-event\x3d"onChange:_onChangeMin" intermediateChanges\x3d"true" data-dojo-type\x3d"dijit.form.NumberSpinner" value\x3d"30" smallDelta\x3d"5" constraints\x3d"{min:0,max:100,places:0}" style\x3d"width:40px; margin: 0 2px;" /\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cspan\x3e%\x3c/span\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd nowrap\x3e\r\n                \x3cspan\x3e${i18n.lowValues}\x3c/span\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"_rendererAttributeTransparencyMax" data-dojo-attach-event\x3d"onChange:_onChangeMax" intermediateChanges\x3d"true" data-dojo-type\x3d"dijit.form.NumberSpinner" value\x3d"70" smallDelta\x3d"5" constraints\x3d"{min:0,max:100,places:0}" style\x3d"width:40px; margin: 0 2px;" /\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cspan\x3e%\x3c/span\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"padding-top:10px;"\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite blue" data-dojo-attach-point\x3d"_doneChangingButton" data-dojo-attach-event\x3d"onClick:_onOK"\x3e\x3cspan\x3e${i18n.ok}\x3c/span\x3e\x3c/button\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit.form.Button" type\x3d"button" class\x3d"calcite transparent" data-dojo-attach-point\x3d"_cancelButton" data-dojo-attach-event\x3d"onClick:_onCancel"\x3e\x3cspan\x3e${i18n.cancel}\x3c/span\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("arcgisonline/map/dijit/renderer/AttributeTransparency","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/html dojo/Evented dojo/string dojo/dom dojo/has dojo/topic dojo/query dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-style dijit/registry dijit/TooltipDialog dijit/Tooltip dojo/store/Memory esri/renderers/smartMapping esri/lang esri/symbols/jsonUtils arcgisonline/map/dijit/renderer/_SymbolsMixin arcgisonline/map/dijit/renderer/_UniqueValuesMixin arcgisonline/map/dijit/renderer/_OpacityMixin arcgisonline/map/dijit/renderer/_RendererMixin dojo/i18n!arcgisonline/nls/arcgisonline dijit/_Widget dijit/_Templated dojo/text!arcgisonline/map/dijit/renderer/templates/AttributeTransparency.html".split(" "),
function(g,b,m,h,n,B,C,D,p,E,d,F,q,k,c,G,H,r,I,s,J,K,t,u,v,w,l,x,y,z){g=g([x,y],{declaredClass:"arcgisonline.map.dijit.renderer.AttributeTransparency",basePath:require.toUrl("arcgisonline/map/dijit/renderer"),baseClass:"esriAGOAttributeTransparency",widgetsInTemplate:!0,templateString:z,i18n:null,disableAllEvents:!0,container:null,subLayerId:null,mapLayer:null,layer:null,renderer:null,symbol:null,scheme:null,origPanelRenderer:null,tooltips:[],constructor:function(a,c){b.mixin(this,t);b.mixin(this,
u);b.mixin(this,v);b.mixin(this,w);a&&(b.mixin(this,a),this.renderer=this.layer.renderer,this.opacityInfo=this.getOpacityInfo(),this.authoringInfo=b.clone(this.renderer.authoringInfo))},destroy:function(){this.destroyBusy(this._doneChangingButton);this.destroyAttributeTransparencySlider();m.forEach(this.tooltips,function(a){a.destroy()});this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.clone(l.common);b.mixin(this.i18n,l.rendererCommon);b.mixin(this.i18n,
l.rendererAttributeTransparencyDlg)},postCreate:function(){var a=40;d(".toolsLabel").forEach(function(b){a=Math.max(a,n.coords(b).w)});d(".toolsColumnTD").style("width",a+10+"px")},_onClose:function(a){a.preventDefault();this.hideBusy(this._doneChangingButton);this.dismissRendererChanges(this.origPanelRenderer);h.publish("attribute-transparency-stop")},_onCancel:function(a){a.preventDefault();this.hideBusy(this._doneChangingButton);this.dismissRendererChanges(this.origPanelRenderer);h.publish("attribute-transparency-stop")},
_onOK:function(a){a.preventDefault();this.hideBusy(this._doneChangingButton);h.publish("attribute-transparency-commit",[{opacityInfo:this.opacityInfo,authoringInfo:this.authoringInfo}])},startup:function(){this.inherited(arguments);this._init()},_init:function(){this.origPanelRenderer=this.buildCurrentRendererInfo();this.updateUIWithRenderer();setTimeout(b.hitch(this,function(){this.disableAllEvents=!1}),1E3);this.createTooltips()},updateUIWithRenderer:function(){this._rendererAttributeTransparencyAttribute.setStore(this.attributesStore,
this.i18n.none,{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger' OR type:'none') AND NOT name:'"+this.layer.objectIdField+"'"});this._rendererAttributeTransparencyDividedByAttribute.setStore(this.attributesStore,this.i18n.none,{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger' OR type:'none') AND NOT name:'"+this.layer.objectIdField+"'"+
(this.opacityInfo&&this.opacityInfo.field?" AND NOT name:'"+this.opacityInfo.field+"'":"")});var a=60;m.forEach(d(".firstColumnLabel",this.domNode),function(A){a=Math.max(a,n.coords(A).w)});var e=335-a;c.set(this._rendererAttributeTransparencyAttribute.domNode,"width",e+"px");c.set(this._rendererAttributeTransparencyDividedByAttribute.domNode,"width",e+"px");c.set(this._estimatedValuesMsg,"display","none");c.set(this._zeroFeaturesMsg,"display","none");this.opacityInfo&&this.opacityInfo.field?(!this.opacityInfo.stops&&
this.opacityInfo.opacityValues&&(this.opacityInfo.stops=[{opacity:this.opacityInfo.opacityValues[0],value:this.opacityInfo.minDataValue},{opacity:this.opacityInfo.opacityValues[1],value:this.opacityInfo.maxDataValue}],delete this.opacityInfo.opacityValues,delete this.opacityInfo.minDataValue,delete this.opacityInfo.maxDataValue),d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","")}),this._rendererAttributeTransparencyAttribute.set("value",this.opacityInfo.field),this.opacityInfo.normalizationField&&
this._rendererAttributeTransparencyDividedByAttribute.set("value",this.opacityInfo.normalizationField),this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomIn,c.set(this._rendererAttributeTransparencyZoomTitle,"display",""),this._rendererAttributeTransparencyMax.set("value",100-100*this.opacityInfo.stops[0].opacity),this._rendererAttributeTransparencyMin.set("value",100-100*this.opacityInfo.stops[1].opacity),9>p("ie")?setTimeout(b.hitch(this,function(){this.createAttributeTransparencySlider({opacityInfo:this.opacityInfo,
authoringInfo:this.authoringInfo}).then(b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),b.hitch(this,function(a){this.showBusy("AttributeTransparencyContent",a,this._doneChangingButton,960)}))}),1E3):this.createAttributeTransparencySlider({opacityInfo:this.opacityInfo,authoringInfo:this.authoringInfo}).then(b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),
b.hitch(this,function(a){this.showBusy("AttributeTransparencyContent",a,this._doneChangingButton,960)}))):(d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","none")}),this._rendererAttributeTransparencyAttribute.set("value",this.i18n.none))},createTooltips:function(){var a=function(a){return"\x3cdiv class\x3d'rendererTooltip'\x3e"+a+"\x3c/div\x3e"};this.tooltips.push(new r({connectId:this._rendererAttributeTransparencyZoomTitle,label:a(this.i18n.zoomTooltip)}));this.tooltips.push(new r({connectId:this._rendererAttributeTransparencyDividedByAttribute.domNode,
label:a(this.i18n.dividedByTooltip)}))},_onChangeAttribute:function(){if(!this.disableAllEvents){c.set(this._estimatedValuesMsg,"display","none");c.set(this._zeroFeaturesMsg,"display","none");var a=this._rendererAttributeTransparencyAttribute.get("value");if(a!==this.i18n.none){this.disableAllEvents=!0;this._rendererAttributeTransparencyDividedByAttribute.setStore(this.attributesStore,this.i18n.none,{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger' OR type:'none') AND NOT name:'"+
this.layer.objectIdField+"' AND NOT name:'"+a+"'"});this.opacityInfo&&(this.opacityInfo.normalizationField&&this.opacityInfo.normalizationField!==a)&&this._rendererAttributeTransparencyDividedByAttribute.set("value",this.opacityInfo.normalizationField);setTimeout(b.hitch(this,function(){this.disableAllEvents=!1}),1E3);d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","")});this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomIn;c.set(this._rendererAttributeTransparencyZoomTitle,
"display","");var e={layer:this.fLayer||this.layer,field:a,useStdDev:!0},a=this._rendererAttributeTransparencyDividedByAttribute.get("value");a!==this.i18n.none&&(e.normalizationField=a);(this.fLayer||this.layer).addPlugin("esri/plugins/FeatureLayerStatistics").then(b.hitch(this,function(){var a=new q;this.showBusy("AttributeTransparencyContent",a,this._doneChangingButton,960);s.createOpacityInfo(e).then(b.hitch(this,function(f){if(!a.isRejected()){a.resolve();this.opacityInfo&&(f.opacityInfo.stops[0].opacity=
this.opacityInfo.stops[0].opacity,f.opacityInfo.stops[1].opacity=this.opacityInfo.stops[1].opacity);this.opacityInfo=f.opacityInfo;this._rendererAttributeTransparencyMax.set("value",100-100*this.opacityInfo.stops[0].opacity);this._rendererAttributeTransparencyMin.set("value",100-100*this.opacityInfo.stops[1].opacity);this.authoringInfo=this.renderer.authoringInfo||{};var c=[];this.authoringInfo.visualVariables&&(c=this.getVisualVariablesExceptType("transparencyInfo",null,this.authoringInfo.visualVariables)||
[]);c.push({type:"transparencyInfo",minSliderValue:f.statistics.min,maxSliderValue:f.statistics.max});this.authoringInfo.visualVariables=c;this.createAttributeTransparencySlider({opacityInfo:this.opacityInfo,statistics:f.statistics}).then(b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}))}}),b.hitch(this,function(b){a.isRejected()||(a.resolve(),this.hideBusy(this._doneChangingButton),this.handleError(b,"createOpacityInfo",
!0))}))}),b.hitch(this,function(a){this.hideBusy(this._doneChangingButton);this.handleError(a,"addPlugin",!0)}))}else this._rendererAttributeTransparencyDividedByAttribute.setStore(this.attributesStore,this.i18n.none,{query:"(type:'esriFieldTypeSingle' OR type:'esriFieldTypeDouble' OR type:'esriFieldTypeInteger' OR type:'esriFieldTypeSmallInteger' OR type:'none') AND NOT name:'"+this.layer.objectIdField+"'"}),this.opacityInfo&&this.opacityInfo.normalizationField&&this._rendererAttributeTransparencyDividedByAttribute.set("value",
this.opacityInfo.normalizationField),delete this.opacityInfo,d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","none")}),this.destroyAttributeTransparencySlider()}},_onChangeDividedByAttribute:function(){if(!this.disableAllEvents){var a=this._rendererAttributeTransparencyAttribute.get("value");if(a!==this.i18n.none){d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","")});this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomIn;c.set(this._rendererAttributeTransparencyZoomTitle,
"display","");var e={layer:this.fLayer||this.layer,field:a,useStdDev:!0},a=this._rendererAttributeTransparencyDividedByAttribute.get("value");a!==this.i18n.none&&(e.normalizationField=a);(this.fLayer||this.layer).addPlugin("esri/plugins/FeatureLayerStatistics").then(b.hitch(this,function(){var a=new q;this.showBusy("AttributeTransparencyContent",a,this._doneChangingButton,960);s.createOpacityInfo(e).then(b.hitch(this,function(c){if(!a.isRejected()){a.resolve();this.opacityInfo&&(c.opacityInfo.stops[0].opacity=
this.opacityInfo.stops[0].opacity,c.opacityInfo.stops[1].opacity=this.opacityInfo.stops[1].opacity);this.opacityInfo=c.opacityInfo;this._rendererAttributeTransparencyMax.set("value",100-100*this.opacityInfo.stops[0].opacity);this._rendererAttributeTransparencyMin.set("value",100-100*this.opacityInfo.stops[1].opacity);this.authoringInfo=this.renderer.authoringInfo||{};var d=[];this.authoringInfo.visualVariables&&(d=this.getVisualVariablesExceptType("transparencyInfo",null,this.authoringInfo.visualVariables)||
[]);d.push({type:"transparencyInfo",minSliderValue:c.statistics.min,maxSliderValue:c.statistics.max});this.authoringInfo.visualVariables=d;this.createAttributeTransparencySlider({opacityInfo:this.opacityInfo,statistics:c.statistics}).then(b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}),b.hitch(this,function(a){this.hideBusy(this._doneChangingButton)}))}}),b.hitch(this,function(b){a.isRejected()||(a.resolve(),this.hideBusy(this._doneChangingButton),this.handleError(b,"createOpacityInfo",
!1))}))}),b.hitch(this,function(a){this.handleError(a,"addPlugin",!1)}))}else delete this.opacityInfo,d(".AttributeTransparencyToggle").forEach(function(a){c.set(a,"display","none")}),this.destroyAttributeTransparencySlider()}},_onClickZoom:function(){this.disableAllEvents||(this.opacitySlider.get("zoomOptions")?(this.zoomOutOpacitySlider(),k.remove(this._rendererAttributeTransparencyZoomIcon,"active"),this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomIn):this.zoomInOpacitySlider({opacityInfo:this.opacityInfo}).then(b.hitch(this,
function(a){k.add(this._rendererAttributeTransparencyZoomIcon,"active");this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomOut}),b.hitch(this,function(a){})))},clearZoom:function(){"type"===this.getRendererStyle(this.renderer)&&this.opacitySlider&&(this.opacitySlider.get("zoomOptions")&&this.zoomOutOpacitySlider(),k.remove(this._rendererAttributeTransparencyZoomIcon,"active"),this._rendererAttributeTransparencyZoomLabel.innerHTML=this.i18n.zoomIn)},onAttributeTransparencySliderChange:function(a){},
_onChangeMin:function(){this.disableAllEvents||(0>this._rendererAttributeTransparencyMin.get("value")&&this._rendererAttributeTransparencyMin.set("value",0),100<this._rendererAttributeTransparencyMin.get("value")&&this._rendererAttributeTransparencyMin.set("value",100),this.opacityInfo&&(this.opacityInfo.stops[1].opacity=(100-this._rendererAttributeTransparencyMin.get("value"))/100,this.updateAttributeTransparencySlider(this.opacityInfo)))},_onChangeMax:function(){this.disableAllEvents||(0>this._rendererAttributeTransparencyMax.get("value")&&
this._rendererAttributeTransparencyMax.set("value",0),100<this._rendererAttributeTransparencyMax.get("value")&&this._rendererAttributeTransparencyMax.set("value",100),this.opacityInfo&&(this.opacityInfo.stops[0].opacity=(100-this._rendererAttributeTransparencyMax.get("value"))/100,this.updateAttributeTransparencySlider(this.opacityInfo)))}});p("extend-esri")&&b.setObject("arcgisonline.map.dijit.renderer.AttributeTransparency",g);return g});