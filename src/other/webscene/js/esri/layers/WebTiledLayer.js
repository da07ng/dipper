// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("../core/declare dojo/_base/lang dojo/_base/url dojo/string ../core/urlUtils ../geometry/SpatialReference ../geometry/Extent ../geometry/Point ./TiledLayer ./support/TileInfo ./support/LOD".split(" "),function(n,h,k,l,p,c,q,r,s,t,a){return n(s,{declaredClass:"esri.layers.WebTiledLayer",classMetadata:{computed:{urlPath:["urlTemplate"],tileServers:["urlTemplate","subDomains","urlPath"],levelValues:["tileInfo"]}},normalizeCtorArgs:function(e,a){return"string"===typeof e?h.mixin({urlTemplate:e},
a||{}):e},getDefaults:function(e){var b=new q(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,c.WebMercator);return h.mixin(this.inherited(arguments),{fullExtent:b,initialExtent:b,tileInfo:new t({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:new r({x:-2.0037508342787E7,y:2.0037508342787E7,spatialReference:c.WebMercator}),spatialReference:c.WebMercator,lods:[new a({level:0,scale:5.91657527591555E8,resolution:156543.033928}),new a({level:1,scale:2.95828763795777E8,
resolution:78271.5169639999}),new a({level:2,scale:1.47914381897889E8,resolution:39135.7584820001}),new a({level:3,scale:7.3957190948944E7,resolution:19567.8792409999}),new a({level:4,scale:3.6978595474472E7,resolution:9783.93962049996}),new a({level:5,scale:1.8489297737236E7,resolution:4891.96981024998}),new a({level:6,scale:9244648.868618,resolution:2445.98490512499}),new a({level:7,scale:4622324.434309,resolution:1222.99245256249}),new a({level:8,scale:2311162.217155,resolution:611.49622628138}),
new a({level:9,scale:1155581.108577,resolution:305.748113140558}),new a({level:10,scale:577790.554289,resolution:152.874056570411}),new a({level:11,scale:288895.277144,resolution:76.4370282850732}),new a({level:12,scale:144447.638572,resolution:38.2185141425366}),new a({level:13,scale:72223.819286,resolution:19.1092570712683}),new a({level:14,scale:36111.909643,resolution:9.55462853563415}),new a({level:15,scale:18055.954822,resolution:4.77731426794937}),new a({level:16,scale:9027.977411,resolution:2.38865713397468}),
new a({level:17,scale:4513.988705,resolution:1.19432856685505}),new a({level:18,scale:2256.994353,resolution:0.597164283559817}),new a({level:19,scale:1128.497176,resolution:0.298582141647617})]})})},copyright:"",_levelValuesGetter:function(){var e=[];if(!this.tileInfo)return null;this.tileInfo.lods.forEach(function(a){e[a.level]=a.levelValue||a.level},this);return e},spatialReference:c.WebMercator,subDomains:null,tileServers:null,_tileServersGetter:function(){var a=new k(this.urlTemplate),b=a.scheme?
a.scheme+"://":"//",c=b+a.authority+"/",d=this.subDomains,g,f=[];-1===a.authority.indexOf("{subDomain}")&&f.push(c);d&&(0<d.length&&1<a.authority.split(".").length)&&d.forEach(function(m,d){-1<a.authority.indexOf("${subDomain}")?g=b+l.substitute(a.authority,{subDomain:m})+"/":-1<a.authority.indexOf("{subDomain}")&&(g=b+a.authority.replace(/\{subDomain\}/gi,m)+"/");f.push(g)},this);return f=f.map(function(a){"/"!==a.charAt(a.length-1)&&(a+="/");return a})},_urlPathGetter:function(){if(!this.urlTemplate)return null;
var a=this.urlTemplate,b=new k(a);return a.substring(((b.scheme?b.scheme+"://":"//")+b.authority+"/").length)},urlTemplate:null,getTileUrl:function(a,b,c){a=this.levelValues[a];var d=this.tileServers[b%this.tileServers.length]+l.substitute(this.urlPath,{level:a,col:c,row:b}),d=d.replace(/\{level\}/gi,a).replace(/\{row\}/gi,b).replace(/\{col\}/gi,c);return p.addProxy(d)}})});