// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/Error",["dijit","dojo","dojox","dojo/require!arcgisonline/sharing/util,arcgisonline/sharing/geow/Account"],function(d,a,g){a.provide("arcgisonline.sharing.dijit.Error");a.require("arcgisonline.sharing.util");a.require("arcgisonline.sharing.geow.Account");a.declare("arcgisonline.sharing.dijit.Error",[d._Widget,d._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv\x3e\r\n\t\x3cdiv dojoType\x3d"dijit.layout.ContentPane" region\x3d"top"\x3e\r\n\t\t\x3cdiv id\x3d"main-section" style\x3d"padding:20px;"\x3e\r\n\t\t\t\x3cspan id\x3d"error-message"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e \r\n\x3c/div\x3e\r\n',
_isSingleTenant:!1,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").errorPage);a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").errorWidget)},startup:function(){this._isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&null!==esriGeowConfig.isMultiTenant&&!1===esriGeowConfig.isMultiTenant;var b=a.queryToObject(window.location.search.slice(1)).c;
null!=b&&0<b.length?(a.attr(a.byId("error-message"),"innerHTML",this.findMessage(b)),0<this.findTitle(b).length&&a.attr(a.byId("item-title"),"innerHTML",this.findTitle(b)),("UseWebAdaptor"===b||"WebAdaptorRequired"===b)&&arcgisonline.sharing.geow.Account.getSelf(a.hitch(this,function(e){var c=a.clone(e.portalHostname);-1!==c.indexOf(":")&&(c=c.substring(0,c.indexOf(":"))+c.substring(c.lastIndexOf("/")));c=c.toLowerCase();a.attr(a.byId("item-title"),"innerHTML",this.findTitle(b));var f=location.protocol+
"//"+arcgisonline.sharing.util.cleanPorts(c)+"/home",f="\x3cspan\x3e"+f+"\x3c/span\x3e";if("UseWebAdaptor"===b)a.create("div",{innerHTML:esri.substitute({webAdaptorUrl:f},"\x3cbr/\x3e"+this.i18n.webAdaptorUrl)},a.byId("error-message"));else{e=e.culture?e.culture:"en";var d=esriGeowConfig.baseUrl.replace("/home","/portalhelp")+e+"/admin/help/";esri.request({url:d+"cxhelp.js"}).then(a.hitch(this,function(b){a.create("div",{innerHTML:esri.substitute({startLink:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+
(d+b.m["120000807"])+'" target\x3d"_blank"\x3e',endLink:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.webAdaptorNotConfigured)},a.byId("error-message"));a.create("div",{innerHTML:esri.substitute({webAdaptorUrl:f},"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.webAdaptorCompleteInstallation)},a.byId("error-message"))}))}}))):(a.attr(a.byId("item-title"),"innerHTML",this.findTitle("default")),a.attr(a.byId("error-message"),"innerHTML",this.findMessage("default")))},findMessage:function(b){arcgisonline.sharing.util.getUser();
switch(b){case "InvalidItem":return this.i18n.itemNotFound+"\x3cbr/\x3e"+this.i18n.invalidItem;case "AccessDeniedResource":return this.i18n.accessDeniedResource;case "InvalidGroup":return this.i18n.invalidGroup+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.goTo+"\x3cspan class\x3d'esriItemLinks'\x3e\x3cA href\x3d'groups.html'\x3e"+this.i18n.myGroups+"\x3c/A\x3e\x3c/span\x3e";case "InvalidOrganization":return this.i18n.invalidOrganization+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.goTo+"\x3cspan class\x3d'esriItemLinks'\x3e\x3cA href\x3d'groups.html'\x3e"+
this.i18n.myGroups+"\x3c/A\x3e\x3c/span\x3e";case "AccessDeniedOrganization":return this.i18n.accessDeniedOrganization+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.goTo+"\x3cspan class\x3d'esriItemLinks'\x3e\x3cA href\x3d'content.html'\x3e"+this.i18n.myContent+"\x3c/A\x3e\x3c/span\x3e";case "NoGroupEditPermission":return this.i18n.noGroupEditPermission;case "SSLRequired":return b=esriGeowConfig.baseUrl.replace("http:","https:")+esriGeowConfig.signin,a.string.substitute(this.i18n.securityEnabled,[this._isSingleTenant?
this.i18n.portal:this.i18n.organization])+"\x3cbr/\x3e\x3cbr/\x3e\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'"+b+"'\x3e"+this.i18n.signIn+"\x3c/a\x3e\x3c/span\x3e";case "WebAdaptorRequired":return"";case "UseWebAdaptor":return this.i18n.useWebAdaptor;case "PortalSignIn":return b=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'"+esriGeowConfig.baseUrl+"'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.portalOnceResolved),this.i18n.signInSoftAuth+"\x3cbr/\x3e\x3cbr/\x3e"+
b;case "PortalCreateAccount":return b=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'"+esriGeowConfig.baseUrl+"'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.portalOnceResolved),this.i18n.createAccountSoftAuth+"\x3cbr/\x3e\x3cbr/\x3e"+b;default:return this.i18n.defaultError}},findTitle:function(a){switch(a){case "InvalidItem":return this.i18n.notFound;case "InvalidGroup":return this.i18n.groupNotFound;case "InvalidOrganization":return this.i18n.invalidOrganization;
case "AccessDeniedOrganization":return this.i18n.insuffPriv;case "NoGroupEditPermission":return this.i18n.noEdit;case "SSLRequired":return this.i18n.sslRequired;case "WebAdaptorRequired":return this.i18n.webAdaptorRequired;case "UseWebAdaptor":return this.i18n.webAdaptorRequired;case "PortalSignIn":return this.i18n.signInError;case "PortalCreateAccount":return this.i18n.createAccountError;default:return this.i18n.itemTitle}}})});