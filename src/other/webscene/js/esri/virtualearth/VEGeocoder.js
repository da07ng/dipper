// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["../core/declare","dojo/_base/lang","../request","../tasks/Task","./VEGeocodeResult"],function(c,d,e,f,g){var b=window.location.protocol;"file:"===b&&(b="http:");return c(f,{declaredClass:"esri.virtualearth.VEGeocoder",url:null,_bingMapsKeySetter:function(a){this.bingMapsKey=a},culture:"en-US",_cultureSetter:function(a){this.culture=a||"en-US"},constructor:function(){this._queue=[]},initialize:function(){if(!this.bingMapsKey)throw Error("BingMapsKey must be provided.");},getDefaults:function(){return{url:b+
"//serverapi.arcgisonline.com/veadaptor/production/services/geocode/geocode"}},addressToLocations:function(a){if(this.bingMapsKey){var b=d.mixin({},this.parsedUrl.query,{query:a,token:this.bingMapsKey,culture:this.culture});return e({url:this.parsedUrl.path,content:b,callbackParamName:"callback"}).then(this._handleAddressToLocationsResponse)}console.debug("Server token not retrieved. Queing request to be executed after server token retrieved.");this._queue.push(arguments)},_handleAddressToLocationsResponse:function(a){return a.map(function(a){return g.fromJSON(a)})}})});