// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/dialog/SharingDlg",["dijit","dojo","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,arcgisonline/sharing/dijit/ShareOptions"],function(c,a,f){a.provide("arcgisonline.sharing.dijit.dialog.SharingDlg");a.require("dijit.Dialog");a.require("dijit._Widget");a.require("dijit._Templated");a.require("arcgisonline.sharing.dijit.ShareOptions");a.declare("arcgisonline.sharing.dijit.dialog.SharingDlg",[c._Widget,c._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"_shareDialog" id\x3d"share-dialog" title\x3d"${i18n.sharingDlgTitle}" execute\x3d""\x3e\r\n    \x3clabel\x3e${i18n.shareItemsLabel}\x3c/label\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv style\x3d"padding-left:15px; padding-top:5px;" dojotype\x3d"arcgisonline.sharing.dijit.ShareOptions" dojoAttachPoint\x3d"_shareOptions"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"line-height:25px; padding-left:15px;"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel\x3e${i18n.settingsMsg}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv dojoAttachPoint\x3d"_shareNoGroupsDiv" style\x3d"display:none;"\x3e\r\n        \x3clabel\x3e${i18n.notAMemberMsg}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv dojoAttachPoint\x3d"_shareOwnerNoneDiv" style\x3d"display:none;"\x3e\r\n        \x3clabel\x3e${i18n.notOwnerMsg}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding-bottom:1.0em;"\x3e\r\n    \x3cbr /\x3e\r\n    \x3cspan class\x3d"disabled" style\x3d"display:none;"\x3e${i18n.sharingItems}\x3c/span\x3e\r\n    \x3cbutton class\x3d"jevent primary" dojotype\x3d"dijit.form.Button"  dojoAttachEvent\x3d"onClick:_handleOkResponse"\x3e\r\n      ${i18n.ok}\r\n    \x3c/button\x3e\r\n    \x3cbutton id\x3d"button_share-cancel" class\x3d"jevent cancel" type\x3d"cancel" dojotype\x3d"dijit.form.Button" dojoAttachEvent\x3d"onClick:_handleCancelClick"\x3e\r\n      ${i18n.cancel}\r\n    \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
i18n:null,_shareDialog:null,_shareOptions:null,_shareNoGroupsDiv:null,_shareOwnerNoneDiv:null,statics:{_instance:null,getInstance:function(){null===this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SharingDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.i18n.getLocalization("arcgisonline","arcgisonline").common;a.mixin(this.i18n,a.i18n.getLocalization("arcgisonline","arcgisonline").sharingDlg)},postCreate:function(){this.loadConnections()},
_setDisabledAttr:function(d){a.forEach(c.registry.findWidgets(this._shareDialog.domNode),function(a){a.set("disabled",d)});a.query("input").forEach(function(b){a.attr(b,"disabled",d)});a.query(".disabled").forEach(function(b){a.style(b,"display",d?"":"none")})},loadConnections:function(){a.connect(this._shareDialog,"hide",a.hitch(this,function(){this.set("disabled",!1);this._shareOptions.clear()}));a.subscribe("shareOptionsSetup",a.hitch(this,function(){this._shareDialog.show()}));a.subscribe("onShareUpdate",
a.hitch(this,function(a){this.set("disabled",!1);(!a||!a.length||"string"===typeof a)&&this._shareDialog.hide()}));a.subscribe("doesNotOwnGroups",a.hitch(this,function(){a.style(this._shareOwnerNoneDiv,"display","block")}));a.subscribe("notMemberOfAnyGroups",a.hitch(this,function(){a.style(this._shareNoGroupsDiv,"display","block")}))},_handleOkResponse:function(a){a.preventDefault();this.set("disabled",!0);this._shareOptions.share(a)},_handleCancelClick:function(a){a.preventDefault();this._shareDialog.hide()},
hide:function(){this._shareDialog.hide()},show:function(a,b,c,e){this._shareOptions.show(a,b,c,e)},showAdmin:function(a,b,c,e){this._shareOptions.showAdmin(a,b,c,e)},showGroups:function(a,b){this._shareOptions.showGroups(a,b)}})});