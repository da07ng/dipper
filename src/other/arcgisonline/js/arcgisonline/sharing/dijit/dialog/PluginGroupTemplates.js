// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/dialog/PluginGroupTemplates",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/promise/all"],function(e,c,f,g){var d=e("arcgisonline.sharing.dijit.dialog.PluginGroupTemplates",null,{infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"create-app"\x3e${i18n.items.createApp}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary" id\x3d"preview-app"\x3e${i18n.templatesGridWidget.preview}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary" id\x3d"download-app"\x3e${i18n.templatesGridWidget.download}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
constructor:function(a){c.mixin(this,a)},fetchData:function(){var a=[];this._portal=this.parent._portal;this._user=this._portal.getPortalUser();return this._fetchEsriGroupTemplates().then(c.hitch(this,function(c){f.forEach(c||[],function(b){b&&b.id&&a.push('group:"'+b.id+'"')});return this._fetchGroupItems(a)}))},_fetchGroup:function(a,d){this._groups=this._groups||[];return this._groups[a]||this._portal.queryGroups(d,!0).then(c.hitch(this,function(b){b=b.total&&b.results&&b.results[0]||null;return(this._groups[a]=
b)||{}}))},_fetchGroupItems:function(a){return this.parent._fetchItems({groups:a})},_fetchEsriGroupTemplates:function(){return g([this._fetchGroup("esriGallery",this._portal.galleryTemplatesGroupQuery||null)]).then(c.hitch(this,function(a){return a||[]}))}});c.mixin(d,{add:function(a,c){if(!a.plugIn){var b=c||{};b.parent=a;a.plugIn=new d(b)}},remove:function(a){a.plugIn&&(a.plugIn.destroy(),delete a.plugIn)}});return d});