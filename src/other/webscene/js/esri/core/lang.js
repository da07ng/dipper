// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale".split(" "),function(l,q,f,r,s,t){function k(a){return void 0!==a&&null!==a}function m(a,c,b){var d=b.match(/([^\(]+)(\([^\)]+\))?/i),e=f.trim(d[1]);b=c[a];var d=JSON.parse((d[2]?f.trim(d[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),g=d.utcOffset;if(-1===l.indexOf(u,e))e=f.getObject(e),
f.isFunction(e)&&(b=e(b,a,c,d));else if("number"===typeof b||"string"===typeof b&&b&&!isNaN(Number(b)))switch(b=Number(b),e){case "NumberFormat":return s.format(b,d);case "DateString":a=new Date(b);if(d.local||d.systemLocale)return d.systemLocale?a.toLocaleDateString()+(d.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(d.hideTime?"":" "+a.toTimeString());a=a.toUTCString();d.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(b),k(g)&&
(a=r.add(a,"minute",a.getTimezoneOffset()-g)),t.format(a,d)}return k(b)?b:""}function n(a,c){var b;if(c)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof Object&&n(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}var u=["NumberFormat","DateString","DateFormat"],p=/<\/?[^>]+>/g;return{equals:function(a,c){return a===c||"number"===typeof a&&isNaN(a)&&"number"===typeof c&&isNaN(c)||f.isFunction((a||{}).getTime)&&f.isFunction((c||{}).getTime)&&
a.getTime()==c.getTime()||f.isFunction((a||{}).equals)&&a.equals(c)||f.isFunction((c||{}).equals)&&c.equals(a)||!1},valueOf:function(a,c){for(var b in a)if(a[b]==c)return b;return null},stripTags:function(a){if(a){var c=typeof a;if("string"===c)a=a.replace(p,"");else if("object"===c)for(var b in a)(c=a[b])&&"string"===typeof c&&(c=c.replace(p,"")),a[b]=c}return a},substitute:function(a,c,b){var d,e,g;k(b)&&(f.isObject(b)?(d=b.first,e=b.dateFormat,g=b.numberFormat):d=b);if(!c||"${*}"===c){c=[];var h;
c.push("\x3ctable\x3e\x3ctbody\x3e");for(h in a){b=a[h];if(e&&-1!==l.indexOf(e.properties||"",h))b=m(h,a,e.formatter||"DateString");else if(g&&-1!==l.indexOf(g.properties||"",h))b=m(h,a,g.formatter||"NumberFormat");c.push("\x3ctr\x3e\x3cth\x3e"+h+"\x3c/th\x3e\x3ctd\x3e"+(k(b)?b:"")+"\x3c/td\x3e\x3c/tr\x3e");if(d)break}c.push("\x3c/tbody\x3e\x3c/table\x3e");return c.join("")}return f.replace(c,f.hitch({obj:a},function(a,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),m(b,this.obj,c.join(":"))):
e&&-1!==l.indexOf(e.properties||"",b)?m(b,this.obj,e.formatter||"DateString"):g&&-1!==l.indexOf(g.properties||"",b)?m(b,this.obj,g.formatter||"NumberFormat"):k(this.obj[b])?this.obj[b]:""}),/\$\{([^\}]+)\}/g)},filter:function(a,c,b){c=[f.isString(a)?a.split(""):a,b||q.global,f.isString(c)?new Function("item","index","array",c):c];b={};var d;a=c[0];for(d in a)c[2].call(c[d],a[d],d,a)&&(b[d]=a[d]);return b},isDefined:k,fixJson:n}});