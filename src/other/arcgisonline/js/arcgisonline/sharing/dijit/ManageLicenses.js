// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"url:arcgisonline/sharing/dijit/templates/ManageLicenses.html":'\x3cdiv class\x3d"${baseClass} widgetContent"\x3e\r\n  \x3cdiv id\x3d"buttonBar" data-dojo-attach-point\x3d"_buttonBar" style\x3d"clear:both;"\x3e\r\n    \x3cspan class\x3d"esriFloatLeading"\x3e\r\n      \x3cbutton class\x3d"calcite transparent" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_myOrgBtn"\r\n          data-dojo-attach-event\x3d"onClick:openMyOrg"\x3e${i18n.myAccount}\x3c/button\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"productTabs" data-dojo-attach-point\x3d"_licenseSwitches"\x3e\r\n      \x3cspan class\x3d"productTab selected" data-dojo-attach-point\x3d"_proProductsTab"\x3e${i18n.licenseTypes.agsProLabel}\x3c/span\x3e\r\n      \x3cspan class\x3d"productTab" data-dojo-attach-point\x3d"_additionalProductsTab"\x3e${i18n.addProducts.title}\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"esriFloatTrailing"\x3e\r\n      \x3cbutton class\x3d"calcite transparent" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_helpBtn"\r\n          data-dojo-attach-event\x3d"onClick:openHelp"\x3e${i18n.help}\x3c/button\x3e\r\n    \x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_loading" style\x3d"display:none;text-align:center;"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_provisionsExceededWarning" class\x3d"provisionsExceededWarning" style\x3d"display:none;"\x3e${i18n.provisionsExceededWarning}\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_licenseStatus" class\x3d"marginTop1"\x3e\r\n    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n      \x3ctable id\x3d"licenseTable"\x3e\r\n        \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd id\x3d"licensedUsersTable" class\x3d"borderTrailing"\x3e\r\n            \x3ctable\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"2" class\x3d"licensedUsersRow"\x3e\x3cstrong\x3e${i18n.licensedUsersLabel}\x3c/strong\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\x3ctd\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"maximumRow"\x3e\x3cstrong\x3e${i18n.maximumUsersLabel}\x3c/strong\x3e\x3c/td\x3e\r\n                  \x3ctd class\x3d"countColumn"\x3e\x3clabel data-dojo-attach-point\x3d"_maximumUsersLabel"\x3e\x3c/label\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\x3ctd\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"currentRow"\x3e\x3cstrong\x3e${i18n.currentUsersLabel}\x3c/strong\x3e\x3c/td\x3e\r\n                  \x3ctd class\x3d"countColumn"\x3e\x3clabel data-dojo-attach-point\x3d"_currentUsersLabel"\x3e\x3c/label\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd id\x3d"productTable"\x3e\r\n            \x3ctable\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"productRow"\x3e\x3cstrong\x3e${i18n.licenseStatus.title}\x3c/strong\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\x3ctd\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"purchasedRow"\x3e\x3cstrong\x3e${i18n.licenseStatus.purchasedLabel}\x3c/strong\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\x3ctd\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"remainingRow"\x3e\x3cstrong\x3e${i18n.licenseStatus.remainingLabel}\x3c/strong\x3e\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"licenseCountContainer" class\x3d"esriFloatLeading" data-dojo-attach-point\x3d"_licenseCountContainer"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ctable\x3e\r\n          \x3ctbody data-dojo-attach-point\x3d"_licenseCountBody"\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proBasicTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.agsProLabel} ${i18n.licenseTypes.basicLabel}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proStdTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.agsProLabel} ${i18n.licenseTypes.standardLabel}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proAdvTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.agsProLabel} ${i18n.licenseTypes.advancedLabel}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_spatialAnalystTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.spatialAnalyst}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_threeDAnalystTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.threeDAnalyst}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_networkAnalystTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.networkAnalyst}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_geostatAnalystTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.geostatisticalAnalyst}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_dataReviewerTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.dataReviewer}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_workflowManagerTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.workflowManager}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_dataInteropTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.dataInterop}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_defenseTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.defenseMapping}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_fmvTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.fullMotionVideo}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_businessBasicTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.businessBasic}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_businessStdTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.businessStd}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_roadsHighwaysTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.roadsHighways}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_publisherTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.publisher}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_productionMapTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.productionMapping}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_schematicsTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.schematics}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_trackingTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.tracking}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_aviationTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.aviation}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_airportsTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.airports}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_maritimeTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.maritime}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_bathymetryTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.bathymetry}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapNATitle" class\x3d"productTitle longTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapNA}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapEUTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapEU}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapAPACTitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapAPAC}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapMEATitle" class\x3d"productTitle veryLongTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapMEA}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapLATitle" class\x3d"productTitle longTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapLA}\x3c/strong\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapJATitle" class\x3d"productTitle"\x3e\x3cstrong\x3e${i18n.licenseTypes.streetMapJA}\x3c/strong\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\x3ctd colspan\x3d"100"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proBasicStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proStdStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_proAdvStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_spatialAnalystStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_threeDAnalystStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_networkAnalystStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_geostatAnalystStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_dataReviewerStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_workflowManagerStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_dataInteropStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_defenseStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_fmvStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_businessBasicStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_businessStdStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_roadsHighwaysStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_publisherStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_productionMapStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_schematicsStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_trackingStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_aviationStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_airportsStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_maritimeStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_bathymetryStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapNAStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapEUStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapAPACStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapMEAStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapLAStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n            \x3ctd style\x3d"display:none;" data-dojo-attach-point\x3d"_streetMapJAStatus" class\x3d"productTitle productStatus"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"productLicenseCountContainer" class\x3d"esriFloatLeading" data-dojo-attach-point\x3d"_productLicenseCountContainer" style\x3d"display:none;"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ctable\x3e\r\n          \x3ctbody data-dojo-attach-point\x3d"_productLicenseCountBody"\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_productLicenseCountNameRow"\x3e\r\n            \x3c!--\x3ctd class\x3d"productTitle"\x3e\x3cstrong\x3etitle\x3c/strong\x3e\x3c/td\x3e--\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\x3ctd colspan\x3d"100"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_productLicenseCountDataRow"\x3e\r\n            \x3c!--\x3ctd class\x3d"productTitle productStatus"\x3e[graphic]\x3c/td\x3e--\x3e\r\n          \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_licenseContent"\x3e\r\n    \x3cdiv id\x3d"membersContentContainer" data-dojo-attach-point\x3d"_membersContent" class\x3d"esriFloatLeading"\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading display_inline"\x3e\r\n        \x3clabel class\x3d"contentTitle"\x3e\x3cstrong\x3e${i18n.membersTitle}\x3c/strong\x3e\x3c/label\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_selectAllBtn" data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-event\x3d"onClick:onSelectAll" class\x3d"calcite transparent small"\x3e${i18n.selectAllLabel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing display_inline"\x3e\r\n        \x3clabel class\x3d"contentTitle"\x3e${i18n.searchByLabel}\x3c/label\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_searchBySelect" data-dojo-type\x3d"arcgisonline/sharing/dijit/ComboBox"\r\n             data-dojo-attach-event\x3d"onChange:onSearchByChange"\r\n             class\x3d"licenseSearchSelect display_inline"\x3e\x3c/div\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_searchControls" style\x3d"position:relative;"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"_search" id\x3d"licenseSearchBox" data-dojo-type\x3d"dijit/form/TextBox"\r\n               data-dojo-attach-event\x3d"onKeyDown:onSearchKeyDown" data-dojo-props\x3d"trim:true" value\x3d""/\x3e\r\n          \x3cbutton id\x3d"clearSearchBtn" data-dojo-attach-point\x3d"_clearSearchBtn" data-dojo-attach-event\x3d"onClick:onClearClick"\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/button\x3e\r\n          \x3cbutton id\x3d"searchMembersBtn" data-dojo-attach-point\x3d"_searchBtn" data-dojo-attach-event\x3d"onClick:onSearchClick"\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/button\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_filterControls" style\x3d"display:none;"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_filteringSelect" class\x3d"licenseSearchSelect display_inline" id\x3d"searchFilter"\r\n               data-dojo-props\x3d"searchAttr:\'name\'" data-dojo-attach-event\x3d"onChange:onFilterChange" data-dojo-type\x3d"dijit/form/FilteringSelect"\x3e\x3c/div\x3e\r\n        \x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"/\x3e\r\n      \x3cdiv style\x3d"margin-top:0.5em;"\x3e${i18n.clickToSelectLabel}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_memberGridContainer" class\x3d"marginTop1"\x3e\r\n        \x3c!-- member grid added programmatically here --\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"licensedProductsContainer" data-dojo-attach-point\x3d"_licensedProducts" class\x3d"esriFloatLeading marginTop1 noPaddingContainer"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n          \x3clabel\x3e\x3cstrong\x3e${i18n.assignLicense.licensedLabel} \x3cspan data-dojo-attach-point\x3d"_licensedForLabel"\x3e\x3c/span\x3e\x3c/strong\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_lastUsedLicenseContainer" class\x3d"esriFloatTrailing"\x3e\r\n          \x3clabel\x3e\x3cstrong\x3e${i18n.assignLicense.lastUsedProLabel}\x3c/strong\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;\r\n          \x3clabel data-dojo-attach-point\x3d"_lastUsedDateLabel"\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"/\x3e\x3cbr/\x3e\r\n      \x3c!--\x3clabel\x3e\x3cstrong\x3e${i18n.assignLicense.esriAppsLabel}\x3c/strong\x3e\x3c/label\x3e\x3cbr/\x3e\x3cbr/\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_proLevelsContainer" class\x3d"licenseGroup esriFloatLeading"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cspan id\x3d"pro-expcon" data-dojo-attach-event\x3d"onClick:expconPro" class\x3d"expcon"\x3e${i18n.assignLicense.contract}\x3c/span\x3e\r\n          \x3clabel for\x3d"pro-expcon" id\x3d"groups-title"\x3e${i18n.licenseTypes.agsProLabel}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"pro-licenses" class\x3d"licenseGroupOpts"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_proBasicSelect"\x3e\r\n            \x3cinput id\x3d"pro-basic" data-dojo-attach-point\x3d"_proBasic" name\x3d"proSelection" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                data-dojo-attach-event\x3d"onClick:onProGroupClick" type\x3d"radio"/\x3e\r\n            \x3clabel for\x3d"pro-basic" id\x3d"pro-basic-label"\x3e${i18n.licenseTypes.basicLabel}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_proStdSelect"\x3e\r\n            \x3cdiv id\x3d"pro-std" data-dojo-attach-point\x3d"_proStd" name\x3d"proSelection" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                 data-dojo-attach-event\x3d"onClick:onProGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"pro-std" id\x3d"pro-std-label"\x3e${i18n.licenseTypes.standardLabel}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_proAdvSelect"\x3e\r\n            \x3cinput id\x3d"pro-adv" data-dojo-attach-point\x3d"_proAdv" name\x3d"proSelection" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                 data-dojo-attach-event\x3d"onClick:onProGroupClick" type\x3d"radio"/\x3e\r\n            \x3clabel for\x3d"pro-adv" id\x3d"pro-adv-label"\x3e${i18n.licenseTypes.advancedLabel}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_proExtContainer" class\x3d"licenseGroup esriFloatLeading"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cspan id\x3d"ext-expcon" data-dojo-attach-event\x3d"onClick:expconExtensions" class\x3d"expcon"\x3e${i18n.assignLicense.contract}\x3c/span\x3e\r\n          \x3cdiv id\x3d"ext-toggle" data-dojo-attach-point\x3d"_extToggle" data-dojo-type\x3d"dojox/form/TriStateCheckBox"\r\n               data-dojo-attach-event\x3d"onClick:onExtensionsToggle" class\x3d"vertAlignTextTop"\x3e\x3c/div\x3e\r\n          \x3clabel for\x3d"ext-toggle" id\x3d"ext-title"\x3e${i18n.licenseTypes.extLabel}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"ext-licenses" class\x3d"licenseGroupOpts"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_spatialAnalystCheck"\x3e\r\n            \x3cdiv id\x3d"ext-spatialanalyst" data-dojo-attach-point\x3d"_spatialAnalystExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-spatialanalyst" id\x3d"ext-spatialanalyst-label"\x3e${i18n.licenseTypes.spatialAnalyst}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_3DAnalystCheck"\x3e\r\n            \x3cdiv id\x3d"ext-3d-analyst" data-dojo-attach-point\x3d"_3DAnalystExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-3d-analyst" id\x3d"ext-3d-analyst-label"\x3e${i18n.licenseTypes.threeDAnalyst}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_networkAnalystCheck"\x3e\r\n            \x3cdiv id\x3d"ext-networkanalyst" data-dojo-attach-point\x3d"_networkAnalystExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-networkanalyst" id\x3d"ext-networkanalyst-label"\x3e${i18n.licenseTypes.networkAnalyst}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_geostatAnalystCheck"\x3e\r\n            \x3cdiv id\x3d"ext-geostatanalyst" data-dojo-attach-point\x3d"_geostatAnalystExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-geostatanalyst" id\x3d"ext-geostatanalyst-label"\x3e${i18n.licenseTypes.geostatisticalAnalyst}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_dataReviewerCheck"\x3e\r\n            \x3cdiv id\x3d"ext-datareviewer" data-dojo-attach-point\x3d"_dataReviewerExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-datareviewer" id\x3d"ext-datareviewer-label"\x3e${i18n.licenseTypes.dataReviewer}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_workflowManagerCheck"\x3e\r\n            \x3cdiv id\x3d"ext-workflowmanager" data-dojo-attach-point\x3d"_workflowManagerExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-workflowmanager" id\x3d"ext-workflowmanager-label"\x3e${i18n.licenseTypes.workflowManager}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_dataInteropCheck"\x3e\r\n            \x3cdiv id\x3d"ext-datainterop" data-dojo-attach-point\x3d"_dataInteropExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-datainterop" id\x3d"ext-datainterop-label"\x3e${i18n.licenseTypes.dataInterop}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_defenseCheck"\x3e\r\n            \x3cdiv id\x3d"ext-defense" data-dojo-attach-point\x3d"_defenseExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-defense" id\x3d"ext-defense-label"\x3e${i18n.licenseTypes.defenseMapping}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_fmvCheck"\x3e\r\n            \x3cdiv id\x3d"ext-fmv" data-dojo-attach-point\x3d"_fmvExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-fmv" id\x3d"ext-fmv-label"\x3e${i18n.licenseTypes.fullMotionVideo}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_businessBasicCheck"\x3e\r\n            \x3cdiv id\x3d"ext-businessbasic" data-dojo-attach-point\x3d"_businessBasicExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-businessbasic" id\x3d"ext-businessbasic-label"\x3e${i18n.licenseTypes.businessBasic}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_businessStdCheck"\x3e\r\n            \x3cdiv id\x3d"ext-businessstd" data-dojo-attach-point\x3d"_businessStdExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-businessstd" id\x3d"ext-businessstd-label"\x3e${i18n.licenseTypes.businessStd}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_roadsHighwaysCheck"\x3e\r\n            \x3cdiv id\x3d"ext-roadshighways" data-dojo-attach-point\x3d"_roadsHighwaysExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-roadshighways" id\x3d"ext-roadshighways-label"\x3e${i18n.licenseTypes.roadsHighways}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_publisherCheck"\x3e\r\n            \x3cdiv id\x3d"ext-publisher" data-dojo-attach-point\x3d"_publisherExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-publisher" id\x3d"ext-publisher-label"\x3e${i18n.licenseTypes.publisher}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_productionMapCheck"\x3e\r\n            \x3cdiv id\x3d"ext-productionmap" data-dojo-attach-point\x3d"_productionMapExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-productionmap" id\x3d"ext-productionmap-label"\x3e${i18n.licenseTypes.productionMapping}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_schematicsCheck"\x3e\r\n            \x3cdiv id\x3d"ext-schematics" data-dojo-attach-point\x3d"_schematicsExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-schematics" id\x3d"ext-schematics-label"\x3e${i18n.licenseTypes.schematics}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_trackingCheck"\x3e\r\n            \x3cdiv id\x3d"ext-tracking" data-dojo-attach-point\x3d"_trackingExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-tracking" id\x3d"ext-tracking-label"\x3e${i18n.licenseTypes.tracking}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_aviationCheck"\x3e\r\n            \x3cdiv id\x3d"ext-aviation" data-dojo-attach-point\x3d"_aviationExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-aviation" id\x3d"ext-aviation-label"\x3e${i18n.licenseTypes.aviation}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_airportsCheck"\x3e\r\n            \x3cdiv id\x3d"ext-airports" data-dojo-attach-point\x3d"_airportsExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-airports" id\x3d"ext-airports-label"\x3e${i18n.licenseTypes.airports}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_maritimeCheck"\x3e\r\n            \x3cdiv id\x3d"ext-maritime" data-dojo-attach-point\x3d"_maritimeExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-maritime" id\x3d"ext-maritime-label"\x3e${i18n.licenseTypes.maritime}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_bathymetryCheck"\x3e\r\n            \x3cdiv id\x3d"ext-bathymetry" data-dojo-attach-point\x3d"_bathymetryExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-bathymetry" id\x3d"ext-bathymetry-label"\x3e${i18n.licenseTypes.bathymetry}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapNACheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapNA" data-dojo-attach-point\x3d"_streetMapNAExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapNA" id\x3d"ext-streetMapNA-label"\x3e${i18n.licenseTypes.streetMapNA}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapEUCheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapEU" data-dojo-attach-point\x3d"_streetMapEUExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapEU" id\x3d"ext-streetMapEU-label"\x3e${i18n.licenseTypes.streetMapEU}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapAPACCheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapAPAC" data-dojo-attach-point\x3d"_streetMapAPACExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapAPAC" id\x3d"ext-streetMapAPAC-label"\x3e${i18n.licenseTypes.streetMapAPAC}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapMEACheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapMEA" data-dojo-attach-point\x3d"_streetMapMEAExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapMEA" id\x3d"ext-streetMapMEA-label"\x3e${i18n.licenseTypes.streetMapMEA}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapLACheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapLA" data-dojo-attach-point\x3d"_streetMapLAExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapLA" id\x3d"ext-streetMapLA-label"\x3e${i18n.licenseTypes.streetMapLA}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_streetMapJACheck"\x3e\r\n            \x3cdiv id\x3d"ext-streetMapJA" data-dojo-attach-point\x3d"_streetMapJAExt" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-event\x3d"onClick:onExtensionsGroupClick"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"ext-streetMapJA" id\x3d"ext-streetMap-label"\x3e${i18n.licenseTypes.streetMapJA}\x3c/label\x3e\x3cbr/\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_productEsriAppsContainer" class\x3d"licenseGroup esriFloatLeading" style\x3d"display:none;"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cspan id\x3d"esri-apps-expcon" data-dojo-attach-event\x3d"onClick:expconEsriApps" class\x3d"expcon"\x3e${i18n.assignLicense.contract}\x3c/span\x3e\r\n          \x3clabel id\x3d"esri-apps-title"\x3e${i18n.assignLicense.esriAppsLabel}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"esri-apps-licenses" class\x3d"licenseGroupOpts" data-dojo-attach-point\x3d"_esriAppsLicenseContainer"\x3e\r\n          \x3c!-- Esri products will be built dynamically here --\x3e\r\n          \x3c!--\x3cdiv\x3e--\x3e\r\n            \x3c!--\x3cspan id\x3d"" data-dojo-attach-event\x3d"onClick:" class\x3d"expcon"\x3e${i18n.assignLicense.contract}\x3c/span\x3e--\x3e\r\n            \x3c!--\x3clabel for\x3d"" id\x3d"-title"\x3egroup title\x3c/label\x3e--\x3e\r\n          \x3c!--\x3c/div\x3e--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_licenseButtons" class\x3d"esriFloatTrailing licenseButtons marginTop1"\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_assignBtn" class\x3d"calcite blue small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onAssignLicenses"\x3e${i18n.assignLicense.assignLabel}\x3c/button\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_revokeBtn" class\x3d"calcite caution small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onRevokeLicenses"\x3e${i18n.assignLicense.revokeAllLabel}\x3c/button\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_cancelBtn" class\x3d"calcite transparent small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onCancelLicenses"\x3e${i18n.cancel}\x3c/button\x3e\x3cbr/\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_exceedsWarning" class\x3d"warning marginTop1" style\x3d"display:none;"\x3e${i18n.assignLicense.exceedsWarning}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"sessionContainer" data-dojo-attach-point\x3d"_sessionContent" class\x3d"esriFloatLeading marginTop1 noPaddingContainer"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n          \x3clabel\x3e\x3cstrong\x3e\x3cspan data-dojo-attach-point\x3d"_sessionsForLabel"\x3e\x3c/span\x3e\x3c/strong\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"/\x3e\x3cbr/\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_sessionGridContainer" class\x3d"marginTop1"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing marginTop1"\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_doneBtn" class\x3d"calcite blue small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onLeaveSessions"\x3e${i18n.done}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"selectedContentContainer" data-dojo-attach-point\x3d"_selectedContent" class\x3d"esriFloatTrailing"\x3e\r\n      \x3clabel class\x3d"contentTitle"\x3e\x3cstrong\x3e${i18n.selectedTitle}\x3c/strong\x3e\x3c/label\x3e\r\n      \x3cbr style\x3d"clear:both;"/\x3e\r\n      \x3cdiv style\x3d"margin-top:0.5em;"\x3e${i18n.clickToRemoveLabel}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_selectedGridContainer" class\x3d"marginTop1"\x3e\x3c/div\x3e\r\n      \x3cdiv id\x3d"selectedButtonBar" data-dojo-attach-point\x3d"_selectedButtonBar" class\x3d"esriFloatTrailing"\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_configureBtn" class\x3d"calcite blue small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onConfigureSelected"\x3e${i18n.configureLabel}\x3c/button\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_clearBtn" class\x3d"calcite transparent small"\r\n                data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:onClearSelected"\x3e${i18n.clearLabel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n'}});
define("arcgisonline/sharing/dijit/ManageLicenses","require dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/date/locale dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/i18n dojo/json dojo/keys dojo/mouse dijit/a11yclick dojo/on dojo/query dojo/topic dojo/request/xhr dojo/store/Memory dojo/Deferred dojo/DeferredList dojo/promise/all dojox/gfx esri/kernel esri/lang esri/domUtils esri/request arcgisonline/sharing/util arcgisonline/sharing/dijit/ComboBox arcgisonline/sharing/dijit/Role arcgisonline/sharing/dijit/Grid arcgisonline/sharing/dijit/dialog/DeleteWarningDlg arcgisonline/sharing/dijit/dialog/GeneralDlg arcgisonline/sharing/geow/Account arcgisonline/sharing/geow/Roles dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Dialog dijit/Tooltip dijit/form/FilteringSelect dijit/form/CheckBox dijit/form/Button dijit/form/RadioButton dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane dojox/layout/ScrollPane dojo/text!arcgisonline/sharing/dijit/templates/ManageLicenses.html dojo/sniff dojo/domReady!".split(" "),
function(B,L,d,W,m,x,u,q,w,r,s,v,X,C,M,Y,I,E,D,J,Z,y,z,$,A,K,aa,p,k,ba,t,ca,da,F,N,G,O,P,Q,R,S,H,T,ea,fa,U,ga,ha,ia,ja,ka,la,V){B=L("arcgisonline.sharing.dijit.ManageLicenses",[Q,R,S],{declaredClass:"arcgisonline.sharing.dijit.ManageLicenses",basePath:B.toUrl("arcgisonline/sharing/dijit"),baseClass:"esriManageLicenses",widgetsInTemplate:!0,templateString:V,organization:null,helpDlgWidth:"410px",helpDlgOutline:"none",closeTopic:"manage-licenses/close",provisionsExceededTopic:"manage-licenses/provisions-exceeded",
startRequestNum:1,maxRequestNum:100,maxGroupsNum:100,searchByNameId:"name",searchByGroupId:"group",searchByRoleId:"role",searchByProductId:"product",rowsPerPage:15,rowsPerPageSelected:10,rowsPerPageSession:3,assignSingle:"single",assignMultiple:"multiple",productThreshold:0.2,maxSearchResultsLength:70,totalExtensions:0,maxExtensions:20,licenseKeywords:{proBasic:"desktopBasicN",proStandard:"desktopStdN",proAdvanced:"desktopAdvN",spatialAnalyst:"spatialAnalystN",threeDAnalyst:"3DAnalystN",networkAnalyst:"networkAnalystN",
geostatAnalyst:"geostatAnalystN",dataReviewer:"dataReviewerN",workflowManager:"workflowMgrN",dataInterop:"dataInteropN",defenseMapping:"defenseN",fmv:"FMVN",businessBasic:"businessBasicN",businessStandard:"businessStdN",roadsHighways:"roadsHighwaysN",publisher:"publisherN",productionMap:"productionMapN",schematics:"schematicsN",tracking:"trackingN",aviation:"aviationN",airports:"airportsN",maritime:"maritimeN",bathymetry:"bathymetryN",streetMapNA:"smpNAmericaN",streetMapEU:"smpEuropeN",streetMapAPAC:"smpAsiaPacificN",
streetMapMEA:"smpMidEAfricaN",streetMapLA:"smpLAmericaN",streetMapJA:"smpJapanN"},esriAppsOwner:"esri_apps",productCheckBoxClassName:"productCheckBox",longTitleMin:30,MODE_PRO:"pro",MODE_PRODUCTS:"products",postMixInProperties:function(){this.inherited(arguments);this.i18n={};m.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").common);m.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").manageLicenses);this.i18n.myAccount=dojo.i18n.getLocalization("arcgisonline",
"arcgisonline").siteHeader.myAccount;this.i18n.roleUser=dojo.i18n.getLocalization("arcgisonline","arcgisonline").myOrganization.formatters.roleUser;this.i18n.rolePublisher=dojo.i18n.getLocalization("arcgisonline","arcgisonline").myOrganization.formatters.rolePublisher;this.i18n.roleAdmin=dojo.i18n.getLocalization("arcgisonline","arcgisonline").myOrganization.formatters.roleAdmin},postCreate:function(){this.inherited(arguments);this._mode=null;this._rolesAPI=new P;this._generalDlg=G.prototype.statics.getInstance();
this._helpDlg=new T({id:"manageLicensesHelpDlg",style:{width:this.helpDlgWidth,maxWidth:this.helpDlgWidth,outline:this.helpDlgOutline},title:this.i18n.title+" "+this.i18n.help,content:this._createHelpHTML()});this._setupConnections()},startup:function(){this.uiInitialized=!1;this.uiNotShownYet=!0;this._checkLicenses()},reload:function(){var a=this;!0===a.uiInitialized?a._refreshEntitlements().then(function(){a._switchToMembersContent();a.reset();a._showMainUI()}):(this._hideMainUI(),this._initUI())},
_setupConnections:function(){this.own(I(this._proProductsTab,m.hitch(this,this._proProductsClick)),I(this._additionalProductsTab,m.hitch(this,this._additionalProductsClick)))},_proProductsClick:function(){this._assignMode||(w.remove(this._additionalProductsTab,"selected"),w.add(this._proProductsTab,"selected"),this._mode=this.MODE_PRO,this._switchProductModes())},_additionalProductsClick:function(){this._assignMode||(w.remove(this._proProductsTab,"selected"),w.add(this._additionalProductsTab,"selected"),
this._mode=this.MODE_PRODUCTS,this._switchProductModes())},_cleanOrgName:function(){var a=this._settings.name;return 9>v("ie")||5>v("trident")?a.substring(0,a.length-1)+"\x26#38;":a},_resetPageTitle:function(){var a=this.i18n.proPageTitle;u.byId("myOrgName")&&(this.MODE_PRODUCTS===this._mode&&(a=this.i18n.productsPageTitle),q.set(u.byId("myOrgName"),"innerHTML",a+" "+this._cleanOrgName()))},_switchProductModes:function(){this._refreshLicenseStatus();this._resetPageTitle();this._createProductStore();
this._resetFilterNoFocus(this._productStore);s.set(u.byId("licensedUsersTable"),"display","none");w.add(u.byId("licenseTable"),"shorten");this.MODE_PRODUCTS===this._mode?(s.set(this._licenseCountContainer,"display","none"),s.set(this._productLicenseCountContainer,"display",""),this._memberGrid._grid.styleColumn("status","display: none;"),this._memberGrid._grid.styleColumn("lastused","display: none;")):(s.set(this._productLicenseCountContainer,"display","none"),s.set(this._licenseCountContainer,"display",
""),this._memberGrid._grid.styleColumn("status","display: table-cell;"),this._memberGrid._grid.styleColumn("lastused","display: table-cell;"));this._replayLastSearch()},_hideMainUI:function(){k.hide(this._licenseStatus);k.hide(this._licenseContent)},_showMainUI:function(){k.show(this._licenseStatus);k.show(this._licenseContent);this.uiNotShownYet&&(this.uiNotShownYet=!1,this._memberGrid&&this._memberGrid._started&&(this._memberGrid._grid.resize(),this._memberGrid._grid.refresh()),this._selectedGrid&&
this._selectedGrid._started&&(this._selectedGrid._grid.resize(),this._selectedGrid._grid.refresh()))},reset:function(){this._isResetting=!0;k.show(this._membersContent);k.hide(this._licensedProducts);k.hide(this._sessionContent);this._resetPageTitle();this._filteringSelect.validate=function(){};this._resetSearch();this._resetSelectedGridStore();this._clearSelectedMembers();this._resetLicensedProducts();this._isResetting=!1},openMyOrg:function(){this.reset();J.publish(this.closeTopic,null)},openHelp:function(){this._helpDlg.show();
this._helpDlg.focus()},expconPro:function(){this._toggleLicenseGroup("pro")},expconExtensions:function(){this._toggleLicenseGroup("ext")},expconEsriApps:function(){this._toggleLicenseGroup("esri-apps")},onProGroupClick:function(){this._checkLevelSupport();this._validateForm()},onExtensionsGroupClick:function(){this._checkExtensionsGroupCheckBox();this._validateForm()},_checkExtensionsGroupCheckBox:function(){var a=0,b=this._determineTotalExtensions();this._spatialAnalystExt.get("checked")&&a++;this._3DAnalystExt.get("checked")&&
a++;this._networkAnalystExt.get("checked")&&a++;this._geostatAnalystExt.get("checked")&&a++;this._dataReviewerExt.get("checked")&&a++;this._workflowManagerExt.get("checked")&&a++;this._dataInteropExt.get("checked")&&a++;this._defenseExt.get("checked")&&a++;this._fmvExt.get("checked")&&a++;this._businessBasicExt.get("checked")&&a++;this._businessStdExt.get("checked")&&a++;this._roadsHighwaysExt.get("checked")&&a++;this._publisherExt.get("checked")&&a++;this._productionMapExt.get("checked")&&a++;this._schematicsExt.get("checked")&&
a++;this._trackingExt.get("checked")&&a++;this._aviationExt.get("checked")&&a++;this._airportsExt.get("checked")&&a++;this._maritimeExt.get("checked")&&a++;this._bathymetryExt.get("checked")&&a++;this._streetMapNAExt.get("checked")&&a++;this._streetMapEUExt.get("checked")&&a++;this._streetMapAPACExt.get("checked")&&a++;this._streetMapMEAExt.get("checked")&&a++;this._streetMapLAExt.get("checked")&&a++;this._streetMapJAExt.get("checked")&&a++;this._extToggle.set("checked",this._determineTriStateValue(a,
b))},onExtensionsToggle:function(){var a=this._normalizeTriStateClick(this._extToggle);this._setExtensions(a);this._checkLevelSupport();this._validateForm()},_checkLevelSupport:function(){var a;this._enableAllExtensions();q.get(u.byId("pro-basic"),"checked")?a=this._proBasic:q.get(u.byId("pro-std"),"checked")?a=this._proStd:q.get(u.byId("pro-adv"),"checked")&&(a=this._proAdv);a&&d.forEach(this._extNotSupported[a],function(a){a.set("checked",!1);a.set("disabled",!0)});this._checkExtensionsGroupCheckBox()},
_enableAllExtensions:function(){d.forEach(this._allExtensions,function(a){a.set("disabled",!1)})},_initExtNotSupportMap:function(){this._allExtensions=[this._spatialAnalystExt,this._3DAnalystExt,this._networkAnalystExt,this._geostatAnalystExt,this._dataReviewerExt,this._workflowManagerExt,this._dataInteropExt,this._defenseExt,this._fmvExt,this._businessBasicExt,this._businessStdExt,this._roadsHighwaysExt,this._publisherExt,this._productionMapExt,this._schematicsExt,this._trackingExt,this._aviationExt,
this._airportsExt,this._maritimeExt,this._bathymetryExt,this._streetMapNAExt,this._streetMapEUExt,this._streetMapAPACExt,this._streetMapMEAExt,this._streetMapLAExt,this._streetMapJAExt];this._extNotSupported={};this._extNotSupported[this._proBasic]=[this._workflowManagerExt,this._dataInteropExt,this._defenseExt,this._roadsHighwaysExt,this._productionMapExt,this._aviationExt,this._airportsExt,this._maritimeExt,this._bathymetryExt];this._extNotSupported[this._proStd]=[this._defenseExt];this._extNotSupported[this._proAdv]=
[]},onSelectAll:function(){var a=this._memberGrid._grid.get("store").query(),b=this._selectedGrid._grid.get("store"),c=0;d.forEach(a,m.hitch(this,function(a){b.put(m.clone(a));c++}));this._selectedGrid.refresh();0<c&&k.show(this._selectedContent)},_assignLicenseSuccess:function(a){var b=this,c;b._assignMode===b.assignSingle?c=p.substitute({name:b._selectedMember.fullName},b.i18n.assignLicense.successAssignSingle):b._assignMode===b.assignMultiple&&(c=p.substitute({num:a.length},b.i18n.assignLicense.successAssignMulti),
b._clearSelectedMembers());c&&b._generalDlg.show({title:b.i18n.notice,message:c});b._refreshEntitlements().then(function(){b._switchToMembersContent()})},_assignLicenseError:function(a,b){console.log("error assigning licenses",a);var c;a&&a.code&&a.messageCode?(c="",this._assignMode===this.assignSingle?c+="\x3cp\x3e"+esri.substitute({name:this._selectedMember.fullName},this.i18n.errors.problemAssigningSingle)+"\x3c/p\x3e":this._assignMode===this.assignMultiple&&(c+="\x3cp\x3e"+this.i18n.errors.problemAssigningMulti+
"\x3c/p\x3e"),"CONT_0052"===a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.exceededMaximumEntitlements+"\x3c/p\x3e":"CONT_0053"===a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.exceededMaximumUsers+"\x3c/p\x3e":"CONT_0054"===a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.entitlementsLocked+"\x3c/p\x3e":"CONT_0051"===a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.entitlementsMustBeAvail+"\x3c/p\x3e":"CONT_0050"===a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.usersMustBelong+"\x3c/p\x3e":"CONT_0055"===
a.messageCode?c+="\x3cp\x3e"+this.i18n.errors.assignOnlyOnce+"\x3c/p\x3e":console.log("error with unanticipated message code encountered",a),this._generalDlg.show({title:this.i18n.errorTitle,message:c})):(this._assignMode===this.assignSingle?c=p.substitute({name:this._selectedMember.fullName},this.i18n.assignLicense.errorAssignSingle):this._assignMode===this.assignMultiple&&(c=p.substitute({num:b.length},this.i18n.assignLicense.errorAssignMulti)),c&&this._generalDlg.show({title:this.i18n.errorTitle,
message:c}))},_assignProLicenses:function(){var a=this,b={users:[],entitlements:[]},c,e,h;a._assignMode===a.assignSingle&&a._selectedMember?(c=a._hasEntitlements(a._selectedMember)&&a._selectedMember.entitlements.disconnected)||b.users.push(a._selectedMember.username):a._assignMode===a.assignMultiple&&d.forEach(a._getAllSelectedUsers(),function(e){(c=a._hasEntitlements(e)&&e.entitlements.disconnected)||b.users.push(e.username)});a._proAdv.get("checked")?b.entitlements.push(a.licenseKeywords.proAdvanced):
a._proStd.get("checked")?b.entitlements.push(a.licenseKeywords.proStandard):b.entitlements.push(a.licenseKeywords.proBasic);a._spatialAnalystExt.get("checked")&&b.entitlements.push(a.licenseKeywords.spatialAnalyst);a._3DAnalystExt.get("checked")&&b.entitlements.push(a.licenseKeywords.threeDAnalyst);a._networkAnalystExt.get("checked")&&b.entitlements.push(a.licenseKeywords.networkAnalyst);a._geostatAnalystExt.get("checked")&&b.entitlements.push(a.licenseKeywords.geostatAnalyst);a._dataReviewerExt.get("checked")&&
b.entitlements.push(a.licenseKeywords.dataReviewer);a._workflowManagerExt.get("checked")&&b.entitlements.push(a.licenseKeywords.workflowManager);a._dataInteropExt.get("checked")&&b.entitlements.push(a.licenseKeywords.dataInterop);a._defenseExt.get("checked")&&b.entitlements.push(a.licenseKeywords.defenseMapping);a._fmvExt.get("checked")&&b.entitlements.push(a.licenseKeywords.fmv);a._businessBasicExt.get("checked")&&b.entitlements.push(a.licenseKeywords.businessBasic);a._businessStdExt.get("checked")&&
b.entitlements.push(a.licenseKeywords.businessStandard);a._roadsHighwaysExt.get("checked")&&b.entitlements.push(a.licenseKeywords.roadsHighways);a._publisherExt.get("checked")&&b.entitlements.push(a.licenseKeywords.publisher);a._productionMapExt.get("checked")&&b.entitlements.push(a.licenseKeywords.productionMap);a._schematicsExt.get("checked")&&b.entitlements.push(a.licenseKeywords.schematics);a._trackingExt.get("checked")&&b.entitlements.push(a.licenseKeywords.tracking);a._aviationExt.get("checked")&&
b.entitlements.push(a.licenseKeywords.aviation);a._airportsExt.get("checked")&&b.entitlements.push(a.licenseKeywords.airports);a._maritimeExt.get("checked")&&b.entitlements.push(a.licenseKeywords.maritime);a._bathymetryExt.get("checked")&&b.entitlements.push(a.licenseKeywords.bathymetry);a._streetMapNAExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapNA);a._streetMapEUExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapEU);a._streetMapAPACExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapAPAC);
a._streetMapMEAExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapMEA);a._streetMapLAExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapLA);a._streetMapJAExt.get("checked")&&b.entitlements.push(a.licenseKeywords.streetMapJA);e=esriGeowConfig.restBaseUrl+"content/listings/"+a._proListing.listing.itemId+"/provisionUserEntitlements";h={userEntitlements:C.stringify(b)};t.request({url:e,content:h},{usePost:!0}).then(function(c){a._assignLicenseSuccess(a._assignMode===a.assignMultiple?
b.users:null)},function(c){console.log("server error encountered",c);a._assignMode===a.assignSingle?a._assignLicenseError(c):a._assignMode===a.assignMultiple&&a._assignLicenseError(c,b.users)})},_assignProductLicenses:function(){var a=this,b=[],c=[],e,h,n;a._assignMode===a.assignSingle&&a._selectedMember?c.push(a._selectedMember.username):a._assignMode===a.assignMultiple&&d.forEach(a._getAllSelectedUsers(),function(a){c.push(a.username)});for(h in a._productEntitlementNames)if(a._productEntitlementNames.hasOwnProperty(h)&&
(n=a._productCheckboxes[h])&&n.get("checked"))n=esriGeowConfig.restBaseUrl+"content/listings/"+h+"/provisionUserEntitlements",e={users:c,entitlements:a._productEntitlementNames[h]},e={userEntitlements:C.stringify(e)},b.push(t.request({url:n,content:e},{usePost:!0}));A(b).then(function(b){a._assignLicenseSuccess(a._assignMode===a.assignMultiple?c:null)},function(b){a._assignLicenseError(b,a._assignMode===a.assignMultiple?c:null)})},onAssignLicenses:function(){this.MODE_PRODUCTS===this._mode?this._assignProductLicenses():
this.MODE_PRO===this._mode&&this._assignProLicenses()},_revokeLicenseError:function(a,b){console.log("error revoking licenses",a);var c;this._assignMode===this.assignSingle?c=p.substitute({name:this._selectedMember.fullName},this.i18n.assignLicense.errorRevokeSingle):this._assignMode===this.assignMultiple&&(c=p.substitute({num:b.length},this.i18n.assignLicense.errorRevokeMulti));c&&this._generalDlg.show({title:this.i18n.errorTitle,message:c})},_revokeLicenseSuccess:function(a){var b=this,c;b._assignMode===
b.assignSingle?c=p.substitute({name:b._selectedMember.fullName},b.i18n.assignLicense.successRevokeSingle):b._assignMode===b.assignMultiple&&(c=p.substitute({num:a.length},b.i18n.assignLicense.successRevokeMulti),b._clearSelectedMembers());c&&b._generalDlg.show({title:b.i18n.notice,message:c});b._refreshEntitlements().then(function(){b._switchToMembersContent()})},_revokeProLicenses:function(){var a=this,b={users:[],entitlements:[]},c,e,h;a._assignMode===a.assignSingle&&a._selectedMember?(c=a._hasEntitlements(a._selectedMember)&&
a._selectedMember.entitlements.disconnected)||b.users.push(a._selectedMember.username):a._assignMode===a.assignMultiple&&d.forEach(a._getAllSelectedUsers(),function(e){(c=a._hasEntitlements(e)&&e.entitlements.disconnected)||b.users.push(e.username)});e=esriGeowConfig.restBaseUrl+"content/listings/"+a._proListing.listing.itemId+"/provisionUserEntitlements";h={userEntitlements:C.stringify(b)};t.request({url:e,content:h},{usePost:!0}).then(function(c){a._revokeLicenseSuccess(a._assignMode===a.assignMultiple?
b.users:null)},function(c){a._revokeLicenseError(c,a._assignMode===a.assignMultiple?b.users:null)})},_revokeProductLicenses:function(){var a=this,b=[],c=[],e,h,n;a._assignMode===a.assignSingle?b.push(a._selectedMember.username):a._assignMode===a.assignMultiple&&d.forEach(a._getAllSelectedUsers(),function(a){b.push(a.username)});for(n in a._productEntitlementNames)if(a._productEntitlementNames.hasOwnProperty(n)&&(h=a._productCheckboxes[n])&&h.get("checked"))h=esriGeowConfig.restBaseUrl+"content/listings/"+
n+"/provisionUserEntitlements",e={users:b,entitlements:[]},e={userEntitlements:C.stringify(e)},c.push(t.request({url:h,content:e},{usePost:!0}));A(c).then(function(c){a._revokeLicenseSuccess(a._assignMode===a.assignMultiple?b:null)},function(c){a._revokeLicenseError(c,a._assignMode===a.assignMultiple?b:null)})},onRevokeLicenses:function(){this.MODE_PRO===this._mode?this._revokeProLicenses():this.MODE_PRODUCTS===this._mode&&this._revokeProductLicenses()},onLeaveSessions:function(){this._resetSessionGridStore();
this._switchToMembersContent()},onCancelLicenses:function(){this._switchToMembersContent()},onSearchByChange:function(){var a=this._searchBySelect.get("value");if((a=this._searchBySelect.get("store").query({name:a}))&&0<a.length)this.searchByNameId===a[0].id?(s.set(this._filterControls,"display","none"),s.set(this._searchControls,"display",""),k.hide(this._clearSearchBtn),this._filteringSelect.set("value",""),this._search.set("value",""),this._search.focus(),this.onClearClick()):(s.set(this._searchControls,
"display","none"),s.set(this._filterControls,"display",""),this.searchByRoleId===a[0].id?(this._resetFilter(this._roleStore),this.onFilterChange()):this.searchByGroupId===a[0].id?(this._resetFilter(this._groupStore),this.onFilterChange()):this.searchByProductId===a[0].id&&(this._resetFilter(this._productStore),this.onFilterChange()))},_resetFilter:function(a){this._resettingFilter=!0;this._filteringSelect.set("value","");this._filteringSelect.set("store",a);this._filteringSelect.focus()},_resetFilterNoFocus:function(a){this._resettingFilter=
!0;this._filteringSelect.set("value","");this._filteringSelect.set("store",a)},onSearchKeyDown:function(a){a.keyCode==M.ENTER?(a.preventDefault(),this.onSearchClick()):(a=this._search.get("value"))&&0<a.length&&s.set(this._clearSearchBtn,"display","inline-block")},onClearClick:function(a){a&&a.preventDefault();this._search.set("value","");this.onSearchClick();this._search.focus()},onFilterChange:function(){var a=this._filteringSelect.get("value"),b=this._searchBySelect.get("value"),b=this._searchBySelect.get("store").query({name:b});
this._resettingFilter?this._resettingFilter=!1:a&&0<a.length&&b&&0<b.length?this.searchByNameId!==b[0].id&&(this.searchByRoleId===b[0].id?this._searchRole(a):this.searchByGroupId===b[0].id?this._searchGroups(a):this.searchByProductId===b[0].id&&this._searchProducts(a)):this._resetMemberGridStore()},onSearchClick:function(){var a=this._searchBySelect.get("value"),a=this._searchBySelect.get("store").query({name:a}),b=m.trim(this._search.get("value")).toLowerCase();""===b?(k.hide(this._clearSearchBtn),
this._resetMemberGridStore()):a&&(0<a.length&&this.searchByNameId===a[0].id)&&(s.set(this._clearSearchBtn,"display","inline-block"),this._searchName(b))},_searchName:function(a){var b=this;b._clearMemberGridStore();d.forEach(b._allUsers,function(c){(c.fullName&&-1<c.fullName.toLowerCase().indexOf(a)||c.username&&-1<c.username.toLowerCase().indexOf(a))&&b._memberGridStore.put(m.clone(c))});b._refreshMemberGrid()},_searchProducts:function(a){var b=this,c;b._clearMemberGridStore();this.MODE_PRO===this._mode?
d.forEach(b._allUsers,function(c){b._hasEntitlements(c)&&-1<d.indexOf(c.entitlements.entitlements,a)&&b._memberGridStore.put(m.clone(c))}):this.MODE_PRODUCTS===this._mode&&(c=b._productEntitlementNames[a][0],d.forEach(b._allUsers,function(e){b._hasEntitlements(e)&&(e.productEntitlements[a]&&-1<d.indexOf(e.productEntitlements[a].entitlements,c))&&b._memberGridStore.put(m.clone(e))}));b._refreshMemberGrid()},_searchRole:function(a){var b=this;b._clearMemberGridStore();d.forEach(b._allUsers,function(c){(c.roleId===
a||c.role===a)&&b._memberGridStore.put(m.clone(c))});b._refreshMemberGrid()},_searchGroups:function(a){var b=this,c=esriGeowConfig.restBaseUrl+"community/groups",e=[];b._clearMemberGridStore();a&&0<a.length&&t.request({url:c+"/"+a+"/users"}).then(function(a){a&&(d.forEach(a.admins,function(a){-1===d.indexOf(e,a)&&e.push(a)}),d.forEach(a.users,function(a){-1===d.indexOf(e,a)&&e.push(a)}));d.forEach(b._allUsers,function(a){-1<d.indexOf(e,a.username)&&b._memberGridStore.put(m.clone(a))});b._refreshMemberGrid()},
function(a){b._refreshMemberGrid()})},_retrieveProductListings:function(){var a=this,b=new z;t.findLicenseByUserProducts().then(function(c){c&&c.pro&&(a._proListing=m.clone(c.pro));c&&c.products&&(a._productListings=m.clone(c.products),!this.uiInitialized&&a._productListings&&a._setupProductUI());a._initMode();b.resolve()},function(){a._proListing=null;a._productListings=null;b.resolve()});return b.promise},_refreshEntitlements:function(){var a=this,b=new z;a._retrieveUserEntitlements().then(function(){a._refreshLicenseStatus();
b.resolve()},function(a){b.resolve()});return b.promise},_retrieveUserEntitlements:function(){var a=this,b=new z,c=a._productListings&&0<a._productListings.length,e=function(c){a._productEntitlements=c||{};b.resolve()};a._proListing?a._retrieveProUserEntitlements().then(function(d){a._userEntitlements=d.userEntitlements||{};c?a._retrieveProductUserEntitlements().then(e):b.resolve()}):(a._userEntitlements={},c?a._retrieveProductUserEntitlements().then(e):b.resolve());return b.promise},_retrieveProUserEntitlements:function(){return t.request({url:esriGeowConfig.restBaseUrl+
"content/listings/"+this._proListing.listing.itemId+"/userEntitlements"}).promise},_retrieveProductUserEntitlements:function(){var a=new z,b=esriGeowConfig.restBaseUrl+"content/listings/${id}/userEntitlements",c=[],e=[],h={},n;d.forEach(this._productListings,function(a){n=a.listing.itemId;e.push(n);h[n]=[];c.push(t.request({url:p.substitute({id:n},b)}))});A(c).then(function(b){for(var c=0;c<e.length;c++)n=e[c],h[n]=b[c].userEntitlements;a.resolve(h)},function(b){a.resolve(null)});return a.promise},
_createRoleStore:function(){this._roleStore=new y({data:m.clone(this._allRoles)})},_createGroupStore:function(){this._groupStore=new y({data:m.clone(this._allGroups)})},_createProductStore:function(){var a=this,b=[],c,e;a.MODE_PRO===a._mode?a._proListing&&(a._proListing.provision.orgEntitlements&&a._proListing.provision.orgEntitlements.entitlements)&&(c=a._convertOrgEntitlementsToPurchasedMap(a._proListing.provision.orgEntitlements.entitlements),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.threeDAnalyst)&&
b.push({id:a.licenseKeywords.threeDAnalyst,name:a.i18n.licenseTypes.threeDAnalyst}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.proAdvanced)&&b.push({id:a.licenseKeywords.proAdvanced,name:a.i18n.licenseTypes.agsProLabel+" "+a.i18n.licenseTypes.advancedLabel}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.proBasic)&&b.push({id:a.licenseKeywords.proBasic,name:a.i18n.licenseTypes.agsProLabel+" "+a.i18n.licenseTypes.basicLabel}),a._canShowProduct(c,a._remainingEntitlements,
a.licenseKeywords.proStandard)&&b.push({id:a.licenseKeywords.proStandard,name:a.i18n.licenseTypes.agsProLabel+" "+a.i18n.licenseTypes.standardLabel}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.airports)&&b.push({id:a.licenseKeywords.airports,name:a.i18n.licenseTypes.airports}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.aviation)&&b.push({id:a.licenseKeywords.aviation,name:a.i18n.licenseTypes.aviation}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.businessBasic)&&
b.push({id:a.licenseKeywords.businessBasic,name:a.i18n.licenseTypes.businessBasic}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.businessStandard)&&b.push({id:a.licenseKeywords.businessStandard,name:a.i18n.licenseTypes.businessStd}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.dataInterop)&&b.push({id:a.licenseKeywords.dataInterop,name:a.i18n.licenseTypes.dataInterop}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.dataReviewer)&&b.push({id:a.licenseKeywords.dataReviewer,
name:a.i18n.licenseTypes.dataReviewer}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.defenseMapping)&&b.push({id:a.licenseKeywords.defenseMapping,name:a.i18n.licenseTypes.defenseMapping}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.roadsHighways)&&b.push({id:a.licenseKeywords.roadsHighways,name:a.i18n.licenseTypes.roadsHighways}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.fmv)&&b.push({id:a.licenseKeywords.fmv,name:a.i18n.licenseTypes.fullMotionVideo}),
a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.geostatAnalyst)&&b.push({id:a.licenseKeywords.geostatAnalyst,name:a.i18n.licenseTypes.geostatisticalAnalyst}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.bathymetry)&&b.push({id:a.licenseKeywords.bathymetry,name:a.i18n.licenseTypes.bathymetry}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.maritime)&&b.push({id:a.licenseKeywords.maritime,name:a.i18n.licenseTypes.maritime}),a._canShowProduct(c,a._remainingEntitlements,
a.licenseKeywords.networkAnalyst)&&b.push({id:a.licenseKeywords.networkAnalyst,name:a.i18n.licenseTypes.networkAnalyst}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.productionMap)&&b.push({id:a.licenseKeywords.productionMap,name:a.i18n.licenseTypes.productionMapping}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.publisher)&&b.push({id:a.licenseKeywords.publisher,name:a.i18n.licenseTypes.publisher}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.schematics)&&
b.push({id:a.licenseKeywords.schematics,name:a.i18n.licenseTypes.schematics}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.spatialAnalyst)&&b.push({id:a.licenseKeywords.spatialAnalyst,name:a.i18n.licenseTypes.spatialAnalyst}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.tracking)&&b.push({id:a.licenseKeywords.tracking,name:a.i18n.licenseTypes.tracking}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.workflowManager)&&b.push({id:a.licenseKeywords.workflowManager,
name:a.i18n.licenseTypes.workflowManager}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapNA)&&b.push({id:a.licenseKeywords.streetMapNA,name:a.i18n.licenseTypes.streetMapNA}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapEU)&&b.push({id:a.licenseKeywords.streetMapEU,name:a.i18n.licenseTypes.streetMapEU}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapAPAC)&&b.push({id:a.licenseKeywords.streetMapAPAC,name:a.i18n.licenseTypes.streetMapAPAC}),
a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapMEA)&&b.push({id:a.licenseKeywords.streetMapMEA,name:a.i18n.licenseTypes.streetMapMEA}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapLA)&&b.push({id:a.licenseKeywords.streetMapLA,name:a.i18n.licenseTypes.streetMapLA}),a._canShowProduct(c,a._remainingEntitlements,a.licenseKeywords.streetMapJA)&&b.push({id:a.licenseKeywords.streetMapJA,name:a.i18n.licenseTypes.streetMapJA})):a.MODE_PRODUCTS===a._mode&&
a._productListings&&0<a._productListings.length&&d.forEach(a._productListings,function(d){d.provision.orgEntitlements&&d.provision.orgEntitlements.entitlements&&(c=a._convertOrgEntitlementsToPurchasedMap(d.provision.orgEntitlements.entitlements),e=d.listing.itemId,a._canShowProduct(c,a._remainingProductEntitlements[e],a._productEntitlementNames[e][0])&&b.push({id:e,name:d.listing.title}))});a._productStore=new y({data:b})},_retrieveAllGroups:function(){var a=this,b=new z,c=[],e=[],h,n,g,l=esriGeowConfig.restBaseUrl+
"community/groups",f={q:"orgid:"+a._settings.id,start:a.startRequestNum,num:a.maxGroupsNum};a._allGroups=[];t.request({url:l,content:f}).then(function(k){if(k&&k.results)if(d.forEach(k.results,function(b){a._allGroups.push({id:b.id,name:-1<d.indexOf(c,b.title)?b.title+" ("+b.owner+")":b.title})}),h=k.totla=k.results.length,n=Math.ceil(h/a.maxGroupsNum),0<k.nextStart){for(g=0;g<n;g++)f.start=k.nextStart+g*a._maxGroups,e.push(t.request({url:l,content:f}));A(e).then(function(e){d.forEach(e,function(b){b&&
b.results&&d.forEach(b.results,function(b){a._allGroups.push({id:b.id,name:-1<d.indexOf(c,b.title)?b.title+" ("+b.owner+")":b.title})})});b.resolve()},function(a){b.resolve()})}else b.resolve()},function(a){b.resolve()});return b.promise},_retrieveAllRoles:function(){var a=this,b=new z,c=[],e,h,n;a._allRoles=[{id:"org_admin",name:this.i18n.roleAdmin},{id:"org_publisher",name:this.i18n.rolePublisher},{id:"org_user",name:this.i18n.roleUser}];a._rolesAPI.getRoles(a.startRequestNum,a.maxRequestNum).then(function(g){if(g&&
g.roles)if(a._allRoles=a._allRoles.concat(g.roles),e=g.total=g.roles.length,h=Math.ceil(e/a.maxRequestNum),0<g.nextStart){for(n=0;n<h;n++)c.push(a._rolesAPI.getRoles(g.nextStart+n*a.maxRequestNum,a.maxRequestNum));A(c).then(function(c){d.forEach(c,function(b){b&&b.roles&&(a._allRoles=a._allRoles.concat(b.roles))});b.resolve()},function(a){b.resolve()})}else b.resolve()},function(a){b.resolve()});return b.promise},_retrieveAllUsers:function(){var a=this,b=new z,c=[],e,h,n;a._retrieveUsers(a.startRequestNum,
a.maxRequestNum).then(function(g){if(g&&g.users)if(a._allUsers=g.users,e=g.total-g.users.length,h=Math.ceil(e/a.maxRequestNum),0<g.nextStart){for(n=0;n<h;n++)c.push(a._retrieveUsers(g.nextStart+n*a.maxRequestNum,a.maxRequestNum));A(c).then(function(c){d.forEach(c,function(b){b&&b.users&&(a._allUsers=a._allUsers.concat(b.users))});b.resolve()},function(a){b.resolve()})}else b.resolve();else b.resolve()},function(a){b.resolve()});return b.promise},_retrieveUsers:function(a,b){var c={start:a,num:b};
t.isPortal()&&(c.excludeSystemUsers=!0);return t.request({url:esriGeowConfig.restBaseUrl+"portals/self/users",content:c}).promise},_validateProForm:function(){var a,b=!1,c=!1,e=q.get(u.byId("pro-basic"),"checked"),h=q.get(u.byId("pro-std"),"checked"),n=q.get(u.byId("pro-adv"),"checked");if(this._assignMode===this.assignSingle&&this._selectedMember)if(a=1,b=this._hasEntitlements(this._selectedMember)&&this._selectedMember.entitlements.disconnected)this._assignBtn.set("disabled",b),this._revokeBtn.set("disabled",
b),q.set(this._exceedsWarning,"innerHTML",p.substitute({name:this._selectedMember.fullName},this.i18n.assignLicense.disconnectedSingleWarning)),k.show(this._exceedsWarning);else{k.hide(this._exceedsWarning);var g=this._hasEntitlements(this._selectedMember)&&this._selectedMember.entitlements.entitlements?this._selectedMember.entitlements.entitlements:[];n?c=this._exceedsProLicenses(g,this.licenseKeywords.proAdvanced,a):h?c=this._exceedsProLicenses(g,this.licenseKeywords.proStandard,a):e&&(c=this._exceedsProLicenses(g,
this.licenseKeywords.proBasic,a));this._spatialAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.spatialAnalyst,a));this._3DAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.threeDAnalyst,a));this._networkAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.networkAnalyst,a));this._geostatAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.geostatAnalyst,a));this._dataReviewerExt.get("checked")&&
(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.dataReviewer,a));this._workflowManagerExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.workflowManager,a));this._dataInteropExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.dataInterop,a));this._defenseExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.defenseMapping,a));this._fmvExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.fmv,a));this._businessBasicExt.get("checked")&&
(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.businessBasic,a));this._businessStdExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.businessStandard,a));this._roadsHighwaysExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.roadsHighways,a));this._publisherExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.publisher,a));this._productionMapExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.productionMap,
a));this._schematicsExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.schematics,a));this._trackingExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.tracking,a));this._aviationExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.aviation,a));this._airportsExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.airports,a));this._maritimeExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.maritime,
a));this._bathymetryExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.bathymetry,a));this._streetMapNAExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.streetMapNA,a));this._streetMapEUExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.streetMapEU,a));this._streetMapAPACExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.streetMapAPAC,a));this._streetMapMEAExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,
this.licenseKeywords.streetMapMEA,a));this._streetMapLAExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.streetMapLA,a));this._streetMapJAExt.get("checked")&&(c=c?c:this._exceedsProLicenses(g,this.licenseKeywords.streetMapJA,a));c?(q.set(this._exceedsWarning,"innerHTML",this.i18n.assignLicense.exceedsSingleWarning),k.show(this._exceedsWarning)):k.hide(this._exceedsWarning);this._assignBtn.set("disabled",c)}else if(this._assignMode===this.assignMultiple){var g=this._getAllSelectedUsers(),
l=0,f=this._initCurrentLicenseMap();a=g.length;for(b=0;b<g.length;b++)this._hasEntitlements(g[b])&&(g[b].entitlements.disconnected?l++:g[b].entitlements.entitlements&&d.forEach(g[b].entitlements.entitlements,function(a){f[a]+=1}));b=0<l;0<l&&(b=!0);n?c=this._exceedsProLicensesMultiple(f,this.licenseKeywords.proAdvanced,a-f[this.licenseKeywords.proAdvanced]):h?c=this._exceedsProLicensesMultiple(f,this.licenseKeywords.proStandard,a-f[this.licenseKeywords.proStandard]):e&&(c=this._exceedsProLicensesMultiple(f,
this.licenseKeywords.proBasic,a-f[this.licenseKeywords.proBasic]));this._spatialAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.spatialAnalyst,a-f[this.licenseKeywords.spatialAnalyst]));this._3DAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.threeDAnalyst,a-f[this.licenseKeywords.threeDAnalyst]));this._networkAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.networkAnalyst,a-
f[this.licenseKeywords.networkAnalyst]));this._geostatAnalystExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.geostatAnalyst,a-f[this.licenseKeywords.geostatAnalyst]));this._dataReviewerExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.dataReviewer,a-f[this.licenseKeywords.dataReviewer]));this._workflowManagerExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.workflowManager,a-f[this.licenseKeywords.workflowManager]));
this._dataInteropExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.dataInterop,a-f[this.licenseKeywords.dataInterop]));this._defenseExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.defenseMapping,a-f[this.licenseKeywords.defenseMapping]));this._fmvExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.fmv,a-f[this.licenseKeywords.fmv]));this._businessBasicExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,
this.licenseKeywords.businessBasic,a-f[this.licenseKeywords.businessBasic]));this._businessStdExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.businessStandard,a-f[this.licenseKeywords.businessStandard]));this._roadsHighwaysExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.roadsHighways,a-f[this.licenseKeywords.roadsHighways]));this._publisherExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.publisher,
a-f[this.licenseKeywords.publisher]));this._productionMapExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.productionMap,a-f[this.licenseKeywords.productionMap]));this._schematicsExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.schematics,a-f[this.licenseKeywords.schematics]));this._trackingExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.tracking,a-f[this.licenseKeywords.tracking]));this._aviationExt.get("checked")&&
(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.aviation,a-f[this.licenseKeywords.aviation]));this._airportsExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.airports,a-f[this.licenseKeywords.airports]));this._maritimeExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.maritime,a-f[this.licenseKeywords.maritime]));this._bathymetryExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.bathymetry,
a-f[this.licenseKeywords.bathymetry]));this._streetMapNAExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapNA,a-f[this.licenseKeywords.streetMapNA]));this._streetMapEUExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapEU,a-f[this.licenseKeywords.streetMapEU]));this._streetMapAPACExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapAPAC,a-f[this.licenseKeywords.streetMapAPAC]));
this._streetMapMEAExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapMEA,a-f[this.licenseKeywords.streetMapMEA]));this._streetMapLAExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapLA,a-f[this.licenseKeywords.streetMapLA]));this._streetMapJAExt.get("checked")&&(c=c?c:this._exceedsProLicensesMultiple(f,this.licenseKeywords.streetMapJA,a-f[this.licenseKeywords.streetMapJA]));c?(a=this.i18n.assignLicense.exceedsWarning,
b?l===g.length?(a=1===g.length?p.substitute({name:g[0].fullName},this.i18n.assignLicense.disconnectedSingleWarning)+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.assignLicense.exceedsWarning:this.i18n.assignLicense.disconnectedAllWarning+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.assignLicense.exceedsWarning,this._revokeBtn.set("disabled",b)):(a=1===l?this.i18n.assignLicense.disconnectedOneWarning+"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.assignLicense.exceedsWarning:p.substitute({num:l},this.i18n.assignLicense.disconnectedSomeWarning)+
"\x3cbr/\x3e\x3cbr/\x3e"+this.i18n.assignLicense.exceedsWarning,this._revokeBtn.set("disabled",!1)):this._revokeBtn.set("disabled",!1),this._assignBtn.set("disabled",c),q.set(this._exceedsWarning,"innerHTML",a),k.show(this._exceedsWarning)):b?(l===g.length?(a=1===g.length?p.substitute({name:g[0].fullName},this.i18n.assignLicense.disconnectedSingleWarning):this.i18n.assignLicense.disconnectedAllWarning,this._assignBtn.set("disabled",b),this._revokeBtn.set("disabled",b)):(a=1===l?this.i18n.assignLicense.disconnectedOneWarning:
p.substitute({num:l},this.i18n.assignLicense.disconnectedSomeWarning),this._assignBtn.set("disabled",!1),this._revokeBtn.set("disabled",!1)),q.set(this._exceedsWarning,"innerHTML",a),k.show(this._exceedsWarning)):(this._assignBtn.set("disabled",!1),this._revokeBtn.set("disabled",!1),k.hide(this._exceedsWarning))}},_validateProductsForm:function(){var a=!1,b=!1,c,e,d,n,g,l,f,m;if(this._assignMode===this.assignSingle&&this._selectedMember){c=!1;e=1;d=this._hasEntitlements(this._selectedMember)&&this._selectedMember.productEntitlements?
this._selectedMember.productEntitlements:{};for(f in this._productEntitlementNames)if(this._productEntitlementNames.hasOwnProperty(f)&&(n=d[f]?d[f].entitlements:[],(g=H.byId(f+"-Check"))&&g.get("checked")))!c&&(this._selectedMember.productEntitlements&&this._selectedMember.productEntitlements[f]&&this._selectedMember.productEntitlements[f].entitlements)&&(c=!0),a=a?a:this._exceedsProductLicenses(f,n,this._productEntitlementNames[f][0],e);if(a)this._assignBtn.set("disabled",a),q.set(this._exceedsWarning,
"innerHTML",this.i18n.assignLicense.exceedsSingleWarning),k.show(this._exceedsWarning);else{for(f in this._productCheckboxes)this._productCheckboxes.hasOwnProperty(f)&&this._productCheckboxes[f].get("checked")&&(b=!0);this._assignBtn.set("disabled",!b);this._revokeBtn.set("disabled",!c);k.hide(this._exceedsWarning)}}else if(this._assignMode===this.assignMultiple){c=this._getAllSelectedUsers();d=this._initCurrentLicenseMap();e=c.length;for(m=0;m<c.length;m++)if(l=c[m],this._hasEntitlements(l)&&l.productEntitlements)for(f in l.productEntitlements)l.productEntitlements.hasOwnProperty(f)&&
(n=l.productEntitlements[f]?l.productEntitlements[f].entitlements:[],g=n[0],0<n.length&&(d[g]+=1));for(m=0;m<c.length;m++)for(f in this._productEntitlementNames)if(this._productEntitlementNames.hasOwnProperty(f)&&(g=H.byId(f+"-Check"))&&g.get("checked"))if(g=this._productEntitlementNames[f][0],a=a?a:this._exceedsProductLicensesMultiple(f,d,g,e-d[g]))break;if(a)this._assignBtn.set("disabled",a),this._revokeBtn.set("disabled",!1),q.set(this._exceedsWarning,"innerHTML",this.i18n.assignLicense.exceedsWarning),
k.show(this._exceedsWarning);else{for(f in this._productCheckboxes)this._productCheckboxes.hasOwnProperty(f)&&this._productCheckboxes[f].get("checked")&&(b=!0);this._assignBtn.set("disabled",!b);this._revokeBtn.set("disabled",!b);k.hide(this._exceedsWarning)}}},_validateForm:function(){this._mode===this.MODE_PRO?this._validateProForm():this._mode===this.MODE_PRODUCTS&&this._validateProductsForm()},_initCurrentLicenseMap:function(){var a={};if(this.MODE_PRO===this._mode)a[this.licenseKeywords.proAdvanced]=
0,a[this.licenseKeywords.proStandard]=0,a[this.licenseKeywords.proBasic]=0,a[this.licenseKeywords.spatialAnalyst]=0,a[this.licenseKeywords.threeDAnalyst]=0,a[this.licenseKeywords.networkAnalyst]=0,a[this.licenseKeywords.geostatAnalyst]=0,a[this.licenseKeywords.dataReviewer]=0,a[this.licenseKeywords.workflowManager]=0,a[this.licenseKeywords.dataInterop]=0,a[this.licenseKeywords.defenseMapping]=0,a[this.licenseKeywords.fmv]=0,a[this.licenseKeywords.businessBasic]=0,a[this.licenseKeywords.businessStandard]=
0,a[this.licenseKeywords.roadsHighways]=0,a[this.licenseKeywords.publisher]=0,a[this.licenseKeywords.productionMap]=0,a[this.licenseKeywords.schematics]=0,a[this.licenseKeywords.tracking]=0,a[this.licenseKeywords.aviation]=0,a[this.licenseKeywords.airports]=0,a[this.licenseKeywords.maritime]=0,a[this.licenseKeywords.bathymetry]=0,a[this.licenseKeywords.streetMapNA]=0,a[this.licenseKeywords.streetMapEU]=0,a[this.licenseKeywords.streetMapAPAC]=0,a[this.licenseKeywords.streetMapMEA]=0,a[this.licenseKeywords.streetMapLA]=
0,a[this.licenseKeywords.streetMapJA]=0;else if(this.MODE_PRODUCTS===this._mode)for(var b in this._productEntitlementNames)this._productEntitlementNames.hasOwnProperty(b)&&(a[this._productEntitlementNames[b][0]]=0);return a},_exceedsProLicensesMultiple:function(a,b,c){c=b&&this._remainingEntitlements&&this._remainingEntitlements[b]&&this._remainingEntitlements[b]>=c;return!(a&&0<a[b])&&!c},_exceedsProLicenses:function(a,b,c){a=b&&a&&-1<d.indexOf(a,b);b=b&&this._remainingEntitlements&&this._remainingEntitlements[b]&&
this._remainingEntitlements[b]>=c;return!a&&!b},_exceedsProductLicensesMultiple:function(a,b,c,e){return!(c&&(this._remainingProductEntitlements&&this._remainingProductEntitlements[a]&&p.isDefined(this._remainingProductEntitlements[a][c]))&&this._remainingProductEntitlements[a][c]>=e)},_exceedsProductLicenses:function(a,b,c,e){b=c&&b&&-1<d.indexOf(b,c);a=c&&this._remainingProductEntitlements&&this._remainingProductEntitlements[a][c]&&this._remainingProductEntitlements[a][c]&&this._remainingProductEntitlements[a][c]>=
e;return!b&&!a},_isProSelected:function(){return this._proBasic.get("checked")||this._proStd.get("checked")||this._proAdv.get("checked")},_isExtensionChecked:function(){return this._spatialAnalystExt.get("checked")||this._3DAnalystExt.get("checked")||this._networkAnalystExt.get("checked")||this._geostatAnalystExt.get("checked")||this._dataReviewerExt.get("checked")||this._workflowManagerExt.get("checked")||this._dataInteropExt.get("checked")||this._defenseExt.get("checked")||this._fmvExt.get("checked")||
this._businessBasicExt.get("checked")||this._businessStdExt.get("checked")||this._roadsHighwaysExt.get("checked")||this._publisherExt.get("checked")||this._productionMapExt.get("checked")||this._schematicsExt.get("checked")||this._trackingExt.get("checked")||this._aviationExt.get("checked")||this._airportsExt.get("checked")||this._maritimeExt.get("checked")||this._bathymetryExt.get("checked")||this._streetMapNAExt.get("checked")||this._streetMapEUExt.get("checked")||this._streetMapAPACExt.get("checked")||
this._streetMapMEAExt.get("checked")||this._streetMapLAExt.get("checked")||this._streetMapJAExt.get("checked")},_determineTriStateValue:function(a,b){return a===b?!0:0===a?!1:"mixed"},_normalizeTriStateClick:function(a){"mixed"===a.get("checked")&&a.set("checked",!0);return a.get("checked")},_setExtensions:function(a){if(this._proListing&&this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements){var b=this._convertOrgEntitlementsToPurchasedMap(this._proListing.provision.orgEntitlements.entitlements);
this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.spatialAnalyst)&&this._spatialAnalystExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.threeDAnalyst)&&this._3DAnalystExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.networkAnalyst)&&this._networkAnalystExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.geostatAnalyst)&&this._geostatAnalystExt.set("checked",
a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.dataReviewer)&&this._dataReviewerExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.workflowManager)&&this._workflowManagerExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.dataInterop)&&this._dataInteropExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.defenseMapping)&&this._defenseExt.set("checked",
a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.fmv)&&this._fmvExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.businessBasic)&&this._businessBasicExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.businessStandard)&&this._businessStdExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.roadsHighways)&&this._roadsHighwaysExt.set("checked",a);this._canShowProduct(b,
this._remainingEntitlements,this.licenseKeywords.publisher)&&this._publisherExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.productionMap)&&this._productionMapExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.schematics)&&this._schematicsExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.tracking)&&this._trackingExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,
this.licenseKeywords.aviation)&&this._aviationExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.airports)&&this._airportsExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.maritime)&&this._maritimeExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.bathymetry)&&this._bathymetryExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapNA)&&
this._streetMapNAExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapEU)&&this._streetMapEUExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapAPAC)&&this._streetMapAPACExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapMEA)&&this._streetMapMEAExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapLA)&&
this._streetMapLAExt.set("checked",a);this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapJA)&&this._streetMapJAExt.set("checked",a)}},_determineTotalExtensions:function(){var a=0,b;this._proListing&&(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements)&&(b=this._convertOrgEntitlementsToPurchasedMap(this._proListing.provision.orgEntitlements.entitlements),this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.spatialAnalyst)&&
a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.threeDAnalyst)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.networkAnalyst)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.geostatAnalyst)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.dataReviewer)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.workflowManager)&&a++,this._canShowProduct(b,this._remainingEntitlements,
this.licenseKeywords.dataInterop)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.defenseMapping)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.fmv)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.businessBasic)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.businessStandard)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.roadsHighways)&&a++,this._canShowProduct(b,
this._remainingEntitlements,this.licenseKeywords.publisher)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.productionMap)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.schematics)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.tracking)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.aviation)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.airports)&&
a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.maritime)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.bathymetry)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapNA)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapEU)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapAPAC)&&a++,this._canShowProduct(b,this._remainingEntitlements,
this.licenseKeywords.streetMapMEA)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapLA)&&a++,this._canShowProduct(b,this._remainingEntitlements,this.licenseKeywords.streetMapJA)&&a++);return a},_extensionProvisioned:function(a,b){return p.isDefined(a[b])&&0<a[b]},_toggleLicenseGroup:function(a){w.toggle(u.byId(a+"-licenses"),"display_none");q.get(u.byId(a+"-expcon"),"innerHTML")===this.i18n.assignLicense.expand?q.set(u.byId(a+"-expcon"),"innerHTML",this.i18n.assignLicense.contract):
q.set(u.byId(a+"-expcon"),"innerHTML",this.i18n.assignLicense.expand)},_convertOrgEntitlementsToPurchasedMap:function(a){var b={};if(a)for(var c in a)a[c]&&p.isDefined(a[c].num)?b[c]=a[c].num:b[c]=a[c];return b},_checkLicensedProvisions:function(){var a=this,b=a._productListings&&0<a._productListings.length,c={},e=!1,h;a._proListing&&(a._proListing.provision.orgEntitlements&&a._proListing.provision.orgEntitlements.entitlements&&(c=a._convertOrgEntitlementsToPurchasedMap(a._proListing.provision.orgEntitlements.entitlements)),
a._remainingEntitlements=m.clone(c),d.forEach(a._userEntitlements,function(b){d.forEach(b.entitlements,function(b){a._remainingEntitlements[b]||(a._remainingEntitlements[b]=0);a._remainingEntitlements[b]-=1})}),e=a._checkProvisions(a._remainingEntitlements));if(b){a._remainingProductEntitlements={};for(b=0;b<a._productListings.length&&!e;b++)e=a._productListings[b],h=e.listing.itemId,e.provision.orgEntitlements&&e.provision.orgEntitlements.entitlements&&(c=a._convertOrgEntitlementsToPurchasedMap(e.provision.orgEntitlements.entitlements)),
a._remainingProductEntitlements[h]=m.clone(c),d.forEach(a._productEntitlements[h],function(b){d.forEach(b.entitlements,function(b){a._remainingProductEntitlements[b]||(a._remainingProductEntitlements[b]=0);a._remainingProductEntitlements[b]-=1})}),e=a._checkProvisions(a._remainingProductEntitlements[h])}a._publishProvisionsExceeded(e)},_setupProductUI:function(){var a=this,b,c,e,h;a._productCheckboxes=a._productCheckboxes||{};a._productEntitlementNames={};d.forEach(a._productListings,function(d){b=
d.listing.itemId;c=d.listing.title;if(d.provision&&d.provision.orgEntitlements&&d.provision.orgEntitlements.entitlements)for(var g in d.provision.orgEntitlements.entitlements)d.provision.orgEntitlements.entitlements.hasOwnProperty(g)&&(a._productEntitlementNames[b]?a._productEntitlementNames[b].push(g):a._productEntitlementNames[b]=[g]);if((d.listing.owner===this.esriAppsOwner||-1<d.listing.owner.indexOf("esri"))&&-1<d.listing.type.indexOf("Application"))e=a._esriAppsLicenseContainer;H.byId(b+"-Check")||
(h=new U({id:b+"-Check","class":a.productCheckBoxClassName},r.create("div",null,e)),r.create("label",{innerHTML:"\x26nbsp;"+c,id:b+"-CheckLabel","for":b+"-Check"},e),r.create("br",null,e),a._productCheckboxes[b]=h,a.own(h.on("click",m.hitch(a,a._validateForm))))})},_refreshLicenseStatus:function(){var a=this,b=0,c=0,e={},h,n,g,l,f,k,p,q;for(l=0;l<a._allUsers.length;l++)a._allUsers[l].entitlements=null,a._allUsers[l].productEntitlements={},a._allUsers[l].licensed=a.i18n.membersGrid.configureLabel,
a._allUsers[l].lastused="",delete a._allUsers[l].status;if(a._mode===a.MODE_PRO){a._proListing.provision.orgEntitlements&&a._proListing.provision.orgEntitlements.entitlements&&(b=a._proListing.provision.orgEntitlements.maxUsers||0,e=a._convertOrgEntitlementsToPurchasedMap(a._proListing.provision.orgEntitlements.entitlements));a._remainingEntitlements=m.clone(e);a.totalExtensions=0;for(f in e)f!==a.licenseKeywords.proBasic&&f!==a.licenseKeywords.proStandard&&f!==a.licenseKeywords.proAdvanced&&e[f]&&
0<e[f]&&a.totalExtensions++;c=a._userEntitlements.length||0;d.forEach(a._userEntitlements,function(b){for(l=0;l<a._allUsers.length;l++)if(a._allUsers[l].username===b.username){a._allUsers[l].entitlements=b;a._allUsers[l].lastused=a._allUsers[l].entitlements.lastLogin;a._allUsers[l].status=a._computeStatus(a._allUsers[l]);a._allUsers[l].licensed=a._compileLicensedForText(a._allUsers[l]);break}d.forEach(b.entitlements,function(b){a._remainingEntitlements[b]||(a._remainingEntitlements[b]=0);a._remainingEntitlements[b]-=
1})});a._fillInLicensedUsers(b,c);a._fillInLicenseStatus(e,a._remainingEntitlements)}else a._mode===a.MODE_PRODUCTS&&(a._clearProductLicenseStatus(),a._remainingProductEntitlements={},d.forEach(a._productListings,function(c){b=0;e={};n=c.listing.itemId;p=c.listing.title;if(c.provision.orgEntitlements&&c.provision.orgEntitlements.entitlements){b=c.provision.orgEntitlements.maxUsers||0;e=a._convertOrgEntitlementsToPurchasedMap(c.provision.orgEntitlements.entitlements);for(var f in c.provision.orgEntitlements.entitlements)if(c.provision.orgEntitlements.entitlements.hasOwnProperty(f)){k=
f;break}}h=m.clone(e);g=a._productEntitlements[n];d.forEach(g,function(b){for(l=0;l<a._allUsers.length;l++)if(a._allUsers[l].username===b.username){a._allUsers[l].productEntitlements[n]=b;a._allUsers[l].licensed=a._compileLicensedForText(a._allUsers[l]);a._allUsers[l].lastused="";a._allUsers[l].status=a._computeStatus(a._allUsers[l]);break}d.forEach(b.entitlements,function(a){h[a]||(h[a]=0);h[a]-=1})});a._remainingProductEntitlements[n]=h;q={keyword:k,title:p,itemId:n};a._fillInLicenseStatus(e,h,
q)}))},_fillInLicensedUsers:function(a,b){var c=0,d=a-b;q.set(this._maximumUsersLabel,"innerHTML",a);q.set(this._currentUsersLabel,"innerHTML",d);0<a&&(c=d/a);0.2>c||1===d?w.add(this._currentUsersLabel,"exceeds"):w.remove(this._currentUsersLabel,"exceeds")},_zeroDefault:function(a){return p.isDefined(a)?a:0},_drawProductLicenseStatus:function(a,b,c){var d="productTitle";c.title.length>this.longTitleMin&&(d+=" longTitle");var d=r.create("td",{"class":d},this._productLicenseCountNameRow),h=r.create("td",
{"class":"productTitle productStatus"},this._productLicenseCountDataRow);r.create("strong",{innerHTML:c.title},d);this._drawLicenseStatus(a,b,h,c.keyword)},_drawLicenseStatus:function(a,b,c,d){q.set(c,"innerHTML","");var h=this._calculatePctRemainingPercent(a,b,d),k=h?Math.floor(78*h):0,g=80-k;a=a[d];b=b[d];d=0.2>h||1===b?"#ae0001":0.5>=h?"#9adfea":"#5daddd";var h=b?0.2>h||1===b?"#b9392f":0.5>=h?"#000":"#fff":"#000",l=9999<b||-999>b?"10pt":999<b||-99>b?"12pt":"16pt";0>b&&(h="#b9392f");if(8===v("ie"))r.create("div",
{innerHTML:a?""+a:"0",className:"ie8Licenses",style:{color:"#000",fontSize:"10pt"}},c),r.create("div",{innerHTML:b?""+b:"0",className:"ie8Available",style:{color:"#fff"===h?"#000":h,fontSize:l}},c),D("td.productTitle").forEach(function(a){w.add(a,"ie8ProductTitle")}),D("td.productRow").forEach(function(a){w.add(a,"ie8ProductRow")}),D("td.productTitle.productStatus").forEach(function(a){q.set(a,"nowrap",!0);s.set(a,"white-space","nowrap");esriGeowConfig.isRightToLeft&&s.set(a,"direction","ltr")});
else{K.renderer=10>v("ie")||6>v("trident")?"vml,silverlight":"canvas,svg,vml,silverlight";c=K.createSurface(c,40,80);c.createRect({x:0,y:0,width:40,height:80}).setFill("#eee").setStroke("#000");c.createRect({x:1,y:g-1,width:38,height:0<=k?k:0}).setFill(d);if(v("ie")||v("trident"))9>v("ie")||5>v("trident")?c.createRect({x:0,y:0,width:39,height:79}).setStroke("#000"):(10>v("ie")||6>v("trident")||11>v("ie")||v("trident"),c.createRect({x:1,y:1,width:38,height:78}).setStroke("#000","Solid",2));v("ff")&&
c.createRect({x:1,y:0,width:39,height:79}).setStroke("#000","Solid",1);c.createText({x:20,y:20,text:a?""+a:"0",align:"middle"}).setFont({family:"Verdana",size:"10pt"}).setFill("#000");c.createText({x:20,y:68,text:b?""+b:"0",align:"middle"}).setFont({family:"Verdana",size:l}).setFill(h);esriGeowConfig.isRightToLeft&&D("svg").forEach(function(a){q.set(a,"direction","ltr")})}},_calculatePctRemainingPercent:function(a,b,c){b=b[c];a=a[c];c=0;b=p.isDefined(b)?b:0;a=p.isDefined(a)?a:0;0<a&&(c=b/a);return c},
_canShowProduct:function(a,b,c){return p.isDefined(a[c])&&0<a[c]||p.isDefined(b[c])&&!isNaN(b[c])},_drawProBasic:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.proBasic)?(this._drawLicenseStatus(a,b,this._proBasicStatus,this.licenseKeywords.proBasic),this._showNode(this._proBasicSelect),this._showNode(this._proBasicTitle),this._showNode(this._proBasicStatus)):(this._hideNode(this._proBasicSelect),this._hideNode(this._proBasicTitle),this._hideNode(this._proBasicStatus))},_drawProStandard:function(a,
b){this._canShowProduct(a,b,this.licenseKeywords.proStandard)?(this._drawLicenseStatus(a,b,this._proStdStatus,this.licenseKeywords.proStandard),this._showNode(this._proStdSelect),this._showNode(this._proStdTitle),this._showNode(this._proStdStatus)):(this._hideNode(this._proStdSelect),this._hideNode(this._proStdTitle),this._hideNode(this._proStdStatus))},_drawProAdvanced:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.proAdvanced)?(this._drawLicenseStatus(a,b,this._proAdvStatus,this.licenseKeywords.proAdvanced),
this._showNode(this._proAdvSelect),this._showNode(this._proAdvTitle),this._showNode(this._proAdvStatus)):(this._hideNode(this._proAdvSelect),this._hideNode(this._proAdvTitle),this._hideNode(this._proAdvStatus))},_drawSpatialAnalyst:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.spatialAnalyst)?(this._drawLicenseStatus(a,b,this._spatialAnalystStatus,this.licenseKeywords.spatialAnalyst),this._showNode(this._spatialAnalystCheck),this._showNode(this._spatialAnalystTitle),this._showNode(this._spatialAnalystStatus)):
(this._hideNode(this._spatialAnalystCheck),this._hideNode(this._spatialAnalystTitle),this._hideNode(this._spatialAnalystStatus))},_draw3DAnalyst:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.threeDAnalyst)?(this._drawLicenseStatus(a,b,this._threeDAnalystStatus,this.licenseKeywords.threeDAnalyst),this._showNode(this._3DAnalystCheck),this._showNode(this._threeDAnalystTitle),this._showNode(this._threeDAnalystStatus)):(this._hideNode(this._3DAnalystCheck),this._hideNode(this._threeDAnalystTitle),
this._hideNode(this._threeDAnalystStatus))},_drawNetworkAnalyst:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.networkAnalyst)?(this._drawLicenseStatus(a,b,this._networkAnalystStatus,this.licenseKeywords.networkAnalyst),this._showNode(this._networkAnalystCheck),this._showNode(this._networkAnalystTitle),this._showNode(this._networkAnalystStatus)):(this._hideNode(this._networkAnalystCheck),this._hideNode(this._networkAnalystTitle),this._hideNode(this._networkAnalystStatus))},_drawGeostatAnalyst:function(a,
b){this._canShowProduct(a,b,this.licenseKeywords.geostatAnalyst)?(this._drawLicenseStatus(a,b,this._geostatAnalystStatus,this.licenseKeywords.geostatAnalyst),this._showNode(this._geostatAnalystCheck),this._showNode(this._geostatAnalystTitle),this._showNode(this._geostatAnalystStatus)):(this._hideNode(this._geostatAnalystCheck),this._hideNode(this._geostatAnalystTitle),this._hideNode(this._geostatAnalystStatus))},_drawDataReviewer:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.dataReviewer)?
(this._drawLicenseStatus(a,b,this._dataReviewerStatus,this.licenseKeywords.dataReviewer),this._showNode(this._dataReviewerCheck),this._showNode(this._dataReviewerTitle),this._showNode(this._dataReviewerStatus)):(this._hideNode(this._dataReviewerCheck),this._hideNode(this._dataReviewerTitle),this._hideNode(this._dataReviewerStatus))},_drawWorkflowManager:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.workflowManager)?(this._drawLicenseStatus(a,b,this._workflowManagerStatus,this.licenseKeywords.workflowManager),
this._showNode(this._workflowManagerCheck),this._showNode(this._workflowManagerTitle),this._showNode(this._workflowManagerStatus)):(this._hideNode(this._workflowManagerCheck),this._hideNode(this._workflowManagerTitle),this._hideNode(this._workflowManagerStatus))},_drawDataInterop:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.dataInterop)?(this._drawLicenseStatus(a,b,this._dataInteropStatus,this.licenseKeywords.dataInterop),this._showNode(this._dataInteropCheck),this._showNode(this._dataInteropTitle),
this._showNode(this._dataInteropStatus)):(this._hideNode(this._dataInteropCheck),this._hideNode(this._dataInteropTitle),this._hideNode(this._dataInteropStatus))},_drawDefenseMapping:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.defenseMapping)?(this._drawLicenseStatus(a,b,this._defenseStatus,this.licenseKeywords.defenseMapping),this._showNode(this._defenseCheck),this._showNode(this._defenseTitle),this._showNode(this._defenseStatus)):(this._hideNode(this._defenseCheck),this._hideNode(this._defenseTitle),
this._hideNode(this._defenseStatus))},_drawFMV:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.fmv)?(this._drawLicenseStatus(a,b,this._fmvStatus,this.licenseKeywords.fmv),this._showNode(this._fmvCheck),this._showNode(this._fmvTitle),this._showNode(this._fmvStatus)):(this._hideNode(this._fmvCheck),this._hideNode(this._fmvTitle),this._hideNode(this._fmvStatus))},_drawBusinessBasic:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.businessBasic)?(this._drawLicenseStatus(a,b,this._businessBasicStatus,
this.licenseKeywords.businessBasic),this._showNode(this._businessBasicCheck),this._showNode(this._businessBasicTitle),this._showNode(this._businessBasicStatus)):(this._hideNode(this._businessBasicCheck),this._hideNode(this._businessBasicTitle),this._hideNode(this._businessBasicStatus))},_drawBusinessStandard:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.businessStandard)?(this._drawLicenseStatus(a,b,this._businessStdStatus,this.licenseKeywords.businessStandard),this._showNode(this._businessStdCheck),
this._showNode(this._businessStdTitle),this._showNode(this._businessStdStatus)):(this._hideNode(this._businessStdCheck),this._hideNode(this._businessStdTitle),this._hideNode(this._businessStdStatus))},_drawRoadsHighways:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.roadsHighways)?(this._drawLicenseStatus(a,b,this._roadsHighwaysStatus,this.licenseKeywords.roadsHighways),this._showNode(this._roadsHighwaysCheck),this._showNode(this._roadsHighwaysTitle),this._showNode(this._roadsHighwaysStatus)):
(this._hideNode(this._roadsHighwaysCheck),this._hideNode(this._roadsHighwaysTitle),this._hideNode(this._roadsHighwaysStatus))},_drawPublisher:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.publisher)?(this._drawLicenseStatus(a,b,this._publisherStatus,this.licenseKeywords.publisher),this._showNode(this._publisherCheck),this._showNode(this._publisherTitle),this._showNode(this._publisherStatus)):(this._hideNode(this._publisherCheck),this._hideNode(this._publisherTitle),this._hideNode(this._publisherStatus))},
_drawProductionMap:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.productionMap)?(this._drawLicenseStatus(a,b,this._productionMapStatus,this.licenseKeywords.productionMap),this._showNode(this._productionMapCheck),this._showNode(this._productionMapTitle),this._showNode(this._productionMapStatus)):(this._hideNode(this._productionMapCheck),this._hideNode(this._productionMapTitle),this._hideNode(this._productionMapStatus))},_drawSchematics:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.schematics)?
(this._drawLicenseStatus(a,b,this._schematicsStatus,this.licenseKeywords.schematics),this._showNode(this._schematicsCheck),this._showNode(this._schematicsTitle),this._showNode(this._schematicsStatus)):(this._hideNode(this._schematicsCheck),this._hideNode(this._schematicsTitle),this._hideNode(this._schematicsStatus))},_drawTracking:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.tracking)?(this._drawLicenseStatus(a,b,this._trackingStatus,this.licenseKeywords.tracking),this._showNode(this._trackingCheck),
this._showNode(this._trackingTitle),this._showNode(this._trackingStatus)):(this._hideNode(this._trackingCheck),this._hideNode(this._trackingTitle),this._hideNode(this._trackingStatus))},_drawAviation:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.aviation)?(this._drawLicenseStatus(a,b,this._aviationStatus,this.licenseKeywords.aviation),this._showNode(this._aviationCheck),this._showNode(this._aviationTitle),this._showNode(this._aviationStatus)):(this._hideNode(this._aviationCheck),this._hideNode(this._aviationTitle),
this._hideNode(this._aviationStatus))},_drawAirports:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.airports)?(this._drawLicenseStatus(a,b,this._airportsStatus,this.licenseKeywords.airports),this._showNode(this._airportsCheck),this._showNode(this._airportsTitle),this._showNode(this._airportsStatus)):(this._hideNode(this._airportsCheck),this._hideNode(this._airportsTitle),this._hideNode(this._airportsStatus))},_drawMaritime:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.maritime)?
(this._drawLicenseStatus(a,b,this._maritimeStatus,this.licenseKeywords.maritime),this._showNode(this._maritimeCheck),this._showNode(this._maritimeTitle),this._showNode(this._maritimeStatus)):(this._hideNode(this._maritimeCheck),this._hideNode(this._maritimeTitle),this._hideNode(this._maritimeStatus))},_drawBathymetry:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.bathymetry)?(this._drawLicenseStatus(a,b,this._bathymetryStatus,this.licenseKeywords.bathymetry),this._showNode(this._bathymetryCheck),
this._showNode(this._bathymetryTitle),this._showNode(this._bathymetryStatus)):(this._hideNode(this._bathymetryCheck),this._hideNode(this._bathymetryTitle),this._hideNode(this._bathymetryStatus))},_drawStreetMapNA:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.streetMapNA)?(this._drawLicenseStatus(a,b,this._streetMapNAStatus,this.licenseKeywords.streetMapNA),this._showNode(this._streetMapNACheck),this._showNode(this._streetMapNATitle),this._showNode(this._streetMapNAStatus)):(this._hideNode(this._streetMapNACheck),
this._hideNode(this._streetMapNATitle),this._hideNode(this._streetMapNAStatus))},_drawStreetMapEU:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.streetMapEU)?(this._drawLicenseStatus(a,b,this._streetMapEUStatus,this.licenseKeywords.streetMapEU),this._showNode(this._streetMapEUCheck),this._showNode(this._streetMapEUTitle),this._showNode(this._streetMapEUStatus)):(this._hideNode(this._streetMapEUCheck),this._hideNode(this._streetMapEUTitle),this._hideNode(this._streetMapEUStatus))},_drawStreetMapAPAC:function(a,
b){this._canShowProduct(a,b,this.licenseKeywords.streetMapAPAC)?(this._drawLicenseStatus(a,b,this._streetMapAPACStatus,this.licenseKeywords.streetMapAPAC),this._showNode(this._streetMapAPACCheck),this._showNode(this._streetMapAPACTitle),this._showNode(this._streetMapAPACStatus)):(this._hideNode(this._streetMapAPACCheck),this._hideNode(this._streetMapAPACTitle),this._hideNode(this._streetMapAPACStatus))},_drawStreetMapMEA:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.streetMapMEA)?(this._drawLicenseStatus(a,
b,this._streetMapMEAStatus,this.licenseKeywords.streetMapMEA),this._showNode(this._streetMapMEACheck),this._showNode(this._streetMapMEATitle),this._showNode(this._streetMapMEAStatus)):(this._hideNode(this._streetMapMEACheck),this._hideNode(this._streetMapMEATitle),this._hideNode(this._streetMapMEAStatus))},_drawStreetMapLA:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.streetMapLA)?(this._drawLicenseStatus(a,b,this._streetMapLAStatus,this.licenseKeywords.streetMapLA),this._showNode(this._streetMapLACheck),
this._showNode(this._streetMapLATitle),this._showNode(this._streetMapLAStatus)):(this._hideNode(this._streetMapLACheck),this._hideNode(this._streetMapLATitle),this._hideNode(this._streetMapLAStatus))},_drawStreetMapJA:function(a,b){this._canShowProduct(a,b,this.licenseKeywords.streetMapJA)?(this._drawLicenseStatus(a,b,this._streetMapJAStatus,this.licenseKeywords.streetMapJA),this._showNode(this._streetMapJACheck),this._showNode(this._streetMapJATitle),this._showNode(this._streetMapJAStatus)):(this._hideNode(this._streetMapJACheck),
this._hideNode(this._streetMapJATitle),this._hideNode(this._streetMapJAStatus))},_drawProduct:function(a,b,c){var d=this._productCheckboxes[c.itemId];this._canShowProduct(a,b,c.keyword)?(this._drawProductLicenseStatus(a,b,c),d&&(this._showNode(this._productCheckboxes[c.itemId].domNode),this._showNode(u.byId(c.itemId+"-CheckLabel")))):d&&(this._hideNode(this._productCheckboxes[c.itemId].domNode),this._hideNode(u.byId(c.itemId+"-CheckLabel")))},_clearProductLicenseStatus:function(){r.empty(this._productLicenseCountNameRow);
r.empty(this._productLicenseCountDataRow)},_fillInLicenseStatus:function(a,b,c){this._mode===this.MODE_PRO?(this._drawProBasic(a,b),this._drawProStandard(a,b),this._drawProAdvanced(a,b),this._drawSpatialAnalyst(a,b),this._draw3DAnalyst(a,b),this._drawNetworkAnalyst(a,b),this._drawGeostatAnalyst(a,b),this._drawDataReviewer(a,b),this._drawWorkflowManager(a,b),this._drawDataInterop(a,b),this._drawDefenseMapping(a,b),this._drawFMV(a,b),this._drawBusinessBasic(a,b),this._drawBusinessStandard(a,b),this._drawRoadsHighways(a,
b),this._drawPublisher(a,b),this._drawProductionMap(a,b),this._drawSchematics(a,b),this._drawTracking(a,b),this._drawAviation(a,b),this._drawAirports(a,b),this._drawMaritime(a,b),this._drawBathymetry(a,b),this._drawStreetMapNA(a,b),this._drawStreetMapEU(a,b),this._drawStreetMapAPAC(a,b),this._drawStreetMapMEA(a,b),this._drawStreetMapLA(a,b),this._drawStreetMapJA(a,b),this._checkProductProvisions(b)):this._mode===this.MODE_PRODUCTS&&c&&(this._drawProduct(a,b,c),this._checkProductProvisions(b))},_showNode:function(a){a&&
s.set(a,"display","")},_hideNode:function(a){a&&s.set(a,"display","none")},_checkProvisions:function(a){var b=!1,c;for(c in a)if(0>a[c]){b=!0;break}return b},_publishProvisionsExceeded:function(a){a?(J.publish(this.provisionsExceededTopic,null),k.show(this._provisionsExceededWarning)):k.hide(this._provisionsExceededWarning)},_checkProductProvisions:function(a){a=this._checkProvisions(a);this._publishProvisionsExceeded(a)},_resetLicensedProducts:function(){this._selectedMember=this._assignMode=null;
q.set(this._licensedForLabel,"innerHTML","");this._hideLastUsedLicenseContainer();this._proBasic.set("checked",!0);this._extToggle.set("checked",!1);this.onExtensionsToggle();this._assignBtn.set("disabled",!1);this._revokeBtn.set("disabled",!1);this._assignBtn.set("label",this.i18n.assignLicense.assignLabel);this._revokeBtn.set("label",this.i18n.assignLicense.revokeAllLabel);s.set(this._exceedsWarning,"display","none");this._checkLevelSupport()},_createHelpHTML:function(){var a=esriGeowConfig.isRightToLeft?
t.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/managelicenses-product-key_rtl.png"):t.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/managelicenses-product-key.png");return"\x3cdiv\x3e\x3cdiv\x3e"+this.i18n.helpDlg.keyDesc+'\x3cbr/\x3e\x3cimg src\x3d"'+a+'" alt\x3d""\x3e\x3c/div\x3e\x3cstrong\x3e'+this.i18n.helpDlg.manageSingle+"\x3c/strong\x3e\x3cbr/\x3e\x3cdiv\x3e"+this.i18n.helpDlg.manageSingleDesc+"\x3c/div\x3e\x3cbr/\x3e\x3cstrong\x3e"+this.i18n.helpDlg.manageMultiple+
"\x3c/strong\x3e\x3cbr/\x3e\x3cdiv\x3e"+this.i18n.helpDlg.manageMultipleDesc+"\x3c/div\x3e\x3cbr/\x3e\x3cstrong\x3e"+this.i18n.helpDlg.removeSelected+"\x3c/strong\x3e\x3cbr/\x3e\x3cdiv\x3e"+this.i18n.helpDlg.removeSelectedDesc+"\x3c/div\x3e\x3c/div\x3e"},_initSearchBy:function(){var a=new y({data:[{id:this.searchByNameId,name:this.i18n.searchByOpts.name},{id:this.searchByRoleId,name:this.i18n.searchByOpts.role},{id:this.searchByGroupId,name:this.i18n.searchByOpts.group},{id:this.searchByProductId,
name:this.i18n.searchByOpts.product}]});this._searchBySelect.set("store",a);this._searchBySelect.set("displayedValue",this.i18n.searchByOpts.name)},_createMemberGrid:function(){this._memberGrid||(this._createMemberGridStore(),this._memberGrid=new F({id:"memberGrid",region:"center",columns:this._createMemberGridColumns(),noDataMessage:this.i18n.membersGrid.noneFound,showLoadingMessage:!0,showHeader:!0,rowsPerPage:this.rowsPerPage,pagingLinks:!0,selectionMode:"none",store:this._memberGridStore,sort:[{attribute:"status",
descending:!1}]},r.create("div",null,this._memberGridContainer)),this._memberGrid.startup(),this._refreshMemberGrid(),this._memberGrid._grid.on(".dgrid-row:click",m.hitch(this,this._memberGridClickHandler)),this._memberGrid._grid.on(".dgrid-cell:hover"))},_createSessionGrid:function(){this._sessionGrid||(this._createSessionGridStore(),this._sessionGrid=new F({id:"sessionGrid",region:"center",columns:this._createSessionGridColumns(),noDataMessage:this.i18n.session.noneFound,showLoadingMessage:!0,showHeader:!0,
rowsPerPage:this.rowsPerPageSession,pagingLinks:!1,selectionMode:"none",store:this._sessionGridStore},r.create("div",null,this._sessionGridContainer)))},_createSelectedGrid:function(){this._selectedGrid||(this._createSelectedGridStore(),this._selectedGrid=new F({id:"selectedGrid",region:"center",columns:this._createSelectedGridColumns(),noDataMessage:"",showLoadingMessage:!0,showHeader:!0,rowsPerPage:this.rowsPerPageSelected,pagingLinks:!0,selectionMode:"none",store:this._selectedGridStore},r.create("div",
null,this._selectedGridContainer)),this._selectedGrid.startup(),this._refreshSelectedGrid(),this._selectedGrid._grid.on(".dgrid-row:click",m.hitch(this,this._selectedGridClickHandler)))},_createMemberGridColumns:function(){return{status:{label:"",sortable:!0,renderCell:m.hitch(this,this._statusRenderCell)},fullName:{label:this.i18n.membersGrid.nameLabel,sortable:!0,formatter:this._defaultFormatter},username:{label:this.i18n.membersGrid.usernameLabel,sortable:!0,formatter:this._defaultFormatter},licensed:{label:this.i18n.membersGrid.licensedLabel,
sortable:!0,renderCell:m.hitch(this,this._licensedRenderCell)},lastused:{label:p.substitute({agsPro:this.i18n.licenseTypes.agsProLabel},this.i18n.membersGrid.lastUsedLabel),sortable:!0,renderCell:m.hitch(this,this._lastUsedRenderCell)}}},_createSelectedGridColumns:function(){return{fullName:{label:this.i18n.membersGrid.nameLabel,sortable:!0,formatter:this._defaultFormatter},username:{label:this.i18n.membersGrid.usernameLabel,sortable:!0,formatter:this._defaultFormatter}}},_createSessionGridColumns:function(){return{sessionName:{label:this.i18n.session.sessionNameLabel,
sortable:!0,formatter:this._defaultFormatter},created:{label:this.i18n.session.createdLabel,sortable:!0,renderCell:m.hitch(this,this._sessionCreatedRenderCell)},modified:{label:this.i18n.session.lastUsedLabel,sortable:!0,renderCell:m.hitch(this,this._sessionLastUsedRenderCell)},validUntil:{label:this.i18n.session.activeUntilLabel,sortable:!0,renderCell:m.hitch(this,this._sessionAvailableUntilRenderCell)},action:{label:this.i18n.session.actionLabel,sortable:!1,renderCell:m.hitch(this,this._sessionActionRenderCell)}}},
_setCurrentSelectedGridPage:function(){this._currentSelectedGridPage=this._selectedGrid&&this._selectedGrid._grid?this._selectedGrid._grid._currentPage:1},_handleSelectedGridRefresh:function(a){this._currentSelectedGridPage&&(a.grid._currentPage!==this._currentSelectedGridPage&&this._currentSelectedGridPage<=Math.ceil(this._getAllSelectedUsers().length/this.rowsPerPageSelected))&&(this._selectedGrid._grid.gotoPage(this._currentSelectedGridPage),this._currentSelectedGridPage=null);0<this._getAllSelectedUsers().length?
this._configureBtn.set("disabled",!1):this._configureBtn.set("disabled",!0);this._selectedGridRefreshHandle.remove()},_memberGridClickHandler:function(a){var b=this._memberGrid._grid.row(a),c=this._memberGrid._grid.column(a);if(p.isDefined(b)&&p.isDefined(b.id)&&p.isDefined(c)&&p.isDefined(c.id)&&("licensed"!==c.id||"licensed"===c.id&&(a.toElement&&a.toElement.nodeName&&"a"!==a.toElement.nodeName.toLowerCase()||a.target&&a.target.nodeName&&"a"!==a.target.nodeName.toLowerCase()))&&("lastused"!==c.id||
"lastused"===c.id&&(a.toElement&&a.toElement.nodeName&&"a"!==a.toElement.nodeName.toLowerCase()||a.target&&a.target.nodeName&&"a"!==a.target.nodeName.toLowerCase()))){this._setCurrentSelectedGridPage();var e=this._selectedGrid._grid.get("store");d.forEach(this._memberGrid._grid.get("store").query({username:b.id}),function(a){e.put(m.clone(a))});this._refreshSelectedGrid();k.show(this._selectedContent)}},_selectedGridClickHandler:function(a){a=this._selectedGrid._grid.row(a);var b=this._selectedGrid._grid.get("store");
a&&a.id&&(this._setCurrentSelectedGridPage(),b.remove(a.id),this._refreshSelectedGrid(),this._assignMode&&this._validateForm(),a=b.query().length,q.set(this._licensedForLabel,"innerHTML",""+a+" "+this.i18n.selectedTitle),1>a&&(this.onClearSelected(),this.onCancelLicenses()))},_defaultFormatter:function(a){return'\x3cspan class\x3d"esriContentTypeName"\x3e'+a+"\x3c/span\x3e"},_compileLastUsedText:function(a){var b="";this._hasEntitlements(a)&&(a.entitlements.lastLogin&&-1!==a.entitlements.lastLogin)&&
(b=x.format(new Date(a.entitlements.lastLogin),{selector:"date",formatLength:"medium"}));return b},_sessionActionRenderCell:function(a,b,c){c=this.i18n.session.suspendLabel;b=r.create("span",{className:"esriItemLinks"});a.disconnected||(c=r.create("a",{innerHTML:c},b),E(c,"click",m.hitch(this,this._suspendSession,a)));return b},_sessionAvailableUntilRenderCell:function(a,b,c){a.validUntil&&-1<a.validUntil?(a=x.format(new Date(a.validUntil),{formatLength:"medium"}),a=r.create("span",{innerHTML:a,className:"esriContentTypeName"})):
a=r.create("span",{className:"esriContentTypeName"});return a},_sessionLastUsedRenderCell:function(a,b,c){a.modified&&-1<a.modified?(a=x.format(new Date(a.modified),{formatLength:"medium"}),a=r.create("span",{innerHTML:a,className:"esriContentTypeName"})):a=r.create("span",{className:"esriContentTypeName"});return a},_sessionCreatedRenderCell:function(a,b,c){a.created&&-1<a.created?(a=x.format(new Date(a.created),{formatLength:"medium"}),a=r.create("span",{innerHTML:a,className:"esriContentTypeName"})):
a=r.create("span",{className:"esriContentTypeName"});return a},_lastUsedRenderCell:function(a,b,c){b=(new Date).getTime();a.lastused&&-1<a.lastused?(b-=a.lastused,18E5>=b||a.entitlements&&a.entitlements.disconnected?(c=x.format(new Date(a.lastused),{formatLength:"medium"}),b=r.create("span",{className:"esriItemLinks"}),c=r.create("a",{innerHTML:c},b),E(c,"click",m.hitch(this,this._configureSessions,a))):(c=x.format(new Date(a.lastused),{selector:"date",formatLength:"medium"}),b=r.create("span",{innerHTML:c}))):
b=r.create("span",{className:"esriContentTypeName"});return b},_statusRenderCell:function(a,b,c){b=r.create("div",{id:a.username+"_status_indicator",innerHTML:"\x26nbsp;"});2===a.status?(c=this.i18n.membersGrid.statusDisconnected,a.entitlements&&(a.entitlements.disconnected&&a.entitlements.disconnectedInfo)&&(c+=" "+esri.substitute({sessionName:a.entitlements.disconnectedInfo.sessionName?a.entitlements.disconnectedInfo.sessionName:this.i18n.session.noSessionName,date:x.format(new Date(a.entitlements.disconnectedInfo.disconnectedUntil),
{selector:"date",formatLength:"medium"})},this.i18n.membersGrid.statusDisconnectedSession)),q.set(b,"title",c),w.add(b,"disconnectedIndicator")):1===a.status&&(q.set(b,"title",this.i18n.membersGrid.statusActive),w.add(b,"activeIndicator"));return b},_licensedRenderCell:function(a,b,c){c=a.licensed;b=r.create("span",{className:"esriItemLinks"});c=r.create("a",{innerHTML:c},b);E(c,"click",m.hitch(this,this._configureSingleLicense,a));return b},_computeStatus:function(a){if(this._mode===this.MODE_PRO)return this._hasEntitlements(a)?
a.entitlements.disconnected?2:a.lastused&&-1<a.lastused?18E5>=(new Date).getTime()-a.lastused?1:3:4:null;if(this._mode===this.MODE_PRODUCTS){var b=!1,c;for(c in this._productEntitlements)this._productEntitlements.hasOwnProperty(c)&&(a.productEntitlements&&a.productEntitlements.hasOwnProperty(c))&&(b=!0);return b?1:null}return null},_compileLicensedForText:function(a){var b=this.i18n.membersGrid.configureLabel,c=0,e=esriGeowConfig.isRightToLeft?"\x26#x200f;":"",h;if(this._mode===this.MODE_PRO)this._hasEntitlements(a)&&
a.entitlements.entitlements&&(-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.proBasic)?b=this.i18n.licenseTypes.proLabel+" "+this.i18n.licenseTypes.basicLabel:-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.proStandard)?b=this.i18n.licenseTypes.proLabel+" "+this.i18n.licenseTypes.standardLabel:-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.proAdvanced)&&(b=this.i18n.licenseTypes.proLabel+" "+this.i18n.licenseTypes.advancedLabel),-1<d.indexOf(a.entitlements.entitlements,
this.licenseKeywords.spatialAnalyst)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.threeDAnalyst)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.networkAnalyst)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.geostatAnalyst)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.dataReviewer)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.workflowManager)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.dataInterop)&&
c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.defenseMapping)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.fmv)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.businessBasic)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.businessStandard)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.roadsHighways)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.publisher)&&c++,-1<d.indexOf(a.entitlements.entitlements,
this.licenseKeywords.productionMap)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.schematics)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.tracking)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.aviation)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.airports)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.maritime)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.bathymetry)&&
c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapNA)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapEU)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapAPAC)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapMEA)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapLA)&&c++,-1<d.indexOf(a.entitlements.entitlements,this.licenseKeywords.streetMapJA)&&c++,0<c&&(b+=e+" "+
this.i18n.plusLabel+" "+c+" "+this.i18n.licenseTypes.extLabel));else if(this._mode===this.MODE_PRODUCTS&&this._hasEntitlements(a)&&a.productEntitlements){for(h in a.productEntitlements)a.productEntitlements.hasOwnProperty(h)&&c++;0<c&&(b=""+c+" "+(1===c?this.i18n.addProducts.product:this.i18n.addProducts.products))}return b},_hasEntitlements:function(a){return a&&(this._mode===this.MODE_PRO&&a.entitlements||this._mode===this.MODE_PRODUCTS&&a.productEntitlements)},_suspendSession:function(a){N.prototype.statics.getInstance().showMsgTitleButton(p.substitute({sessionName:a.sessionName},
this.i18n.session.suspendSessionDesc),this.i18n.session.suspendSessionTitle,this.i18n.ok,m.hitch(this,this._reallySuspendSession,a))},_reallySuspendSession:function(a){var b=this,c=G.prototype.statics.getInstance(),d;t.request({url:esriGeowConfig.restBaseUrl+"content/listings/"+b._proListing.listing.itemId+"/terminateUserSession",content:{username:a.username,sessionId:a.sessionId}},{usePost:!0}).then(function(h){h&&!h.code&&!h.messageCode?(b._sessionGridStore.remove(a.sessionId),b._refreshSessionGrid()):
(console.log("error suspending user session",error),d=p.substitute({sessionName:a.sessionName},b.i18n.errors.cantSuspendSession),c.show({title:b.i18n.errorTitle,message:d}))},function(h){console.log("error suspending user session",h);d=p.substitute({sessionName:a.sessionName},b.i18n.errors.cantSuspendSession);c.show({title:b.i18n.errorTitle,message:d})})},_configureSessions:function(a){var b=this,c=esriGeowConfig.restBaseUrl+"content/listings/"+b._proListing.listing.itemId+"/users/"+a.username+"/sessions";
b._assignMode=b.assignSingle;b._selectedMember=a;q.set(b._sessionsForLabel,"innerHTML",p.substitute({name:b._selectedMember.fullName?b._selectedMember.fullName:b._selectedMember.firstName},b.i18n.session.sessionsForLabel));b._clearSessionGridStore();t.request({url:c}).then(function(c){c&&(c.sessions&&0<c.sessions.length)&&d.forEach(c.sessions,function(a){b._sessionGridStore.put(a)});a.entitlements&&(a.entitlements.disconnected&&a.entitlements.disconnectedInfo)&&b._sessionGridStore.put({sessionId:0,
sessionName:(a.entitlements.disconnectedInfo.sessionName?a.entitlements.disconnectedInfo.sessionName:b.i18n.session.noSessionName)+" "+b.i18n.session.disconnected,username:a.username,created:null,modified:a.entitlements.disconnectedInfo.disconnectedSince,validUntil:a.entitlements.disconnectedInfo.disconnectedUntil,disconnected:a.entitlements.disconnected});b._switchToSessions();b._refreshSessionGrid()},function(c){console.log("error retrieving sessions for user "+a.username,c);b._switchToSessions();
b._refreshSessionGrid()})},_configureSingleLicense:function(a){this._assignMode=this.assignSingle;this._selectedMember=a;this._configureLicensedProductsForSelectedMember();this.onExtensionsGroupClick();this._switchToLicensedProducts()},_configureLicensedProductsForSelectedMember:function(){var a;if(this._mode===this.MODE_PRO)this._hasEntitlements(this._selectedMember)&&this._selectedMember.entitlements.entitlements?(a=this._selectedMember.entitlements.entitlements,this._proBasic.set("checked",-1<
d.indexOf(a,this.licenseKeywords.proBasic)),this._proStd.set("checked",-1<d.indexOf(a,this.licenseKeywords.proStandard)),this._proAdv.set("checked",-1<d.indexOf(a,this.licenseKeywords.proAdvanced)),this._spatialAnalystExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.spatialAnalyst)),this._3DAnalystExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.threeDAnalyst)),this._networkAnalystExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.networkAnalyst)),this._geostatAnalystExt.set("checked",
-1<d.indexOf(a,this.licenseKeywords.geostatAnalyst)),this._dataReviewerExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.dataReviewer)),this._workflowManagerExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.workflowManager)),this._dataInteropExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.dataInterop)),this._defenseExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.defenseMapping)),this._fmvExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.fmv)),this._businessBasicExt.set("checked",
-1<d.indexOf(a,this.licenseKeywords.businessBasic)),this._businessStdExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.businessStandard)),this._roadsHighwaysExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.roadsHighways)),this._publisherExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.publisher)),this._productionMapExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.productionMap)),this._schematicsExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.schematics)),this._trackingExt.set("checked",
-1<d.indexOf(a,this.licenseKeywords.tracking)),this._aviationExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.aviation)),this._airportsExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.airports)),this._maritimeExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.maritime)),this._bathymetryExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.bathymetry)),this._streetMapNAExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.streetMapNA)),this._streetMapEUExt.set("checked",-1<d.indexOf(a,
this.licenseKeywords.streetMapEU)),this._streetMapAPACExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.streetMapAPAC)),this._streetMapMEAExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.streetMapMEA)),this._streetMapLAExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.streetMapLA)),this._streetMapJAExt.set("checked",-1<d.indexOf(a,this.licenseKeywords.streetMapJA)),this._assignBtn.set("label",this.i18n.assignLicense.updateLabel),this._revokeBtn.set("disabled",!1)):(this._determineBaseLevelSupport(),
this._assignBtn.set("label",this.i18n.assignLicense.assignLabel),this._revokeBtn.set("disabled",!0)),this._checkLevelSupport();else if(this._mode===this.MODE_PRODUCTS)if(this._hasEntitlements(this._selectedMember)&&this._selectedMember.productEntitlements){a=!1;var b,c,e,h,k;this._setProductCheckboxValues(!1);for(b in this._selectedMember.productEntitlements)if(this._selectedMember.productEntitlements.hasOwnProperty(b))for(e in k=this._productCheckboxes[b],c=(c=this._selectedMember.productEntitlements[b])&&
c.entitlements||{},c)c.hasOwnProperty(e)&&(h=c[e],h=this._productEntitlementNames[b]&&-1<d.indexOf(this._productEntitlementNames[b],h),k&&(a||(a=!0),k.set("checked",h)));a?(this._assignBtn.set("label",this.i18n.assignLicense.updateLabel),this._revokeBtn.set("disabled",!1)):(this._assignBtn.set("label",this.i18n.assignLicense.assignLabel),this._revokeBtn.set("disabled",!0))}else this._assignBtn.set("label",this.i18n.assignLicense.assignLabel),this._revokeBtn.set("disabled",!0)},_setProductCheckboxValues:function(a){for(var b in this._productCheckboxes)this._productCheckboxes.hasOwnProperty(b)&&
this._productCheckboxes[b].set("checked",a)},onConfigureSelected:function(){var a=this._getAllSelectedUsers();1===a.length?(this._assignMode=this.assignSingle,this._selectedMember=a[0],this._configureLicensedProductsForSelectedMember(),this._clearSelectedMembers()):(this._assignMode=this.assignMultiple,k.hide(this._selectedButtonBar),this._mode===this.MODE_PRODUCTS&&this._setProductCheckboxValues(!1),this._determineBaseLevelSupport());this._checkLevelSupport();this.onExtensionsGroupClick();this._switchToLicensedProducts()},
_determineBaseLevelSupport:function(){this._proBasic.set("checked",!0);if(this._proListing&&this._proListing.provision&&this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements){var a=this._convertOrgEntitlementsToPurchasedMap(this._proListing.provision.orgEntitlements.entitlements),b=this._canShowProduct(a,this._remainingEntitlements,this.licenseKeywords.proBasic),a=this._canShowProduct(a,this._remainingEntitlements,this.licenseKeywords.proStandard);!b&&
a?this._proStd.set("checked",!0):!b&&!a&&this._proAdv.set("checked",!0)}},onClearSelected:function(){this._clearSelectedMembers()},_resetSearch:function(){s.set(this._searchControls,"display","");this._search.set("value","");this._searchBySelect.set("displayedValue",this.i18n.searchByOpts.name);this.onSearchClick()},_clearSelectedMembers:function(){this._resetSelectedGridStore();this._configureBtn.set("disabled",!0)},_showProductContainers:function(){k.show(this._productEsriAppsContainer)},_hideProductContainers:function(){k.hide(this._productEsriAppsContainer)},
_showProContainers:function(){k.show(this._proLevelsContainer);k.show(this._proExtContainer)},_hideProContainers:function(){k.hide(this._proLevelsContainer);k.hide(this._proExtContainer)},_switchToSessions:function(){k.hide(this._membersContent);k.hide(this._selectedContent);k.show(this._sessionContent)},_switchToLicensedProducts:function(){k.hide(this._membersContent);this._assignMode===this.assignSingle&&k.hide(this._selectedContent);k.hide(this._selectedButtonBar);var a;this._mode===this.MODE_PRO?
(this._hideProductContainers(),this._showProContainers(),this._assignMode===this.assignSingle&&this._selectedMember?(q.set(this._licensedForLabel,"innerHTML",esri.substitute({name:this._selectedMember.fullName+(esriGeowConfig.isRightToLeft?"\x26#8207;":""),username:this._selectedMember.username},this.i18n.assignLicense.licensedUserLabel)),this._hasEntitlements(this._selectedMember)&&-1!==this._selectedMember.entitlements.lastLogin?this._showLastUsedLicenseContainer(this._selectedMember.entitlements.lastLogin):
this._hideLastUsedLicenseContainer()):this._assignMode===this.assignMultiple&&(a=this._getAllSelectedUsers(),q.set(this._licensedForLabel,"innerHTML",""+a.length+" "+this.i18n.selectedTitle),(a=d.some(a,function(a){return a&&a.entitlements}))?this._assignBtn.set("label",this.i18n.assignLicense.updateLabel):this._assignBtn.set("label",this.i18n.assignLicense.assignLabel))):this._mode===this.MODE_PRODUCTS&&(this._hideProContainers(),this._showProductContainers(),this._assignMode===this.assignSingle&&
this._selectedMember?(q.set(this._licensedForLabel,"innerHTML",esri.substitute({name:this._selectedMember.fullName+(esriGeowConfig.isRightToLeft?"\x26#8207;":""),username:this._selectedMember.username},this.i18n.assignLicense.licensedUserLabel)),this._hideLastUsedLicenseContainer()):this._assignMode===this.assignMultiple&&(a=this._getAllSelectedUsers(),q.set(this._licensedForLabel,"innerHTML",""+a.length+" "+this.i18n.selectedTitle),(a=d.some(a,function(a){return a&&a.productEntitlements}))?this._assignBtn.set("label",
this.i18n.assignLicense.updateLabel):this._assignBtn.set("label",this.i18n.assignLicense.assignLabel)));this._revokeBtn.set("label",this.i18n.assignLicense.revokeAllLabel);k.show(this._licensedProducts)},_showLastUsedLicenseContainer:function(a){var b=esriGeowConfig.isRightToLeft?"\x26#x200f;":"";a&&(q.set(this._lastUsedDateLabel,"innerHTML",b+x.format(new Date(a),{selector:"date",formatLength:"medium"})),esri.show(this._lastUsedLicenseContainer))},_hideLastUsedLicenseContainer:function(){esri.hide(this._lastUsedLicenseContainer);
q.set(this._lastUsedDateLabel,"innerHTML","")},_switchToMembersContent:function(){k.hide(this._licensedProducts);k.hide(this._sessionContent);k.show(this._selectedButtonBar);k.show(this._membersContent);k.show(this._selectedContent);this._resetLicensedProducts();this._replayLastSearch()},_replayLastSearch:function(){var a=this._filteringSelect.get("value");if(p.isDefined(a)&&0<a.length)this.onFilterChange();else this.onSearchClick()},_createMemberGridStore:function(){if(!this._memberGridStore){var a=
[],b;for(b=0;b<this._allUsers.length;b++)a.push(m.clone(this._allUsers[b]));this._memberGridStore=new y({idProperty:"username",data:a})}},_clearMemberGridStore:function(){var a=this;if(p.isDefined(a._memberGridStore)){var b=a._memberGridStore.query();d.forEach(b,function(b){a._memberGridStore.remove(b.username)})}},_resetMemberGridStore:function(){var a=this;if(p.isDefined(a._memberGridStore)){var b=a._memberGridStore.query();d.forEach(b,function(b){a._memberGridStore.remove(b.username)});d.forEach(this._allUsers,
function(b){a._memberGridStore.put(m.clone(b))})}a._refreshMemberGrid()},_refreshMemberGrid:function(){this._memberGrid&&this._memberGrid.refresh()},_refreshSelectedGrid:function(){this._selectedGridRefreshHandle=this._selectedGrid.on("dgrid-refresh-complete",m.hitch(this,this._handleSelectedGridRefresh));this._selectedGrid&&this._selectedGrid.refresh()},_createSessionGridStore:function(){this._sessionGridStore||(this._sessionGridStore=new y({idProperty:"sessionId",data:[]}))},_clearSessionGridStore:function(){var a=
this;if(p.isDefined(a._sessionGridStore)){var b=a._sessionGridStore.query();d.forEach(b,function(b){a._sessionGridStore.remove(b.sessionId)})}},_resetSessionGridStore:function(){this._clearSessionGridStore();this._refreshSessionGrid()},_refreshSessionGrid:function(){this._sessionGrid&&(this._sessionGrid.refresh(),this._sessionGrid._grid.resize(),this._sessionGrid._grid.refresh())},_createSelectedGridStore:function(){this._selectedGridStore||(this._selectedGridStore=new y({idProperty:"username",data:[]}))},
_resetSelectedGridStore:function(){var a=this;if(p.isDefined(a._selectedGridStore)){var b=a._getAllSelectedUsers();d.forEach(b,function(b){a._selectedGridStore.remove(b.username)});a._refreshSelectedGrid()}},_getAllSelectedUsers:function(){return this._selectedGridStore.query()},_initLoading:function(){r.create("img",{src:t.relativeToExplicitUrl("js/arcgisonline/css/images/spinner20.gif"),width:"32",height:"32",style:{verticalAlign:"middle"}},this._loading);this._showLoading()},_showLoading:function(){s.set(this._loading,
"display","")},_hideLoading:function(){s.set(this._loading,"display","none")},_checkLicenses:function(){var a=this;a._retrieveProductListings().then(function(){a._retrieveUserEntitlements().then(function(){a._checkLicensedProvisions()})})},_initUI:function(){var a=this,b=G.prototype.statics.getInstance(),c;a._initLoading();O.getSelf(function(d){a._settings=d;a._retrieveAllUsers().then(function(){a._retrieveProductListings().then(function(){a._retrieveUserEntitlements().then(function(){a._retrieveAllRoles().then(function(){a._createRoleStore()});
a._retrieveAllGroups().then(function(){a._createGroupStore()});a._initSearchBy();a._createProductStore();a._createMemberGrid();a._createSelectedGrid();a._createSessionGrid();a._initExtNotSupportMap();a._switchProductModes();a.reset();a.uiInitialized=!0;a._hideLoading();a._showMainUI()},function(d){console.log(d);a._hideLoading();c="\x3cp\x3e"+a.i18n.errors.userEntitlementRetrieval+" "+a.i18n.errors.pleaseRefresh+"\x3c/p\x3e";b.show({title:a.i18n.errorTitle,message:c})})},function(d){console.log(d);
a._hideLoading();c="\x3cp\x3e"+a.i18n.errors.entitlementRetrieval+" "+a.i18n.errors.pleaseRefresh+"\x3c/p\x3e";b.show({title:a.i18n.errorTitle,message:c})})},function(d){console.log(d);a._hideLoading();c="\x3cp\x3e"+a.i18n.errors.userRetrieval+" "+a.i18n.errors.pleaseRefresh+"\x3c/p\x3e";b.show({title:a.i18n.errorTitle,message:c})})})},_initMode:function(){var a=!!this._proListing,b=this._productListings&&0<this._productListings.length;this._mode=this.MODE_PRO;s.set(this._licenseSwitches,"display",
"none");a&&b?s.set(this._licenseSwitches,"display",""):!a&&b&&(this._mode=this.MODE_PRODUCTS)}});v("extend-esri")&&m.setObject("arcgisonline.sharing.dijit.ManageLicenses",B);return B});