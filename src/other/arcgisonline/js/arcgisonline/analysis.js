// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.RasterData",constructor:function(a){a&&d.mixin(this,a)},url:null,format:null,itemID:null,toJson:function(){var a={};this.url&&(a.url=this.url);this.format&&(a.format=this.format);this.itemID&&(a.itemID=this.itemID);return a}});a("extend-esri")&&d.setObject("tasks.RasterData",h,b);return h})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(h,d,a,b,l,m){h=h(m,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(a){a&&d.isObject(a)&&(this.size="auto"===this.size?this.size:b.pt2px(this.size),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(a){this.angle=a;return this},setSize:function(a){this.size=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},toJson:function(){var a=b.px2pt(this.size),
a=isNaN(a)?void 0:a,l=b.px2pt(this.xoffset),l=isNaN(l)?void 0:l,e=b.px2pt(this.yoffset),e=isNaN(e)?void 0:e;return d.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:a,angle:this.angle&&-1*this.angle,xoffset:l,yoffset:e})}});a("extend-esri")&&d.setObject("symbol.MarkerSymbol",h,l);return h})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(h,d,a,b,l,m){h=h(m,{declaredClass:"esri.layers.RasterDataSource",
toJson:function(){return l.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});a("extend-esri")&&d.setObject("layers.RasterDataSource",h,b);return h})},"esri/tasks/geoenrichment/GeometryStudyArea":function(){define(["../../declare","../../geometry/jsonUtils","../../geometry/Geometry","./StudyArea"],function(h,d,a,b){return h("esri.tasks.geoenrichment.GeometryStudyArea",[b],{geometry:null,constructor:function(b){b&&b.geometry&&(this.geometry=b.geometry instanceof
a?b.geometry:d.fromJson(b.geometry))},toJson:function(){var a=this.inherited(arguments);a.geometry=this.geometry.toJson();return a},getGeomType:function(){return this.geometry.type}})})},"esri/dijit/analysis/SummarizeWithin":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils dojo/i18n!../../nls/jsapi dojo/text!./templates/SummarizeWithin.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){d=d([g,q,w,v,z,G,F],{declaredClass:"esri.dijit.analysis.SummarizeWithin",templateString:O,widgetsInTemplate:!0,sumWithinLayer:null,summaryLayers:null,summaryFields:null,outputLayerName:null,summarizeMetric:!0,summaryLayer:null,groupByField:null,minorityMajority:!1,percentPoints:!1,i18n:null,toolName:"SummarizeWithin",helpFileName:"SummarizeWithin",resultParameter:"resultLayer",constructor:function(a){this._pbConnects=
[];this._statsRows=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.summarizeWithinTool)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&
(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(c){c.preventDefault();if(this._form.validate()){c={};var g;g=this.summaryLayers[this._layersSelect.get("value")];c.summaryLayer=m.toJson(L.constructAnalysisInputLyrObj(g));c.sumWithinLayer=m.toJson(L.constructAnalysisInputLyrObj(this.sumWithinLayer));c.summaryFields=m.toJson(this.get("summaryFields"));this.returnFeatureCollection||(c.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));
c.sumShape=this._sumMetricCheck.get("checked");if("esriGeometryPoint"!==g.geometryType||"esriGeometryMultipoint"!==g.geometryType)c.shapeUnits=this.get("shapeUnits");"0"!==this._groupBySelect.get("value")&&(c.groupByField=this._groupBySelect.get("value"));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,c).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},
_handleSaveBtnClick:function(){if(this._form.validate())if(!this._sumMetricCheck.get("checked")&&0===this.get("summaryFields").length)this._showMessages(this.i18n.statsRequiredMsg);else{this._saveBtn.set("disabled",!0);var a={},c={},g,b;g=this.summaryLayers[this._layersSelect.get("value")];a.summaryLayer=m.toJson(L.constructAnalysisInputLyrObj(g));a.sumWithinLayer=m.toJson(L.constructAnalysisInputLyrObj(this.sumWithinLayer));a.summaryFields=m.toJson(this.get("summaryFields"));this.returnFeatureCollection||
(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));a.sumShape=this._sumMetricCheck.get("checked");if("esriGeometryPoint"!==g.geometryType||"esriGeometryMultipoint"!==g.geometryType)a.shapeUnits=this.get("shapeUnits");"0"!==this._groupBySelect.get("value")&&(a.groupByField=this._groupBySelect.get("value"),this.resultParameter=["resultLayer","groupBySummary"],a.minorityMajority=this.get("minorityMajority"),a.percentShape=this.get("percentPoints"));this.showChooseExtent&&
this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(b={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.extent=this.map.extent._normalize(!0)),a.context=m.toJson(b));c.jobParams=a;this._saveBtn.set("disabled",!1);c.itemParams={description:f.substitute(this.i18n.itemDescription,{sumWithinLayerName:this.sumWithinLayer.name,summaryLayerName:g.name}),tags:f.substitute(this.i18n.itemTags,
{sumWithinLayerName:this.sumWithinLayer.name,summaryLayerName:g.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(c.itemParams.folder=this.get("folderId"));this.execute(c)}},_initializeShapeUnits:function(a){this._prevGeometryType&&this._prevGeometryType===a||(this._shapeUnitsSelect.removeOption(this._shapeUnitsSelect.getOptions()),c.set(this._shapeUnitsSelect.domNode,"display","esriGeometryPoint"===a||"esriGeometryMultipoint"===a?"none":""),"esriGeometryPolygon"===a?(c.set(this._shapeUnitsSelect.domNode,
"width","49%"),this._shapeUnitsSelect.addOption([{value:"SquareMiles",label:this.i18n.sqMiles},{value:"SquareKilometers",label:this.i18n.sqKm},{value:"SquareMeters",label:this.i18n.sqMeters},{value:"Hectares",label:this.i18n.hectares},{value:"Acres",label:this.i18n.acres}]),"Kilometers"===this.get("shapeUnits")&&this.set("shapeUnits","SquareKilometers")):"esriGeometryPolyline"===a&&(c.set(this._shapeUnitsSelect.domNode,"width","39%"),this._shapeUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},
{value:"Feet",label:this.i18n.feet},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters},{value:"Yards",label:this.i18n.yards}]),"SquareKilometers"===this.get("shapeUnits")&&this.set("shapeUnits","Kilometers")),this._shapeUnitsSelect.set("value",this.get("shapeUnits")),this._prevGeometryType=a)},_handleShapeUnitsChange:function(a){this.set("shapeUnits",a)},_handleLayerChange:function(a){if("browse"===a)this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),
this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show();else if(a=this.summaryLayers[a]){this.sumWithinLayer&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:a.name,sumWithinLayerName:this.sumWithinLayer.name}),this._outputLayerInput.set("value",this.outputLayerName));this._initializeShapeUnits(a.geometryType);"esriGeometryPolygon"===a.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoly),
n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPolygon"));if("esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType)n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoint),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPoint");"esriGeometryPolyline"===a.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricLine),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsLine"));this.set("groupBySelect",this.groupByField);
this._removeStatsRows();this._createStatsRow()}},_handleAttrSelectChange:function(g){var b;"0"!==g&&(g=this.get("statisticSelect"),"0"!==g.get("value")&&!g.get("isnewRowAdded")&&(b=g.get("removeTd"),c.set(b,"display","block"),b=g.get("referenceWidget"),a.hitch(b,b._createStatsRow()),b._sumMetricCheck.set("disabled",!1),g.set("isnewRowAdded",!0)))},_handleStatsValueUpdate:function(g,b,e){this.get("attributeSelect")&&(g=this.get("attributeSelect"),"0"!==g.get("value")&&"0"!==e&&!this.get("isnewRowAdded")&&
(e=this.get("removeTd"),c.set(e,"display","block"),e=this.get("referenceWidget"),a.hitch(e,e._createStatsRow()),e._sumMetricCheck.set("disabled",!1),this.set("isnewRowAdded",!0)))},_handleGroupBySelectChange:function(a){a="0"===a;s.toggle(this._minmajorityLabel,"esriAnalysisTextDisabled",a);s.toggle(this._percentPointsLabel,"esriAnalysisTextDisabled",a);this._percentPointsCheck.set("disabled",a);this._minmajorityCheck.set("disabled",a)},_save:function(){},_buildUI:function(){var g=!0;L.initHelpLinks(this.domNode,
this.showHelp);this.get("showSelectAnalysisLayer")&&(!this.get("sumWithinLayer")&&this.get("sumWithinLayers")&&this.set("sumWithinLayer",this.sumWithinLayers[0]),L.populateAnalysisLayers(this,"sumWithinLayer","sumWithinLayers"));this.sumWithinLayer&&n.set(this._aggregateToolDescription,"innerHTML",f.substitute(this.i18n.summarizeDefine,{sumWithinLayerName:this.sumWithinLayer.name}));if(this.summaryLayers){var e,k=[];b.forEach(this.summaryLayers,function(a,c){a!==this.sumWithinLayer&&k.push({value:c,
label:a.name})},this);this._layersSelect.addOption(k);if(e=this.summaryLayers[this._layersSelect.get("value")]){!this.outputLayerName&&this.sumWithinLayer&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:e.name,sumWithinLayerName:this.sumWithinLayer.name}));n.set(this._addStatsLabel,"innerHTML",f.substitute(this.i18n.addStats,{summaryLayerName:e.name}));this._initializeShapeUnits(e.geometryType);"esriGeometryPolygon"===e.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",
this.i18n.summarizeMetricPoly),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPolygon"));if("esriGeometryPoint"===e.geometryType||"esriGeometryMultipoint"===e.geometryType)n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoint),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPoint");"esriGeometryPolyline"===e.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricLine),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsLine"))}}L.addReadyToUseLayerOption(this,
[this._analysisSelect,this._layersSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),g=!1);this._sumMetricCheck.set("checked",this.summarizeMetric);this.summarizeMetric||this._sumMetricCheck.set("disabled",this.summarizeMetric);this.summaryLayer&&this._layersSelect.set();this.shapeUnits&&this._shapeUnitsSelect.set("value",this.shapeUnits);this._createStatsRow();b.forEach(this.summaryFields,function(c){c=c.split(" ");this._currentAttrSelect.set("value",c[0]);a.hitch(this._currentAttrSelect,
this._handleAttrSelectChange,c[0])();this._currentStatsSelect.set("value",c[1]);a.hitch(this._currentStatsSelect,this._handleStatsValueUpdat,"value","",c[1])()},this);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;L.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?
this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");this.set("groupBySelect",this.groupByField);this.minorityMajority&&this._minmajorityCheck.set("checked",this.minorityMajority);this.percentPoints&&this._percentPointsCheck.set("checked",this.percentPoints);c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections();this._updateAnalysisLayerUI(g)},_loadConnections:function(){this.on("start",
a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_createStatsRow:function(){var c,g,b,e,k;e=this.summaryLayers[this._layersSelect.get("value")];c=u.create("tr",null,this._afterStatsRow,"before");b=u.create("td",{style:{width:"49%",maxWidth:"100px"}},c);g=u.create("td",{style:{width:"50%",maxWidth:"104px"}},c);b=new D({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin025 attrSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},
u.create("select",null,b));this.set("attributes",{selectWidget:b,summaryLayer:e});g=new D({"class":"mediumInput statsSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},u.create("select",null,g));this.set("statistics",{selectWidget:g});b.set("statisticSelect",g);l.connect(b,"onChange",this._handleAttrSelectChange);k=u.create("td",{"class":"shortTextInput removeTd",style:{display:"none",maxWidth:"12px"}},c);e=u.create("a",{title:this.i18n.removeAttrStats,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+
h.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},k);l.connect(e,"onclick",a.hitch(this,this._handleRemoveStatsBtnClick,c));this._statsRows.push(c);g.set("attributeSelect",b);g.set("removeTd",k);g.set("isnewRowAdded",!1);g.set("referenceWidget",this);g.watch("value",this._handleStatsValueUpdate);this._currentStatsSelect=g;this._currentAttrSelect=b;return!0},_handleRemoveStatsBtnClick:function(a){this._removeStatsRow(a);0===this.get("summaryFields").length&&(this._sumMetricCheck.set("disabled",
!0),this._sumMetricCheck.set("checked",!0))},_removeStatsRows:function(){b.forEach(this._statsRows,this._removeStatsRow,this);this._statsRows=[]},_removeStatsRow:function(a){b.forEach(x.findWidgets(a),function(a){a.destroyRecursive()});u.destroy(a)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._isAnalysisSelect=!0,this._browsedlg.show()):
(this.sumWithinLayer=this.sumWithinLayers[a],this._updateAnalysisLayerUI(!0))},_updateAnalysisLayerUI:function(a){var c=this.summaryLayers[this._layersSelect.get("value")],g=this._layersSelect.get("value");a&&(this.get("sumWithinLayer")&&c)&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:c.name,sumWithinLayerName:this.sumWithinLayer.name}),this._outputLayerInput.set("value",this.outputLayerName));this.summaryLayers&&this.sumWithinLayer&&(a=b.some(this._layersSelect.getOptions(),
function(a){return"browse"===a.value},this),this._layersSelect.removeOption(this._layersSelect.getOptions()),b.forEach(this.summaryLayers,function(a,c){var b=!0;if(a.url&&this.sumWithinLayer.url&&a.url!==this.sumWithinLayer.url)b=!1;else if(this.sumWithinLayer!==a&&(!a.analysisReady||!this.sumWithinLayer.analysisReady))b=!1;b||(this._layersSelect.addOption({value:c,label:a.name}),g===c&&this._layersSelect.set("value",c))},this),this.get("showReadyToUseLayers")&&a&&(this._layersSelect.addOption({type:"separator",
value:""}),this._layersSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle})))},_handleBrowseItemsSelect:function(c){c&&c.selection&&L.addAnalysisReadyLayer({item:c.selection,layers:this._isAnalysisSelect?this.sumWithinLayers:this.summaryLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",
this.analysisGpServer+"/"+this.toolName))},_setSumWithinLayersAttr:function(a){J.isDefined(a)&&(this.sumWithinLayers=a=b.filter(a,function(a,c){return"esriGeometryPolygon"===a.geometryType}))},_setSumWithinLayerAttr:function(a){J.isDefined(a)&&"esriGeometryPolygon"===a.geometryType&&(this.sumWithinLayer=a)},_setSummaryLayersAttr:function(a){this.summaryLayers=a},_setLayersAttr:function(a){this.summaryLayers=[]},_setAttributesAttr:function(a){if(a.summaryLayer){var c,g;c=a.summaryLayer;g=a.selectWidget;
a=c.fields;g.addOption({value:"0",label:this.i18n.attribute});b.forEach(a,function(a){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)&&g.addOption({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)}},_setStatisticsAttr:function(a){a=a.selectWidget;a.addOption({value:"0",label:this.i18n.statistic});a.addOption({value:"SUM",label:this.i18n.sum});a.addOption({value:"MIN",label:this.i18n.minimum});a.addOption({value:"MAX",
label:this.i18n.maximum});a.addOption({value:"MEAN",label:this.i18n.average});a.addOption({value:"STDDEV",label:this.i18n.standardDev})},_setSummaryFieldsAttr:function(a){this.summaryFields=a},_getSummaryFieldsAttr:function(){var a="",c=[];t(".statsSelect",this.domNode).forEach(function(g){var b;g=x.byNode(g);b=g.get("attributeSelect");"0"!==b.get("value")&&"0"!==g.get("value")&&(a+=b.get("value")+" "+g.get("value")+";",c.push(b.get("value")+" "+g.get("value")))});return c},_setGroupBySelectAttr:function(a){var c=
this.summaryLayers[this._layersSelect.get("value")],g=J.isDefined(c)?c.fields:[];0<this._groupBySelect.getOptions().length&&this._groupBySelect.removeOption(this._groupBySelect.getOptions());this._groupBySelect.addOption({value:"0",label:this.i18n.attribute});b.forEach(g,function(a,g){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeString","esriFieldTypeDate"],a.type)&&a.name!==c.objectIdField&&this._groupBySelect.addOption({value:a.name,label:J.isDefined(a.alias)&&
""!==a.alias?a.alias:a.name})},this);a&&this._groupBySelect.set("value",a);this._handleGroupBySelectChange(this._groupBySelect.get("value"))},_setMinorityMajorityAttr:function(a){this.minorityMajority=a},_getMinorityMajorityAttr:function(a){this._minmajorityCheck&&(this.minorityMajority=this._minmajorityCheck.get("checked"));return this.minorityMajority},_setPercentPointsAttr:function(a){this.percentPoints=a},_getPercentPointsAttr:function(a){this._percentPointsCheck&&(this.percentPoints=this._percentPointsCheck.get("checked"));
return this.percentPoints},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setShapeUnitsAttr:function(a){this.shapeUnits=a},_getShapeUnitsAttr:function(){return this.shapeUnits},validateServiceName:function(a){return L.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,c,g){this._pbConnects.push(l.connect(a,c,g))},_showMessages:function(g){n.set(this._bodyNode,"innerHTML",g);p.fadeIn({node:this._errorMessagePane,easing:k.quadIn,onEnd:a.hitch(this,
function(){c.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(g){g&&g.preventDefault();p.fadeOut({node:this._errorMessagePane,easing:k.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:"none"})})}).play()}});r("extend-esri")&&a.setObject("dijit.analysis.SummarizeWithin",d,K);return d})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(h,d,a,b,l,
m){h=h(l,{declaredClass:"esri.symbol.FillSymbol",constructor:function(a){a&&(d.isObject(a)&&a.outline)&&(this.outline=new m(a.outline))},setOutline:function(a){this.outline=a;return this},toJson:function(){var a=this.inherited("toJson",arguments);this.outline&&(a.outline=this.outline.toJson());return a}});a("extend-esri")&&d.setObject("symbol.FillSymbol",h,b);return h})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A){h=h(n,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=d.hitch(this,this._jobUpdateHandler);this._getJobStatus=d.hitch(this,this._getJobStatus);this._getResultDataHandler=
d.hitch(this,this._getResultDataHandler);this._getResultImageHandler=d.hitch(this,this._getResultImageHandler);this._executeHandler=d.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(c,g,b){for(var e in c){var k=c[e];d.isArray(k)?c[e]=l.toJson(a.map(k,function(a){return this._gpEncode({item:a},!0).item},this)):k instanceof Date&&(c[e]=k.getTime())}return this._encode(c,g,b)},_decode:function(c){var b=c.dataType,
e=new v(c);if(-1!==a.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],b))return e;if("GPLinearUnit"===b)e.value=new k(e.value);else if("GPFeatureRecordSetLayer"===b||"GPRecordSet"===b)e.value=new u(e.value);else if("GPDataFile"===b)e.value=new g(e.value);else if("GPDate"===b)c=e.value,d.isString(c)?e.value=new w({date:c}):e.value=new Date(c);else if("GPRasterData"===b||"GPRasterDataLayer"===b)c=c.value.mapImage,e.value=c?new A(c):new q(e.value);else if(-1!==b.indexOf("GPMultiValue:")){var f=b.split(":")[1];
c=e.value;e.value=a.map(c,function(a){return this._decode({paramName:"_name",dataType:f,value:a}).value},this)}else console.log(this.declaredClass+" : GP Data type not handled. : "+e.dataType),e=null;return e},submitJob:function(a,c,g,b,k){var f=this._getOutSR(),n=k.assembly;a=this._gpEncode(d.mixin({},this._url.query,{f:"json","env:outSR":f?f.wkid||l.toJson(f.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||l.toJson(this.processSpatialReference.toJson()):
null},a),null,n&&n[0]);var q=this._jobUpdateHandler,v=this._errorHandler;return e({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,b){q(a,b,!1,c,g,k.dfd)},error:function(a){v(a,b,k.dfd)}})},_jobUpdateHandler:function(a,c,g,b,e,k){var f=a.jobId;c=new t(a);this._successHandler([c],"onStatusUpdate",e,g&&k);if(!g)switch(clearTimeout(this._updateTimers[f]),this._updateTimers[f]=null,k&&k.progress(c),a.jobStatus){case t.STATUS_SUBMITTED:case t.STATUS_EXECUTING:case t.STATUS_WAITING:case t.STATUS_NEW:var n=
this._getJobStatus;this._updateTimers[f]=setTimeout(function(){n(f,g,b,e,k)},this.updateDelay);break;default:this._successHandler([c],"onJobComplete",b,k)}},_getJobStatus:function(a,c,g,b,k){var f=this._jobUpdateHandler;e({url:this._url.path+"/jobs/"+a,content:d.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,e){f(a,e,c,g,b,k)},error:this._errorHandler})},_getResultDataHandler:function(a,c,g,b,e){try{var k=this._decode(a);this._successHandler([k],"onGetResultDataComplete",
g,e)}catch(f){this._errorHandler(f,b,e)}},getResultData:function(a,c,g,k){var n=this._getResultDataHandler,q=this._errorHandler,v=new b(f._dfdCanceller);v._pendingDfd=e({url:this._url.path+"/jobs/"+a+"/results/"+c,content:d.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,c){n(a,c,g,k,v)},error:function(a){q(a,k,v)}});return v},checkJobStatus:function(a,c,g){var k=this._jobUpdateHandler,n=this._errorHandler,q=new b(f._dfdCanceller);q._pendingDfd=
e({url:this._url.path+"/jobs/"+a,content:d.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,g){k(a,g,!0,null,c,q)},error:function(a){n(a,g,q)}});return q},cancelJob:function(a,c,g){var k=this._errorHandler,n=new b(f._dfdCanceller);n._pendingDfd=e({url:this._url.path+"/jobs/"+a+"/cancel",content:d.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:d.hitch(this,function(a,g){this._successHandler([a],"onJobCancel",c,n)}),error:function(a){k(a,g,n)}});
return n},execute:function(a,c,g,b){var k=this._getOutSR(),f=b.assembly;a=this._gpEncode(d.mixin({},this._url.query,{f:"json","env:outSR":k?k.wkid||l.toJson(k.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||l.toJson(this.processSpatialReference.toJson()):null},a),null,f&&f[0]);var n=this._executeHandler,q=this._errorHandler;return e({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,e){n(a,e,c,g,b.dfd)},error:function(a){q(a,
g,b.dfd)}})},_executeHandler:function(a,c,g,b,e){try{var k=a.results,f,n,q=a.messages;f=0;for(n=k.length;f<n;f++)k[f]=this._decode(k[f]);f=0;for(n=q.length;f<n;f++)q[f]=new s(q[f]);this._successHandler([k,q],"onExecuteComplete",g,e)}catch(d){this._errorHandler(d,b,e)}},_getResultImageHandler:function(a,c,g,b,e){try{var k=this._decode(a);this._successHandler([k],"onGetResultImageComplete",g,e)}catch(f){this._errorHandler(f,b,e)}},getResultImage:function(a,c,g,k,n){var q=this._getResultImageHandler,
v=this._errorHandler;g=this._gpEncode(d.mixin({},this._url.query,{f:"json"},g.toJson()));var u=new b(f._dfdCanceller);u._pendingDfd=e({url:this._url.path+"/jobs/"+a+"/results/"+c,content:g,callbackParamName:"callback",load:function(a,c){q(a,c,k,n,u)},error:function(a){v(a,n,u)}});return u},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,c,g,b){if(null==c){var e=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,
e)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+a+"/results/"+c;this._url.query&&(a+="?"+p.objectToQuery(this._url.query));c=null==c?new x(a,{imageParameters:g}):new z(a,{imageParameters:g},!0);this.onGetResultImageLayerComplete(c);b&&b(c);return c},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});c._createWrappers(h);
m("extend-esri")&&d.setObject("tasks.Geoprocessor",h,r);return h})},"esri/tasks/geoenrichment/StandardGeographyStudyArea":function(){define(["../../declare","./StudyArea"],function(h,d){return h("esri.tasks.geoenrichment.StandardGeographyStudyArea",[d],{countryID:null,geographyLayerID:null,ids:null,constructor:function(a){if(a){var b=a.sourceCountry||a.countryID;b&&(this.countryID=b);if(b=a.layer||a.geographyLayerID)this.geographyLayerID=b;a.ids&&(this.ids=a.ids)}},toJson:function(){var a=this.inherited(arguments);
this.countryID&&(a.sourceCountry=this.countryID);this.geographyLayerID&&(a.layer=this.geographyLayerID);this.ids&&(a.ids=this.ids);return a},getGeomType:function(){return"polygon"}})})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(h,d,a,b,l,m,p,r){h=h(null,{declaredClass:"esri.layers._TrackManager",constructor:function(a){this.layer=a;this.trackMap={};this.trackLineMap=
{}},initialize:function(a){this.map=a;var b=this.layer,c=b._getRenderer(),c=c&&c.trackRenderer;if("esriGeometryPoint"===b.geometryType){var n=this.container=new r._GraphicsLayer({id:b.id+"_tracks",_child:!0});n.loaded=!0;n.onLoad(n);n._setMap(a,b._div);n.setRenderer(c)}},addFeatures:function(b){var f=this.trackMap,c=this.layer,n=c._trackIdField,d=[];a.forEach(b,function(c){var b=c.attributes[n];(f[b]=f[b]||[]).push(c);-1===a.indexOf(d,b)&&d.push(b)});var l=c._startTimeField,m=c.objectIdField,k=function(a,
c){var b=a.attributes[l],e=c.attributes[l];return b===e?a.attributes[m]<c.attributes[m]?-1:1:b<e?-1:1};a.forEach(d,function(a){f[a].sort(k)})},trimTracks:function(b){function f(a){for(a=c[a]||[];a.length>n;)d.push(a.shift())}var c=this.trackMap,n=this.layer.maximumTrackPoints||0,d=[],l;if(!n)return d;if(b)a.forEach(b,function(a){f(a)});else for(l in c)c.hasOwnProperty(l)&&f(l);return d},drawTracks:function(b){function f(a){var b=d[a],e,k,f;k=c.trackLineMap[a];n.remove(k);delete c.trackLineMap[a];
if(!b||2>b.length)return!1;k=[];for(e=b.length-1;0<=e;e--)(f=b[e].geometry)&&k.push([f.x,f.y]);b={};b[s]=a;1<k.length&&(k=new m(new p({paths:[k],spatialReference:l}),null,b),n.add(k),c.trackLineMap[a]=k)}var c=this,n=this.container,d,l,s,k;if(n)if(d=this.trackMap,l=this.map.spatialReference,s=this.layer._trackIdField,b)a.forEach(b,function(a){f(a)});else for(k in d)d.hasOwnProperty(k)&&f(k)},refreshTracks:function(b){function f(a){var g,b;c.drawTracks([a]);if(l&&l.latestObservationRenderer){a=n[a]||
[];g=a.length;for(b=0;b<g;b++)d._repaint(a[b],null,!0)}}var c=this,n=this.trackMap,d=this.layer,l=d._getRenderer(),m;if(b)a.forEach(b,function(a){f(a)});else for(m in n)n.hasOwnProperty(m)&&f(m);this.moveLatestToFront()},moveLatestToFront:function(b){a.forEach(this.getLatestObservations(b),function(a){var c=a._shape;c&&c._moveToFront();this._repaint(a,null,!0)},this.layer)},getLatestObservations:function(b){function f(a){a=d[a];return a[a.length-1]}var c=[],n=this.layer._getRenderer(),d=this.trackMap,
l;if(!n.latestObservationRenderer)return c;if(b)a.forEach(b,function(a){c.push(f(a))});else for(l in d)d.hasOwnProperty(l)&&c.push(f(l));return c},clearTracks:function(b){var f=this.getLatestObservations(b),c=this.container,n;b?a.forEach(b,function(a){delete this.trackMap[a];c&&(n=this.trackLineMap[a],c.remove(n),delete this.trackLineMap[a])},this):(this.trackMap={},this.trackLineMap={},c&&c.clear());a.forEach(f,function(a){this._repaint(a,null,!0)},this.layer)},isLatestObservation:function(a){var b=
this.trackMap[a.attributes[this.layer._trackIdField]];return b?b[b.length-1]===a:!1},destroy:function(){var a=this.container;a&&(a.clear(),a._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}});b("extend-esri")&&d.setObject("layers._TrackManager",h,l);return h})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),
function(h,d,a,b,l,m,p,r,e,f){h=h([e],{declaredClass:"esri.layers._OnDemandMode",constructor:function(c){this.featureLayer=c;this._featureMap={};this._queryErrorHandler=a.hitch(this,this._queryErrorHandler)},initialize:function(a){this.inherited(arguments);var b=this.featureLayer,e=b._srInfo;this._gridLayer=new f(new p(e?e.valid[0]:a.extent.xmin,e?e.valid[1]:a.extent.ymax,a.spatialReference),{width:b._tileWidth,height:b._tileHeight},{width:a.width,height:a.height},e);this._cellMap={};this._gridLayer.setResolution(a.extent)},
startup:function(){this._ioQueue=[];this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&(2>a?this._zoomHandler():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._disableConnectors();this.inherited(arguments)},drawFeature:function(a){var b=this._gridLayer,e=a.geometry,f=[];if(e)for(var f=
b.getCellsInExtent("point"===e.type?{xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y}:e.getExtent(),!1).cells,b=this._cellMap,d,k=a.attributes[this.featureLayer.objectIdField],g,q,l,e=0;e<f.length;e++)d=f[e],g=d.latticeID,q=d.row,l=d.col,g?d=b[g]=b[g]||d:(b[q]=b[q]||{},d=b[q][l]=b[q][l]||d),d.features=d.features||[],d.features.push(a),this._addFeatureIIf(k,a),this._incRefCount(k)},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},
refresh:function(){this._zoomHandler()},_enableConnectors:function(){var a=this.map;this._zoomConnect=d.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=d.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=d.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){d.disconnect(this._zoomConnect);d.disconnect(this._panConnect);d.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,b=this.map;a.suspended||
(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&a)},_getRequestId:function(a,b){return("_"+a.name+a.layerId+a._ulid+"_"+b.resolution+"_"+(b.latticeID||b.row+"_"+b.col)).replace(/[^a-zA-Z0-9\_]+/g,"_")},_sendRequest:function(a){this._exceeds=!1;var e=this.featureLayer,f=this.map;a=a||f.extent;
f=this._gridLayer.getCellsInExtent(a,e.latticeTiling).cells;if(!e.isEditable())var d=this._cellMap,f=b.filter(f,function(a){if(a.lattice){if(d[a.latticeID])return!1}else if(d[a.row]&&d[a.row][a.col])return!1;return!0});var l=e.getOutFields(),k=e.getDefinitionExpression(),g=e._getOffsettedTE(e._mapTimeExtent),q=e.supportsAdvancedQueries?e.getOrderByFields():null,m=e._usePatch,v=this._ioQueue,p,x=this,h=this._drawFeatures,E,B,D;this._pending=this._pending||0;for(p=0;p<f.length;p++){E=f[p];B=new r;B.geometry=
E.extent||E.lattice;B.outFields=l;B.where=k;e.latticeTiling&&E.extent&&(B.spatialRelationship=r.SPATIAL_REL_CONTAINS);B.returnGeometry=!0;B.timeExtent=g;e._ts&&(B._ts=(new Date).getTime());B.orderByFields=q;B.multipatchOption=e.multipatchOption;B.maxAllowableOffset=e._maxOffset;B.quantizationParameters=e._quantizationParameters;D=null;if(m&&(D=this._getRequestId(e,E),this._isPending(D)))continue;this._pending++;v.push(e._task.execute(B,function(){var a=E;return function(c){h.apply(x,[c,a])}}.call(this),
this._queryErrorHandler,D))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this._exceeds=this._exceeds||a.exceededTransferLimit;this._finalizeIO();var e=this.map.extent,f=b.extent,d=b.row,k=b.col,g=this.featureLayer.objectIdField,q=a.features,l=this._gridLayer,v=this._cellMap,m=b.latticeID,x=m?v[m]:v[d]&&v[d][k];if(b.resolution!=l._resolution||(m?m!==l.getLatticeID(e):!l.intersects(f,e)))x&&this._removeCell(d,k,m);else if(x)this._updateCell(x,q);else{b.features=q;m?v[m]=b:(v[d]=
v[d]||{},v[d][k]=b);f=q.length;for(e=0;e<f;e++)d=q[e],k=d.attributes[g],this._addFeatureIIf(k,d),this._incRefCount(k)}this._endCheck()},_queryErrorHandler:function(a){this._finalizeIO();this.featureLayer._errorHandler(a);this._endCheck(!0)},_finalizeIO:function(){this._purgeRequests();this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var e=this.featureLayer,f=e._trackManager;f&&(f.clearTracks(),f.addFeatures(e.graphics),e._ager&&b.forEach(e.graphics,function(a){a._shape&&
e._repaint(a)}),f.moveLatestToFront(),f.drawTracks());this.featureLayer._fireUpdateEnd(a&&Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)e.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=b.filter(this._ioQueue,function(a){return-1<a.fired?!1:!0});a&&b.forEach(this._ioQueue,this._cancelPendingRequest)},_removeOldCells:function(a){var b=this._cellMap,e=this._gridLayer,f,d;for(f in b)if(b[f]){var k=b[f],
g=k.latticeID,q=0,l=0;if(g)q++,g!==e.getLatticeID(a)&&(this._removeCell(null,null,g),l++);else for(d in k)k[d]&&(q++,e.intersects(k[d].extent,a)||(this._removeCell(f,d),l++));l===q&&delete b[f]}},_updateCell:function(a,b){var e=this.featureLayer,f=e.objectIdField,e=e._selectedFeatures,d,k=b.length;a.features=a.features||[];for(d=0;d<k;d++){var g=b[d],q=g.attributes[f],l=this._addFeatureIIf(q,g);l===g?(this._incRefCount(q),a.features.push(l)):q in e||(l.setGeometry(g.geometry),l.setAttributes(g.attributes))}},
_removeCell:function(a,b,e){var f=this._cellMap,d=this.featureLayer,k=d.objectIdField,g=e?f[e]:f[a]&&f[a][b];if(g){e?delete f[e]:delete f[a][b];a=g.features;for(b=0;b<a.length;b++)e=a[b].attributes[k],this._decRefCount(e),e in d._selectedFeatures||this._removeFeatureIIf(e)}}});l("extend-esri")&&a.setObject("layers._OnDemandMode",h,m);return h})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w){h=h([u,t],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(a,c,b){a=c&&c.imageParameters;var e=d.hitch;if(a){var k=a.layerDefinitions;k&&this.setLayerDefinitions(k);a.layerOption===g.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(a.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=e(this,this._setIsPNG32);this.dpi=a&&a.dpi||96;this.imageFormat=
a&&a.format||"png8";this.imageTransparency=a&&!1===a.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=c&&c.gdbVersion;this._params.gdbVersion=this.gdbVersion;d.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},a?a.toJson():{});this.getImageUrl=e(this,this.getImageUrl);this._initLayer=e(this,this._initLayer);this._load=e(this,this._load);this.useMapImage=c?c.useMapImage:!1;this._loadCallback=c&&c.loadCallback;(c=c&&c.resourceInfo)?this._initLayer(c):
(void 0===b||!1===b)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(a,c){this.inherited(arguments);a.timeInfo&&(this.timeInfo=new s(a.timeInfo));this.loaded=!0;this.onLoad(this);var b=this._loadCallback;b&&(delete this._loadCallback,b(this))},getImageUrl:function(a,c,g,k){var n=this._url.path+"/export?",q=this._params,l=a.spatialReference.wkid||b.toJson(a.spatialReference.toJson()),u=this._errorHandler;delete q._ts;d.mixin(q,{bbox:a.xmin+
","+a.ymin+","+a.xmax+","+a.ymax,bboxSR:l,imageSR:l,size:c+","+g},this.disableClientCaching?{_ts:(new Date).getTime()}:{});q.layerDefs&&(a=q.layerDefs,delete q.layerDefs,d.mixin(q,{layerDefs:a}));var w=q.token=this._getToken();a=f.addProxy(n+m.objectToQuery(d.mixin({},q,{f:"image"})));a.length>r.defaults.io.postLength||this.useMapImage?this._jsonRequest=e({url:n,content:d.mixin(q,{f:"json"}),callbackParamName:"callback",load:function(a){a=a.href;w&&(a+=-1===a.indexOf("?")?"?token\x3d"+w:"\x26token\x3d"+
w);k(f.addProxy(a))},error:u}):k(a)},_setIsPNG32:function(){var a=this.imageFormat.toLowerCase(),c=l("ie");this.isPNG32=c&&6===c&&("png32"===a||"png24"===a)&&this.imageTransparency},_setTime:function(b){var g=this.timeInfo;b=this._params.time=b?b.toJson().join(","):null;if(10.02>this.version&&g)if(b)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);else{var e=this.layerInfos;if(e){var f=this.layerTimeOptions,n=f?f.slice(0):[],q=[];a.forEach(e,function(a){a.subLayerIds||
q.push(a.id)});q.length&&(a.forEach(q,function(a){if(!n[a]){var c=new k;c.useTime=!1;n[a]=c}}),this._params.layerTimeOptions=c._serializeTimeOptions(n,q))}}10.02<=this.version&&g&&(!b&&!g.hasLiveData)&&(this._params.time="null,null")},setDPI:function(a,c){this.dpi=this._params.dpi=a;c||this.refresh(!0)},setImageFormat:function(a,c){this.imageFormat=this._params.format=a;this._setIsPNG32();c||this.refresh(!0)},setImageTransparency:function(a,c){this.imageTransparency=this._params.transparent=a;this._setIsPNG32();
c||this.refresh(!0)},setVisibleLayers:function(a,c){this.visibleLayers=a;this._params.layers=g.LAYER_OPTION_SHOW+":"+(a.length?a.join():"-1");this._updateDynamicLayers();c||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(a){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();a||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(a,
b){this.layerDefinitions=a;this._params.layerDefs=c._serializeLayerDefinitions(a);this._updateDynamicLayers();b||this.refresh(!0)},setDefaultLayerDefinitions:function(a){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setLayerTimeOptions:function(a,b){this.layerTimeOptions=a;this._params.layerTimeOptions=c._serializeTimeOptions(a);this._updateDynamicLayers();b||this.refresh(!0)},refresh:function(a){if(a)this.inherited(arguments);
else{var c=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=c}},setLayerDrawingOptions:function(a,c){this.layerDrawingOptions=a;this._updateDynamicLayers();c||this.refresh(!0)},setDynamicLayerInfos:function(a,b){a&&0<a.length?(this.dynamicLayerInfos=a,this.visibleLayers=c._getDefaultVisibleLayers(a),this.onVisibleLayersChange(this.visibleLayers)):this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();b||this.refresh(!0)},
createDynamicLayerInfosFromLayerInfos:function(){var c=[],b;a.forEach(this.layerInfos,function(a){b=new q(a.toJson());b.source=new w({mapLayerId:a.id});c.push(b)});return c},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){if(!this.dynamicLayerInfos||0===this.dynamicLayerInfos.length)this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();var g;g=
this.dynamicLayerInfos;var e=[],k=this._map&&n.getScale(this._map),f=this.visibleLayers,q=k?c._getLayersForScale(k,g):f;a.forEach(g,function(c){if(!c.subLayerIds){var b,g=c.id;if(-1!==a.indexOf(f,g)&&-1!==a.indexOf(q,g)){b={id:g,name:c.name};b.source=c.source&&c.source.toJson();var k;this.layerDefinitions&&this.layerDefinitions[g]&&(k=this.layerDefinitions[g]);k&&(b.definitionExpression=k);var n;this.layerDrawingOptions&&this.layerDrawingOptions[g]&&(n=this.layerDrawingOptions[g]);n&&(b.drawingInfo=
n.toJson());var d;this.layerTimeOptions&&this.layerTimeOptions[g]&&(d=this.layerTimeOptions[g]);d&&(b.layerTimeOptions=d.toJson());b.minScale=c.minScale||0;b.maxScale=c.maxScale||0;e.push(b)}}},this);g=b.toJson(e);if(!this._params.dynamicLayers||this._params.dynamicLayers.length!==g.length||this._params.dynamicLayers!==g)this._params.dynamicLayers=g,this._onDynamicLayersChange(this._params.dynamicLayers)}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):
this._params.dynamicLayers=null},_onExtentChangeHandler:function(a,c,b){b&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(a,c,b){this._map=a;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(a,c){this.gdbVersion=a;this._params.gdbVersion=a;this.onGDBVersionChange();c||this.refresh(!0)},exportMapImage:function(a,c){var b=r.defaults.map,b=d.mixin({size:b.width+","+b.height},this._params,a?a.toJson(this.normalization):
{},{f:"json"});delete b._ts;if(b.layerDefs){var g=b.layerDefs;delete b.layerDefs;d.mixin(b,{layerDefs:g})}this._exportMapImage(this._url.path+"/export",b,c)}});l("extend-esri")&&d.setObject("layers.ArcGISDynamicMapServiceLayer",h,p);return h})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(h,d,a,b,l,m,p,r,e,f,c){h=
h(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(b){if(b){d.mixin(this,b);var e=this.features,l=b.spatialReference,m=f.getGeometryType(b.geometryType),l=this.spatialReference=new r(l);this.geometryType=b.geometryType;b.fields&&(this.fields=b.fields);a.forEach(e,function(a,b){var f=a.geometry&&a.geometry.spatialReference;e[b]=new p(m&&a.geometry?new m(a.geometry):null,a.symbol&&c.fromJson(a.symbol),a.attributes);e[b].geometry&&!f&&e[b].geometry.setSpatialReference(l)});this._hydrate()}else this.features=
[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(a){var c={};this.displayFieldName&&(c.displayFieldName=this.displayFieldName);this.fields&&(c.fields=this.fields);this.spatialReference?c.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(c.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(c.geometryType=f.getJsonType(this.features[0].geometry)),
c.features=e._encodeGraphics(this.features,a));c.exceededTransferLimit=this.exceededTransferLimit;c.transform=this.transform;return m.fixJson(c)},_hydrate:function(){var a=this.transform,c=this.geometryType;if(a&&c)for(var b=this.features,e=a.translate[0],k=a.translate[1],g=a.scale[0],f=a.scale[1],d=function(a,c,b){if("esriGeometryPoint"===a)return function(a){a.x=c(a.x);a.y=b(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var g,e,k,f,n,q,d,l;
g=0;for(e=a.length;g<e;g++){n=a[g];k=0;for(f=n.length;k<f;k++)q=n[k],0<k?(d+=q[0],l+=q[1]):(d=q[0],l=q[1]),q[0]=c(d),q[1]=b(l)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=c(a.xmin);a.ymin=b(a.ymin);a.xmax=c(a.xmax);a.ymax=b(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var g,e,k,f,n;g=0;for(e=a.length;g<e;g++)k=a[g],0<g?(f+=k[0],n+=k[1]):(f=k[0],n=k[1]),k[0]=c(f),k[1]=b(n)}}(c,function(a){return a*g+e},function(a){return k-a*f}),a=0,c=b.length;a<c;a++)b[a].geometry&&
d(b[a].geometry);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var c=a.translate[0],b=a.translate[1],e=a.scale[0],k=a.scale[1],g=this.features,f=function(a,c,b){var g,e,k,f,n,q,d=[];g=0;for(e=a.length;g<e;g++)if(k=a[g],0<g){if(q=c(k[0]),k=b(k[1]),q!==f||k!==n)d.push([q-f,k-n]),f=q,n=k}else f=c(k[0]),n=b(k[1]),d.push([f,n]);return 0<d.length?d:null},d=function(a,c,b){if("esriGeometryPoint"===a)return function(a){a.x=c(a.x);a.y=b(a.y);return a};if("esriGeometryPolyline"===
a||"esriGeometryPolygon"===a)return function(a){var g,e,k,n,d;k=a.rings||a.paths;d=[];g=0;for(e=k.length;g<e;g++)n=k[g],(n=f(n,c,b))&&d.push(n);return 0<d.length?(a.rings?a.rings=d:a.paths=d,a):null};if("esriGeometryMultipoint"===a)return function(a){var g;g=f(a.points,c,b);return 0<g.length?(a.points=g,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-c)/e)},function(a){return Math.round((b-a)/k)}),l,m;l=0;for(m=g.length;l<m;l++)g[l].geometry&&
(d(g[l].geometry)||g[l].setGeometry(null));this.transform=a;return this}});b("extend-esri")&&d.setObject("tasks.FeatureSet",h,l);return h})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(h,d,a,b,l,m,p){h=h(null,{declaredClass:"esri.layers.MapImage",constructor:function(a){d.mixin(this,a);this.extent=new p(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},
show:function(){if(!this.visible){this.visible=!0;var a=this._node,b=this._layer,f;if(a){if(f=b&&b._div)b.suspended||b._setPos(a,f._left,f._top),(b._active||f).appendChild(a);m.show(a)}}},hide:function(){if(this.visible){this.visible=!1;var a=this._node;a&&(m.hide(a),a.parentNode&&a.parentNode.removeChild(a))}},setOpacity:function(b){var e=this._node;this.opacity=b;e&&a.set(e,"opacity",b)}});b("extend-esri")&&d.setObject("layers.MapImage",h,l);return h})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(a){d.mixin(this,a)}});a("extend-esri")&&d.setObject("tasks.ParameterValue",h,b);return h})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(h,d,a,b,l,m,p,r,e,f){var c=function(){return 9>a("ie")?function(a,c,b,e,g,f,n,d,l){var m=
[],p=Math.round,h,r=n.length,D,y,I,H,M,K;for(h=0;h<r;h++)if(D=n[h],H=d?d(D[0][0],D[0][1],l):D[0],1<(I=D.length)){M=p((H[0]-a)*b+g);K=p((c-H[1])*e+f);H=d?d(D[1][0],D[1][1],l):D[1];y=p((H[0]-a)*b+g);H=p((c-H[1])*e+f);m.push("M",M+","+K,"L",y+","+H);for(y=2;y<I;y++)H=d?d(D[y][0],D[y][1],l):D[y],M=p((H[0]-a)*b+g),K=p((c-H[1])*e+f),m.push(M+","+K)}else M=p((H[0]-a)*b+g),K=p((c-H[1])*e+f),m.push("M",M+","+K);return m}:function(a,c,b,e,g,f,n,d,l){var m=[],p,h,r,D,y,I,H=Math.round;p=0;for(r=n?n.length:0;p<
r;p++){y=n[p];m.push("M");h=0;for(D=y?y.length:0;h<D;h++)I=d?d(y[h][0],y[h][1],l):y[h],m.push(H((I[0]-a)*b+g)+","+H((c-I[1])*e+f))}return m}}(),n={toScreenPoint:function(a,c,b,e,g){var f=a.spatialReference,n=e.spatialReference,d=e.x;e=e.y;f&&(n&&!f.equals(n)&&f._canProject(n))&&(f=f.isWebMercator()?l.lngLatToXY(d,e):l.xyToLngLat(d,e,!0),d=f[0],e=f[1]);d=(d-a.xmin)*(c/a.getWidth());e=(a.ymax-e)*(b/a.getHeight());g||(d=Math.round(d),e=Math.round(e));return new m(d,e)},toScreenGeometry:function(a,c,
b,k){var g=a.xmin,n=a.ymax,d=c/a.getWidth(),m=b/a.getHeight(),z=h.forEach,x=Math.round;if(k instanceof l)return new l(x((k.x-g)*d),x((n-k.y)*m));if(k instanceof e){a=new e;var A=a.points;z(k.points,function(a,c){A[c]=[x((a[0]-g)*d),x((n-a[1])*m)]});return a}if(k instanceof f)return new f(x((k.xmin-g)*d),x((n-k.ymin)*m),x((k.xmax-g)*d),x((n-k.ymax)*d));if(k instanceof p){a=new p;var E=a.paths,B;z(k.paths,function(a,c){B=E[c]=[];z(a,function(a,c){B[c]=[x((a[0]-g)*d),x((n-a[1])*m)]})});return a}if(k instanceof
r){a=new r;var D=a.rings,y;z(k.rings,function(a,c){y=D[c]=[];z(a,function(a,c){y[c]=[x((a[0]-g)*d),x((n-a[1])*m)]})});return a}},_toScreenPath:function(a,b,e,f,g,n){var d=f instanceof p,m=a.spatialReference,h=f.spatialReference,x,r;m&&(h&&!m.equals(h)&&m._canProject(h))&&(m.isWebMercator()?x=l.lngLatToXY:(x=l.xyToLngLat,r=!0));return c(a.xmin,a.ymax,b/a.getWidth(),e/a.getHeight(),g,n,d?f.paths:f.rings,x,r)},toMapPoint:function(a,c,b,e){return new l(a.xmin+e.x/(c/a.getWidth()),a.ymax-e.y/(b/a.getHeight()),
a.spatialReference)},toMapGeometry:function(a,c,b,k){var g=a.xmin,n=a.ymax,d=a.spatialReference,m=c/a.getWidth(),z=b/a.getHeight(),x=h.forEach;if(k instanceof l)return new l(g+k.x/m,n-k.y/z,d);if(k instanceof e){a=new e(d);var A=a.points;x(k.points,function(a,c){A[c]=[g+a[0]/m,n-a[1]/z]});return a}if(k instanceof f)return new f(g+k.xmin/m,n-k.ymin/z,g+k.xmax/m,n-k.ymax/z,d);if(k instanceof p){a=new p(d);var E=a.paths,B;x(k.paths,function(a,c){B=E[c]=[];x(a,function(a,c){B[c]=[g+a[0]/m,n-a[1]/z]})});
return a}if(k instanceof r){a=new r(d);var D=a.rings,y;x(k.rings,function(a,c){y=D[c]=[];x(a,function(a,c){y[c]=[g+a[0]/m,n-a[1]/z]})});return a}}};a("extend-esri")&&d.mixin(d.getObject("geometry",!0,b),n);return n})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(h,d,a,b,l,m,p,r,e){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};h=h(r,{declaredClass:"esri.symbol.ShieldLabelSymbol",
type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:b.defaultFont,constructor:function(c,e,l,m,s){c?d.isString(c)?(this.url=c,e&&(this.color=e),l&&(this.width=l),m&&(this.height=m),void 0!==s&&(this.font=s)):(this.width=b.pt2px(c.width),this.height=b.pt2px(c.height),e=c.imageData,!(9>a("ie"))&&e&&(l=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+e,this.imageData=l)):d.mixin(this,f)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=
a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var a=this.url,f=this.imageData;if(0===a.indexOf("data:"))var l=a,a=f,f=l.indexOf(";base64,")+8,f=l.substr(f);var a=p.getAbsoluteUrl(a),l=b.px2pt(this.width),l=isNaN(l)?void 0:l,h=b.px2pt(this.height),h=isNaN(h)?void 0:h,a=m.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:f,contentType:this.contentType,width:l,height:h}));this.font?(f=new e(this.font),a.font=f.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;
return a}});h.defaultProps=f;a("extend-esri")&&(d.setObject("symbol.ShieldLabelSymbol",h,l),l.symbol.defaultShieldLabelSymbol=f);return h})},"esri/tasks/geoenrichment/taskHelper":function(){define(["dojo/_base/lang","dojo/Deferred","dojo/json","../../request","../../extend"],function(h,d,a,b,l){var m={invokeMethod:function(a,l,e,f,c,n){function m(b){var g;try{g=f(b)}catch(e){h(e);return}k&&k.resolve(g);a[c](g)}function h(c){k&&k.reject(c);a[n](c)}var s=null,k=null,k=new d(function(){s&&(s.cancel(),
s=null)});try{var g=e?e():{};g.f="json";a.token&&(g.token=a.token);s=b({url:a.url+l,content:g,handleAs:"json"});s.then(m,h)}catch(q){h(q)}return k.promise},jsonToRest:function(b){var d={},e;for(e in b)h.isString(b[e])?d[e]=b[e]:d[e]=a.stringify(b[e]);return d},throwEmptyResponse:function(){throw Error("Geoenrichment service returned empty response");}};l("esri.tasks.geoenrichment.taskHelper",m);return m})},"dojox/mvc/resolve":function(){define(["dojo/_base/lang","dijit/registry","dojo/Stateful"],
function(h,d){return h.setObject("dojox.mvc.resolve",function(a,b){if("string"==typeof a){var l=a.match(/^(expr|rel|widget):(.*)$/)||[];try{a="rel"==l[1]?h.getObject(l[2]||"",!1,b):"widget"==l[1]?d.byId(l[2]):h.getObject(l[2]||a,!1,b)}catch(m){}}return a})})},"esri/dijit/analysis/CreateBuffers":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./utils ./CreditEstimator dojo/i18n!../../nls/jsapi dojo/text!./templates/CreateBuffers.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){h=d([k,g,q,w,v,F,G],{declaredClass:"esri.dijit.analysis.CreateBuffers",templateString:O,widgetsInTemplate:!0,inputLayer:null,inputType:null,outputLayerName:null,bufferDistance:null,units:null,i18n:null,toolName:"CreateBuffers",helpFileName:"CreateBuffers",resultParameter:"BufferLayer",constructor:function(a,c){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);
b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.bufferTool)},postCreate:function(){this.inherited(arguments);t.add(this._form,"esriSimpleForm");this.outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_toUpperFirstLetter:function(a){return a.slice(0,1).toUpperCase()+
a.slice(1)},_handleSaveBtnClick:function(a){a={};var c={},b;if(this._form.validate()){this._saveBtn.set("disabled",!0);a.InputLayer=m.toJson(N.constructAnalysisInputLyrObj(this.inputLayer));a.DissolveType=this._DissolveType&&"dissolve"===this._DissolveType?"Dissolve":"None";"attribute"===this.bufferDistType?a.Field=this._bufferDistAttribute.get("value"):a.Distances=this.bufferDistance;a.Units=this._bufferUnits.get("value");this.bufferDistance.length&&(this._RingType||(this._RingType="rings"),a.RingType=
"rings"===this._RingType?"Rings":"Disks");if("esriGeometryPolyline"===this.inputLayer.geometryType||"esriGeometryPolygon"===this.inputLayer.geometryType)a.SideType="esriGeometryPolyline"===this.inputLayer.geometryType?this._SideType&&"left"===this._SideType?"Left":this._SideType&&"right"===this._SideType?"Right":"Full":this._SideType&&"outside"===this._SideType?"Outside":"Full",a.EndType=this._EndType&&"flat"===this._EndType?"Flat":"Round";this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this.outputLayerInput.get("value")}}));
this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(b={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.extent=this.map.extent._normalize(!0)),a.context=m.toJson(b));c.jobParams=a;c.itemParams={description:e.substitute(this.i18n.itemDescription,{layername:this.inputLayer.name,distance_field:a.Distances||a.Field,units:a.Units}),tags:e.substitute(this.i18n.itemTags,
{layername:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(c.itemParams.folder=this.get("folderId"));this.execute(c)}},_handleLayerChange:function(a){},_handleRadiusTypeChange:function(a){this.bufferDistType=a;t.remove(this._Distance,"selected");t.remove(this._Attribute,"selected");var c=this._bufferDist.get("value").split(" ");"attribute"===a?(f.set(this._bufferDistAttribute.domNode,"display","block"),f.set(this._bufferDist.domNode,"display","none"),f.set(this._sizeHelpRow,
"display","none"),f.set(this.ringTypes,"display","none"),"polygon"===this.inputType?(f.set(this.polygonTypes,"display","block"),f.set(this.sideTypes,"display","none"),f.set(this.endTypes,"display","none")):"line"===this.inputType&&(f.set(this.sideTypes,"display","block"),f.set(this.endTypes,"display","block"),f.set(this.polygonTypes,"display","none")),t.add(this._Attribute,"selected")):"distance"===a&&(f.set(this._bufferDistAttribute.domNode,"display","none"),f.set(this._bufferDist.domNode,"display",
"block"),f.set(this._sizeHelpRow,"display","table-row"),t.add(this._Distance,"selected"),1<c.length?(f.set(this.ringTypes,"display","block"),f.set(this.sideTypes,"display","none"),f.set(this.endTypes,"display","none"),f.set(this.polygonTypes,"display","none")):"polygon"===this.inputType?(f.set(this.ringTypes,"display","none"),f.set(this.sideTypes,"display","none"),f.set(this.endTypes,"display","none"),f.set(this.polygonTypes,"display","block")):"line"===this.inputType&&(f.set(this.ringTypes,"display",
"none"),f.set(this.sideTypes,"display","block"),f.set(this.endTypes,"display","block"),f.set(this.polygonTypes,"display","none")))},_handleDissolveTypeChange:function(a){this._DissolveType=a;t.remove(this._Overlap,"selected");t.remove(this._Dissolve,"selected");t.add("none"===a?this._Overlap:this._Dissolve,"selected")},_handleRingTypeChange:function(a){this._RingType=a;t.remove(this._Rings,"selected");t.remove(this._Disks,"selected");t.add("rings"===a?this._Rings:this._Disks,"selected")},_handlePolygonTypeChange:function(a){this._SideType=
a;t.remove(this._Include,"selected");t.remove(this._Exclude,"selected");t.add("full"===a?this._Include:this._Exclude,"selected")},_handleSideTypeChange:function(a,c){this._SideType=c;t.remove(this._Around,"selected");t.remove(this._Left,"selected");t.remove(this._Right,"selected");t.add(a,"selected")},_handleEndTypeChange:function(a){this._EndType=a;t.remove(this._Round,"selected");t.remove(this._Flat,"selected");t.add("round"===a?this._Round:this._Flat,"selected")},_handleOptionsBtnClick:function(){t.contains(this._optionsDiv,
"disabled")||(t.contains(this._optionsDiv,"optionsClose")?(t.remove(this._optionsDiv,"optionsClose"),t.add(this._optionsDiv,"optionsOpen")):t.contains(this._optionsDiv,"optionsOpen")&&(t.remove(this._optionsDiv,"optionsOpen"),t.add(this._optionsDiv,"optionsClose")))},_handleDistanceChange:function(){var c=a.trim(this._bufferDist.get("value")).split(" "),g=[];1<c.length?(f.set(this.ringTypes,"display","block"),f.set(this.sideTypes,"display","none"),f.set(this.endTypes,"display","none"),f.set(this.polygonTypes,
"display","none")):("line"===this.inputType?(f.set(this.sideTypes,"display","block"),f.set(this.endTypes,"display","block")):"polygon"===this.inputType&&f.set(this.polygonTypes,"display","block"),f.set(this.ringTypes,"display","none"));b.forEach(c,function(a){g.push(s.parse(a))});this.bufferDistance=g},_handleShowCreditsClick:function(c){c.preventDefault();c={};if(this._form.validate()){c.InputLayer=m.toJson(N.constructAnalysisInputLyrObj(this.inputLayer));c.DissolveType=this._DissolveType&&"dissolve"===
this._DissolveType?"Dissolve":"None";"attribute"===this.bufferDistType?c.Field=this._bufferDistAttribute.get("value"):c.Distances=m.toJson(this.bufferDistance);c.Units=this._bufferUnits.get("value");this.bufferDistance.length&&(this._RingType||(this._RingType="rings"),c.RingType="rings"===this._RingType?"Rings":"Disks");if("esriGeometryPolyline"===this.inputLayer.geometryType||"esriGeometryPolygon"===this.inputLayer.geometryType)c.SideType="esriGeometryPolyline"===this.inputLayer.geometryType?this._SideType&&
"left"===this._SideType?"Left":this._SideType&&"right"===this._SideType?"Right":"Full":this._SideType&&"outside"===this._SideType?"Outside":"Full",c.EndType=this._EndType&&"flat"===this._EndType?"Flat":"Round";this.returnFeatureCollection||(c.OutputName=m.toJson({serviceProperties:{name:this.outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.context=m.toJson({extent:this.map.extent._normalize(!0)}));console.log(c);this.getCreditsEstimate(this.toolName,
c).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},_save:function(){},_buildUI:function(){var c=!0;N.initHelpLinks(this.domNode,this.showHelp);this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),N.populateAnalysisLayers(this,"inputLayer","inputLayers"));N.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this.outputLayerInput.set("value",this.outputLayerName),
c=!1);this.inputLayer&&this._updateAnalysisLayerUI(c);this._bufferDist.set("validator",a.hitch(this,this.validateDistance));f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;N.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,
"display",!0===this.showChooseExtent?"inline-block":"none");f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections()},_updateAnalysisLayerUI:function(a){if(this.inputLayer){c.set(this._bufferToolDescription,"innerHTML",e.substitute(this.i18n.bufferDefine,{layername:this.inputLayer.name}));a&&(this.outputLayerName=e.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name}));this._bufferDistAttribute.removeOption(this._bufferDistAttribute.getOptions());
var g=[];b.forEach(this.inputLayer.fields,function(a){if("esriFieldTypeDouble"===a.type||"esriFieldTypeInteger"===a.type||"esriFieldTypeSmallInteger"===a.type||"esriFieldTypeSingle"===a.type)g.push({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this);this._bufferDistAttribute.addOption(g);c.set(this._bufferOptionsHelpLink,"esriHelpTopic","polygon"===this.inputType?"OptionPoly":"line"===this.inputType?"OptionLine":"OptionPoint");"line"===this.inputType?(f.set(this.sideTypes,
"display","block"),f.set(this.endTypes,"display","block")):"polygon"===this.inputType&&f.set(this.polygonTypes,"display","block")}this.outputLayerName&&this.outputLayerInput.set("value",this.outputLayerName);!this.bufferDistance||a?(this.bufferDistance=[],this.bufferDistance.push(this._bufferDist.get("value"))):this._bufferDist.set("value",this.bufferDistance.toString().replace(/,/g," "));this.units&&this._bufferUnits.set("value",this.units)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||
(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this._updateAnalysisLayerUI(!0))},validateDistance:function(){var c=this,g,e=[],f,k;this._handleDistanceChange();g=a.trim(this._bufferDist.get("value")).split(" ");if(0===g.length)return!1;b.forEach(g,function(g){g=s.parse(g);if(isNaN(g))return e.push(0),!1;f=s.format(g,{locale:"root"});J.isDefined(f)?J.isDefined(f)||
(f=s.format(g,{locale:"en-us"})):f=s.format(g,{locale:"en"});J.isDefined(f)&&(k=a.trim(f).match(/\D/g));k&&b.forEach(k,function(a){"."===a||","===a?e.push(1):"-"===a&&"polygon"===c.inputType?e.push(1):e.push(0)})});return-1!==b.indexOf(e,0)?!1:!0},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1));l.connect(this._Distance,"onclick",a.hitch(this,"_handleRadiusTypeChange","distance"));l.connect(this._Attribute,
"onclick",a.hitch(this,"_handleRadiusTypeChange","attribute"));l.connect(this._Overlap,"onclick",a.hitch(this,"_handleDissolveTypeChange","none"));l.connect(this._Dissolve,"onclick",a.hitch(this,"_handleDissolveTypeChange","dissolve"));l.connect(this._Include,"onclick",a.hitch(this,"_handlePolygonTypeChange","full"));l.connect(this._Exclude,"onclick",a.hitch(this,"_handlePolygonTypeChange","outside"));l.connect(this._Rings,"onclick",a.hitch(this,"_handleRingTypeChange","rings"));l.connect(this._Disks,
"onclick",a.hitch(this,"_handleRingTypeChange","disks"));l.connect(this._Around,"onclick",a.hitch(this,"_handleSideTypeChange",this._Around,"full"));l.connect(this._Left,"onclick",a.hitch(this,"_handleSideTypeChange",this._Left,"left"));l.connect(this._Right,"onclick",a.hitch(this,"_handleSideTypeChange",this._Right,"right"));l.connect(this._Round,"onclick",a.hitch(this,"_handleEndTypeChange","round"));l.connect(this._Flat,"onclick",a.hitch(this,"_handleEndTypeChange","flat"))},_handleBrowseItemsSelect:function(c){c&&
c.selection&&N.addAnalysisReadyLayer({item:c.selection,layers:this.inputLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){J.isDefined(a)&&("esriGeometryPolygon"===a.geometryType?(this.inputLayer=a,this.inputType="polygon"):"esriGeometryPolyline"===
a.geometryType?(this.inputLayer=a,this.inputType="line"):"esriGeometryPoint"===a.geometryType&&(this.inputLayer=a,this.inputType="point"))},_setInputLayersAttr:function(a){this.inputLayers=a},_setLayerAttr:function(a){"esriGeometryPolygon"===a.geometryType?this.inputType="polygon":"esriGeometryPolyline"===a.geometryType?this.inputType="line":"esriGeometryPoint"===a.geometryType&&(this.inputType="point");this.inputLayer=a},_setLayersAttr:function(a){this._setLayerAttr(a)},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",
a)},validateServiceName:function(a){return N.validateServiceName(a,{textInput:this.outputLayerInput})},_setUnitsAttr:function(a){this.units=a},_getUnitsAttr:function(){return this.units=this._bufferUnits.get("value")},_connect:function(a,c,b){this._pbConnects.push(l.connect(a,c,b))}});p("extend-esri")&&a.setObject("dijit.analysis.CreateBuffers",h,K);return h})},"esri/dijit/geoenrichment/DataBrowser/DataCollectionsPage":function(){define("../../../declare dojo/string dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/query dojo/i18n!../../../nls/jsapi dojo/text!./templates/DataCollectionsPage.html dojo/on ../CheckList ../_WizardPage ../Pagination dojo/store/Memory dgrid/List dgrid/Selection dijit/_WidgetBase ../AnimationHelper dijit/Tooltip dojo/_base/window dojo/has dijit/layout/ContentPane dijit/form/Select ./SearchTextBox".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x){e=e.geoenrichment.dijit.DataCollectionsPage;return h([u],{templateString:f,nls:e,baseClass:"DataCollectionsPage",_checkList:null,selectedCategory:null,selectedCollection:null,selectedVariables:[],shoppingCart:null,variableInfo:null,multiSelect:!0,flyAnim:null,icon:null,constructor:function(){this._ltr=p.isBodyLtr()},buildRendering:function(){this.inherited(arguments);this._checkList=new n({onSelect:a.hitch(this,this._onSelectVariable),onDeselect:a.hitch(this,
this._onDeselectVariable),selectionMode:this.multiSelect?"toggle":"single"},this.divVariables);this._checkList.renderRow=a.hitch(this,this._renderRow);this.pagination.createItemContainer=this._createItemContainer;this.pagination.updateItemContainer=this._updateItemContainer;b.after(this.layoutGrid,"resize",a.hitch(this.pagination,this.pagination.resize))},_createItemContainer:function(){return m.create("div",{"class":"DataCollectionButton DataBrowser_Clickable TrimWithEllipses"})},_updateItemContainer:function(a,
c){a.innerHTML=c.metadata.title;a.data=c},_renderRow:function(b,g){var e=m.create("div",{style:"width:100%"}),f=m.create("div",{"class":"TrimWithEllipses"});"single"!=this.selectionMode&&m.create("div",{"class":"dijit dijitInline dijitCheckBox VarCheck"},f);var k=m.create("div",{"class":"DataBrowserInfoIcon"},f);m.create("span",{"class":"VarLabel",innerHTML:b.description?b.description:b.alias},f);m.place(f,e);c(k,"click",a.hitch(this,this._toggleTooltip,k,b));c(k,"mouseenter",a.hitch(this,this._showTooltip,
k,b));c(k,"mouseleave",a.hitch(this,this._hideTooltip,k,b));c(k,"mousedown,touchstart,MSPointerDown,dgrid-cellfocusin",function(a){a.stopPropagation&&a.stopPropagation()});return e},_toggleTooltip:function(a,c,b){b.stopPropagation&&b.stopPropagation();this._icon?this._hideTooltip():this._showTooltip(a,c,b)},_showTooltip:function(b,g,e){this._icon=b;this.variableInfo.set("variable",g);v.show(this.variableInfo.domNode.outerHTML,b,["above","below"]);e.stopPropagation&&e.stopPropagation();c.once(z.doc,
"click",a.hitch(this,this._hideTooltip))},_hideTooltip:function(){v.hide(this._icon);this._icon=null},_setSelectedCategoryAttr:function(a){this._set("selectedCategory",a);if(a){var c={categoryName:a.name};this.categoryName.innerHTML=d.substitute(e.categoryName,c);this._checkList.set("store",new s({data:this.theMostPopularVars(a,3)}));this.pagination.set("items",a.dataCollections);this.spnShowAll.innerHTML=d.substitute(e.showAll,c);this._started&&this.resize();this._setState("done")}},theMostPopularVars:function(a,
c){var b=[];if(a){for(var g={},e=0;e<a.dataCollections.length;e++)for(var f=0;f<a.dataCollections[e].variables.length;f++){var k=a.dataCollections[e].variables[f];g[k.idDesc]=k}for(var n in g)g.hasOwnProperty(n)&&b.push(g[n]);b=b.sort(function(a,c){return(c.popularity?c.popularity:0)-(a.popularity?a.popularity:0)}).slice(0,c)}return b},_onSelectVariable:function(a){var c=this._checkList.get("selectedItems");this.flyAnim&&a.parentType&&(a=this._checkList.row(a.rows[0]).element,this.flyAnim.fly(r(".VarLabel",
a)[0],"DataBrowser_SelectVar",["top",this._ltr?"right":"left"]));this._set("selectedVariables",c);for(a=0;a<c.length;a++)this.shoppingCart.addVariable(c[a])},_onDeselectVariable:function(a){this.shoppingCart.removeVariable(a.rows[0].data.idDesc)},_onSelectCollection:function(a){var c=a.data;if(this.flyAnim){if(!this._ltr){var b=p.position(a);a.style.right=""+(window.innerWidth-b.x-b.w)+"px"}b=this.flyAnim.fly(a,"Breadcrumb_SelectDC",null,!0);l.remove(b,["dgrid-row","dgrid-selected","TrimWithEllipses"]);
this._ltr||(a.style.right="auto")}this._set("selectedCollections",[c]);this.onSelect(this._get("selectedCategory"),c.metadata.title)},_showAll:function(){this._set("selectedCollections",this._get("selectedCategory").dataCollections);this.onSelect(this._get("selectedCategory"),this._get("selectedCategory").name)},_gotoCategories:function(){this.gotoCategories()},gotoCategories:function(){},syncWithShoppingCart:function(){for(var a=this._checkList.store.data,c=this.shoppingCart.content,b=0;b<a.length;b++)this._checkList.select(a[b],
null,!!c[a[b].idDesc])},onRemoveElementFromShoppingCart:function(a){for(var c=this._checkList.store.data,b=0;b<c.length;b++)if(a===c[b].idDesc){this._checkList.select(c[b],null,!1);break}},_search:function(){if(this.txbSearch.get("value")){for(var a=this.txbSearch.get("value"),c=this._get("selectedCategory").dataCollections,b=[],g,f=0;f<c.length;f++){g={id:c[f].id,metadata:c[f].metadata,keywords:c[f].keywords,variables:[]};for(var k=0;k<c[f].variables.length;k++)this._match(c[f].variables[k],a)&&
g.variables.push(c[f].variables[k]);0<g.variables.length&&b.push(g)}0<b.length?(this._set("selectedCollections",b),this.onSelect(this._get("selectedCategory"),"'"+a+"' "+d.substitute(e.from,{categoryName:this._get("selectedCategory").name}))):this.txbSearch.showTooltip(d.substitute(e.noResults,{seachKey:a}))}},_match:function(a,c){return a.alias&&-1!==a.alias.toLowerCase().indexOf(c.toLowerCase())||a.description&&-1!==a.description.toLowerCase().indexOf(c.toLowerCase())||a.fieldCategory&&-1!==a.fieldCategory.toLowerCase().indexOf(c.toLowerCase())}})})},
"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(h,d,a,b,l,m,p){function r(a){return a}function e(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;a.grid=this;l.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return d("dgrid._StoreMixin",null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",
loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};m.before(this,"configStructure",a.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},
_updateNotifyHandle:function(b){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);b&&("function"===typeof b.notify&&this.shouldObserveStore)&&(this._notifyHandle=m.after(b,"notify",a.hitch(this,"_onNotify"),!0),b=this.get("sort"),(!b||!b.length)&&console.warn("Observable store detected, but no sort order specified. You may experience quirks when adding/updating items.  These can be resolved by setting a sort order on the list or grid."))},_setStore:function(a,c,b){this._updateNotifyHandle(a);
this.store=a;this.dirty={};this.set("query",c,b)},_setQuery:function(a,c){var b=c&&c.sort;this.query=void 0!==a?a:this.query;this.queryOptions=c||this.queryOptions;this._started&&(b?this.set("sort",b):this.refresh())},setStore:function(a,c,b){h.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",a,c,b)},setQuery:function(a,c){h.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",a,c)},_getQueryOptions:function(){var b=a.delegate(this.queryOptions,
{});if("function"===typeof this._sort||this._sort.length)b.sort=this._sort;return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?a.delegate(b,{}):b},_setSort:function(a,c){this.store&&(this._lastCollection=null);this.inherited(arguments)},_onNotify:function(a,c){this.inherited(arguments);a&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},refresh:function(){var a=this.inherited(arguments);this.store||(this.noDataNode=p(this.contentNode,"div.dgrid-no-data"),
this.noDataNode.innerHTML=this.noDataMessage);return a},renderArray:function(){var a=this,c=this.inherited(arguments);this.store||b.when(c,function(c){c.length&&a.noDataNode&&p(a.noDataNode,"!")});return c},insertRow:function(b,c,e,d,l){var m=this.store,k=this.dirty,m=m&&m.getIdentity(b),g;m in k&&!(m in this._updating)&&(g=k[m]);g&&(b=a.delegate(b,g));return this.inherited(arguments)},updateDirty:function(a,c,b){var e=this.dirty,d=e[a];d||(d=e[a]={});d[c]=b},setDirty:function(a,c,b){h.deprecated("setDirty(...)",
"use updateDirty() instead","dgrid 0.4");this.updateDirty(a,c,b)},save:function(){function a(g,k){return function(a){var f=c._columnsWithSet,q=c._updating,l,m;if("function"===typeof a.set)a.set(k);else for(l in k)a[l]=k[l];for(l in f)m=f[l].set(a),void 0!==m&&(a[l]=m);q[g]=!0;return b.when(e.put(a),function(){delete d[g];delete q[g]})}}var c=this,e=this.store,d=this.dirty,l=new b,m=l.promise,k=function(a){var b;return c.getBeforePut||!(b=c.row(a).data)?function(){return e.get(a)}:function(){return b}},
g;for(g in d)var q=a(g,d[g]),m=m.then(k(g)).then(q);l.resolve();return m},revert:function(){this.dirty={};this.refresh()},_trackError:function(f){var c;"string"==typeof f&&(f=a.hitch(this,f));try{c=f()}catch(n){e.call(this,n)}return b.when(c,r,a.hitch(this,e))},newRow:function(){var a=this.inherited(arguments);this.noDataNode&&(p(this.noDataNode,"!"),delete this.noDataNode);return a},removeRow:function(a,c){var b={element:a};!c&&(this.noDataMessage&&this.up(b).element===a&&this.down(b).element===
a)&&(this.noDataNode=p(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.layers.TimeReference",constructor:function(a){a&&d.mixin(this,a)}});a("extend-esri")&&d.setObject("layers.TimeReference",h,b);return h})},"esri/dijit/analysis/FindExistingLocations":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./utils ./CreditEstimator ./ExpressionGrid dojo/i18n!../../nls/jsapi dojo/text!./templates/FindExistingLocations.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){h=d([s,k,g,q,w,F,J],{declaredClass:"esri.dijit.analysis.FindExistingLocations",templateString:O,widgetsInTemplate:!0,i18n:null,toolName:"FindExistingLocations",helpFileName:"FindExistingLocations",resultParameter:"resultLayer",primaryActionButttonClass:"esriAnalysisSubmitButton",analysisLayer:null,inputLayers:[],constructor:function(a){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);
b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.findExistingLocations);a.mixin(this.i18n,C.expressionGrid)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},
_handleSaveBtnClick:function(){if(this._form.validate()&&this.expressionGrid.validate()){this._saveBtn.set("disabled",!0);var a={},c={},g,k;k=this.expressionGrid.get("expressionMap");a.expressions=m.toJson(k.expressions);g=[];g=b.map(k.inputLayers,function(a){return m.toJson(G.constructAnalysisInputLyrObj(a))},this);a.inputLayers=g;this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(g={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(g.extent=this.map.extent._normalize(!0)),a.context=m.toJson(g));c.jobParams=a;a=e.substitute(this.i18n.itemDescription,{analysisLayerName:this.analysisLayer.name});a+="\x3cdiv\x3e\x3ci\x3e\x3cu\x3e"+this.i18n.expression+"\x3c/u\x3e "+k.expressionString+"\x3c/i\x3e\x3c/div\x3e";c.itemParams={description:a,tags:e.substitute(this.i18n.itemTags,
{analysisLayerName:this.analysisLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(c.itemParams.folder=this.get("folderId"));this.execute(c)}},_handleShowCreditsClick:function(c){c.preventDefault();c={};var g,e;!this._form.validate()||!this.expressionGrid.validate()?(f.set(this._showCreditsLink,"color","grey"),f.set(this._showCreditsLink,"cursor","default")):(f.set(this._showCreditsLink,"color",""),f.set(this._showCreditsLink,"cursor",""),g=this.expressionGrid.get("expressionMap"),
c.expressions=m.toJson(g.expressions),e=[],e=b.map(g.inputLayers,function(a){return G.constructAnalysisInputLyrObj(a)},this),c.inputLayers=m.toJson(e),this.returnFeatureCollection||(c.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.context=m.toJson({extent:this.map.extent._normalize(!0)})),this.returnFeatureCollection&&(g={outSR:this.map.spatialReference},this.showChooseExtent&&(g.extent=this.map.extent._normalize(!0)),
c.context=m.toJson(g)),this.getCreditsEstimate(this.toolName,c).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_save:function(){},_buildUI:function(){var c=!0;this.signInPromise.then(a.hitch(this,G.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("analysisLayer")&&this.get("analysisLayers")&&this.set("analysisLayer",this.analysisLayers[0]),G.populateAnalysisLayers(this,
"analysisLayer","analysisLayers"));G.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),c=!1);this._updateAnalysisLayerUI(c);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;G.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,
username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections()},_handleUpdateExpressions:function(a){1<a.length?(f.set(this._showCreditsLink,"color",""),f.set(this._showCreditsLink,"cursor","")):(f.set(this._showCreditsLink,"color","grey"),f.set(this._showCreditsLink,"cursor","default"))},_updateAnalysisLayerUI:function(b){this.analysisLayer&&
(b&&(this.outputLayerName=e.substitute(this.i18n.outputLayerName,{analysisLayerName:this.analysisLayer.name})),this._outputLayerInput.set("value",this.outputLayerName));c.set(this._findExpLabel,"innerHTML",this.i18n.findExpLabel);this.expressionGrid&&(this.expressionGrid.destroy(),this.expressionGrid=null);this.expressionGrid=new L({analysisLayer:this.analysisLayer,inputLayers:this.inputLayers,allowAllInputOperands:!1,primaryActionButttonClass:this.get("primaryActionButttonClass"),showReadyToUseLayers:this.get("showReadyToUseLayers"),
owningWidget:this},n.create("div",{style:"width:100%;"},this._expressionGridTd));this.expressionGrid.on("update-expressions",a.hitch(this,this._handleUpdateExpressions))},_handleAnalysisLayerChange:function(a){"browse"===a?this.showReadyToUseLayersDialog(!0):(this.analysisLayer=this.analysisLayers[a],this._updateAnalysisLayerUI(!0))},showReadyToUseLayersDialog:function(a){this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query"));this._browsedlg.browseItems.set("query",this._analysisquery);
this._isAnalysisSelect=a;this._browsedlg.show()},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_handleBrowseItemsSelect:function(c){c&&c.selection&&G.addAnalysisReadyLayer({item:c.selection,layers:this._isAnalysisSelect?this.analysisLayers:this.inputLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this.layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(){this._isAnalysisSelect&&
(this.analysisLayer=this.analysisLayers[this._analysisSelect.get("value")],this.inputLayers[this._analysisSelect.get("value")]||this.inputLayers.push(this.analysisLayer),this._updateAnalysisLayerUI(!0))}))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setInputLayersAttr:function(a){this.inputLayers=a},_getInputLayersAttr:function(){return this.inputLayers},
_setAnalysisLayerAttr:function(a){this.analysisLayer=a},_getAnalysisLayerAttr:function(){return this.analysisLayer},_setAnalysisLayersAttr:function(a){this.analysisLayers=a},validateServiceName:function(a){return G.validateServiceName(a,{textInput:this._outputLayerInput})},_setPrimaryActionButttonClassAttr:function(a){this.primaryActionButttonClass=a},_getPrimaryActionButttonClassAttr:function(){return this.primaryActionButttonClass},_connect:function(a,c,b){this._pbConnects.push(l.connect(a,c,b))}});
p("extend-esri")&&a.setObject("dijit.analysis.FindExistingLocations",h,M);return h})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(h,d,a,b,l,m,p,r){h=h(r,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(a,b,c){this.colorRange=a;this.sizeRange=b;this.alphaRange=c},getAgedSymbol:function(b,f){var c=f.getLayer(),n=f.attributes;b=m.fromJson(b.toJson());
var d=c._map.timeExtent,l=d.startTime,d=d.endTime;if(!l||!d)return b;l=l.getTime();d=d.getTime();c=new Date(n[c._startTimeField]);c=c.getTime();c<l&&(c=l);l=d===l?1:(c-l)/(d-l);if(c=this.sizeRange)n=c[0],d=c[1],c=Math.abs(d-n)*l,this._setSymbolSize(b,n<d?n+c:n-c);if(c=this.colorRange){var d=c[0],s=c[1],k=Math.round,n=new a,g=d.r,q=s.r,c=Math.abs(q-g)*l;n.r=k(g<q?g+c:g-c);g=d.g;q=s.g;c=Math.abs(q-g)*l;n.g=k(g<q?g+c:g-c);g=d.b;q=s.b;c=Math.abs(q-g)*l;n.b=k(g<q?g+c:g-c);d=d.a;s=s.a;c=Math.abs(s-d)*l;
n.a=d<s?d+c:d-c;b.setColor(n)}n=b.color;if((c=this.alphaRange)&&n)d=c[0],s=c[1],c=Math.abs(s-d)*l,n.a=d<s?d+c:d-c;return b},toJson:function(){var a={};this.sizeRange&&(a.sizeRange=this.sizeRange);this.colorRange&&(a.colorRange=[p.toJsonColor(this.colorRange[0]),p.toJsonColor(this.colorRange[1])]);this.alphaRange&&(a.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return a}});b("extend-esri")&&d.setObject("renderer.TimeRampAger",h,l);return h})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(h,d,a,b,l,m,p,r){h=h(r,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(a,b,c,n,l){this.values=[];this._symbols={};this.infos=[];a&&!a.declaredClass?(b=a,this.defaultSymbol=(a=b.defaultSymbol)&&(a.declaredClass?a:p.fromJson(a)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,b.backgroundFillSymbol&&(this.backgroundFillSymbol=p.fromJson(b.backgroundFillSymbol)),
d.forEach(b.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=a,this.attributeField=b,this.attributeField2=c,this.attributeField3=n,this.fieldDelimiter=l);this._multiple=!!this.attributeField2},addValue:function(b,f){var c=a.isObject(b)?b:{value:b,symbol:f};this._addValueInfo(c)},removeValue:function(a){var b=d.indexOf(this.values,a);-1!==b&&(this.values.splice(b,1),delete this._symbols[a],this.infos.splice(b,1))},getUniqueValueInfo:function(b){var f=this.attributeField,c=b.attributes,
n,d;this._multiple?(b=this.attributeField2,n=this.attributeField3,d=[],f&&d.push(c[f]),b&&d.push(c[b]),n&&d.push(c[n]),f=d.join(this.fieldDelimiter||"")):f=a.isFunction(f)?f(b):c[f];return this._symbols[f]},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},_addValueInfo:function(a){var b=a.value;this.values.push(b);this.infos.push(a);var c=a.symbol;c&&!c.declaredClass&&(a.symbol=p.fromJson(c));this._symbols[b]=a},toJson:function(){var b=m.fixJson,f;f={type:"uniqueValue",
field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:d.map(this.infos||[],function(c){c=a.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return b(c)})};this.backgroundFillSymbol&&(f.backgroundFillSymbol=this.backgroundFillSymbol.toJson());f=a.mixin(this.inherited(arguments),f);return b(f)}});b("extend-esri")&&a.setObject("renderer.UniqueValueRenderer",
h,l);return h})},"dijit/layout/AccordionContainer":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,
A){u=a("dijit.layout._AccordionButton",[g,w,v],{templateString:A,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");m.set(this.titleTextNode,"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",
m.get(this.titleTextNode,"id"));l.setSelectable(this.domNode,!1)},getTitleHeight:function(){return e.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);t.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",a?"true":"false");this.focusNode.setAttribute("tabIndex",
a?"0":"-1")}});n("dojo-bidi")&&u.extend({_setLabelAttr:function(a){this._set("label",a);m.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);m.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var E=a("dijit.layout._AccordionInnerContainer"+(n("dojo-bidi")?"_NoBidi":""),[g,v],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=r.place("\x3cdiv class\x3d'"+
this.baseClass+"' role\x3d'presentation'\x3e",this.contentWidget.domNode,"after");var a=this.contentWidget,b=c.isString(this.buttonWidget)?c.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=r.place("\x3cdiv class\x3d'dijitAccordionChildWrapper' role\x3d'tabpanel' style\x3d'display:none'\x3e",
this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);r.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",c.hitch(this,function(b,c,g){a.set("label",g)})),b.watch("tooltip",c.hitch(this,function(b,c,g){a.set("title",g)})),b.watch("iconClass",c.hitch(this,function(b,c,g){a.set("iconClass",g)}))]},_setSelectedAttr:function(a){this._set("selected",
a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();d.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});n("dojo-bidi")&&(E=a("dijit.layout._AccordionInnerContainer",E,
{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,g){a.set("textDir",g)}))}}));a=a("dijit.layout.AccordionContainer",z,{duration:s.defaultDuration,buttonWidget:u,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&
this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,c=e.getMarginExtents(b),b=e.getPadBorderExtents(b),g=a._wrapperWidget.containerNode,k=e.getMarginExtents(g),g=e.getPadBorderExtents(g),f=this._contentBox,n=0;d.forEach(this.getChildren(),function(b){b!=a&&(n+=e.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=f.h-n-c.h-b.h-k.h-g.h-a._buttonWidget.getTitleHeight();this._containerContentBox=
{h:this._verticalSpace,w:this._contentBox.w-c.w-b.w-k.w-g.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=E({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);r.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(r.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);p.remove(a.domNode,
"dijitHidden");this.inherited(arguments)},getChildren:function(){return d.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();d.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},
_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(a,c,g){8>n("ie")&&(g=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var k=this;if(a){a._wrapperWidget.set("selected",!0);var f=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}c&&(c._wrapperWidget.set("selected",!1),g||this._hideChild(c));if(g){var d=a._wrapperWidget.containerNode,q=c._wrapperWidget.containerNode;g=a._wrapperWidget.containerNode;
a=e.getMarginExtents(g);g=e.getPadBorderExtents(g);var l=a.h+g.h;q.style.height=k._verticalSpace-l+"px";this._animation=new b.Animation({node:d,duration:this.duration,curve:[1,this._verticalSpace-l-1],onAnimate:function(a){a=Math.floor(a);d.style.height=a+"px";q.style.height=k._verticalSpace-l-a+"px"},onEnd:function(){delete k._animation;d.style.height="auto";c._wrapperWidget.containerNode.style.display="none";q.style.height="auto";k._hideChild(c)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return f},
_onKeyDown:function(a,b){if(!this.disabled&&!(a.altKey||!b&&!a.ctrlKey)){var c=a.keyCode;if(b&&(c==f.LEFT_ARROW||c==f.UP_ARROW)||a.ctrlKey&&c==f.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(b&&(c==f.RIGHT_ARROW||c==f.DOWN_ARROW)||a.ctrlKey&&(c==f.PAGE_DOWN||c==f.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});n("dijit-legacy-requires")&&k(0,function(){h(["dijit/layout/AccordionPane"])});a._InnerContainer=
E;a._Button=u;return a})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put ./util/misc dojo/_base/Deferred dojo/_base/sniff".split(" "),function(h,d,a,b,l,m,p,r){function e(a){a.preventDefault()}var f={checkbox:1,radio:1,button:1},c=/\bdgrid-cell\b/,n=/\bdgrid-row\b/,u=h("dgrid.Keyboard",null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=b.mixin({},
u.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=b.mixin({},u.defaultHeaderKeyMap))},postCreate:function(){function b(a){var c=a.target;return c.type&&(!f[c.type]||32==a.keyCode)}function g(k){function f(){e._focusedHeaderNode&&(e._focusedHeaderNode.tabIndex=-1);if(e.showHeader){if(q)for(var a=0,b,c=e.headerNode.getElementsByTagName("th");b=c[a];++a){if(l.test(b.className)){e._focusedHeaderNode=w=b;break}}else e._focusedHeaderNode=w=e.headerNode;w&&(w.tabIndex=e.tabIndex)}}var q=e.cellNavigation,
l=q?c:n,m=k===e.headerNode,w=k;m?(f(),d.after(e,"renderHeader",f,!0)):d.after(e,"renderArray",function(a){return r.when(a,function(a){var b=e._focusedNode||w;if(l.test(b.className)&&p.contains(k,b))return a;for(var c=0,g=k.getElementsByTagName("*"),f;f=g[c];++c)if(l.test(f.className)){b=e._focusedNode=f;break}b.tabIndex=e.tabIndex;return a})});e._listeners.push(a(k,"mousedown",function(a){b(a)||e._focusOnNode(a.target,m,a)}));e._listeners.push(a(k,"keydown",function(a){if(!a.metaKey&&!a.altKey){var c=
e[m?"headerKeyMap":"keyMap"][a.keyCode];c&&!b(a)&&c.call(e,a)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(g(this.headerNode),a(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})}));g(this.contentNode);this._debouncedEnsureRowScroll=p.debounce(this._ensureRowScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,c=document.activeElement===this._focusedNode,g=this[this.cellNavigation?"cell":"row"](this._focusedNode),
e=g.row||g,k;a=a.element||a;if(a===e.element){k=this.down(e,!0);if(!k||k.element===a)k=this.up(e,!0);this._removedFocus={active:c,rowId:e.id,columnId:g.column&&g.column.id,siblingId:!k||k.element===a?void 0:k.id};setTimeout(function(){b._removedFocus&&b._restoreFocus(e.id)},0);this._focusedNode=null}this.inherited(arguments)},insertRow:function(a){var b=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(b);return b},_restoreFocus:function(a){var b=this._removedFocus,
c;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(c=this.cell(a,b.columnId))&&c.element&&(a=c);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(m(a.element,".dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,b,c){return d.after(this[c?"headerKeyMap":
"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_focusOnNode:function(g,e,k){var f="_focused"+(e?"Header":"")+"Node",d=this[f],q=this.cellNavigation?"cell":"row",w=this[q](g),v,s,x,h,p;if(g=w&&w.element){if(this.cellNavigation){v=g.getElementsByTagName("input");p=0;for(x=v.length;p<x;p++)if(s=
v[p],(-1!=s.tabIndex||"_dgridLastValue"in s)&&!s.disabled){8>l("ie")&&(s.style.position="relative");s.focus();8>l("ie")&&(s.style.position="");h=!0;break}}null!==k&&(k=b.mixin({grid:this},k),k.type&&(k.parentType=k.type),k.bubbles||(k.bubbles=!0));d&&(m(d,"!dgrid-focus[!tabIndex]"),8>l("ie")&&(d.style.position=""),k&&(k[q]=this[q](d),a.emit(d,"dgrid-cellfocusout",k)));d=this[f]=g;k&&(k[q]=w);f=this.cellNavigation?c:n;!h&&f.test(g.className)&&(8>l("ie")&&(g.style.position="relative"),g.tabIndex=this.tabIndex,
g.focus());m(g,".dgrid-focus");k&&a.emit(d,"dgrid-cellfocusin",k);this.cellNavigation&&((this.columnSets||1<this.subRows.length)&&!e)&&this._debouncedEnsureRowScroll(w.row.element)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){(a=a||this._focusedNode)?this._focusOnNode(a,!1):this.contentNode.focus()}}),t=u.moveFocusVertical=function(a,b){var c=this.cellNavigation,g=this[c?"cell":"row"](a),g=c&&g.column.id,e=this.down(this._focusedNode,b,!0);c&&(e=this.cell(e,
g));this._focusOnNode(e,!1,a);a.preventDefault()};h=u.moveFocusUp=function(a){t.call(this,a,-1)};var s=u.moveFocusDown=function(a){t.call(this,a,1)},k=u.moveFocusPageUp=function(a){t.call(this,a,-this.pageSkip)},g=u.moveFocusPageDown=function(a){t.call(this,a,this.pageSkip)},q=u.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a);this._focusOnNode(this.right(this["_focused"+(c?"Header":"")+"Node"],b),c,a);a.preventDefault()}},w=u.moveFocusLeft=function(a){q.call(this,a,-1)},
v=u.moveFocusRight=function(a){q.call(this,a,1)},z=u.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},x=u.moveHeaderFocusHome=function(a){z.call(this,a,!0)},A=u.moveFocusEnd=function(a,c){var g=this,e=this.cellNavigation,k=this.contentNode,f=k.scrollTop+(c?0:k.scrollHeight),k=k[c?"firstChild":"lastChild"],n=-1<k.className.indexOf("dgrid-preload"),q=n?k[(c?"next":"previous")+"Sibling"]:
k,m=q.offsetTop+(c?0:q.offsetHeight),w;if(n){for(;q&&0>q.className.indexOf("dgrid-row");)q=q[(c?"next":"previous")+"Sibling"];if(!q)return}!n||1>k.offsetHeight?(e&&(q=this.cell(q,this.cell(a).column.id)),this._focusOnNode(q,!1,a)):(l("dom-addeventlistener")||(a=b.mixin({},a)),w=d.after(this,"renderArray",function(b){w.remove();return r.when(b,function(b){b=b[c?0:b.length-1];e&&(b=g.cell(b,g.cell(a).column.id));g._focusOnNode(b,!1,a)})}));f===m&&a.preventDefault()},E=u.moveFocusHome=function(a){A.call(this,
a,!0)};u.defaultKeyMap={32:e,33:k,34:g,35:A,36:E,37:w,38:h,39:v,40:s};u.defaultHeaderKeyMap={32:e,35:z,36:x,37:w,39:v};return u})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(h,d,a,b,l,m){return h([m,l],{_onMap:function(a){var b=this.constructor._onMap,e;if(!b||!b.FINAL)delete this.constructor._onMap,b=this.registerConnectEvents(),b.FINAL=!0;a=a.toLowerCase();b[a]?e=this[b[a].method]:(a=this._onCamelCase(a),
this[a]&&(e=a));return e},on:function(a,d){var e=this._onMap(a),f=a.replace(/\-/g,""),c="on"+f in this.domNode;return e||!c?this.inherited(arguments):this.own(b(this.domNode,f,d))[0]},emit:function(a,b,e){var f,c,n,l=a.toLowerCase(),m=this.constructor._onMap||this.registerConnectEvents();c=this[this._onMap(l)];b=b||{};b.target||(b.target=this);c&&(m&&m[l])&&(this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},m[l].argKeys)(b),n=d.mixin({},arguments),n[2]=f,n[0]=m[l].name.replace(/^on/,
""));return this.inherited(n||arguments)}})})},"esri/tasks/geoenrichment/IntersectingGeography":function(){define(["../../declare"],function(h){return h("esri.tasks.geoenrichment.IntersectingGeography",null,{name:null,geometryType:"esriGeometryPoint",spatialRel:"esriSpatialRelIntersects",outFields:null,constructor:function(d){d&&(this.name=d.name||null,this.outFields=d.outFields||null,d.intersectionInfo?(d.intersectionInfo.geometryType&&(this.geometryType=d.intersectionInfo.geometryType),d.intersectionInfo.spatialRel&&
(this.spatialRel=d.intersectionInfo.spatialRel)):(d.geometryType&&(this.geometryType=d.geometryType),d.spatialRel&&(this.spatialRel=d.spatialRel)))},toJson:function(){return{name:this.name,outFields:this.outFields,intersectionInfo:{geometryType:this.geometryType,spatialRel:this.spatialRel}}}})})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(h,d,a,b,
l,m,p){h=h(p,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(a,b){b&&(b.imageParameters&&b.imageParameters.extent)&&(this.initialExtent=this.fullExtent=b.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=d.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(b,e,f,c){var n=b.spatialReference.wkid;c(this._url.path+"?"+l.objectToQuery(d.mixin(this._params,{f:"image",bbox:a.toJson(b.toJson()),bboxSR:n,
imageSR:n,size:e+","+f})))}});b("extend-esri")&&d.setObject("tasks._GPResultImageLayer",h,m);return h})},"xstyle/has-class":function(){define(["dojo/has"],function(h){var d={};return function(){for(var a,b=arguments,l=0;l<b.length;l++)if(a=b[l],!d[a]){d[a]=!0;var m=a.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),p=h(m[2]),r=-m[4];if((0<r?r<=p&&(-m[5]||r)>=p:!!p)==!m[1])document.documentElement.className+=" has-"+a}}})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),
function(h,d,a,b,l,m,p,r,e,f){var c={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},n={style:c.STYLE_SOLID,color:[0,0,0,0.25]};h=h(r,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",
_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(b,c,f){b?d.isString(b)?(this.style=b,void 0!==c&&(this.outline=c),void 0!==f&&(this.color=f)):this.style=p.valueOf(this._styles,b.style):(d.mixin(this,n),this.outline=new e(this.outline),this.color=new a(this.color))},setStyle:function(a){this.style=
a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var a=this.style;return a===c.STYLE_NULL?null:a===c.STYLE_SOLID?this.color:d.mixin({},l.defaultPattern,{src:f.toUrl("../images/symbol/sfs/"+a+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return p.fixJson(d.mixin(this.inherited("toJson",
arguments),{type:"esriSFS",style:this._styles[this.style]}))}});d.mixin(h,c);h.defaultProps=n;b("extend-esri")&&(d.setObject("symbol.SimpleFillSymbol",h,m),m.symbol.defaultSimpleFillSymbol=n);return h})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(h,d,a,b,l,m,p,r,e,f,c){function n(a,b,g,e){e=this.grid.isRTL?"right":"left";
var f=".dgrid-expando-icon";b&&(f+=".ui-icon.ui-icon-triangle-1-"+(g?"se":"e"));a=c("div"+f+"[style\x3dmargin-"+e+": "+a*(this.indentWidth||9)+"px; float: "+e+"]");a.innerHTML="\x26nbsp;";return a}function u(a){var b=this,g=this.style.height;g&&(this.style.display="0px"==g?"none":"block");a&&(c(this,".dgrid-tree-resetting"),setTimeout(function(){c(b,"!dgrid-tree-resetting")}));this.style.height=""}function t(b){var k=b.renderCell||e.defaultRenderCell,g,q;b||(b={});b.shouldExpand=b.shouldExpand||function(a,
b,c){return c};p.after(b,"init",function(){var e=b.grid,k=".dgrid-content .dgrid-column-"+b.id,h=[];e.cleanEmptyObservers=!1;if(!e.store)throw Error("dgrid tree column plugin requires a store to operate.");b.renderExpando||(b.renderExpando=n);h.push(e.on(b.expandOn||".dgrid-expando-icon:click,"+k+":dblclick,"+k+":keydown",function(a){var b=e.row(a);(!e.store.mayHaveChildren||e.store.mayHaveChildren(b.data))&&(("keydown"!=a.type||32==a.keyCode)&&!("dblclick"==a.type&&q&&1<q.count&&b.id==q.id&&-1<a.target.className.indexOf("dgrid-expando-icon")))&&
e.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(q&&q.id==e.row(a).id?q.count++:q={id:e.row(a).id,count:1})}));r("touch")&&h.push(e.on(f.selector(k,f.dbltap),function(){e.expand(this)}));e._expanded||(e._expanded={});h.push(p.after(e,"insertRow",function(a){var c=this.row(a);b.shouldExpand(c,g,this._expanded[c.id])&&this.expand(a,!0,!0);return a}));h.push(p.before(e,"removeRow",function(a,b){var g=a.connected;g&&(l("\x3e.dgrid-row",g).forEach(function(a){e.removeRow(a,!0)}),b||c(g,
"!"))}));b.collapseOnRefresh&&h.push(p.after(e,"cleanup",function(){this._expanded={}}));e._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};e.expand=function(g,k,f){var n=g.element?g:e.row(g),d=r("transitionend");g=new a;var q=g.promise;g.resolve();g=n.element;g=-1<g.className.indexOf("dgrid-expando-icon")?g:l(".dgrid-expando-icon",g)[0];f=f||!1===b.enableTransitions;if(g&&g.mayHaveChildren&&(f||k!==!!this._expanded[n.id])){var v=void 0===k?!this._expanded[n.id]:
k;c(g,".ui-icon-triangle-1-"+(v?"se":"e")+"!ui-icon-triangle-1-"+(v?"e":"se"));k=n.element;var h=k.connected,p,t,z={originalQuery:this.query};if(!h){var h=z.container=k.connected=c(k,"+div.dgrid-tree-container"),F=function(a){return e.store.getChildren(n.data,a)};b.allowDuplicates&&(z.parentId=n.id);"level"in g&&(F.level=g.level);q=q.then(function(){if(e.renderQuery)return e.renderQuery(F,z);var b=c(h,"div"),g=e.renderArray(F(z),b,"level"in F?{queryLevel:F.level}:{});a.when(g,function(){c(b,"!")});
return g});d?m(h,d,u):u.call(h)}h.hidden=!v;p=h.style;!d||f?(p.display=v?"block":"none",p.height=""):(v?(p.display="block",t=h.scrollHeight,p.height="0px"):(c(h,".dgrid-tree-resetting"),p.height=h.scrollHeight+"px"),setTimeout(function(){c(h,"!dgrid-tree-resetting");p.height=v?t?t+"px":"auto":"0px"}));v?this._expanded[n.id]=!0:delete this._expanded[n.id]}return q};p.after(b,"destroy",function(){d.forEach(h,function(a){a.remove()});delete e.expand;delete e._calcRowHeight})});b.renderCell=function(a,
e,f,n){var d=b.grid,q=Number(n&&n.queryLevel)+1,l=!d.store.mayHaveChildren||d.store.mayHaveChildren(a),m=n.parentId,q=g=isNaN(q)?0:q,d=b.renderExpando(q,l,d._expanded[(m?m+"-":"")+d.store.getIdentity(a)],a);d.level=q;d.mayHaveChildren=l;(a=k.call(b,a,e,f,n))&&a.nodeType?(c(f,d),c(f,a)):f.insertBefore(d,f.firstChild)};return b}t.defaultRenderExpando=n;b.getObject("dgrid.tree",!0);return dgrid.tree=t})},"esri/layers/RenderMode":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "),
function(h,d,a,b,l,m,p){d=d(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(h._scopeName||"dojo")+"IoScript"},initialize:function(a){this.map=a;this._init=!0},startup:function(){},propertyChangeHandler:function(a){},destroy:function(){this._init=!1},drawFeature:function(a){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(a){(a=this._featureMap[a])&&a._count++},_decRefCount:function(a){(a=this._featureMap[a])&&a._count--},
_getFeature:function(a){return this._featureMap[a]},_addFeatureIIf:function(a,b){var f=this._featureMap,c=f[a],n=this.featureLayer;c||(f[a]=b,n._add(b),b._count=0);return c||b},_removeFeatureIIf:function(a){var b=this._featureMap[a],f=this.featureLayer;if(b){if(b._count)return;delete this._featureMap[a];f._remove(b)}return b},_clearIIf:function(){var a;a=this.featureLayer;var b=a.graphics,f=a._selectedFeatures,c=a.objectIdField;for(a=b.length-1;0<=a;a--){var n=b[a],d=n.attributes[c];d in f?n._count=
1:(n._count=0,this._removeFeatureIIf(d))}},_isPending:function(a){return m[this._prefix+a]?!0:!1},_cancelPendingRequest:function(a,b){if(a=a||m[this._prefix+b])try{a.cancel(),m._validCheck(a)}catch(f){}},_purgeRequests:function(){m._validCheck(null)},_toggleVisibility:function(a){var b=this.featureLayer,f=b.graphics,c=a?"show":"hide",n,d=f.length;a=a&&b._ager;for(n=0;n<d;n++){var l=f[n];l[c]();a&&b._repaint(l)}},_applyTimeFilter:function(a){var e=this.featureLayer;if(e.timeInfo&&!e.suspended){a||
e._fireUpdateStart();var f=e._trackManager;f&&f.clearTracks();var c=e.getTimeDefinition(),n=e._getOffsettedTE(e._mapTimeExtent);n?(n=e._getTimeOverlap(c,n))?(c=e._filterByTime(e.graphics,n.startTime,n.endTime),f&&f.addFeatures(c.match),b.forEach(c.match,function(a){var b=a._shape;a.visible||(a.show(),(b=a._shape)&&b._moveToFront());e._ager&&b&&e._repaint(a)}),b.forEach(c.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(f&&f.addFeatures(e.graphics),this._toggleVisibility(!0));
f&&(f.moveLatestToFront(),f.drawTracks());a||e._fireUpdateEnd()}}});l("extend-esri")&&a.setObject("layers._RenderMode",d,p);return d})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(h,d,a,b,l,m){h=h(m,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return l.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});a("extend-esri")&&
d.setObject("layers.TableDataSource",h,b);return h})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(h,d,a,b,l,m,p,r){h=h(r,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,b){a&&d.isString(a)&&(this._url=p.urlToObject(this.url=a));b&&b.requestOptions&&(this.requestOptions=b.requestOptions);this.normalization=!0;this._errorHandler=
d.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},_encode:function(b,f,c){var n,l,m={},h,k;for(h in b)if("declaredClass"!==h&&(n=b[h],l=typeof n,null!==n&&void 0!==n&&"function"!==l))if(d.isArray(n)){m[h]=[];k=n.length;for(l=0;l<k;l++)m[h][l]=this._encode(n[l])}else"object"===l?n.toJson&&(l=n.toJson(c&&c[h]),"esri.tasks.FeatureSet"===n.declaredClass&&
l.spatialReference&&(l.sr=l.spatialReference,delete l.spatialReference),m[h]=f?l:a.toJson(l)):m[h]=n;return m},_successHandler:function(a,b,c,n){b&&this[b].apply(this,a);c&&c.apply(null,a);n&&m._resDfd(n,a)},_errorHandler:function(a,b,c){this.onError(a);b&&b(a);c&&c.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}});b("extend-esri")&&(l.Task=h);return h})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker",
"./_DateTimeTextBox"],function(h,d,a,b,l){return h("dijit.form.TimeTextBox",l,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:b,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(a){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),a.keyCode){case d.ENTER:case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:break;default:this.defer(function(){var a=this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():
"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(h,d,a,b,l){h=h([l],{declaredClass:"esri.layers.InheritedDomain"});a("extend-esri")&&d.setObject("layers.InheritedDomain",h,b);return h})},"dojo/data/ObjectStore":function(){define("../_base/lang ../Evented ../_base/declare ../_base/Deferred ../_base/array ../_base/connect ../regexp".split(" "),function(h,
d,a,b,l,m,p){function r(a){return"*"==a?".*":"?"==a?".":a}return a("dojo.data.ObjectStore",[d],{objectStore:null,constructor:function(a){this._dirtyObjects=[];a.labelAttribute&&(a.labelProperty=a.labelAttribute);h.mixin(this,a)},labelProperty:"label",getValue:function(a,b,c){return"function"===typeof a.get?a.get(b):b in a?a[b]:c},getValues:function(a,b){var c=this.getValue(a,b);return c instanceof Array?c:void 0===c?[]:[c]},getAttributes:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&!("_"==
c.charAt(0)&&"_"==c.charAt(1))&&b.push(c);return b},hasAttribute:function(a,b){return b in a},containsValue:function(a,b,c){return-1<l.indexOf(this.getValues(a,b),c)},isItem:function(a){return"object"==typeof a&&a&&!(a instanceof Date)},isItemLoaded:function(a){return a&&"function"!==typeof a.load},loadItem:function(a){var f;"function"===typeof a.item.load?b.when(a.item.load(),function(b){f=b;var n=b instanceof Error?a.onError:a.onItem;n&&n.call(a.scope,b)}):a.onItem&&a.onItem.call(a.scope,a.item);
return f},close:function(a){return a&&a.abort&&a.abort()},fetch:function(a){function f(b){a.onError&&a.onError.call(n,b,a)}a=h.delegate(a,a&&a.queryOptions);var c=this,n=a.scope||c,d=a.query;if("object"==typeof d){var d=h.delegate(d),m;for(m in d){var s=d[m];"string"==typeof s&&(d[m]=RegExp("^"+p.escapeString(s,"*?\\").replace(/\\.|\*|\?/g,r)+"$",a.ignoreCase?"mi":"m"),d[m].toString=function(a){return function(){return a}}(s))}}var k=this.objectStore.query(d,a);b.when(k.total,function(c){b.when(k,
function(b){a.onBegin&&a.onBegin.call(n,c||b.length,a);if(a.onItem)for(var k=0;k<b.length;k++)a.onItem.call(n,b[k],a);a.onComplete&&a.onComplete.call(n,a.onItem?null:b,a);return b},f)},f);a.abort=function(){k.cancel&&k.cancel()};k.observe&&(this.observing&&this.observing.cancel(),this.observing=k.observe(function(a,b,k){if(-1==l.indexOf(c._dirtyObjects,a))if(-1==b)c.onNew(a);else if(-1==k)c.onDelete(a);else for(var e in a)if(e!=c.objectStore.idProperty)c.onSet(a,e,null,a[e])},!0));this.onFetch(k);
a.store=this;return a},getFeatures:function(){return{"dojo.data.api.Read":!!this.objectStore.get,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!!this.objectStore.put,"dojo.data.api.Notification":!0}},getLabel:function(a){if(this.isItem(a))return this.getValue(a,this.labelProperty)},getLabelAttributes:function(a){return[this.labelProperty]},getIdentity:function(a){return this.objectStore.getIdentity?this.objectStore.getIdentity(a):a[this.objectStore.idProperty||"id"]},getIdentityAttributes:function(a){return[this.objectStore.idProperty]},
fetchItemByIdentity:function(a){var f;b.when(this.objectStore.get(a.identity),function(b){f=b;a.onItem.call(a.scope,b)},function(b){a.onError.call(a.scope,b)});return f},newItem:function(a,b){if(b){var c=this.getValue(b.parent,b.attribute,[]),c=c.concat([a]);a.__parent=c;this.setValue(b.parent,b.attribute,c)}this._dirtyObjects.push({object:a,save:!0});this.onNew(a);return a},deleteItem:function(a){this.changing(a,!0);this.onDelete(a)},setValue:function(a,b,c){var n=a[b];this.changing(a);a[b]=c;this.onSet(a,
b,n,c)},setValues:function(a,b,c){if(!h.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,c)},unsetAttribute:function(a,b){this.changing(a);var c=a[b];delete a[b];this.onSet(a,b,c,void 0)},changing:function(a,b){a.__isDirty=!0;for(var c=0;c<this._dirtyObjects.length;c++){var n=this._dirtyObjects[c];if(a==n.object){b&&(n.object=!1,this._saveNotNeeded||(n.save=!0));return}}n=a instanceof Array?[]:{};for(c in a)a.hasOwnProperty(c)&&(n[c]=a[c]);this._dirtyObjects.push({object:!b&&
a,old:n,save:!this._saveNotNeeded})},save:function(a){a=a||{};var f,c=[],n=[],d=this,l=this._dirtyObjects,h=l.length;try{m.connect(a,"onError",function(){if(!1!==a.revertOnError){var b=l;l=n;d.revert();d._dirtyObjects=b}else d._dirtyObjects=l.concat(n)});if(this.objectStore.transaction)var k=this.objectStore.transaction();for(var g=0;g<l.length;g++){var q=l[g],w=q.object,v=q.old;delete w.__isDirty;w?f=this.objectStore.put(w,{overwrite:!!v}):"undefined"!=typeof v&&(f=this.objectStore.remove(this.getIdentity(v)));
n.push(q);l.splice(g--,1);b.when(f,function(b){--h||a.onComplete&&a.onComplete.call(a.scope,c)},function(b){h=-1;a.onError.call(a.scope,b)})}k&&k.commit()}catch(p){a.onError.call(a.scope,value)}},revert:function(){for(var a=this._dirtyObjects,b=a.length;0<b;){b--;var c=a[b],n=c.object,c=c.old;if(n&&c){for(var d in c)c.hasOwnProperty(d)&&n[d]!==c[d]&&(this.onSet(n,d,n[d],c[d]),n[d]=c[d]);for(d in n)c.hasOwnProperty(d)||(this.onSet(n,d,n[d]),delete n[d])}else if(c)this.onNew(c);else this.onDelete(n);
delete (n||c).__isDirty;a.splice(b,1)}},isDirty:function(a){return!a?!!this._dirtyObjects.length:a.__isDirty},onSet:function(){},onNew:function(){},onDelete:function(){},onFetch:function(a){}})})},"esri/dijit/analysis/utils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/_base/json dojo/dom-attr dojo/has dojo/i18n dojo/io-query dojo/i18n!../../nls/jsapi dojo/json dojo/string dojo/query dojo/date/locale dojo/dom-style dojo/dom-class dojo/dom-construct dojo/Deferred dojo/number dojo/_base/window dojo/when dojo/data/ItemFileWriteStore dijit/registry dijit/Dialog dijit/form/CheckBox ../../kernel ../../lang ../../request ./HelpWindow ../../tasks/query ../../dijit/BrowseItems ../../layers/FeatureLayer ./PluginAnalysisLayers ../../tasks/Geoprocessor ../../dijit/SingleFilter".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L){h={};d.mixin(h,{_helpDialog:null,i18n:null,initHelpLinks:function(a,c,g){this._helpDialog||(this._helpDialog=new M);if(a){var e=E.byNode(a),f=e?e.get("helpFileName"):g&&g.helpFileName?g.helpFileName:null,n=e?e.get("isSingleTenant"):g&&g.isSingleTenant?g.isSingleTenant:!1;t("[esriHelpTopic]",a).forEach(function(e,q,m){e&&(k.set(e,"display",!I.isDefined(c)||!0===c?"":"none"),b.connect(e,"onclick",d.hitch(this,function(b){l.stop(b);
this._helpDialog.show(b,{helpId:p.get(e,"esriHelpTopic"),helpFileName:f,analysisGpServer:g&&g.analysisGpServer?g.analysisGpServer:null,helpParentNode:a,isPortal:n})})))},this)}},constructAnalysisFeatColl:function(a){var b={},c;b.featureCollection=a.layerDefinition;for(c in b.featureCollection)b.featureCollection.hasOwnProperty(c)&&"objectIdField"===c&&(b.featureCollection.objectIdFieldName=d.clone(b.featureCollection.objectIdField),delete b.featureCollection.objectIdField);b.featureCollection.features=
a.featureSet.features;return b},constructAnalysisInputLyrObj:function(a){var b={},c,g=a.getMap()||a._map,k;if(a.url&&!a._collection){b={url:a.url};c=this.isHostedService(a.url);k=10.2<=a.version&&a._useStandardizedQueries;a.getDefinitionExpression&&a.getDefinitionExpression()?b.filter=a.getDefinitionExpression():I.isDefined(a.definitionExpression)&&""!==a.definitionExpression&&(b.filter=a.definitionExpression);if(a.useMapTime&&a.timeInfo&&g.timeExtent&&(k||c||10.2<=a.version))k="",a.timeInfo.startTimeField&&
!a.timeInfo.endTimeField?(g.timeExtent.startTime&&(k=a.timeInfo.startTimeField+" \x3e "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.startTime)+"'"),g.timeExtent.endTime&&(g.timeExtent.startTime&&(k+=" AND "),k+=a.timeInfo.startTimeField+" \x3c "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.endTime)+"'")):!a.timeInfo.startTimeField&&a.timeInfo.endTimeField?(g.timeExtent.startTime&&(k=a.timeInfo.endTimeField+" \x3e "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.startTime)+"'"),
g.timeExtent.endTime&&(g.timeExtent.startTime&&(k+=" AND "),k+=a.timeInfo.endTimeField+" \x3c "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.endTime)+"'")):a.timeInfo.startTimeField&&a.timeInfo.endTimeField&&(g.timeExtent.startTime&&(k=a.timeInfo.startTimeField+" \x3e "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.startTime)+"'"),g.timeExtent.endTime&&(g.timeExtent.startTime&&(k+=" AND "),k+=a.timeInfo.endTimeField+" \x3c "+(c?"":"timestamp ")+"'"+this.formatDate(g.timeExtent.endTime)+
"'")),b.filter=b.filter?b.filter+(" AND "+k):k;a.credential&&(b.serviceToken=a.credential.token);-1!==b.url.indexOf("?")&&(a=b.url.substring(b.url.indexOf("?")+1,b.url.length),a=f.queryToObject(a),d.mixin(b,a),b.url=b.url.substring(0,b.url.indexOf("?")))}else if(!a.url||a._collection)try{b=a.toJson()}catch(e){a._json=n.parse(a._json),b=a.toJson()}return b},formatDate:function(a){return s.format(a,{datePattern:"yyyy-MM-dd",selector:"date"})+" "+s.format(a,{selector:"time",timePattern:"HH:mm:ss"})},
isHostedService:function(a){if(!a)return!1;var b=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return b&&a},buildReport:function(b,g){var k="";g||(g={},d.mixin(g,c.analysisMsgCodes));a.forEach(b,function(b,c){var e,f,n;"string"===typeof b.message?(e=I.isDefined(g[b.messageCode])?g[b.messageCode]:b.message,k+=b.style.substring(0,b.style.indexOf("\x3c/"))+(!this._isEmptyObject(b.params)?u.substitute(e,b.params):e)+b.style.substring(b.style.indexOf("\x3c/"))):
d.isArray(b.message)&&(n=[],f=d.clone(b.style),a.forEach(b.message,function(a,c){f=f.replace(/<\//,"${"+c+"}");e=I.isDefined(g[b.messageCode+"_"+c])?g[b.messageCode+"_"+c]:a;e=!this._isEmptyObject(b.params)?u.substitute(e,b.params):e;n.push(e+"\x3c/")},this),f=u.substitute(f,n),k+=f)},this);return k},getLayerFeatureCount:function(a,b){var c=new K;c.geometry=b.geometry||"";c.where=b.where||"1\x3d1";c.geometryType=b.geometryType||"esriGeometryEnvelope";return a.queryCount(c)},createPolygonFeatureCollection:function(a){var b;
b={layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPolygon"}};b.layerDefinition={currentVersion:10.2,copyrightText:"",defaultVisibility:!0,relationships:[],isDataVersioned:!1,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,objectIdField:"OBJECTID",templates:[],type:"Feature Layer",displayField:"TITLE",visibilityField:"VISIBLE",name:a,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",
allowGeometryUpdates:!0,htmlPopupType:"",hasM:!1,hasZ:!1,globalIdField:"",supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:-1,indexes:[],types:[],drawingInfo:{renderer:{type:"simple",symbol:{color:[0,0,0,255],outline:{color:[0,0,0,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSNull"},label:"",description:""},transparency:0,labelingInfo:null,fixedSymbols:!0},fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",
length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return b},createPointFeatureCollection:function(a){var b;b={layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPoint"}};b.layerDefinition={objectIdField:"OBJECTID",templates:[],type:"Feature Layer",
drawingInfo:{renderer:{field1:"TYPEID",type:"simple",symbol:{height:24,xoffset:0,yoffset:12,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"},description:"",value:"0",label:"Stickpin"}},displayField:"TITLE",visibilityField:"VISIBLE",name:a,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",types:[],geometryType:"esriGeometryPoint",fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",
name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return b},createFolderStore:function(b,c){var g=new A({data:{identifier:"id",label:"name",items:[]}});g.newItem({name:c,id:""});a.forEach(b,function(a){g.newItem({name:a.title,id:a.id})});return g},
setupFoldersUI:function(a){a.folderSelect.set("store",a.folderStore);a.folderSelect.set("required",!0);a.folderSelect.set("searchAttr","name");I.isDefined(a.folderId)?a.folderStore.get(a.folderId).then(d.hitch(this,function(b){I.isDefined(b)?a.folderSelect.set("item",b):a.folderStore.get("").then(function(b){a.folderSelect.set("item",b)},this)})):a.folderName?a.folderStore.fetch({query:{name:a.folderName},onComplete:d.hitch(this,function(b){I.isDefined(b)&&0<b.length?a.folderSelect.set("item",b[0]):
a.folderStore.get("").then(function(b){a.folderSelect.set("item",b)},this)})}):a.username?a.folderSelect.set("displayedValue",a.username):a.folderStore.get("").then(function(b){a.folderSelect.set("item",b)},this)},_isEmptyObject:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},validateServiceName:function(a,b){var c=/(:|&|<|>|%|#|\?|\\|\"|\/|\+)/.test(a),g=!0,k,e;I.isDefined(b)&&b.textInput&&(e=b.textInput);this.initI18n();0===a.length||0===u.trim(a).length?(k=this.i18n.requiredValue,
g=!1):c?(k=this.i18n.invalidServiceName,g=!1):98<a.length?(k=this.i18n.invalidServiceNameLength,g=!1):170<encodeURIComponent(a).length&&(k=this.i18n.invalidEncodedServiceNameLength,g=!1);e&&!g&&e.set("invalidMessage",k);return g},getStepNumber:function(a){t(".esriAnalysisNumberLabel",a).forEach(function(a,b){var c=this._getNumberLabel(b);p.set(a,"innerHTML",c)},this)},_getNumberLabel:function(a){var b="";this.initI18n();switch(a){case 0:b=this.i18n.oneLabel;break;case 1:b=this.i18n.twoLabel;break;
case 2:b=this.i18n.threeLabel;break;case 3:b=this.i18n.fourLabel;break;case 4:b=this.i18n.fiveLabel;break;case 5:b=this.i18n.sixLabel;break;case 6:b=this.i18n.sevenLabel;break;case 7:b=this.i18n.eightLabel;break;case 8:b=this.i18n.nineLabel}return b},populateAnalysisLayers:function(b,c,e,f){if(b){var n=[],d=b.get(c);b._titleRow&&k.set(b._titleRow,"display","none");b._analysisLabelRow&&k.set(b._analysisLabelRow,"display","table-row");b._selectAnalysisRow&&(k.set(b._selectAnalysisRow,"display","table-row"),
g.add(b._analysisSelect.domNode,"esriTrailingMargin3"),k.set(b._analysisSelect.domNode.parentNode,"padding-bottom","1em"));b.domNode&&this.getStepNumber(b.domNode);I.isDefined(f)&&f.chooseLabel&&n.push({value:-1,label:this.i18n.chooseLabel});if(!I.isDefined(f)||!I.isDefined(f.posIncrement))I.isDefined(f)||(f={}),f.posIncrement=0;a.forEach(b.get(e),function(a,b){b+=f.posIncrement;var c={value:I.isDefined(f)&&f.chooseLabel?b+1:b,label:a.name};d&&a.name===d.name&&(c.selected=!0);n.push(c)},this);b._analysisSelect.addOption(n);
b._analysisSelect.set("required",!0)}},isValidAnalysisLayer:function(b){var c,g,k,e,f,n,d,q="",l=!0;c={isValid:l,validationMessage:q};var m,h,v=0,w=0,p=0;if(!I.isDefined(b)||!I.isDefined(b.toolName))return c;this.initI18n();c=b.toolName;g=b.featureLayers;k=b.analysisLayer;e=c.charAt(0).toLowerCase()+c.substring(1);d=this.i18n;b=b.showReadyToUseLayers||!1;a.forEach(g,function(a){"esriGeometryPoint"===a.geometryType&&(n=!0,v++);if("esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType)m=
!0;"esriGeometryPolyline"===a.geometryType&&(h=!0,p++);"esriGeometryPolygon"===a.geometryType&&(f=!0,w++)},this);-1!==a.indexOf(["CreateDriveTimeAreas","PlanRoutes","ConnectOriginsToDestinations"],c)&&(!n||k&&"esriGeometryPoint"!==k.geometryType)?(q=u.substitute(this.i18n.selectPointLayer,{toolName:d[e]}),l=!1):("AggregatePoints"===c||"InterpolatePoints"===c)&&(k&&!("esriGeometryPoint"===k.geometryType||"esriGeometryMultipoint"===k.geometryType)||!m)?(q=u.substitute(this.i18n.selectPointLayer,{toolName:d[e]}),
l=!1):"CalculateDensity"===c&&(!m&&!h||k&&!("esriGeometryPoint"===k.geometryType||"esriGeometryMultipoint"===k.geometryType||"esriGeometryPolyline"===k.geometryType))?(q=u.substitute(this.i18n.areaFeatureInvalidMsg,{toolName:d[e]}),l=!1):"FindHotSpots"===c&&(!m&&!f||k&&!("esriGeometryPoint"===k.geometryType||"esriGeometryMultipoint"===k.geometryType||"esriGeometryPolygon"===k.geometryType))?(q=u.substitute(this.i18n.hotspotsLineFeatureMsg,{toolName:d[e]}),l=!1):("OverlayLayers"===c||"AggregatePoints"===
c||"SummarizeWithin"===c||"SummarizeNearby"===c||"FindNearest"===c||"MergeLayers"===c)&&!b&&(0===g.length||1===g.length&&(g[0]===k||!I.isDefined(k)))?(q=u.substitute(this.i18n.overlayValidationMsg,{toolName:d[e]}),l=!1):"ConnectOriginsToDestinations"===c&&!b&&(0===g.length||2>v)?(q=u.substitute(this.i18n.odPointMsg,{toolName:d[e]}),l=!1):"AggregatePoints"===c&&!b&&1<g.length?(f=a.some(g,function(a){return"esriGeometryPolygon"===a.geometryType}),f||(q=u.substitute(this.i18n.aggregatePolyMsg,{toolName:d[e]}),
l=!1)):"MergeLayers"===c&&!b&&1<g.length?1<v||(1<p||1<w)||(q=this.i18n.mergeValidationMsg,l=!1):("SummarizeWithin"===c||"DissolveBoundaries"===c)&&(k&&"esriGeometryPolygon"!==k.geometryType||!f)?(q=u.substitute(this.i18n.selectPolyLayer,{toolName:d[e]}),l=!1):"ExtractData"===c?(l=a.some(g,function(a){return-1!==a.capabilities.indexOf("Extract")}))||(q=u.substitute(this.i18n.extractValidationMsg)):"ConnectOriginsToDestinations"===c&&1<g.length&&(n=a.some(g,function(a){var b=I.isDefined(k)&&k.id===
a.id;return"esriGeometryPoint"===a.geometryType&&!b}),n||(q=u.substitute(this.i18n.odPointMsg,{toolName:d[e]}),l=!1));return c={isValid:l,validationMessage:q}},initI18n:function(){this.i18n||(this.i18n={},d.mixin(this.i18n,c.common),d.mixin(this.i18n,c.analysisTools),d.mixin(this.i18n,c.analysisMsgCodes),d.mixin(this.i18n,c.browseLayersDlg),d.mixin(this.i18n,c.driveTimes))},addBrowseAnalysisDialog:function(a){var b=[];if(a&&a.widget){this.i18n||this.initI18n();b.push({label:this.i18n.categoryAll,
value:"analysis ready"});b.push({label:this.i18n.categoryBoundaries,value:"boundaries OR places"});b.push({label:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+this.i18n.subCategoryBoundaries,value:"boundaries"});b.push({label:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+this.i18n.subCategoryPlaces,value:"places"});b.push({label:this.i18n.categoryHexBins,value:"hex"});b.push({label:this.i18n.categoryTransportation,value:"transportation"});var c=z.doc.createDocumentFragment(),c=q.create("div",{style:"width:100%;height:100%;"},
c),g=q.create("div",{style:"width:100%;height:10%;","class":""},c),k=q.create("div",{style:"width:100%"},c),e=new J({portalUrl:a.widget.get("portalUrl"),message:"",plugin:"esri/dijit/analysis/PluginAnalysisLayers",sortDescending:!0,sort:"title",self:a.widget.get("portalSelf"),categories:b,categoryType:"tags",selectedCategory:"boundaries OR places",pagingLinks:3,itemsPerPage:6,"class":"esriBrowseAnalysisLayers itemsGallery esriFloatLeading",closePopupPerRow:!1,extent:a.widget.get("map").extent,useExtent:!0,
fetchTimeout:600,galleryTemplate:'\x3cdiv style\x3d\'opacity:1;\' class\x3d\'grid-item gallery-view galleryNode\'\x3e${item:_formatItemTitle}${item:_formatThumbnail}\x3cdiv class\x3d"linksDiv" style\x3d\'display:none;\'\x3e\x3cdiv class\x3d"esriItemLinks"\x3e\x3cdiv class\x3d"esriFloatLeading"\x3e\x3ca style\x3d"text-decoration: none;"\x3e\x3cspan\x3eAdd layer to analysis\x3c/span\x3e\x3cdiv class\x3d"dijitReset dijitInline esriArrows"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
formatThumbnail:function(a){return"\x3cimg class\x3d'grid-item galleryThumbnail' width\x3d'120px' height\x3d'80px' alt\x3d'' src\x3d'"+(a.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},formatItemTitle:function(a){return'\x3cdiv class\x3d"galleryLabelContainer"\x3e\x3cspan alt\x3d\''+(a.title||a.name||"\x3cNo Title\x3e")+"'\x3e"+(a.title.replace(/_/g," ")||a.name.replace(/_/g," ")||"\x3cNo Title\x3e")+"\x3c/span\x3e\x3c/div\x3e"},style:"width:600px;height:90%;clear:both;"},
k),k=q.toDom('\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"esriFloatTrailing"\x3e');q.place(k,g);g=q.create("tr",null,k);b=q.create("td",null,g);q.create("td",{innerHTML:"\x26nbsp;"},g);var g=q.create("td",null,g),f=q.create("tr",null,k),k=q.create("td",{style:"padding-bottom: 0.5em"},f);q.create("td",{style:"padding-bottom: 0.5em",innerHTML:"\x26nbsp;"},f);f=q.create("td",{style:"padding-bottom: 0.5em"},f);q.create("label",{"for":a.widget.id+"_addlayercheck","class":"",innerHTML:this.i18n.addLayer},
g);b=new D({name:"addlayer",id:a.widget.id+"_addlayercheck","class":"",value:!1,checked:!1},q.create("input",{},b));q.create("label",{"for":a.widget.id+"_addextentcheck","class":"",innerHTML:this.i18n.withinMapArea},f);new D({name:"extentcheck",id:a.widget.id+"_addextentcheck","class":"",value:!0,checked:!0,onChange:d.hitch(this,function(a){e.set("useExtent",a)})},q.create("input",{},k));c=new B({title:this.i18n.browseAnalysisTitle,content:c,doLayout:!0,browseItems:e,addlayerCheckBox:b,style:"padding:.75em 0;background-color: #fff;"});
a.widget.own(a.widget.get("map").on("extent-change",d.hitch(a.widget,function(b){console.log("new extent",a.widget.get("map").extent);e.set("extent",a.widget.get("map").extent)})));return c}},addAnalysisReadyLayer:function(b){if(I.isDefined(b)&&I.isDefined(b.item)&&I.isDefined(b.layersSelect)&&I.isDefined(b.layers)&&I.isDefined(b.browseDialog)){b.browseDialog.browseItems._closePopup();b.browseDialog.hide();var c={url:b.item.url+"/0",itemId:b.item.id,title:b.item.title,analysisReady:!0},g,k=a.some(b.layers,
function(a,b){var k=a.analysisReady&&c.analysisReady&&a.itemId===c.itemId;k&&(g=b);return k}),e,f,n,q=new w,l;k?(b.posIncrement&&(g+=b.posIncrement),b.browseDialog.addlayerCheckBox.get("checked")&&(b.posIncrement||(b.posIncrement=0),l=b.layers[g-b.posIncrement],b.widget.map.getLayer(l.lyr.id)||(this._addLayerHandle&&this._addLayerHandle.remove(),this._addLayerHandle=b.widget.map.on("layer-add",d.hitch(this,function(a){this._addLayerHandle.remove();b.widget.emit("add-ready-to-use-layer",{layer:a.layer,
layerInfo:l.linfo,item:l})})),b.widget.map.addLayer(l.lyr))),b.layersSelect.set("value",g),b.browseDialog.browseItems.clear(),q.resolve()):(q=H({url:c.url,content:{f:"json"}}),q.then(d.hitch(this,function(a){var g=new F(c.url,{outFields:["*"]});d.mixin(c,g);d.mixin(c,a);c.id=c.title+"_"+a.id;c.title=c.title.replace(/_/g," ");c.name=c.title;c.version=c.currentVersion;n=b.layersSelect.getOptions();e=n.splice(n.length-2,2);b.layersSelect.removeOption(e);f=b.layers.length;b.posIncrement&&(f+=b.posIncrement);
e.unshift({value:f,label:c.title,selected:!0});b.layersSelect.addOption(e);b.layersSelect.set("value",f);c.lyr=g;c.linfo=a;b.layers.push(c);g.name=c.name;b.browseDialog.addlayerCheckBox.get("checked")&&(this._addLayerHandle&&this._addLayerHandle.remove(),this._addLayerHandle=b.widget.map.on("layer-add",d.hitch(this,function(g){this._addLayerHandle.remove();b.widget.emit("add-ready-to-use-layer",{layer:g.layer,layerInfo:a,item:c})})),b.widget.map.addLayer(g));b.browseDialog.browseItems.clear()})));
return q.promise}},addReadyToUseLayerOption:function(b,c){b&&b.showReadyToUseLayers&&(c||(c=[]),b.signInPromise.then(d.hitch(this,function(){a.forEach(c,function(a){a.addOption({type:"separator",value:""});a.addOption({value:"browse",label:b.i18n.browseAnalysisTitle})},this);I.isDefined(b._browsedlg)||(b._browsedlg=this.addBrowseAnalysisDialog({widget:b}),b.own(b._browsedlg.browseItems.on("select-change",d.hitch(b,b._handleBrowseItemsSelect)),b._browsedlg.on("hide",d.hitch(b,function(){b._browsedlg.browseItems._closePopup();
a.forEach(c,function(a){"browse"===a.get("value")&&a.reset()})}))))})))},getMaxInputByMode:function(a){var b;if(a&&a.units&&a.type){if("StraightLine"===a.type)"Miles"===a.units?b=1E3:"Yards"===a.units?b=176E4:"Kilometers"===a.units?b=v.format(1609.34,{places:2}):"Meters"===a.units?b=v.format(1609340,{places:2}):"Feet"===a.units&&(b=528E4);else if("DrivingDistance"===a.type||"TruckingDistance"===a.type||"WalkingDistance"===a.type)"Miles"===a.units?b=300:"Yards"===a.units?b=528E3:"Kilometers"===a.units?
b=v.format(482.802,{places:2}):"Meters"===a.units?b=v.format(482802,{places:2}):"Feet"===a.units&&(b=1584E3);else if("DrivingTime"===a.type||"TruckingTime"===a.type||"WalkingTime"===a.type)"Minutes"===a.units?b=300:"Seconds"===a.units?b=18E3:"Hours"===a.units&&(b=5);return b}},updateModeConstraints:function(a){var b;a&&(a.validateWidget&&a.units&&a.type)&&(b=a.validateWidget.get("constraints"),b.max=this.getMaxInputByMode(a),a.validateWidget.set(b))},getTravelModes:function(b){var c=new w,g,k,e,f;
I.isDefined(this.travelModes)&&0<this.travelModes.length?c.resolve(this.travelModes):!b||!b.widget?c.reject(Error("Missing parameter: params.widget required parameter")):b.widget.signInPromise.then(d.hitch(this,function(n){(f=b.widget.get("helperServices"))&&f.routingUtilities?(e=f.routingUtilities.url,g="sync"):g=b.widget._getSelf(b.widget.portalUrl);x(g,d.hitch(this,function(b){var g={};b&&(b.helperServices&&b.helperServices.routingUtilities)&&(e=b.helperServices.routingUtilities.url);I.isDefined(e)?
(k=new N(e+"/GetTravelModes"),k.execute(g).then(d.hitch(this,function(b){this.travelModes=a.map(b[0].value&&b[0].value.features,function(a){return m.fromJson(a.attributes.TravelMode)});b[1]&&(b[1].paramName&&"defaultTravelMode"===b[1].paramName)&&(this.defaultTravelModeId=b[1].value);c.resolve(this.travelModes)}),d.hitch(this,function(a){c.reject(a)}))):c.reject(Error("Missing Routing Utility Service to get Travel Modes"))}),function(a){c.reject(a)})}));return c.promise},populateTravelModes:function(b){if(b&&
b.selectWidget&&b.widget){var c=[],g=b.allowmode||"all";this.initI18n();b.addStraightLine&&c.push({value:"StraightLine",label:'\x3cdiv class\x3d"esriFloatLeading bufferIcon esriStraightLineDistanceIcon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;"\x3e'+this.i18n.straightLineDistance+"\x3c/div\x3e"});this.getTravelModes({widget:b.widget}).then(d.hitch(this,function(k){a.forEach(k,function(a,k){var e=a.name,f=e.replace(/\s/g,b.separator||""),n="AUTOMOBILE"===
a.type?"Driving":"TRUCK"===a.type?"Trucking":"WALK"===a.type?"Walking":"Other",d=n.toLowerCase(),q=a.units||e.split(/\s/)[1],l=I.isDefined(b.enableTravelModes)&&!b.enableTravelModes,q=a.impedanceAttributeName===a.timeAttributeName?"Time":a.impedanceAttributeName===a.distanceAttributeName?"Distance":"Other",e={label:'\x3cdiv class\x3d"esriFloatLeading bufferIcon esri'+n+q+'Icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;"\x3e'+e+"\x3c/div\x3e",value:f,
travelMode:a,disabled:l,modei18nKey:d,units:q};if("all"===g||g===q.toLowerCase())"all"!==g&&(e.value=e.value.replace(q,"")),b.selectDefaultMode&&(this.defaultTravelModeId&&this.defaultTravelModeId===a.id)&&(e.selected=!0),c.push(e)},this);b.selectWidget.removeOption();b.selectWidget.addOption(c);b.selectWidget.set("value",b.value);b.widget.emit("travelmodes-added",{travelOptions:c})}),d.hitch(this,function(a){c&&0<c.length&&(b.selectWidget.removeOption(),b.selectWidget.addOption(c),b.selectWidget.set("value",
b.value),b.widget.emit("travelmodes-added",{travelOptions:c}))}))}}});r("extend-esri")&&d.setObject("dijit.analysis.utils",h,y);return h})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(h,d,a,b){h=function(l){function m(b,e){var d=l[b];d&&(l[b]=function(m){var h;"put"===b&&(h=l.getIdentity(m));if(f)return d.apply(this,arguments);f=!0;try{var k=d.apply(this,arguments);a(k,function(a){e("object"==typeof a&&a||m,h)});return k}finally{f=
!1}})}var h=[],r=0;l=d.delegate(l);l.notify=function(a,b){r++;for(var e=h.slice(),f=0,d=e.length;f<d;f++)e[f](a,b)};var e=l.query;l.query=function(c,f){f=f||{};var m=e.apply(this,arguments);if(m&&m.forEach){var t=d.mixin({},f);delete t.start;delete t.count;var s=l.queryEngine&&l.queryEngine(c,t),k=r,g=[],q;m.observe=function(c,e){1==g.push(c)&&h.push(q=function(c,d){a(m,function(a){var q=a.length!=f.count,m,h;if(++k!=r)throw Error("Query is out of date, you must observe() the query prior to any data modifications");
var w,p=-1,t=-1;if(void 0!==d){m=0;for(h=a.length;m<h;m++){var u=a[m];if(l.getIdentity(u)==d){w=u;p=m;(s||!c)&&a.splice(m,1);break}}}if(s){if(c&&(s.matches?s.matches(c):s([c]).length))m=-1<p?p:a.length,a.splice(m,0,c),t=b.indexOf(s(a),c),a.splice(m,1),f.start&&0==t||!q&&t==a.length?t=-1:a.splice(t,0,c)}else c&&(void 0!==d?t=p:f.start||(t=l.defaultIndex||0,a.splice(t,0,c)));if((-1<p||-1<t)&&(e||!s||p!=t)){q=g.slice();for(m=0;a=q[m];m++)a(c||w,p,t)}})});var d={};d.remove=d.cancel=function(){var a=b.indexOf(g,
c);-1<a&&(g.splice(a,1),g.length||h.splice(b.indexOf(h,q),1))};return d}}return m};var f;m("put",function(a,b){l.notify(a,b)});m("add",function(a){l.notify(a)});m("remove",function(a){l.notify(void 0,a)});return l};d.setObject("dojo.store.Observable",h);return h})},"dojox/mvc/atBindingExtension":function(){define("dojo/aspect dojo/_base/array dojo/_base/lang dijit/_WidgetBase ./_atBindingMixin dijit/registry".split(" "),function(h,d,a,b,l){return function(b){d.forEach(arguments,function(b){b.dataBindAttr?
console.warn("Detected a widget or a widget class that has already been applied data binding extension. Skipping..."):(a._mixin(b,l.mixin),h.before(b,"postscript",function(a,b){this._dbpostscript(a,b)}),h.before(b,"startup",function(){this._started||this._startAtWatchHandles()}),h.before(b,"destroy",function(){this._stopAtWatchHandles()}),h.around(b,"set",function(b){return function(e,f){return e==l.prototype.dataBindAttr?this._setBind(f):"dojox.mvc.at"==(f||{}).atsignature?this._setAtWatchHandle(e,
f):b.apply(this,a._toArray(arguments))}}))});return arguments}})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(h,d,a,b){return h("dijit.form.MappedTextBox",b,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?
a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=a.place("\x3cinput type\x3d'hidden'"+(this.name&&!d("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"esri/dijit/analysis/CalculateDensity":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/NumberSpinner dijit/form/NumberTextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator ../../symbols/PictureMarkerSymbol dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!../../nls/jsapi dojo/text!./templates/CalculateDensity.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$,ba){h=d([g,q,w,v,z,C,L],{declaredClass:"esri.dijit.analysis.CalculateDensity",templateString:ba,widgetsInTemplate:!0,inputLayer:null,field:null,classificationType:"EqualInterval",numClasses:10,boundingPolygonLayer:null,outputName:null,classBreaks:null,radius:null,radiusUnits:null,arealUnits:null,_NOVALUE_:"NOVALUE",map:null,i18n:null,toolName:"CalculateDensity",helpFileName:"CalculateDensity",
resultParameter:"resultLayer",constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,$.findHotSpotsTool);a.mixin(this.i18n,$.interpolatePointsTool);a.mixin(this.i18n,$.calculateDensityTool);this.set("drawLayerName",this.i18n.blayerName);this.set("drawPointLayerName",this.i18n.pointlayerName)},
postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._classBreaksInput.set("validator",a.hitch(this,this.validateClassBreaks));this._buildUI()},startup:function(){},_onClose:function(a){a&&this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),
this.boundingPolygonLayers.splice(b,1))},this));this._handleBoundingBtnChange(!1);this.emit("close",{save:!a})},clear:function(){this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),this.boundingPolygonLayers.splice(b,1))},this));this._handleBoundingBtnChange(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&
(b.inputLayer=p.toJson(T.constructAnalysisInputLyrObj(this.get("inputLayer"))),this.get("field")&&(b.field=this.get("field")),this.get("radius")&&(b.radius=this.radius),this.radius&&this.get("radiusUnits")&&(b.radiusUnits=this.radiusUnits),this.get("areaUnits")&&(b.areaUnits=this.areaUnits),this.get("classificationType")&&(b.classificationType=this.get("classificationType")),"Manual"!==this.classificationType?b.numClasses=this.get("numClasses"):b.classBreaks=this.get("classBreaks"),this.get("boundingPolygonLayer")&&
(b.boundingPolygonLayer=p.toJson(T.constructAnalysisInputLyrObj(this.boundingPolygonLayer))),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputName")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",
!0);a={};var b={},c;a.inputLayer=p.toJson(T.constructAnalysisInputLyrObj(this.get("inputLayer")));this.get("field")&&(a.field=this.get("field"));this.get("radius")&&(a.radius=this.radius);this.radius&&this.get("radiusUnits")&&(a.radiusUnits=this.radiusUnits);this.get("areaUnits")&&(a.areaUnits=this.areaUnits);this.get("classificationType")&&(a.classificationType=this.get("classificationType"));"Manual"!==this.classificationType?a.numClasses=this.get("numClasses"):a.classBreaks=this.get("classBreaks");
this.get("boundingPolygonLayer")&&(a.boundingPolygonLayer=p.toJson(T.constructAnalysisInputLyrObj(this.boundingPolygonLayer)));this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this.get("outputName")}}));this.showChooseExtent&&!this.get("DisableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnFeatureCollection=this.returnFeatureCollection;b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name,fieldname:!a.field?"":a.field}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_handleBrowseItemsSelect:function(b){b&&b.selection&&T.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?
this.inputLayers:this.boundingPolygonLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._boundingAreaSelect,posIncrement:this._isAnalysisSelect?0:1,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_save:function(){},_buildUI:function(){var g=!0;this._radiusUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",
label:this.i18n.meters}]);this._areaUnitsSelect.addOption([{value:"SquareMiles",label:this.i18n.sqMiles},{value:"SquareKilometers",label:this.i18n.sqKm}]);this.signInPromise.then(a.hitch(this,T.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),T.populateAnalysisLayers(this,"inputLayer","inputLayers"));this.outputName&&(this._outputLayerInput.set("value",
this.outputName),g=!1);this.inputLayer&&this._updateAnalysisLayerUI(g);this.classificationType&&this._classifySelect.set("value",this.classificationType);if(this.boundingPolygonLayers){this._boundingAreaSelect.addOption({value:"-1",label:this.i18n.defaultBoundingOption,selected:!0});var k=!1;b.forEach(this.boundingPolygonLayers,function(a,b){"esriGeometryPolygon"===a.geometryType&&(k=this.get("boundingPolygonLayer")&&this.get("boundingPolygonLayer").name===a.name,this._boundingAreaSelect.addOption({value:b+
1,label:a.name,selected:k}))},this)}T.addReadyToUseLayerOption(this,[this._analysisSelect,this._boundingAreaSelect]);this.classBreaks&&this._classBreaksInput.set("value",this.classBreaks.join().replace(/,/g," "));this.radius&&this._searchDistanceInput.set("value",this.radius);this.radiusUnits&&this._radiusUnitsSelect.set("value",this.radiusUnits);this.areaUnits&&this._areaUnitsSelect.set("value",this.areaUnits);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&
this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;T.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections()},_updateAnalysisLayerUI:function(a){this.inputLayer&&
(n.set(this._interpolateToolDescription,"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&(this.outputName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name})),this._outputLayerInput.set("value",this.outputName),this.set("fields",this.inputLayer))},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+
' AND (tags:"point" OR tags:"line") '),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this._updateAnalysisLayerUI(!0))},_handleMethodChange:function(a){"NN"===a?(s.add(this._optionsDiv,"disabled"),s.contains(this._optionsDiv,"optionsOpen")&&(s.remove(this._optionsDiv,"optionsOpen"),s.add(this._optionsDiv,"optionsClose"))):(s.contains(this._optionsDiv,"disabled")&&s.remove(this._optionsDiv,"disabled"),"KG"===a?(c.set(this._barrierLabelRow,"display","none"),c.set(this._barrierSelectRow,
"display","none"),c.set(this._speedLabelRow,"display",""),c.set(this._speedSliderRow,"display","")):"LP"===a&&(c.set(this._barrierLabelRow,"display",""),c.set(this._barrierSelectRow,"display",""),c.set(this._speedLabelRow,"display","none"),c.set(this._speedSliderRow,"display","none")))},_handleOptimizeSliderChange:function(a){console.log(a,this._optimizeSlider.get("value"));this.set("interpolateOption",this._optimizeSlider.get("value"))},_handleFieldChange:function(a){},_handleOptionsBtnClick:function(){s.contains(this._optionsDiv,
"disabled")||(s.contains(this._optionsDiv,"optionsClose")?(s.remove(this._optionsDiv,"optionsClose"),s.add(this._optionsDiv,"optionsOpen")):s.contains(this._optionsDiv,"optionsOpen")&&(s.remove(this._optionsDiv,"optionsOpen"),s.add(this._optionsDiv,"optionsClose")))},_handleBoundingSelectChange:function(a){"browse"===a&&(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._isAnalysisSelect=
!1,this._browsedlg.show())},_handleArealUnitsSelectChange:function(a){},_handleBoundingBtnChange:function(a){a?(this.emit("drawtool-activate",{}),this._featureLayer||this._createBoundingPolyFeatColl(),this._toolbar.activate(W.POLYGON)):(this._toolbar.deactivate(),this.emit("drawtool-deactivate",{}))},_handleDistValueChange:function(a){},_handleDistUnitsChange:function(a){},_handleClassifySelectChange:function(a){c.set(this._classifyOtherOptionLabelRow,"display","Manual"===a?"none":"block");c.set(this._classifyOtherOptionInputRow,
"display","Manual"===a?"none":"block");c.set(this._manualOptionInputRow,"display","Manual"===a?"block":"none");c.set(this._manualOptionLabelRow,"display","Manual"===a?"block":"none")},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_createBoundingPolyFeatColl:function(){var b=T.createPolygonFeatureCollection(this.drawLayerName);this._featureLayer=new P(b,{id:this.drawLayerName});this.map.addLayer(this._featureLayer);
l.connect(this._featureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addFeatures:function(a){var c=[],g={},k=new O(O.STYLE_NULL,new R(R.STYLE_SOLID,new m([0,0,0]),4));a=new Q(a,k);this.map.graphics.add(a);g.description="blayer desc";g.title="blayer";a.setAttributes(g);c.push(a);this._featureLayer.applyEdits(c,null,null);if(0===this.boundingPolygonLayers.length||this.boundingPolygonLayers[this.boundingPolygonLayers.length-1]!==this._featureLayer)c=this.boundingPolygonLayers.push(this._featureLayer),
g=this._boundingAreaSelect.getOptions(),this._boundingAreaSelect.removeOption(g),g=b.map(g,function(a){a.selected=!1;return a}),g.push({value:c,label:this._featureLayer.name,selected:!0}),this._boundingAreaSelect.addOption(g)},validateServiceName:function(a){return T.validateServiceName(a,{textInput:this._outputLayerInput})},validateClassBreaks:function(){var c,g=[],e=[],f,n;c=a.trim(this._classBreaksInput.get("value")).split(" ");if("Manual"!==this.get("classificationType"))return!0;if(!c&&"Manual"===
this.get("classificationType")||2>c.length||31<c.length)return!1;b.some(c,function(b,d){b=k.parse(b);if(isNaN(b))return g.push(0),!1;if(e[c[d]])return e[c[d]]=!1,g.push(0),!1;e[c[d]]=!0;f=k.format(b,{locale:"root"});N.isDefined(f)?N.isDefined(f)||(f=k.format(b,{locale:"en-us"})):f=k.format(b,{locale:"en"});N.isDefined(f)&&(n=a.trim(f).match(/\D/g));if(n&&0<n.length)return g.push(0),!1});return-1!==b.indexOf(g,0)?!1:!0},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",
this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},_setInputLayersAttr:function(a){this.inputLayers=a},_setFieldsAttr:function(a){var c=a.fields,g,k;this._fieldSelect&&this._fieldSelect.removeOption(this._fieldSelect.getOptions());this._fieldSelect.addOption({value:this._NOVALUE_,label:this.i18n.chooseCountField});b.forEach(c,function(c,e){c.name!==a.objectIdField&&-1!==b.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],c.type)&&(g={value:c.name,label:N.isDefined(c.alias)&&""!==c.alias?c.alias:c.name},this.field&&g.value===this.field&&(g.selected="selected",k=c.name),this._fieldSelect.addOption(g))},this);k&&this._fieldSelect.set("value",k)},_setFieldAttr:function(a){this.field=a},_getFieldAttr:function(){this._fieldSelect&&(this.field=this._fieldSelect.get("value")!==this._NOVALUE_?this._fieldSelect.get("value"):null);return this.field},_setRadiusAttr:function(a){this._set("radius",
a)},_getRadiusAttr:function(){this._searchDistanceInput&&this.set("radius",this._searchDistanceInput.get("value"));return this.radius},_setRadiusUnitsAttr:function(a){this._set("radiusUnits",a)},_getRadiusUnitsAttr:function(){this._radiusUnitsSelect&&this.set("radiusUnits",this._radiusUnitsSelect.get("value"));return this.radiusUnits},_setAreaUnitsAttr:function(a){this._set("areaUnits",a)},_getAreaUnitsAttr:function(){this._areaUnitsSelect&&this.set("areaUnits",this._areaUnitsSelect.get("value"));
return this.areaUnits},_setClassificationTypeAttr:function(a){this.classificationType=a},_getClassificationTypeAttr:function(){this._classifySelect&&(this.classificationType=this._classifySelect.get("value"));return this.classificationType},_getNumClassesAttr:function(){this._numClassesInput&&(this.numClasses=this._numClassesInput.get("value"));return this.numClasses},_setNumClassesAttr:function(a){this.numClasses=a},_getClassBreaksAttr:function(){if(this._classBreaksInput){var c=a.trim(this._classBreaksInput.get("value")).split(" "),
g=[];b.forEach(c,function(a){g.push(k.parse(a))});this.classBreaks=g}return this.classBreaks},_setClassBreaksAttr:function(a){a&&(this.classBreaks=a)},_getBoundingPolygonLayerAttr:function(){this._boundingAreaSelect&&(this.boundingPolygonLayer=null,"-1"!==this._boundingAreaSelect.get("value")&&(this.boundingPolygonLayer=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1]));return this.boundingPolygonLayer},_setBoundingPolygonLayerAttr:function(a){this.boundingPolygonLayer=a},_setBoundingPolygonLayersAttr:function(a){this.boundingPolygonLayers=
a},_getOutputNameAttr:function(){this._outputLayerInput&&(this.outputName=this._outputLayerInput.get("value"));return this.outputName},_setOutputNameAttr:function(a){this.outputName=a},_setMapAttr:function(b){this.map=b;this._toolbar=new W(this.map);l.connect(this._toolbar,"onDrawEnd",a.hitch(this,this._addFeatures))},_getMapAttr:function(){return this.map},_setDrawLayerNameAttr:function(a){this.drawLayerName=a},_getDrawLayerNameAttr:function(){return this._featureLayer.name},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",
a)},_getDrawLayerAttr:function(){var a=[];this._featureLayer&&a.push(this._featureLayer);this._pointfeatureLayer&&a.push(this._pointfeatureLayer);return a},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.CalculateDensity",h,G);return h})},"dojox/gfx/renderer":function(){define(["./_base",
"dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(h,d,a,b,l){var m=null;a.add("vml",function(a,b,e){e.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';a="adj"in e.firstChild;e.innerHTML="";return a});return{load:function(p,r,e){function f(){r(["dojox/gfx/"+c],function(a){h.renderer=c;m=a;e(a)})}if(m&&"force"!=p)e(m);else{var c=l.forceGfxRenderer;p=!c&&(d.isString(l.gfxRenderer)?l.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var n,u;!c&&p.length;)switch(p.shift()){case "svg":"SVGAngle"in
b.global&&(c="svg");break;case "vml":a("vml")&&(c="vml");break;case "silverlight":try{a("ie")?(n=new ActiveXObject("AgControl.AgControl"))&&n.IsVersionSupported("1.0")&&(u=!0):navigator.plugins["Silverlight Plug-In"]&&(u=!0)}catch(t){u=!1}finally{n=null}u&&(c="silverlight");break;case "canvas":b.global.CanvasRenderingContext2D&&(c="canvas")}"canvas"===c&&!1!==l.canvasEvents&&(c="canvasWithEvents");l.isDebug&&console.log("gfx renderer \x3d "+c);"svg"==c&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(f):
f()}}}})},"dojox/mvc/_atBindingExtension":function(){define(["dojo/_base/config","dojo/has","dijit/_WidgetBase","./atBindingExtension"],function(h,d,a,b){d.add("mvc-extension-per-widget",(h.mvc||{}).extensionPerWidget);d("mvc-extension-per-widget")||b(a.prototype)})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.DataFile",constructor:function(a){a&&d.mixin(this,a)},url:null,itemID:null,
toJson:function(){var a={};this.url&&(a.url=this.url);this.itemID&&(a.itemID=this.itemID);return a}});a("extend-esri")&&d.setObject("tasks.DataFile",h,b);return h})},"esri/dijit/analysis/CreateViewshed":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator ../../symbols/PictureMarkerSymbol dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!../../nls/jsapi dojo/text!./templates/CreateViewshed.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$){h=d([g,q,w,v,z,L,N],{declaredClass:"esri.dijit.analysis.CreateViewshed",templateString:$,widgetsInTemplate:!0,inputLayer:null,maximumDistance:15,maxDistanceUnits:"Kilometers",targetHeight:0,targetHeightUnits:"Meters",observerHeight:1.75,observerHeightUnits:"Meters",outputLayerName:null,i18n:null,map:null,toolName:"CreateViewshed",helpFileName:"CreateViewshed",resultParameter:"viewshedLayer",
constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,V.findHotSpotsTool);a.mixin(this.i18n,V.createViewshedTool);this.set("drawPointLayerName",this.i18n.pointlayerName)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",
a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.inputLayers,function(a,b){a===this._pointfeatureLayer&&(this._analysisSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.inputLayers.splice(b,1))},this));this._handleInputDrawPointChange(!1);this.emit("close",{save:!a})},clear:function(){this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),
b.forEach(this.inputLayers,function(a,b){a===this._pointfeatureLayer&&(this._analysisSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.inputLayers.splice(b,1))},this));this._handleInputDrawPointChange(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer"))),this.get("maximumDistance")&&(b.maximumDistance=this.get("maximumDistance"),b.maxDistanceUnits=this.get("maxDistanceUnits")),
b.maximumDistance=this.get("maximumDistance"),b.maxDistanceUnits=this.get("maxDistanceUnits"),b.observerHeight=this.get("observerHeight"),b.observerHeightUnits=this.get("observerHeightUnits"),b.targetHeight=this.get("targetHeight"),b.targetHeightUnits=this.get("targetHeightUnits"),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),
this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer")));a.maximumDistance=this.get("maximumDistance");a.maxDistanceUnits=
this.get("maxDistanceUnits");a.observerHeight=this.get("observerHeight");a.observerHeightUnits=this.get("observerHeightUnits");a.targetHeight=this.get("targetHeight");a.targetHeightUnits=this.get("targetHeightUnits");this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}}));this.showChooseExtent&&!this.get("disableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&
(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnFeatureCollection=this.returnFeatureCollection;b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name,fieldname:!a.field?"":a.field}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_save:function(){},
_buildUI:function(){this._loadConnections();this.signInPromise.then(a.hitch(this,Q.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));var b=!0;this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),Q.populateAnalysisLayers(this,"inputLayer","inputLayers",{posIncrement:1}));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);Q.addReadyToUseLayerOption(this,
[this._analysisSelect]);this._updateAnalysisLayerUI(b);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;Q.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":
"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._distanceUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]);this.maxDistanceUnits&&(this._distanceUnitsSelect.set("value",this.maxDistanceUnits),this._handleMaxDstUnitsChange(this.maxDistanceUnits));this.maximumDistance&&
this._maximumDistanceInput.set("value",this.maximumDistance);this._obsrUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]);this.observerHeightUnits&&this._obsrUnitsSelect.set("value",this.observerHeightUnits);this.observerHeight&&this._obsrHeightInput.set("value",this.observerHeight);this._targetUnitsSelect.addOption([{value:"Miles",
label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]);this.targetHeightUnits&&this._targetUnitsSelect.set("value",this.targetHeightUnits);this.targetHeight&&this._targetHgtInput.set("value",this.targetHeight)},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},
validateServiceName:function(a){return Q.validateServiceName(a,{textInput:this._outputLayerInput})},_handleInputDrawPointChange:function(a){a?(this.emit("drawtool-activate",{}),this._pointfeatureLayer||this._createPointFeatColl(),this._pointtoolbar.activate(R.POINT)):this._pointtoolbar.deactivate()},_createPointFeatColl:function(){var b=Q.createPointFeatureCollection(this.drawPointLayerName);this._pointfeatureLayer=new S(b,{id:this.drawPointLayerName});this.map.addLayer(this._pointfeatureLayer);l.connect(this._pointfeatureLayer,
"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addPointFeatures:function(a){var c=[],g={},k=(new X({height:24,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"})).setOffset(0,12);a=new P(a,k);this.map.graphics.add(a);g.description="blayer desc";g.title="blayer";a.setAttributes(g);c.push(a);this._pointfeatureLayer.applyEdits(c,null,null);if(0===this.inputLayers.length||this.inputLayers[this.inputLayers.length-
1]!==this._pointfeatureLayer)this.inputLayers.push(this._pointfeatureLayer),c=this.inputLayers.length-1,g=this._analysisSelect.getOptions(),this._analysisSelect.removeOption(g),g=b.map(g,function(a){a.selected=!1;return a}),this._analysisSelect.addOption({value:c+1,label:this._pointfeatureLayer.name,selected:!0}),this._analysisSelect.addOption(g),this._handleAnalysisLayerChange(c+1)},_handleMaxDstChange:function(){this._maximumDistanceInput.validate()},_handleMaxDstUnitsChange:function(a){var b="",
c={places:"0,0"};"Miles"===a?(c.max=31,b=f.substitute(this.i18n.maxDistanceValidMsg,{units:a,limit:31})):"Kilometers"===a?(c.max=50,b=f.substitute(this.i18n.maxDistanceValidMsg,{units:a,limit:50})):"Yards"===a?(c.max=54680,b=f.substitute(this.i18n.maxDistanceValidMsg,{units:a,limit:54680})):"Feet"===a?(c.max=164041,b=f.substitute(this.i18n.maxDistanceValidMsg,{units:a,limit:164041})):"Meters"===a&&(c.max=5E4,b=f.substitute(this.i18n.maxDistanceValidMsg,{units:a,limit:5E4}));this._maximumDistanceInput.set("constraints",
c);this._maximumDistanceInput.set("rangeMessage",b)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._analysisPointDrawBtn.reset(),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._browsedlg.show()):(this.inputLayer=this.inputLayers[a-1],this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&Q.addAnalysisReadyLayer({item:b.selection,layers:this.inputLayers,
layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_updateAnalysisLayerUI:function(a){this.inputLayer&&(n.set(this._interpolateToolDescription,"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name})),this._outputLayerInput.set("value",this.outputLayerName),this._pointfeatureLayer&&this._pointfeatureLayer.name!==
this.inputLayer.name&&this._analysisPointDrawBtn.reset())},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayersAttr:function(a){this.inputLayers=a},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},_getOutputLayerNameAttr:function(){this._outputLayerInput&&(this.outputLayerName=this._outputLayerInput.get("value"));return this.outputLayerName},_setOutputLayerNameAttr:function(a){this.outputLayerName=
a},_setMapAttr:function(b){this.map=b;this._pointtoolbar=new R(this.map);l.connect(this._pointtoolbar,"onDrawEnd",a.hitch(this,this._addPointFeatures))},_getMapAttr:function(){return this.map},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_setMaxDistanceUnitsAttr:function(a){this.maxDistanceUnits=
a},_getMaxDistanceUnitsAttr:function(){this._distanceUnitsSelect&&this._distanceUnitsSelect.get("value")&&(this.maxDistanceUnits=this._distanceUnitsSelect.get("value"));return this.maxDistanceUnits},_setMaximumDistanceAttr:function(a){this.maximumDistance=a},_getMaximumDistanceAttr:function(){this._maximumDistanceInput&&this._maximumDistanceInput.get("value")&&(this.maximumDistance=this._maximumDistanceInput.get("value"));return this.maximumDistance},_setObserverHeightUnitsAttr:function(a){this.observerHeightUnits=
a},_getObserverHeightUnitsAttr:function(){this._obsrUnitsSelect&&this._obsrUnitsSelect.get("value")&&(this.observerHeightUnits=this._obsrUnitsSelect.get("value"));return this.observerHeightUnits},_setObserverHeightAttr:function(a){this.observerHeight=a},_getObserverHeightAttr:function(){this._obsrHeightInput&&this._obsrHeightInput.get("value")&&(this.observerHeight=this._obsrHeightInput.get("value"));return this.observerHeight},_setTargetHeightUnitsAttr:function(a){this.targetHeightUnits=a},_getTargetHeightUnitsAttr:function(){this._targetUnitsSelect&&
this._targetUnitsSelect.get("value")&&(this.targetHeightUnits=this._targetUnitsSelect.get("value"));return this.targetHeightUnits},_setTargetHeightAttr:function(a){this.targetHeight=a},_getTargetHeightAttr:function(){this._targetHgtInput&&this._targetHgtInput.get("value")&&(this.targetHeight=this._targetHgtInput.get("value"));return this.targetHeight},_setDrawPointLayerNameAttr:function(a){this.drawPointLayerName=a},_getDrawPointLayerNameAttr:function(){return this._pointfeatureLayer.name},_getDrawLayerAttr:function(){var a=
[];this._featureLayer&&a.push(this._featureLayer);this._pointfeatureLayer&&a.push(this._pointfeatureLayer);return a},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.CreateViewshed",h,F);return h})},"esri/tasks/geoenrichment/IntersectingGeographies":function(){define(["../../declare","./StudyAreaOptions","./GeographyLevel"],function(h,d,a){return h("esri.tasks.geoenrichment.IntersectingGeographies",[d],{geographyLevels:null,constructor:function(b){this.geographyLevels=
a.fromJsonArray(b?b.intersectingGeographies||b.levels||b.geographyLevels:[{layerID:"Admin2"}])},toJson:function(){return{areaType:"StandardGeography",intersectingGeographies:a.toJsonArray(this.geographyLevels)}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k){return l("dijit._TimePicker",[s,k],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:b.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){r.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.",
"","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,k){a=[];for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.push(c);return a},_showText:function(){var a=b.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);
var c=3600*this._clickableIncrementDate.getHours()+60*this._clickableIncrementDate.getMinutes()+this._clickableIncrementDate.getSeconds(),k=3600*this._visibleIncrementDate.getHours()+60*this._visibleIncrementDate.getMinutes()+this._visibleIncrementDate.getSeconds();(this.value||this.currentFocus).getTime();this._refDate=a(this.pickerMin);this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=k/c;a=a(this.pickerMax);a.setFullYear(1970,0,1);a=0.0010*(a.getTime()-this._refDate.getTime());
this._maxIncrement=Math.ceil((a+1)/c);c=this._getFilteredNodes();h.forEach(c,function(a){this.domNode.appendChild(a)},this);!c.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},
_createOption:function(b){var c=new Date(this._refDate),k=this._clickableIncrementDate;c.setHours(c.getHours()+k.getHours()*b,c.getMinutes()+k.getMinutes()*b,c.getSeconds()+k.getSeconds()*b);"time"==this.constraints.selector&&c.setFullYear(1970,0,1);k=a.format(c,this.constraints);if(this.filterString&&0!==k.toLowerCase().indexOf(this.filterString))return null;var e=this.ownerDocument.createElement("div");e.className=this.baseClass+"Item";e.date=c;e.idx=b;p.create("div",{"class":this.baseClass+"ItemInner",
innerHTML:k},e);1>b%this._visibleIncrement&&-1<b%this._visibleIncrement?m.add(e,this.baseClass+"Marker"):b%this._clickableIncrement||m.add(e,this.baseClass+"Tick");this.isDisabledDate(c)&&m.add(e,this.baseClass+"ItemDisabled");this.value&&!d.compare(this.value,c,this.constraints.selector)&&(e.selected=!0,m.add(e,this.baseClass+"ItemSelected"),this._selectedDiv=e,m.contains(e,this.baseClass+"Marker")?m.add(e,this.baseClass+"MarkerSelected"):m.add(e,this.baseClass+"TickSelected"),this._highlightOption(e,
!0));return e},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){if((a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a))this._highlighted_option=null,this.set("value",a),this.onChange(a)},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=
null}m.toggle(a,this.baseClass+"ItemHover",b);m.contains(a,this.baseClass+"Marker")?m.toggle(a,this.baseClass+"MarkerHover",b):m.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==e.DOWN_ARROW)return this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==e.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==e.ENTER||a.keyCode===e.TAB){if(!this._keyboardSelected&&a.keyCode===e.TAB)return!0;this._highlighted_option&&
this._onOptionSelected({target:this._highlighted_option});return a.keyCode===e.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"esri/dijit/analysis/OverlayLayers":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./AnalysisToggleButton ./GroupToggleButton ./utils dojo/i18n!../../nls/jsapi dojo/text!./templates/OverlayLayers.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R){h=d([g,q,w,v,z,F,J],{declaredClass:"esri.dijit.analysis.OverlayLayers",templateString:R,widgetsInTemplate:!0,inputLayer:null,overlayLayer:null,overlayType:"intersect",tolerance:0,snapToInput:!1,outputLayerName:null,outputType:"Input",i18n:null,toolName:"OverlayLayers",helpFileName:"OverlayLayers",resultParameter:"Outputlayer",constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},
destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,O.overlayLayersTool)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",
{save:a})},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.InputLayer=m.toJson(C.constructAnalysisInputLyrObj(this.inputLayer));"0"!==this._overlayFeaturesSelect.get("value")&&(c=this.overlayLayer[this._overlayFeaturesSelect.get("value")-1],a.OverlayLayer=m.toJson(C.constructAnalysisInputLyrObj(c)));a.OverlayType=this.get("overlayType");this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));
a.Tolerance=this.tolerance;a.SnapToInput=this.snapToInput;"intersect"===this.get("OverlayType")&&(a.outputType=this._outputTypeSelect.get("value"));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=m.toJson(c));b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,
tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_handleShowCreditsClick:function(b){b.preventDefault();b={};if(this._form.validate()){b.InputLayer=m.toJson(C.constructAnalysisInputLyrObj(this.inputLayer));if("0"!==this._overlayFeaturesSelect.get("value")){var c=this.overlayLayer[this._overlayFeaturesSelect.get("value")-1];b.OverlayLayer=m.toJson(C.constructAnalysisInputLyrObj(c))}b.OverlayType=
this.get("overlayType");this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));b.Tolerance=this.tolerance;b.SnapToInput=this.snapToInput;"intersect"===this.get("OverlayType")&&(b.outputType=this._outputTypeSelect.get("value"));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.Context=m.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",
a);this._usageDialog.show()}))}},_save:function(){},_sortbyGeometryType:function(a,b){if("esriGeometryPolygon"===a.geometryType)return-1;if("esriGeometryPolygon"===b.geometryType)return 1;if("esriGeometryPolyline"===a.geometryType)return-1;if("esriGeometryPolyline"===b.geometryType)return 1;if("esriGeometryPoint"===a.geometryType)return-1;if("esriGeometryPoint"===b.geometryType)return 1},_buildUI:function(){var b=!0;C.initHelpLinks(this.domNode,this.showHelp);this.get("showSelectAnalysisLayer")&&
(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),C.populateAnalysisLayers(this,"inputLayer","inputLayers"));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);this.inputLayer&&this._updateAnalysisLayerUI(b);C.addReadyToUseLayerOption(this,[this._analysisSelect,this._overlayFeaturesSelect]);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,
function(a){this.folderStore=a;C.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections()},_updateAnalysisLayerUI:function(c){this.inputLayer&&n.set(this._overlaylayersToolDescription,
"innerHTML",f.substitute(this.i18n.overlayDefine,{layername:this.inputLayer.name}));if(this.overlayLayer){this.overlayLayer.sort(a.hitch(this,this._sortbyGeometryType));c=b.some(this._overlayFeaturesSelect.getOptions(),function(a){return"browse"===a.value},this);var g=[],k=this._overlayFeaturesSelect.get("value");this._overlayFeaturesSelect.removeOption(this._overlayFeaturesSelect.getOptions());b.forEach(this.overlayLayer,function(a,b){var c=!0;if(a.url&&this.inputLayer.url&&a.url!==this.inputLayer.url)c=
!1;else if(this.inputLayer!==a&&(!a.analysisReady||!this.inputLayer.analysisReady))c=!1;!c&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPoint"===a.geometryType||"esriGeometryPolyline"===a.geometryType)&&g.push({value:b+1,label:a.name})},this);this.get("showReadyToUseLayers")&&c&&(g.push({type:"separator",value:""}),g.push({value:"browse",label:this.i18n.browseAnalysisTitle}));this._overlayFeaturesSelect.addOption(g);this._overlayFeaturesSelect.set("value",k)}this.overlayType&&("intersect"===
this.overlayType?(this._intersectBtn.set("checked",!0),this._handleIntersectBtnClick()):"union"===this.overlayType?(this._unionBtn.set("checked",!0),this._handleUnionBtnClick()):"erase"===this.overlayType&&(this._eraseBtn.set("checked",!0),this._handleEraseBtnClick()));this.outputType&&this._outputTypeSelect.set("value",this.outputType)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",
this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(c){c&&c.selection&&C.addAnalysisReadyLayer({item:c.selection,layers:this._isAnalysisSelect?this.inputLayers:this.overlayLayer,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._overlayFeaturesSelect,browseDialog:this._browsedlg,posIncrement:this._isAnalysisSelect?0:1,widget:this}).always(a.hitch(this,function(a){this._isAnalysisSelect&&
(this.inputLayer=this.inputLayers[this._analysisSelect.get("value")])&&(b.some(this.overlayLayer,function(a){return a&&a.analysisReady&&this.inputLayer.analysisReady&&a.itemId===this.inputLayer.itemId},this)||this.overlayLayer.push(this.inputLayer));this._isAnalysisSelect&&this._handleAnalysisLayerChange(this._analysisSelect.get("value"))}))},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_handleLayerChange:function(a){var b,
c,g;"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show()):(a=this.overlayLayer[a-1],b=!1,g=this.get("overlayType"),a&&this.inputLayer&&(c="esriGeometryPolygon"!==this.inputLayer.geometryType||"esriGeometryPolygon"!==a.geometryType,this._unionBtn.set("disabled",c),this._unionBtn.set("iconClass",c?"unionLayersDisabledIcon":"unionLayersIcon"),"esriGeometryPolygon"===
this.inputLayer.geometryType?b="esriGeometryPolygon"===this.inputLayer.geometryType&&"esriGeometryPolygon"!==a.geometryType:"esriGeometryPolyline"===this.inputLayer.geometryType?b="esriGeometryPolyline"===this.inputLayer.geometryType&&"esriGeometryPoint"===a.geometryType:"esriGeometryPolyline"===this.inputLayer.geometryType&&(b=!0),this._eraseBtn.set("disabled",b),this._eraseBtn.set("iconClass",b?"eraseLayersDisabledIcon":"eraseLayersIcon"),"union"===g&&("esriGeometryPolygon"!==this.inputLayer.geometryType||
"esriGeometryPolygon"!==a.geometryType)?(this._showMessages(this.i18n.overlayLayerPolyMsg),this._intersectBtn.set("checked",!0),this._handleIntersectBtnCtrClick()):"erase"===g&&"esriGeometryPolyline"===this.inputLayer.geometryType&&"esriGeometryPoint"===a.geometryType?(this._showMessages(this.i18n.notSupportedEraseOverlayMsg),this._intersectBtn.set("checked",!0),this._handleIntersectBtnCtrClick()):"erase"===g&&"esriGeometryPolygon"===this.inputLayer.geometryType&&"esriGeometryPolygon"!==a.geometryType?
(this._showMessages(this.i18n.notSupportedEraseOverlayMsg),this._intersectBtn.set("checked",!0),this._handleIntersectBtnCtrClick()):"intersect"===g?this._handleIntersectBtnCtrClick():"union"===g?this._handleUnionBtnCtrClick():"erase"===g&&this._handleEraseBtnClick()))},_showMessages:function(b){n.set(this._bodyNode,"innerHTML",b);p.fadeIn({node:this._errorMessagePane,easing:k.quadIn,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:""})})}).play();window.setTimeout(a.hitch(this,
this._handleCloseMsg),3E3)},_handleCloseMsg:function(b){b&&b.preventDefault();p.fadeOut({node:this._errorMessagePane,easing:k.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:"none"})})}).play()},_updateOutputType:function(){var a,b;"0"!==this._overlayFeaturesSelect.get("value")&&(a=this.overlayLayer[this._overlayFeaturesSelect.get("value")-1]);b="esriGeometryPoint"===this.inputLayer.geometryType||"esriGeometryMultipoint"===this.inputLayer.geometryType||"esriGeometryPoint"===
a.geometryType||"esriGeometryMultipoint"===a.geometryType;c.set(this._outputTypeTable,"display","table");this._outputTypeSelect.removeOption(this._outputTypeSelect.getOptions());this._outputTypeSelect.set("disabled",b);b?s.add(this._outputTypeLabel,"esriAnalysisTextDisabled"):s.remove(this._outputTypeLabel,"esriAnalysisTextDisabled");b?this._outputTypeSelect.addOption({value:"Input",label:this.i18n.points}):"esriGeometryPolyline"===this.inputLayer.geometryType&&"esriGeometryPolyline"===a.geometryType?
this._outputTypeSelect.addOption([{value:"Point",label:this.i18n.points,selected:!0},{value:"Input",label:this.i18n.lines}]):"esriGeometryPolygon"===this.inputLayer.geometryType&&"esriGeometryPolygon"===a.geometryType?this._outputTypeSelect.addOption([{value:"Point",label:this.i18n.points},{value:"Line",label:this.i18n.lines},{value:"Input",label:this.i18n.areas,selected:!0}]):"esriGeometryPolyline"===this.inputLayer.geometryType&&"esriGeometryPolygon"===a.geometryType?this._outputTypeSelect.addOption([{value:"Point",
label:this.i18n.points,selected:!0},{value:"Input",label:this.i18n.lines}]):"esriGeometryPolygon"===this.inputLayer.geometryType&&"esriGeometryPolyline"===a.geometryType&&this._outputTypeSelect.addOption([{value:"Point",label:this.i18n.points,selected:!0},{value:"Input",label:this.i18n.lines}])},_handleUnionBtnCtrClick:function(){this._unionBtnCtr.set("checked",!0);this._unionBtn.set("checked",!0);c.set(this._outputTypeTable,"display","none");this._outputTypeSelect.set("disabled",!0);s.add(this._outputTypeLabel,
"esriAnalysisTextDisabled");this._handleUnionBtnClick()},_handleIntersectBtnCtrClick:function(){this._intersectBtnCtr.set("checked",!0);this._intersectBtn.set("checked",!0);this._overlayFeaturesSelect.get("value");this._handleIntersectBtnClick();this._updateOutputType()},_handleEraseBtnCtrClick:function(){this._eraseBtnCtr.set("checked",!0);this._eraseBtn.set("checked",!0);c.set(this._outputTypeTable,"display","none");this._outputTypeSelect.set("disabled",!0);s.add(this._outputTypeLabel,"esriAnalysisTextDisabled");
this._handleEraseBtnClick()},_handleUnionBtnClick:function(a){"browse"===this._overlayFeaturesSelect.get("value")||(""===this._overlayFeaturesSelect.get("value")||!this.inputLayer)||(a=this.overlayLayer[this._overlayFeaturesSelect.get("value")-1].name,this._outputLayerInput.set("value",f.substitute(this.i18n.unionOutputLyrName,{layername:this.inputLayer.name,overlayname:a})),this._unionBtn.focus(),this.set("OverlayType","union"))},_handleEraseBtnClick:function(a){"browse"===this._overlayFeaturesSelect.get("value")||
(""===this._overlayFeaturesSelect.get("value")||!this.inputLayer)||(a=this.overlayLayer[this._overlayFeaturesSelect.get("value")-1].name,this._eraseBtn.focus(),this._outputLayerInput.set("value",f.substitute(this.i18n.eraseOutputLyrName,{layername:this.inputLayer.name,overlayname:a})),this.set("OverlayType","erase"))},_handleIntersectBtnClick:function(a){"browse"===this._overlayFeaturesSelect.get("value")||(""===this._overlayFeaturesSelect.get("value")||!this.inputLayer)||(a=this.overlayLayer[this._overlayFeaturesSelect.get("value")-
1].name,this._intersectBtn.focus(),this._outputLayerInput.set("value",f.substitute(this.i18n.intersectOutputLyrName,{layername:this.inputLayer.name,overlayname:a})),this.set("OverlayType","intersect"))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_setInputLayersAttr:function(a){this.inputLayers=a},_setOverlayLayerAttr:function(a){this.overlayLayer=a},_setOverlayTypeAttr:function(a){this.overlayType=
a},_getOverlayTypeAttr:function(){return this.overlayType},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setOutputTypeAttr:function(a){this.outputType=a},_getOutputTypeAttr:function(){return this.outputType},validateServiceName:function(a){return C.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.OverlayLayers",h,K);return h})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(h,d,a,b,l){h=h([l],{declaredClass:"esri.layers._SelectionMode",constructor:function(a){this.featureLayer=a;this._featureMap={}},propertyChangeHandler:function(a){this._init&&0===a&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)}});a("extend-esri")&&d.setObject("layers._SelectionMode",h,b);return h})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n){function u(a){a.noDataNode?(f(a.noDataNode,"!"),delete a.noDataNode):a.cleanup();a.contentNode.innerHTML=""}function t(a){if(a.loadingNode)f(a.loadingNode,"!"),delete a.loadingNode;else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes;a._oldPageObserver&&(a._oldPageObserver.cancel(),a._numObservers--,delete a._oldPageObserver)}delete a._isLoading}return d("dgrid.extensions.Pagination",h,{rowsPerPage:10,pagingTextBox:!1,
previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:n,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var a=this,b=this.paginationNode=f(this.footerNode,"div.dgrid-pagination"),c=this.paginationStatusNode=f(b,"div.dgrid-status"),e=this.i18nPagination;c.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();c.innerHTML=r.substitute(e.status,{start:1,end:1,total:0});b=this.paginationNavigationNode=
f(b,"div.dgrid-navigation");this.firstLastArrows&&(c=this.paginationFirstNode=f(b,"span.dgrid-first.dgrid-page-link","\u00ab"),c.setAttribute("aria-label",e.gotoFirst),c.tabIndex=0);this.previousNextArrows&&(c=this.paginationPreviousNode=f(b,"span.dgrid-previous.dgrid-page-link","\u2039"),c.setAttribute("aria-label",e.gotoPrev),c.tabIndex=0);this.paginationLinksNode=f(b,"span.dgrid-pagination-links");this.previousNextArrows&&(c=this.paginationNextNode=f(b,"span.dgrid-next.dgrid-page-link","\u203a"),
c.setAttribute("aria-label",e.gotoNext),c.tabIndex=0);this.firstLastArrows&&(c=this.paginationLastNode=f(b,"span.dgrid-last.dgrid-page-link","\u00bb"),c.setAttribute("aria-label",e.gotoLast),c.tabIndex=0);this._listeners.push(m(b,".dgrid-page-link:click,.dgrid-page-link:keydown",function(b){if(!("keydown"===b.type&&13!==b.keyCode)){b=this.className;var c,g;a._isLoading||-1<b.indexOf("dgrid-page-disabled")||(c=a._currentPage,g=Math.ceil(a._total/a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(c-
1):this===a.paginationNextNode?a.gotoPage(c+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(g):"dgrid-page-link"===b&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a=this.pageSizeOptions,c=this.paginationSizeSelect,g;if(a&&a.length){c||(c=this.paginationSizeSelect=f(this.paginationNode,"select.dgrid-page-size[aria-label\x3d"+
this.i18nPagination.rowsPerPage+"]"),g=this._paginationSizeChangeHandle=m(c,"change",b.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(g));for(g=c.options.length=0;g<a.length;g++)f(c,"option",a[g],{value:a[g],selected:this.rowsPerPage===a[g]});this._updateRowsPerPageOption()}else if((!a||!a.length)&&c)f(c,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove()},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,
b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var b=this.rowsPerPage,c=this.pageSizeOptions,g=this.paginationSizeSelect;g&&(0>a.indexOf(c,b)?this._setPageSizeOptions(c.concat([b])):g.value=""+b)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(){function a(b,c){var k,l;g.pagingTextBox&&b==d&&1<t?(k=f(n,"input.dgrid-page-input[type\x3dtext][value\x3d$]",d),k.setAttribute("aria-label",
e.jumpPage),g._pagingTextBoxHandle=m(k,"change",function(){var a=+this.value;!isNaN(a)&&(0<a&&a<=t)&&g.gotoPage(+this.value)}),r&&"INPUT"===r.tagName&&k.focus()):(l=b===d,k=f(n,"span"+(l?".dgrid-page-disabled":"")+".dgrid-page-link",b+(c?" ":"")),k.setAttribute("aria-label",e.gotoPage),k.tabIndex=l?-1:0,D===b&&(l?b<t?D++:y.focus():k.focus()),l||(y=k))}function b(a,c){f(a,(c?".":"!")+"dgrid-page-disabled");a.tabIndex=c?-1:0}var g=this,e=this.i18nPagination,n=this.paginationLinksNode,d=this._currentPage,
l=this.pagingLinks,h=this.paginationNavigationNode,t=Math.ceil(this._total/this.rowsPerPage),u=this._pagingTextBoxHandle,r=document.activeElement,D,y;!r||!c.contains(this.paginationNavigationNode,r)?r=null:"dgrid-page-link"===r.className&&(D=+r.innerHTML);u&&u.remove();n.innerHTML="";p(".dgrid-first, .dgrid-previous",h).forEach(function(a){b(a,1===d)});p(".dgrid-last, .dgrid-next",h).forEach(function(a){b(a,d>=t)});if(l&&0<t){a(1,!0);h=d-l;for(2<h?f(n,"span.dgrid-page-skip","..."):h=2;h<Math.min(d+
l+1,t);h++)a(h,!0);d+l+1<t&&f(n,"span.dgrid-page-skip","...");1<t&&a(t)}else g.pagingTextBox&&a(d);r&&-1===r.tabIndex&&(l=p("[tabindex\x3d'0']",this.paginationNavigationNode),r===this.paginationPreviousNode||r===this.paginationFirstNode?r=l[0]:l.length&&(r=l[l.length-1]),r&&r.focus())},refresh:function(){var a=this;this.inherited(arguments);if(this.store)return this.gotoPage(1).then(function(b){setTimeout(function(){m.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a,results:b})},
0);return b});console.warn("Pagination requires a store to operate.")},_onNotification:function(a){a.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(a,b){var c=this,e=this.inherited(arguments);this._lastCollection=null;b||(this._topLevelRequest&&this._topLevelRequest!==a&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof a.cancel&&(this._topLevelRequest=a),l.when(a,function(){c._topLevelRequest&&delete c._topLevelRequest}));return e},
insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(a){var c=this,g=new l;this._trackError(function(){var n=c.rowsPerPage,d=(a-1)*n,m=b.mixin(c.get("queryOptions"),{start:d,count:n}),h,p=c.contentNode,A,E,B;if(c.showLoadingMessage)u(c),A=c.loadingNode=f(p,"div.dgrid-loading"),A.innerHTML=c.loadingMessage;else{c._oldPageNodes=A={};p=p.children;E=0;for(B=p.length;E<B;E++)A[p[E].id]=p[E];c._oldPageObserver=c.observers.pop()}c._isLoading=
!0;h=c.store.query(c.query,m);l.when(c.renderArray(h,null,m),function(b){t(c);c.scrollTo({y:0});l.when(h.total,function(g){g||(c.noDataNode&&(f(c.noDataNode,"!"),delete c.noDataNode),c.noDataNode=f(c.contentNode,"div.dgrid-no-data"),c.noDataNode.innerHTML=c.noDataMessage);c.paginationStatusNode.innerHTML=r.substitute(c.i18nPagination.status,{start:Math.min(d+1,g),end:Math.min(g,d+n),total:g});c._total=g;c._currentPage=a;c._rowsOnPage=b.length;c._updateNavigation()});(7>e("ie")||e("ie")&&e("quirks"))&&
c.resize();g.resolve(h)},function(a){t(c);g.reject(a)});return g.promise})||g.reject();return g.promise}})})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(h,d,a,b,l,m,p,r,e,f){function c(a){return new e(parseFloat(a.x),parseFloat(a.y)-parseFloat(a.height),parseFloat(a.x)+parseFloat(a.width),parseFloat(a.y),a.spatialReference)}var n=h(p,{declaredClass:"esri.geometry.Rect",
constructor:function(a,c,e,k,g){d.mixin(this,b.defaultRect);d.isObject(a)&&"extent"===a.type&&(c=a.ymax,e=a.getWidth(),k=a.getHeight(),g=a.spatialReference,a=a.xmin);d.isObject(a)?(d.mixin(this,a),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=a,this.y=c,this.width=e,this.height=k,this.spatialReference=g);this.verifySR()},getCenter:function(){return new r(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(a,b){return new n(this.x+
a,this.y+b,this.width,this.height,this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return c(this)},update:function(a,b,c,k,g){this.x=a;this.y=b;this.width=c;this.height=k;this.spatialReference=g;this.clearCache();return this}});a("extend-esri")&&(d.setObject("geometry.Rect",n,l),l.geometry._rectToExtent=c,l.geometry._extentToRect=function(a){return new n(a)});return n})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "),
function(h,d,a,b,l,m){h=h(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&d.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=a.editable,this.nullable=a.nullable,(a=a.domain)&&d.isObject(a)))switch(a.type){case "range":this.domain=new l(a);break;case "codedValue":this.domain=new m(a)}}});a("extend-esri")&&d.setObject("layers.Field",h,b);return h})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),
function(h,d,a,b,l,m,p,r,e,f){var c=h(m,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){a&&(a.leftTableSource&&(this.leftTableSource=this._createLayerSource(a.leftTableSource)),a.rightTableSource&&(this.rightTableSource=this._createLayerSource(a.rightTableSource)))},_createLayerSource:function(a){var b;if("mapLayer"===a.type)b=new p(a);else{b={type:"dataLayer"};var d;switch(a.dataSource.type){case "table":d=new r(a.dataSource);break;case "queryTable":d=new e(a.dataSource);break;
case "joinTable":d=new c(a.dataSource);break;case "raster":d=new f(a.dataSource);break;default:d=a.dataSource}b.dataSource=d;b.toJson=function(){var a={type:"dataLayer",dataSource:d.toJson()};return l.fixJson(a)}}return b},toJson:function(){var a={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},b;b="left-outer-join"===this.joinType.toLowerCase()?
"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=b;return l.fixJson(a)}});a("extend-esri")&&d.setObject("layers.JoinDataSource",c,b);return c})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B){var D,y=-1!==e.renderer.toLowerCase().indexOf("svg"),I=-1!==e.renderer.toLowerCase().indexOf("canvas"),H=9>s("ie"),M=s("esri-touch");q=h(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var c,g=this._connects=[];this._map=a;I?(c=m.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return c}},g.push(d.connect(c,"onmousedown",this,this._canvasDownHandler)),g.push(d.connect(c,
"onmouseup",this,this._canvasUpHandler)),g.push(d.connect(c,"onclick",this,this._canvasClickHandler)),D.prototype._canvas=!0):(c=(this._surface=e.createSurface(b,a.width,a.height)).getEventSource(),p.set(c=H?c.parentNode:c,{overflow:"visible",position:"absolute"}));g.push(d.connect(a,"onResize",this,"_onResizeHandler"));return c},_onResizeHandler:function(a,c,g){a=this._surface.getEventSource();var k=this._map,e;H&&p.set(a=a.parentNode,{width:c+"px",height:g+"px",clip:"rect(0px "+c+"px "+g+"px 0px)"});
l.set(a,"width",c);l.set(a,"height",g);this._surface.declaredClass||b.forEach(a.childNodes,function(a){l.set(a,"width",c);l.set(a,"height",g)});k.loaded&&(k.graphics.suspended||(k.graphics._resized=!0),b.forEach(k.graphicsLayerIds,function(a){e=k.getLayer(a);e.suspended||(e._resized=!0);e._updateSVGFilters(null,null,c,g)}))},_cleanUp:function(){b.forEach(this._connects,d.disconnect,d);this._map=this._surface=null},_processEvent:function(a){var b=this._map;a.screenPoint=new z(a.pageX-b.position.x,
a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint)},_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(a,c,g,k){if(!a.visible||!c)return!1;var e=c.getTransformedBoundingBox(),f;return e?(f=new x(e[0].x,e[0].y,e[2].x,e[2].y),delete f.spatialReference,M?f.intersects(g):f.contains(k)):b.some(c.children||[],function(a){e=
a.getTransformedBoundingBox();f=new x(e[0].x,e[0].y,e[2].x,e[2].y);delete f.spatialReference;return M?f.intersects(g):f.contains(k)})},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var c=this._map,g=b.map(c.graphicsLayerIds,function(a){return c.getLayer(a)});g.push(c.graphics);g.reverse();var g=b.filter(g,function(a){return a.loaded&&a._mouseEvents&&!a.suspended&&(!t.isDefined(a.opacity)||0<a.opacity)}),k=a.screenPoint,e=this._tolerance,
f=k.x-e,n=k.y+e,d=k.x+e,e=k.y-e,q=new x(f,e,d,n),f=c.toMap(new z(f,n)),d=c.toMap(new z(d,e)),n=f.spatialReference._getInfo(),l=new x(x.prototype._normalizeX(f.x,n).x,f.y,x.prototype._normalizeX(d.x,n).x,d.y,f.spatialReference),m;delete q.spatialReference;b.some(g,function(a){a=b.filter(a.graphics,function(a){return this._isPrimaryMatch(a,a.getDojoShape(),q,k)||!(!a._bgShape||!this._isPrimaryMatch(a,a._bgShape,q,k))},this);a.reverse();if(0<a.length){var c;b.some(a,function(a){return a.geometry&&l.intersects(a.geometry)?
(c=a,!0):!1});if(c)return m=c,!0}return!1},this);if(m&&(g=m.getLayer()))a.graphic=m,g.onClick(a)}}});D=h(n,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:I?"canvas-2d":e.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(b,c){if(b&&(a.isString(b)||a.isObject(b)&&(b.layerDefinition||b.query)))b=c;this._params=a.mixin({displayOnPan:!0,drawMode:!0,styling:!0},b||{});var g=this._params.dataAttributes;
"string"===typeof g&&(g=[g]);this.styling=y?this._params.styling:!0;this.dataAttributes=g;this.infoTemplate=b&&b.infoTemplate;this.graphics=[];this._draw=a.hitch(this,this._draw);this._refresh=a.hitch(this,this._refresh);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(a){this._params.drawMode=a},renderer:null,_setMap:function(b,c){this.inherited(arguments);this._map=b;this._wrap=b.wrapAround180;this._srInfo=b.spatialReference._getInfo();
this._svgFilters={};this._canvas?(c=e.createSurface(c.getEventSource(),b.width,b.height),p.set(c.rawNode,"position","absolute"),this._div=c.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=a.hitch(this,this._canvasRender)):this._div=c.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";var g=this.opacity;t.isDefined(g)&&1>g&&this.setOpacity(g,!0);return this._div},_unsetMap:function(a,c){b.forEach(this.graphics,
function(a){a._shape=null});this._canvas?(c=this._div.getParent(),c._parent={},m.destroy(c.rawNode),c.destroy()):(this._div.clear(),c.remove(this._div),m.destroy(this._div.getEventSource()));this._map=this._div=this._svgFilters=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onZoomStartHandler:function(){g.hide(this._div.getEventSource())},_onExtentChangeHandler:function(a,b,c,k){clearTimeout(this._wakeTimer);this._wakeTimer=null;c?
(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),this._refresh(!0),this._updateTransform(b,a.x,a.y,!0),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||g.show(b.getEventSource())):this._resized&&(this._refresh(!1),this._resized=!1);if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||g.show(a.getEventSource()));return this._renderProto.apply(a,arguments)},_refresh:function(a){var b=
this.graphics,c=b.length,g,k=this._draw;for(g=0;g<c;g++)k(b[g],a)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._updateTransform(this._div,c.x+b.x,c.y+b.y)},_onPanEndUpdateHandler:function(a,b){var c=this._map.__visibleRect;!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)?this._updateTransform(this._div,c.x,c.y,!0):this._updateSVGFilters(-c.x,-c.y);this._refresh(!1);
if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){g.hide(this._div.getEventSource())},_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;this._updateTransform(b,a.x,a.y,!0);this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:g.show(b.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(a,b,c,g){a.setTransform(f.translate({x:b,y:c}));g&&this._updateSVGFilters(-b,-c)},onSuspend:function(){this.inherited(arguments);
g.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(b){this.inherited(arguments);b.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var a=this._map,b=d.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||
(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=d.disconnect;
a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,g;if("esri.geometry.Point"===b.declaredClass)c=b.x,g=b.y;else if("esri.geometry.Multipoint"===
b.declaredClass)c=b.points[0][0],g=b.points[0][1];else{a._extent=null;return}a._extent=new x(c,g,c,g,b.spatialReference)}}else a._extent=null},_intersects:function(a,c,g){var k=a.spatialReference,e=c.spatialReference,f=k&&e&&!k.equals(e)&&k._canProject(e)&&4326===e.wkid;if(this._wrap&&!g){g=[];var k=a._getFrameWidth(),n=this._srInfo,d=a._clip?a._getAvailExtent():a.extent,q,l,m,h,v=[];q=c._partwise;f&&(d=a.geographicExtent,n=e._getInfo());a=d._getParts(n);if(q&&q.length){c=[];e=0;for(f=q.length;e<
f;e++)c=c.concat(q[e]._getParts(n))}else c=c._getParts(n);e=0;for(f=c.length;e<f;e++){m=c[e];n=0;for(d=a.length;n<d;n++)if(h=a[n],h.extent.intersects(m.extent)){q=0;for(l=m.frameIds.length;q<l;q++)g.push((h.frameIds[0]-m.frameIds[q])*k)}}e=0;for(f=g.length;e<f;e++)q=g[e],b.indexOf(g,q)===e&&v.push(q);return v.length?v:null}return(f?a.geographicExtent:a.extent).intersects(c)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&
this._map&&!this.suspended)try{var c=a._extent,g,k,e=!y||this.styling,f=y&&this.dataAttributes,n=a.getDojoShape(),d;if(a.visible&&c&&(g=this._intersects(this._map,c,a.geometry._originOnly))&&(k=e?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==g.join(",")?a._offsets=g:d=!0,!n||b||!d){var q=a.geometry.type,c={graphic:a},l=a._bgShape,m=e&&!a.symbol?this._getRenderer(a):null,h=m&&m.backgroundFillSymbol;if("point"===q)this._isInvalidShape(k,n)&&this._removeShape(a),a._shape=
this._drawPoint(this._div,a.geometry,k,a.getDojoShape(),g,m,a),e&&this._symbolizePoint(a.getDojoShape(),k,m,a);else if("multipoint"===q)this._drawMarkers(a,k,g,m),e&&this._symbolizeMarkers(a,k,m);else{var v,q=k,w,p;e&&(q=(v="simplemarkersymbol"===k.type||"picturemarkersymbol"===k.type||"textsymbol"===k.type?k:null)?h:k);q&&q===h&&(w=this._bgGroup);l&&!w&&this._removeBgShape(a);q&&(!w&&this._isInvalidShape(q,a._shape)&&this._removeShape(a,!1),p=this._drawShape(a,g,w||this._div,w?l:a.getDojoShape()),
e&&this._symbolizeShape(p,q,m,!!h,a),a[w?"_bgShape":"_shape"]=p);if(v){this._isInvalidShape(v,a._shape)&&this._removeShape(a,!1);var x=a.geometry.getCentroid();(p=x&&this._drawPoint(this._div,x,v,a._shape,g,m,a))&&this._symbolizePoint(p,v,m,a);a._shape=p}}I||(a._bgShape&&this._initNode(a,a._bgShape,a._bgShape!==l,c,f),a._shape&&this._initNode(a,a._shape,a._shape!==n,c,f));c.node=a.getNode();this.onGraphicDraw(c)}}else n&&this._removeShape(a)}catch(t){this._errorHandler(t,a)}},_initNode:function(a,
b,c,g,k){if(b=b&&b.getNode())b.e_graphic=a,this._addDataAttrs(a,k,b),c&&(g.node=b,this.onGraphicNodeAdd(g))},_removeShape:function(a,b){var c=a.getDojoShape(),g=c&&c.getNode();c&&(c.removeShape(),c.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a);if(g&&(g.e_graphic=null,!I))this.onGraphicNodeRemove({graphic:a,node:g})},_removeBgShape:function(a){var b=a._bgShape,c=b&&b.getNode();b&&(b.removeShape(),b.destroy(),a._bgShape=null);if(c&&(c.e_graphic=null,!I))this.onGraphicNodeRemove({graphic:a,
node:c})},_addDataAttrs:function(a,b,c){var g=a.attributes,k,e=b?b.length:0,f=this._getRenderer(a);if(c&&g){for(k=0;k<e;k++)(c=b[k])&&a.attr("data-"+c,g[c]);!this.styling&&f&&(f.getBreakIndex?(b=f.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):f.getUniqueValueInfo&&(b=f.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)))}},_drawShape:function(a,b,c,g){a=a.geometry;var k=a.type,e=this._map,f=e.extent,n=e.width,d=e.height,e=e.__visibleRect,q=[],l,m;l="extent"===k;if("rect"===
k||l)q={x:0,y:0,spatialReference:a.spatialReference},q.x=l?a.xmin:a.x,q.y=l?a.ymax:a.y,k=E.toScreenPoint(f,n,d,q),q.x=l?a.xmax:a.x+a.width,q.y=l?a.ymin:a.y+a.height,a=E.toScreenPoint(f,n,d,q),b={x:k.x-e.x+b[0],y:k.y-e.y,width:Math.abs(a.x-k.x),height:Math.abs(a.y-k.y)},0===b.width&&(b.width=1),0===b.height&&(b.height=1),g=this._drawRect(c,g,b);else if("polyline"===k||"polygon"===k){l=0;for(m=b.length;l<m;l++)q=q.concat(E._toScreenPath(f,n,d,a,-e.x+b[l],-e.y));g=this._drawPath(c,g,q);this._rendererLimits&&
("polyline"===k?this._clipPolyline(g,a):this._clipPolygon(g,a))}return g},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c)},_drawImage:function(a,b,c){return b?b.setShape(c):a.createImage(c)},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c)},_drawPath:function(){return H?function(a,b,c,g){c=g?c:c.join(" ");if(b)return b.setShape(c);b=a.createObject(g?e.Path:e.EsriPath,c);a._overrideSize(b.getEventSource());return b}:function(a,b,c,g){c=g?c:c.join(" ");return b?
b.setShape(c):a.createPath(c)}}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c)},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,g,k=this._rndForScale;b&&(b.loaded&&c&&c.getRendererInfo)&&(g="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):c.getRendererInfoByScale(b.getScale()));this._rndForScale=g&&g.renderer;!a&&this._rndForScale!=k&&this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(a){var b=this._rndForScale||this.renderer;
a&&(b&&b.getObservationRenderer)&&(b=b.getObservationRenderer(a));return b},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a)},_getVariable:function(a,b,c){var g;a&&(g=(a=a.getVisualVariablesForType(b,c))&&a[0]);return g},_applyOpacity:function(a,b,c,g){b=b.getOpacity(g,{opacityInfo:c});null!=b&&(a=new k(a),a.a=b);return a},_symbolizeShape:function(b,c,g,k,e){var f=c.getStroke(),n=c.getFill(),d=c.type,q,l,m=this._getVariable(g,"sizeInfo",!1),h=this._getVariable(g,
"colorInfo",!1),v=this._getVariable(g,"opacityInfo",!1),w=-1!==d.indexOf("linesymbol");c=w?"none"!==c.style:c.outline&&"none"!==c.outline.style;var p=w?null:this._getVariable(g,"sizeInfo","outline"),m=(m=k?p:p||m)?g.getSize(e,{sizeInfo:m,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;k&&(h=v=null);if((h||v)&&"picturefillsymbol"!==d)w?(q=f&&f.color,h&&(q=g.getColor(e,{colorInfo:h})||q),q&&v&&(q=this._applyOpacity(q,g,v,e))):n&&n.toCss&&(l=n,h&&(l=g.getColor(e,{colorInfo:h})||
l),l&&v&&(l=this._applyOpacity(l,g,v,e)));b.setStroke(!c||null==m&&!q?f:a.mixin({},f,null!=m?{width:m}:null,q&&{color:q})).setFill(l||n)},_smsToPath:function(){return H?function(a,b,c,g,k,e,f,n,d){switch(b){case a.STYLE_SQUARE:return["M",k+","+f,"L",e+","+f,e+","+n,k+","+n,"X","E"];case a.STYLE_CROSS:return["M",c+","+f,"L",c+","+n,"M",k+","+g,"L",e+","+g,"E"];case a.STYLE_X:return["M",k+","+f,"L",e+","+n,"M",k+","+n,"L",e+","+f,"E"];case a.STYLE_DIAMOND:return["M",c+","+f,"L",e+","+g,c+","+n,k+","+
g,"X","E"];case a.STYLE_TARGET:return["M",k+","+f,"L",e+","+f,e+","+n,k+","+n,k+","+f,"M",k-d+","+g,"L",k+","+g,"M",c+","+(f-d),"L",c+","+f,"M",e+d+","+g,"L",e+","+g,"M",c+","+(n+d),"L",c+","+n,"E"]}}:function(a,b,c,g,k,e,f,n,d){switch(b){case a.STYLE_SQUARE:return["M",k+","+f,e+","+f,e+","+n,k+","+n,"Z"];case a.STYLE_CROSS:return["M",c+","+f,c+","+n,"M",k+","+g,e+","+g];case a.STYLE_X:return["M",k+","+f,e+","+n,"M",k+","+n,e+","+f];case a.STYLE_DIAMOND:return["M",c+","+f,e+","+g,c+","+n,k+","+g,
"Z"];case a.STYLE_TARGET:return["M",k+","+f,e+","+f,e+","+n,k+","+n,k+","+f,"M",k-d+","+g,k+","+g,"M",c+","+(f-d),c+","+f,"M",e+d+","+g,e+","+g,"M",c+","+(n+d),c+","+n]}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,g=a&&a.type,k=a&&a.style;"rect"===c&&(c="path");g&&
(k=this._typeMaps[g]||k);this._pathStyles[k]&&(k="path");return"shieldlabelsymbol"===g?!0:!(!c||!(k&&c!==k))},_drawPoint:function(a,b,c,g,k,e,n){var d=c.type,q=this._map,l=q.__visibleRect,m=E.toScreenPoint(q.extent,q.width,q.height,b).offset(-l.x+k[0],-l.y),l=m.x,h=m.y,v;b=[];var p,x=this._getVariable(e,"rotationInfo",!1),x=x?e.getRotationAngle(n,{rotationInfo:x}):null,t=this._getVariable(e,"sizeInfo",!1),q=t?e.getSize(n,{sizeInfo:t,shape:c.style,resolution:q.getResolutionInMeters(),scale:q.getScale()}):
null;x&&b.push(f.rotategAt(x,m));if(0!==c.xoffset||0!==c.yoffset)p=f.translate(c.xoffset,-c.yoffset),b.push(p);0!==c.angle&&b.push(f.rotategAt(c.angle,m));if("simplemarkersymbol"===d)switch(v=c.style,e=Math.round,q=null!=q?q:c.size,v){case w.STYLE_SQUARE:case w.STYLE_CROSS:case w.STYLE_X:case w.STYLE_DIAMOND:c=isNaN(q)?16:q/2;v=this._drawPath(a,g,this._smsToPath(w,v,l,h,e(l-c),e(l+c),e(h-c),e(h+c)));break;case w.STYLE_TARGET:n=c._targetWidth/2;m=c._targetHeight/2;v=this._drawPath(a,g,this._smsToPath(w,
v,l,h,e(l-n),e(l+n),e(h-m),e(h+m),c._spikeSize));break;case w.STYLE_PATH:v=this._drawPath(a,g,c.path,!0);c=v.getBoundingBox();a=this._getScaleMatrix(c,q);(1!==a.xx||1!==a.yy)&&b.push(f.scaleAt(a.xx,a.yy,m));b.push(f.translate(-(c.x+c.width/2)+l,-(c.y+c.height/2)+h));break;default:c=isNaN(q)?16:q/2,v=this._drawCircle(a,g,{cx:l,cy:h,r:c})}else if("shieldlabelsymbol"===d)v=c.width,m=c.height,g=a.createGroup(),v=a.createImage({x:l-v/2,y:h-m/2,width:v,height:m,src:c.url}),g.add(v),null!=c.font&&(h+=0.2*
c.getHeight(),a=a.createText({type:"text",text:c.text,x:l,y:h,align:"middle",decoration:c.decoration,rotated:c.rotated,kerning:c.kerning}),a.setFont(c.font),a.setFill(c.color),g.add(a)),v=g;else if("picturemarkersymbol"===d){if(null==q?(v=c.width,m=c.height):(m=q,v=m*(c.width/c.height),p&&(null!=p.dx&&(p.dx=v*(p.dx/c.width)),null!=p.dy&&(p.dy=m*(p.dy/c.height)))),v=this._drawImage(a,g,{x:l-v/2,y:h-m/2,width:v,height:m,src:c.url}),y&&(a=v.getNode()))c=(c=this._getVariable(e,"opacityInfo",!1))?e.getOpacity(n,
{opacityInfo:c}):null,null!=c?a.setAttribute("opacity",c):a.setAttribute("opacity",1)}else"textsymbol"===d&&(e=c.font,null!=q&&e&&(e=new e.constructor(e.toJson()),e.setSize(q)),v=this._drawText(a,g,{type:"text",text:c.text,x:l,y:h,align:c.getSVGAlign(),decoration:c.decoration||e&&e.decoration,rotated:c.rotated,kerning:c.kerning}),e&&v.setFont(e),y&&(a=v.getNode(),l=c.getSVGBaseline(),h=c.getSVGBaselineShift(),a&&(a.setAttribute("dominant-baseline",l),h&&a.setAttribute("baseline-shift",h),this._applyHalo(v,
c.haloColor,c.haloSize))));v.setTransform(f.multiply(b));v._wrapOffsets=k;return v},_applyHalo:function(a,b,c){var g=b&&c?this._getHaloId(b,c):null;a.setFilter(b&&c?s("webkit")||s("ff")?this._getDilateFilter(b,c,g):this._getOffsetFilter(b,c,g):null)},_getDilateFilter:function(a,b,g){var k=this._getSVGFilter(g);k||(k=this._createSVGFilter({id:g},[c.feMorphology({operator:"dilate",radius:b,result:"dilated"}),c.feFlood({"flood-color":a.toCss(!0)}),c.feComposite({in2:"dilated",operator:"in",result:"composite"}),
c.feMerge("composite","SourceGraphic")]));return k},_getOffsetFilter:function(a,b,g){var k=this._getSVGFilter(g);if(!k){a=a.toCss(!0);var k=this._offsetPrimitives,e,f=k.length,n=[],d=[];for(e=0;e<f;e++){var q=k[e],l="offset"+q.dir,m="composite"+q.dir;d.push(m);n.push(c.feOffset({dx:q.dx*b,dy:q.dy*b,"in":"SourceAlpha",result:l}),c.feFlood({"flood-color":a}),c.feComposite({in2:l,operator:"in",result:m}))}d.push("SourceGraphic");n.push(c.feMerge.apply(c.feMerge,d));k=this._createSVGFilter({id:g},n)}return k},
_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(a,b){return"halo_"+this._map.id+"_"+this.id+"_"+a.r+"_"+a.g+"_"+a.b+"_"+a.a+"_"+b},_getSVGFilter:function(a){return this._svgFilters[a]},_createSVGFilter:function(a,b){var g=c.createFilter(a,b),k=this._map,e=k.__visibleRect;g.x=-e.x;g.y=-e.y;g.width=k.width;g.height=k.height;return this._svgFilters[a.id]=
g},_updateSVGFilters:function(a,b,c,g){var k=this._svgFilters,e,f,n;for(f in k)if(e=k[f]){if(n=r.byId(f))null!=a&&n.setAttribute("x",a),null!=b&&n.setAttribute("y",b),null!=c&&n.setAttribute("width",c),null!=g&&n.setAttribute("height",g);null!=a&&(e.x=a);null!=b&&(e.y=b);null!=c&&(e.width=c);null!=g&&(e.height=g)}},_getScaleMatrix:function(a,b){var c=a.width/a.height,g=1,k=1;isNaN(b)||(1<c?(g=b/a.width,k=b/c/a.height):(k=b/a.height,g=b*c/a.width));return{xx:g,yy:k}},_symbolizePoint:function(b,c,g,
k){var e=c.type,f=c.style;if(!("shieldlabelsymbol"===e||"picturemarkersymbol"===e)){var n=c.getStroke();c=c.getFill();var f=f===w.STYLE_X||f===w.STYLE_CROSS,d=n&&n.color,q=f?d:c;if(g){var l=this._getVariable(g,"colorInfo",!1),m=this._getVariable(g,"opacityInfo",!1);l&&(q=g.getColor(k,{colorInfo:l})||q);q&&m&&(q=this._applyOpacity(q,g,m,k));q&&(f?q!==d&&(n=n?a.mixin({},n):{},n.color=q):q!==c&&(c=q))}"textsymbol"===e?b.setFill(c):"simplemarkersymbol"===e&&b.setFill(c).setStroke(n)}},_drawMarkers:function(a,
b,c,g){var k=a.geometry,e=k.points,f=a.getDojoShape()||this._div.createGroup(),n,d,q=e.length,l=[],m=0,h,v=c?c.length:0;f.children[0]&&this._isInvalidShape(b,f.children[0])&&f.clear();for(d=0;d<q;d++){n=e[d];for(h=0;h<v;h++)l[0]=c[h],this._drawPoint(f,{x:n[0],y:n[1],spatialReference:k.spatialReference},b,f.children[m++],l,g,a)}b=f.children.length;if(q*c.length<b)for(d=b-1;d>=q*c.length;d--)f.children[d].removeShape();a._shape=f},_symbolizeMarkers:function(a,b,c){var g=a.getDojoShape().children,k,
e=g.length;for(k=0;k<e;k++)this._symbolizePoint(g[k],b,c,a)},_errorHandler:function(a,b){a.message=b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments)},_rendererLimits:function(){var a,b,c;s("ff")?(a=16125,b=-32250,c=32250):H?(a=1E5,b=-1E5,c=1E5):s("chrome")&&6>s("chrome")&&(a=8150,b=-1E4,c=1E4);if(a)return{clipLimit:a,rangeMin:b,rangeMax:c,
clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,-a]]]}}(),_clipPolyline:function(a,c){var g=this._getCorners(a,c),k=g.br,e=this._rendererLimits,f=e.rangeMin,n=e.rangeMax,d=e.clipBBox,q=e.clipSegments,e=this._isPointWithinRange,l=this._isPointWithinBBox,m=this._getClipperIntersection,h=this._getPlaneIndex;if(!e(g.tl,f,n)||!e(k,f,n)){H&&this._createSegments(a);var v=[];b.forEach(a.segments,function(a){a=a.args;var b=a.length,c=[],g;for(g=0;g<b;g+=2){var k=
[a[g],a[g+1]],e=[a[g+2],a[g+3]],f=l(k,d),n=l(e,d);if(f^n){if(n=m([k,e],q))f?(g?c.push(n[1]):c.push(k,n[1]),v.push(c),c=[]):c.push(n[1],e)}else f?g?c.push(e):c.push(k,e):(n=h(k,d),f=h(e,d),-1===n||(-1===f||n===f)||(k=m([k,e],q,!0),0<k.length&&(k[n]||(n=k[n[0]]?n[0]:n[1]),k[f]||(f=k[f[0]]?f[0]:f[1]),e=k[n],k=k[f],e&&c.push(e),k&&(c.push(k),v.push(c),c=[]))))}v.push(c)});a.setShape(this._getPathStringFromPaths(v))}},_clipPolygon:function(c,g){var k=this._getCorners(c,g),e=k.br,f=this._rendererLimits,
n=f.clipLimit,d=f.rangeMin,q=f.rangeMax,l=f.clipBBox,m=f.clipSegments,f=this._isPointWithinRange,h=this._isPointWithinBBox,v=this._getClipperIntersection,w=this._getPlaneIndex,p=A._pointLineDistance;if(!f(k.tl,d,q)||!f(e,d,q))H&&this._createSegments(c),k=b.map(c.segments,function(c){var g=c.args,k=g.length,e=[];c=[];var f;for(f=0;f<k;f+=2){var d=[g[f],g[f+1]],q=[g[f+2],g[f+3]];if(f===k-2){e.push(d);break}var x=h(d,l),t=h(q,l);e.push(d);if(x^t){if(t=v([d,q],m))d=t[1],d[x?"inOut":"outIn"]=!0,e.push(d),
c.push([x?"INOUT":"OUTIN",e.length-1,t[0]])}else if(!x){var x=w(d,l),s=w(q,l);-1===x||(-1===s||x===s)||(t=v([d,q],m,!0),0<t.length?(t[x]||(x=t[x[0]]?x[0]:x[1]),t[s]||(s=t[s[0]]?s[0]:s[1]),d=t[x],q=t[s],d&&(d.outIn=!0,e.push(d),c.push(["OUTIN",e.length-1,x])),q&&(q.inOut=!0,e.push(q),c.push(["INOUT",e.length-1,s]))):a.isArray(x)&&a.isArray(s)&&(t=x.concat(s),t.sort(),"0123"===t.join("")&&(t=[],3===x[0]+x[1]?t.push([n,-n],[-n,n]):t.push([-n,-n],[n,n]),x=p(t[0],[d,q]),d=p(t[1],[d,q]),e.push(x<d?t[0]:
t[1]))))}}var u=l[0],r=l[1],z=l[2],A=l[3];b.forEach(e,function(a){a[0]<u&&(a[1]>=r&&a[1]<=A?a[0]=u:(a[0]=u,a[1]=a[1]<r?r:A))});b.forEach(e,function(a){a[1]<r&&(a[0]>=u&&a[0]<=z?a[1]=r:(a[1]=r,a[0]=a[0]<u?u:z))});b.forEach(e,function(a){a[0]>z&&(a[1]>=r&&a[1]<=A?a[0]=z:(a[0]=z,a[1]=a[1]<r?r:A))});b.forEach(e,function(a){a[1]>A&&(a[0]>=u&&a[0]<=z?a[1]=A:(a[1]=A,a[0]=a[0]<u?u:z))});g=0;k=c.length;if(0<k){do{q=c[g];f=c[(g+1)%k];if(q[2]===f[2]&&"INOUT"===q[0]&&"OUTIN"===f[0])if(d=q[1],f=f[1],d<f)for(d+=
1;d<f;d++)e[d][2]=!0;else if(d>f){for(d+=1;d<e.length;d++)e[d][2]=!0;for(d=0;d<f;d++)e[d][2]=!0}g=(g+1)%k}while(0!==g)}k=e[0];g=e[e.length-1];k[2]&&(g[2]=!0,b.some(c,function(b){return 1===b[1]?(e.splice(e.length-1,0,a.clone(e[1])),!0):!1}));e=b.filter(e,function(a){return a[2]?!1:!0});for(g=0;g<e.length-1;g++)if(k=e[g],(f=e[g+1])&&!(k[0]!==f[0]||k[1]!==f[1]))f.outIn?k.outIn=!0:f.inOut&&(k.inOut=!0),e.splice(g+1,1);k=Math.abs;c=[];for(g=0;g<e.length-1;g++){q=e[g];d=q[0];q=q[1];x=k(d)===n;t=k(q)===
n;f=e[g+1];s=f[0];f=f[1];var E=k(s)===n,B=k(f)===n;x&&B?c.push([g+1,[d,f]]):t&&E&&c.push([g+1,[s,q]])}for(g=c.length-1;0<=g;g--)f=c[g],d=e[f[0]-1],k=e[f[0]],!d.outIn&&(!d.inOut&&!k.outIn&&!k.inOut)&&e.splice(f[0],0,f[1]);k=e[0];g=e[e.length-1];(k[0]!==g[0]||k[1]!==g[1])&&e.push(k);return e}),c.setShape(this._getPathStringFromPaths(k))},_getCorners:function(a,b){if(H){var c=this._map,g=b.getExtent(),e=g.spatialReference,k=c.toScreen(new v(g.xmin,g.ymax,e)),c=c.toScreen(new v(g.xmax,g.ymin,e));return{tl:k,
br:c}}k=a.getTransformedBoundingBox();return{tl:k[0],br:k[2]}},_createSegments:function(a){a.shape.path=a.vmlPath;a.segmented=!1;a._confirmSegmented();var c=a.segments;1<c.length&&(a.segments=b.filter(c,function(a,b,c){b=c[b+1];return"M"===a.action&&b&&"L"===b.action?(a.args=a.args.concat(b.args),!0):!1}))},_getPathStringFromPaths:function(a){H?(a=b.map(a,function(a){return"m "+b.map(a,function(a,b){return(1===b?"l ":"")+a.join(",")}).join(" ")}),a.push("e")):a=b.map(a,function(a){return"M "+b.map(a,
function(a){return a.join(",")}).join(" ")});return a.join(" ")},_isPointWithinBBox:function(a,b){var c=b[1],g=b[2],k=b[3],e=a[0],f=a[1];return e>b[0]&&e<g&&f>c&&f<k?!0:!1},_isPointWithinRange:function(a,b,c){var g=a.x;a=a.y;return g<b||a<b||g>c||a>c?!1:!0},_getClipperIntersection:function(a,b,c){var g,e=A._getLineIntersection2,k=Math.round,f={length:0};for(g=0;4>g;g++){var n=e(a,b[g]);if(n)if(n[0]=k(n[0]),n[1]=k(n[1]),c)f[g]=n,f.length++;else return[g,n]}return c?f:null},_getPlaneIndex:function(a,
b){var c=a[0],g=a[1],k=b[0],e=b[1],f=b[2],n=b[3];return c<=k?g>=e&&g<=n?3:g<e?[0,3]:[2,3]:g<=e?c>=k&&c<=f?0:c<k?[3,0]:[1,0]:c>=f?g>=e&&g<=n?1:g<e?[0,1]:[2,1]:g>=n?c>=k&&c<=f?2:c<k?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a},add:function(a,b){if(a._graphicsLayer===
this)return a;b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);this._draw(a);if(!b)this.onGraphicAdd(a);return a},remove:function(a,c){if(!c){var g;if(-1===(g=b.indexOf(this.graphics,a)))return null;a=this.graphics.splice(g,1)[0]}a.getDojoShape()&&this._removeShape(a);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a},clear:function(a,b){for(var c=this.graphics;0<c.length;)this.remove(c[0]);if(!b)this.onGraphicsClear()},_setIEOpacity:function(a,b){var c=
a&&a.getNode();if(c){var g=a.strokeStyle,k=c.stroke;g&&k&&(k.opacity=g.color.a*b);g=a.fillStyle;k=c.fill;g&&k&&("tile"===k.type?p.set(c,"opacity",b):k.opacity=g.a*b)}},setOpacity:function(a,c){if(c||this.opacity!=a){var g=this._div;g&&(H?(b.forEach(this.graphics,function(b){this._setIEOpacity(b._shape,a);this._setIEOpacity(b._bgShape,a)},this),g._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?p.set(g.getEventSource(),"opacity",a):g.getEventSource().setAttribute("opacity",a));this.opacity=
a;if(!c)this.onOpacityChange(a)}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);this.emit("renderer-change",{renderer:this._rndForScale||a})}});h=h([D,B],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=a.hitch(this,this.enableMouseEvents);this.disableMouseEvents=a.hitch(this,this.disableMouseEvents);this._processEvent=a.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var a=
this.inherited("_setMap",arguments);this.enableMouseEvents();return a},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(a){var b=this._map,c=a.target,g;a.screenPoint=new z(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(g=c.e_graphic);)c=c.parentNode;if(g)return a.graphic=g,a},_onMouseOverHandler:function(a){if(this._processEvent(a))this.onMouseOver(a)},_onMouseMoveHandler:function(a){if(this._processEvent(a))this.onMouseMove(a)},
_onMouseDragHandler:function(a){if(this._processEvent(a))this.onMouseDrag(a)},_onMouseOutHandler:function(a){if(this._processEvent(a))this.onMouseOut(a)},_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(d.disconnect(this._onmousemove_connect),d.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=d.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a))},
_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(d.disconnect(this._onmousedrag_connect),d.disconnect(this._onmousemove_connect),this._onmousemove_connect=d.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a))},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&(c&&b===c&&this._downPt===this._upPt)&&(H&&(u._ieGraphic=a.graphic),
this.onClick(a))}},_onDblClickHandler:function(a){if(this._processEvent(a))this.onDblClick(a)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=d.connect,b=this._div.getEventSource();I||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",
this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var a=d.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);
a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);this._mouseEvents=!1}}});h._GraphicsContainer=q;h._GraphicsLayer=D;s("extend-esri")&&(a.setObject("layers.GraphicsLayer",h,u),a.setObject("layers._GraphicsContainer",q,u),a.setObject("layers._GraphicsLayer",D,u));return h})},"esri/dijit/geoenrichment/_Wizard":function(){define("../../declare dojo/_base/lang dojo/on dijit/_WidgetBase dojo/dom-construct dijit/layout/ContentPane ./AnimationHelper".split(" "),
function(h,d,a,b,l,m,p){return h("esri.dijit.geoenrichment._Wizard",[b],{_currentPage:null,_anim:null,pages:null,stacking:"stretch",constructor:function(){this.pages={};this._anim=new p},buildRendering:function(){this.domNode=l.create("div",{"class":"_Wizard_Root"})},loadPage:function(a){a=this.pages[a];var b=this._currentPage;a!==b&&(this._anim.finish(),b&&this._animPage("Anim_FadeOut").then(d.hitch(this.domNode,"removeChild",b.domNode)),this._currentPage=a,this.domNode.appendChild(this._currentPage.domNode),
b&&this._animPage("Anim_FadeIn"),a._started?a.resize():(a.set("stacking",this.stacking),a.startup()))},_animPage:function(a){return this._anim.start([{node:this._currentPage.domNode,classes:[a,"Wizard_FadeAnim"]}])},resize:function(){this._currentPage&&this._currentPage.resize()},addButtons:function(b,e){var f=this.pages[b],c;if(!f.buttonsNode){var n,d=f.layoutGrid.getChildren();for(c=0;c<d.length;c++)2==d[c].row&&(n=d[c]);n||(n=new m({row:2,"class":"Wizard_BottomPane"}),f.layoutGrid.addChild(n));
f.buttonsNode=l.create("div",{"class":"Wizard_Buttons"},n.domNode)}n={};for(c=0;c<e.length;c++)d=l.create("button",{"class":"Wizard_Button",innerHTML:e[c].label},f.buttonsNode),e[c].id&&(n[e[c].id]=d),a(d,"click",e[c].onClick);return n},destroy:function(){for(var a in this.pages)this.hasOwnProperty(a)&&this.pages[a].destroyRecursive();this.pages={};this.inherited(arguments)}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B){w=b("dijit._InlineEditor",[q,w,v],{templateString:B,contextRequire:h,postMixInProperties:function(){this.inherited(arguments);this.messages=e.getLocalization("dijit","common",this.lang);d.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?n.getObject(this.editor)||h(this.editor):this.editor,b=this.sourceStyle,
c="line-height:"+b.lineHeight+";",g=r.getComputedStyle(this.domNode);d.forEach(["Weight","Family","Size","Style"],function(a){g["font"+a]!=b["font"+a]&&(c+="font-"+a+":"+b["font"+a]+";")},this);d.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=b[a]},this);var k=this.inlineEditBox.width;"100%"==k?(c+="width:100%;",this.domNode.style.display="block"):c+="width:"+(k+(Number(k)==k?"px":""))+";";k=n.delegate(this.inlineEditBox.editorParams,
{style:c,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(k,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,p.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var b=this.editWidget;this.inlineEditBox.autoSave?this.own(a.after(b,"onChange",n.hitch(this,"_onChange"),!0),u(b,"keydown",n.hitch(this,"_onKeyDown"))):"intermediateChanges"in b&&(b.set("intermediateChanges",
!0),this.own(a.after(b,"onChange",n.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(!a.altKey&&!a.ctrlKey)&&(a.keyCode==c.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==c.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
(this.inlineEditBox.editing&&this.enableSave())&&g.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(g._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){A.selectInputText(this.editWidget.focusNode)}))}});q=b("dijit.InlineEditBox"+(t("dojo-bidi")?"_NoBidi":""),q,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:E,editorWrapper:w,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=t("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(u(this.displayNode,k,n.hitch(this,"_onClick")),u(this.displayNode,"mouseover, focus",n.hitch(this,"_onMouseOver")),u(this.displayNode,"mouseout, blur",n.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);!this.value&&!("value"in this.params)&&(this.value=n.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);m.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(a){f.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);m.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||m.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){m.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
l.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=p.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?n.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:r.getComputedStyle(this.displayNode),save:n.hitch(this,"save"),cancel:n.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var b=this.wrapperWidget;m.add(this.displayNode,"dijitOffScreen");m.remove(b.domNode,"dijitOffScreen");r.set(b.domNode,{visibility:"visible"});l.set(this.displayNode,"tabIndex","-1");var c=b.editWidget,g=this;s(c.onLoadDeferred,n.hitch(b,function(){c.set("displayedValue"in c||"_setDisplayedValueAttr"in c?"displayedValue":"value",g.value);this.defer(function(){b.saveButton&&b.saveButton.set("disabled",
"intermediateChanges"in c);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var b=this.wrapperWidget;r.set(b.domNode,{visibility:"hidden"});m.add(b.domNode,"dijitOffScreen");m.remove(this.displayNode,"dijitOffScreen");l.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
g.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var b=this.wrapperWidget.getValue();this.set("value",b);this._showText(a)}},setValue:function(a){f.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){a=n.trim(a);var b=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=b||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){f.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});t("dojo-bidi")&&(q=b("dijit.InlineEditBox",q,{_setValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.displayNode)}}));q._InlineEditor=w;return q})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(h,d,a,b,l,m){h=h(null,{declaredClass:"esri.symbol.Symbol",color:new m([0,0,0,1]),type:null,constructor:function(a){if(a&&d.isObject(a)&&(d.mixin(this,a),this.color&&l.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),(a=this.type)&&0===a.indexOf("esri")))this.type={esriSMS:"simplemarkersymbol",
esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[a]},setColor:function(a){this.color=a;return this},toJson:function(){return{color:m.toJsonColor(this.color)}}});a("extend-esri")&&d.setObject("symbol.Symbol",h,b);return h})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(h,d,a,b,l,m){h=h(m,{declaredClass:"esri.symbol.LineSymbol",constructor:function(a){d.isObject(a)?this.width=b.pt2px(this.width):this.width=12},setWidth:function(a){this.width=a;return this},toJson:function(){var a=b.px2pt(this.width),a=isNaN(a)?void 0:a;return d.mixin(this.inherited("toJson",arguments),{width:a})}});a("extend-esri")&&d.setObject("symbol.LineSymbol",h,l);return h})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c){h=h(null,{declaredClass:"esri.layers.FeatureType",constructor:function(a){if(a&&d.isObject(a)){this.id=a.id;this.name=a.name;var b=a.symbol;b&&(this.symbol=p.fromJson(b));var b=a.domains,l,m=this.domains={};for(l in b)if(b.hasOwnProperty(l)){var k=b[l];switch(k.type){case "range":m[l]=new r(k);break;case "codedValue":m[l]=new e(k);break;case "inherited":m[l]=new f(k)}}if(l=a.templates){b=this.templates=[];for(a=0;a<l.length;a++)b.push(new c(l[a]))}}},toJson:function(){var b=
{id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},c,e=this.domains,f=this.templates,k=m.fixJson;if(e){var g=b.domains={};for(c in e)e.hasOwnProperty(c)&&(g[c]=e[c]&&e[c].toJson());k(g)}f&&(b.templates=a.map(f,function(a){return a.toJson()}));return k(b)}});b("extend-esri")&&d.setObject("layers.FeatureType",h,l);return h})},"dojox/mvc/Templated":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./at".split(" "),
function(h,d,a,b,l){return h("dojox.mvc.Templated",[a,b,l],{bindings:null,startup:function(){var a=d.isFunction(this.bindings)&&this.bindings.call(this)||this.bindings,b;for(b in a){var l=this[b],e=a[b];if(l)for(var f in e)l.set(f,e[f]);else console.warn("Widget with the following attach point was not found: "+b)}this.inherited(arguments)}})})},"esri/tasks/geoenrichment/studyAreaOptionsFromJson":function(){define(["./RingBuffer","./DriveBuffer","./IntersectingGeographies","../../extend"],function(h,
d,a,b){var l=function(b){if(b){switch(b.areaType){case "DriveTimeBuffer":return new d(b);case "StandardGeography":return new a(b)}switch(b.type){case "DriveTime":return new d(b);case "StdGeo":return new a(b)}return new h(b)}return new h};b("esri.tasks.geoenrichment.studyAreaOptionsFromJson",l);return l})},"esri/dijit/analysis/PlanRoutes":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/TimeTextBox dijit/form/DateTextBox ../../kernel ../../lang ../../graphic ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../symbols/PictureMarkerSymbol dojo/i18n!../../nls/jsapi dojo/text!./templates/PlanRoutes.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V){h=d([w,v,z,x,A,W,R],{declaredClass:"esri.dijit.analysis.PlanRoutes",templateString:V,esriDijitPath:h.toUrl(".."),widgetsInTemplate:!0,stopsLayer:null,outputLayerName:null,distanceDefaultUnits:"Miles",returnToStart:!0,limitMaxTimePerRoute:!0,routeCount:null,maxStopsPerRoute:null,startLayer:null,endLayer:null,i18n:null,toolName:"PlanRoutes",helpFileName:"PlanRoutes",resultParameter:["routesLayer",
"assignedStopsLayer","unassignedStopsLayer"],getResultLyrInfos:!0,constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,m.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,Z.common);a.mixin(this.i18n,Z.bufferTool);a.mixin(this.i18n,Z.driveTimes);a.mixin(this.i18n,Z.planRoutesTool);a.mixin(this.i18n,Z.toolbars)},postCreate:function(){this.inherited(arguments);
k.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){this._startDrawPointfLayer&&this.map.removeLayer(this._startDrawPointfLayer);this._endDrawPointfLayer&&this.map.removeLayer(this._endDrawPointfLayer);this._startToolbar.deactivate();this._endToolbar.deactivate();this.emit("close",{save:!a})},clear:function(){this._startDrawPointfLayer&&this.map.removeLayer(this._startDrawPointfLayer);
this._endDrawPointfLayer&&this.map.removeLayer(this._endDrawPointfLayer);this._startToolbar.deactivate();this._endToolbar.deactivate()},_toUpperFirstLetter:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this.get("startLayer");this.get("returnToStart")||this.get("endLayer");this._form.validate()&&(b.stopsLayer=p.toJson(P.constructAnalysisInputLyrObj(this.stopsLayer)),b.routeStartTime=this.get("routeStartTime"),b.routeCount=this.get("routeCount"),
this.get("startLayer")&&(b.startLayer=p.toJson(P.constructAnalysisInputLyrObj(this.get("startLayer")))),"DRAW"!==this._startLayerSelect.get("value")&&(b.startLayerRouteIDField=this.get("startLayerRouteIDField")),b.maxStopsPerRoute=this.get("maxStopsPerRoute"),b.maxRouteTime=this.get("maxRouteTime"),b.stopServiceTime=this.get("stopServiceTime"),b.returnToStart=this.get("returnToStart"),b.travelMode=this._travelModeSelect.get("value"),this.get("endLayer")&&(b.endLayer=p.toJson(P.constructAnalysisInputLyrObj(this.get("endLayer")))),
"DRAW"!==this._endLayerSelect.get("value")&&(b.endLayerRouteIDField=this.get("endLayerRouteIDField")),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},validateStartEndLayer:function(){var a,
b,c,g;a=this.get("startLayer");b=this.get("endLayer");c=this._startLayerSelect.getOptions(this._startLayerSelect.get("value"));g=this._endLayerSelect.getOptions(this._endLayerSelect.get("value"));!C.isDefined(a)&&C.isDefined(c)&&(c.value="",this._startLayerSelect.updateOption(c),this._startLayerSelect.set("message",this.i18n.startEndPtsValidMsg),this._startLayerSelect.validate());!this.get("returnToStart")&&(!b&&C.isDefined(g))&&(g.value="",this._endLayerSelect.set("message",this.i18n.startEndPtsValidMsg),
this._endLayerSelect.updateOption(g),this._endLayerSelect.validate());C.isDefined(this.startLayer)&&(C.isDefined(c)&&""===c.value)&&(c.value="DRAW",this._startLayerSelect.updateOption(c),this._startLayerSelect.validate());C.isDefined(this.endLayer)&&(C.isDefined(g)&&""===g.value)&&(g.value="DRAW",this._endLayerSelect.updateOption(g),this._endLayerSelect.validate())},_handleSaveBtnClick:function(a){a={};var b={},g;this.validateStartEndLayer();this._form.validate()&&(this._saveBtn.set("disabled",!0),
a.stopsLayer=p.toJson(P.constructAnalysisInputLyrObj(this.stopsLayer)),a.routeStartTime=this.get("routeStartTime"),a.routeCount=this.get("routeCount"),this.get("startLayer")&&(a.startLayer=p.toJson(P.constructAnalysisInputLyrObj(this.get("startLayer")))),"DRAW"!==this._startLayerSelect.get("value")&&(a.startLayerRouteIDField=this.get("startLayerRouteIDField")),a.maxStopsPerRoute=this.get("maxStopsPerRoute"),a.maxRouteTime=this.get("maxRouteTime"),a.stopServiceTime=this.get("stopServiceTime"),a.returnToStart=
this.get("returnToStart"),g=this._travelModeSelect.getOptions(this._travelModeSelect.get("value")),a.travelMode=g&&p.toJson(g.travelMode),this.get("endLayer")&&(a.endLayer=p.toJson(P.constructAnalysisInputLyrObj(this.get("endLayer")))),"DRAW"!==this._endLayerSelect.get("value")&&(a.endLayerRouteIDField=this.get("endLayerRouteIDField")),this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(a.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.returnFeatureCollection&&(g={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(g.extent=this.map.extent._normalize(!0)),a.context=p.toJson(g)),b.jobParams=a,b.itemParams={description:c.substitute(this.i18n.itemDescription,{layername:this.stopsLayer.name,distance_field:a.Distances||a.Field,units:a.Units}),tags:c.substitute(this.i18n.itemTags,{layername:this.stopsLayer.name}),snippet:this.i18n.itemSnippet},
this.showSelectFolder&&(b.itemParams.folder=this.get("folderId")),this.execute(b))},_handleResultLyrInputChange:function(a){this.set("outputLayerName",a)},_save:function(){},_buildUI:function(){var b=!0;P.initHelpLinks(this.domNode,this.showHelp);n.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");n.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;P.setupFoldersUI({folderStore:this.folderStore,
folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));n.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");this.get("showSelectAnalysisLayer")&&(!this.get("stopsLayer")&&this.get("stopsLayers")&&this.set("stopsLayer",this.stopsLayers[0]),P.populateAnalysisLayers(this,"stopsLayer","stopsLayers"));P.addReadyToUseLayerOption(this,[this._analysisSelect]);P.populateTravelModes({selectWidget:this._travelModeSelect,
widget:this,allowmode:"time",enableTravelModes:this.get("enableTravelModes"),selectDefaultMode:!0});this.outputLayerName&&(this.outputLayerInput.set("value",this.outputLayerName),b=!1);this.stopsLayer&&this._updateAnalysisLayerUI(b);this.returnToStart&&this._returnStartCheck.set("value",this.returnToStart);this._limitMaxTimeCheck.set("value",this.limitMaxTimePerRoute);this._handleLimitMaxTimeCheckChange(this.limitMaxTimePerRoute);this.routeCount&&this._routesInput.set("value",this.routeCount);this.maxStopsPerRoute&&
this._maxPtsRouteInput.set("value",this.maxStopsPerRoute);this._loadConnections()},_updateAnalysisLayerUI:function(g){var k=[{value:"DRAW",label:this.i18n.createStartLoc}],e=[{value:"DRAW",label:this.i18n.createEndLoc}];C.isDefined(this.stopsLayer.queryCount)&&P.getLayerFeatureCount(this.stopsLayer,{}).then(a.hitch(this,function(a){this._stopsLayerCount=a;u.set(this._numStopsLabel,"innerHTML",c.substitute(this.i18n.stopsLabel,{numStops:a}))}),function(a){console.log(a)});g&&(this.outputLayerName=
c.substitute(this.i18n.outputLayerName,{layername:this.stopsLayer.name}));this._updateStops();this._handleExtentCheckChange(this.showChooseExtent);u.set(this._toolDescription,"innerHTML",c.substitute(this.i18n.toolDefine,{layername:this.stopsLayer.name}));this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName);this.featureLayers&&(this._startLayerSelect.removeOption(this._startLayerSelect.getOptions()),this._endLayerSelect.removeOption(this._endLayerSelect.getOptions()),b.forEach(this.featureLayers,
function(a,b){k.push({value:b+1,label:a.name});e.push({value:b+1,label:a.name})},this),this._startLayerSelect.addOption(k),this._endLayerSelect.addOption(e));this.startLayer?(this._startLayerSelect.set("value",this.startLayer),n.set(this._startRouteIdRow,"display","")):(this._startLayerSelect.set("value","DRAW"),n.set(this._startRouteIdRow,"display","none"));this.endLayer?(this._endLayerSelect.set("value",this.endLayer),n.set(this._endRouteIdRow,"display","")):(this._endLayerSelect.set("value","DRAW"),
n.set(this._endRouteIdRow,"display","none"))},_handleAnalysisLayerChange:function(a){var c,g;"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._isAnalysisSelect=!0,this._browsedlg.show()):(a=this.stopsLayers[a],c=this.featureLayers.slice(),(g=b.some(c,function(a){return a===this.stopsLayer},this))||c.push(this.stopsLayer),this.stopsLayer=a,this.set("featureLayers",
c),this._updateAnalysisLayerUI(!0))},_addMinutes:function(a,b){return new Date(a.getTime()+6E4*b)},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&P.addAnalysisReadyLayer({item:b.selection,layers:this.stopsLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(){this.set("stopsLayer",this.stopsLayers[this._analysisSelect.get("value")]);
this._updateAnalysisLayerUI(!0)}))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setStopsLayerAttr:function(a){C.isDefined(a)&&"esriGeometryPoint"===a.geometryType&&(this.stopsLayer=a)},_getStopsLayerAttr:function(){return this.stopsLayer},_setStopsLayersAttr:function(a){this.stopLayers=a},_setFeatureLayersAttr:function(a){this.featureLayers=b.filter(a,function(a){if(C.isDefined(a)&&a!==this.stopsLayer&&"esriGeometryPoint"===
a.geometryType)return!0},this)},_getFeatureLayersAttr:function(a){return this.featureLayers},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},validateServiceName:function(a){return P.validateServiceName(a,{textInput:this._outputLayerInput})},_setMapAttr:function(b){this.map=b;this._startToolbar=new T(this.map);this._endToolbar=new T(this.map);m.connect(this._startToolbar,"onDrawEnd",a.hitch(this,this._addStartFeatures));m.connect(this._endToolbar,"onDrawEnd",a.hitch(this,this._addEndFeatures));
this.map.on("extent-change",a.hitch(this,this._updateStops))},_getMapAttr:function(){return this.map},_setDistanceDefaultUnitsAttr:function(a){this.distanceDefaultUnits=a},_getDistanceDefaultUnitsAttr:function(){return this.distanceDefaultUnits},_setReturnToStartAttr:function(a){this.returnToStart=a},_getReturnToStartAttr:function(){this._returnStartCheck&&(this.returnToStart=this._returnStartCheck.get("checked"));return this.returnToStart},_setStartLayerAttr:function(a){this.startLayer=a},_getStartLayerAttr:function(){this._startLayerSelect&&
("DRAW"===this._startLayerSelect.get("value")||""===this._startLayerSelect.get("value")?this._startDrawPointfLayer&&0<this._startDrawPointfLayer.graphics.length?this.startLayer=this._startDrawPointfLayer:this._startLayerSelect.validate():this._startLayerSelect.get("value")&&(this.startLayer=this.featureLayers[this._startLayerSelect.get("value")-1]));return this.startLayer},_setEndLayerAttr:function(a){this.endLayer=a},_getEndLayerAttr:function(){this.get("returnToStart")?this.endLayer=null:!this.get("returnToStart")&&
this._endLayerSelect&&("DRAW"===this._endLayerSelect.get("value")||""===this._endLayerSelect.get("value")?this._endDrawPointfLayer&&0<this._endDrawPointfLayer.graphics.length?this.endLayer=this._endDrawPointfLayer:this._endLayerSelect.validate():this._endLayerSelect.get("value")&&(this.endLayer=this.featureLayers[this._endLayerSelect.get("value")-1]));return this.endLayer},_setLimitMaxTimePerRouteAttr:function(a){this.limitMaxTimePerRoute=a},_getLimitMaxTimePerRouteAttr:function(){this._limitMaxTimeCheck&&
(this.limitMaxTimePerRoute=this._limitMaxTimeCheck.get("value"));return this.limitMaxTimePerRoute},_setRouteCountAttr:function(a){this.routeCount=a},_getRouteCountAttr:function(){this._routesInput&&(this.routeCount=this._routesInput.get("value"));return this.routeCount},_setMaxStopsPerRouteAttr:function(a){this.maxStopsPerRoute=a},_getMaxStopsPerRouteAttr:function(){this._maxPtsRouteInput&&(this.maxStopsPerRoute=this._maxPtsRouteInput.get("value"));return this.maxStopsPerRoute},_setStopServiceTimeAttr:function(a){this.stopServiceTime=
a},_getStopServiceTimeAttr:function(){this._servStopMinutesInput&&(this.stopServiceTime=this._servStopMinutesInput.get("value")+this._servStopsSecondsInput.get("value")/60);return this.stopServiceTime},_setMaxRouteTimeAttr:function(a){this.maxRouteTime=a},_getMaxRouteTimeAttr:function(){this._limitMaxTimeCheck.get("checked")&&(this.maxRouteTime=60*this._hoursInput.get("value")+this._minutesInput.get("value"));return this.maxRouteTime},_setRouteStartTimeAttr:function(a){this.routeStartTime=a},_getRouteStartTimeAttr:function(){if(this._startDay){var a,
b;a=this._startDay.get("value");b=this._startTime.get("value");a=a.toDateString();b=b.toTimeString();b=-1!==b.indexOf("GMT")?a+" "+b.substring(0,b.indexOf("GMT")+3):a+" "+b.split(" ")[0]+" GMT";this.routeStartTime=(new Date(b)).getTime()}return this.routeStartTime},_setEndLayerRouteIDFieldAttr:function(a){this.endLayerRouteIDField=a},_getEndLayerRouteIDFieldAttr:function(){this.get("returnToStart")||(this.endLayerRouteIDField=this._endRouteIdSelect.get("value"));return this.endLayerRouteIDField},
_setStartLayerRouteIDFieldAttr:function(a){this.startLayerRouteIDField=a},_getStartLayerRouteIDFieldAttr:function(){this._startRouteIdSelect&&(this.startLayerRouteIDField=this._startRouteIdSelect.get("value"));return this.startLayerRouteIDField},_getOutputLayerNameAttr:function(){this._outputLayerInput&&(this.outputLayerName=this._outputLayerInput.get("value"));return this.outputLayerName},_setOutputLayerNameAttr:function(a){this.outputLayerName=a},_connect:function(a,b,c){this._pbConnects.push(m.connect(a,
b,c))},_handleStartDrawBtnChange:function(a){a?(this.emit("drawtool-activate",{}),this._endPointDrawBtn.set("checked",!1),this.i18n.draw.addPoint=this.i18n.addPoint,this._startDrawPointfLayer?this._startDrawPointfLayer.graphics.length&&(this.i18n.draw.addPoint=this.i18n.movePoint):this._startDrawPointfLayer=this._createPointFeatColl("startDrawPoint"),this._startToolbar.activate(T.POINT)):(this._startToolbar.deactivate(),this._endPointDrawBtn.get("checked")||this.emit("drawtool-deactivate",{}))},_handleEndDrawBtnChange:function(a){a?
(this.emit("drawtool-activate",{}),this._startPointDrawBtn.set("checked",!1),this.i18n.draw.addPoint=this.i18n.addPoint,this._endDrawPointfLayer?this._endDrawPointfLayer.graphics.length&&(this.i18n.draw.addPoint=this.i18n.movePoint):this._endDrawPointfLayer=this._createPointFeatColl("endDrawPoint"),this._endToolbar.activate(T.POINT)):(this._endToolbar.deactivate(),this._startPointDrawBtn.get("checked")||this.emit("drawtool-deactivate",{}))},_handleStartLayerChange:function(a){a&&"DRAW"!==a&&this.featureLayers[a-
1].graphics&&1<this.featureLayers[a-1].graphics.length?(this.map.getLayer("startDrawPoint")&&this.map.getLayer("startDrawPoint").hide(),n.set(this._startRouteIdRow,"display",""),this._startPointDrawBtn.set("disabled",!0),this._startPointDrawBtn.set("checked",!1),a=this.featureLayers[a-1].fields,this._startRouteIdSelect.removeOption(this._startRouteIdSelect.getOptions()),b.forEach(a,function(a,c){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeString",
"esriFieldTypeDate"],a.type)&&this._startRouteIdSelect.addOption({value:a.name,label:C.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)):"DRAW"===a||""===a?(this.map.getLayer("startDrawPoint")&&this.map.getLayer("startDrawPoint").show(),this._startPointDrawBtn.set("disabled",!1),n.set(this._startRouteIdRow,"display","none")):(this._startPointDrawBtn.set("disabled",!0),n.set(this._startRouteIdRow,"display","none"),this.map.getLayer("startDrawPoint")&&this.map.getLayer("startDrawPoint").hide());
this.validateStartEndLayer();this._startLayerSelect.validate(!0)},_handleEndLayerChange:function(a){var c;c=this.get("returnToStart");a&&"DRAW"!==a&&this.featureLayers[a-1].graphics&&1<this.featureLayers[a-1].graphics.length?(n.set(this._endRouteIdRow,"display",""),this._endPointDrawBtn.set("disabled",!0),this._endPointDrawBtn.set("checked",!1),this.map.getLayer("endDrawPoint")&&this.map.getLayer("endDrawPoint").hide(),a=this.featureLayers[a-1].fields,this._endRouteIdSelect.removeOption(this._endRouteIdSelect.getOptions()),
b.forEach(a,function(a,c){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeString","esriFieldTypeDate"],a.type)&&this._endRouteIdSelect.addOption({value:a.name,label:C.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)):"DRAW"===a||""===a?(this.map.getLayer("endDrawPoint")&&this.map.getLayer("endDrawPoint").show(),this._endPointDrawBtn.set("disabled",c),n.set(this._endRouteIdRow,"display","none")):(this._endPointDrawBtn.set("disabled",!0),
n.set(this._endRouteIdRow,"display","none"),this.map.getLayer("endDrawPoint")&&this.map.getLayer("endDrawPoint").hide());this._endLayerSelect.set("disabled",c);this._endRouteIdSelect.set("disabled",c);c&&n.set(this._endRouteIdRow,"display","none");this.validateStartEndLayer();this._endLayerSelect.validate(!0)},_handleRoutesInputChange:function(a){},_handleReturnStartCheckChange:function(a){this._handleEndLayerChange(this._endLayerSelect.get("value"))},_handleLimitMaxTimeCheckChange:function(a){this._hoursInput.set("disabled",
!a);this._minutesInput.set("disabled",!a)},_handleExtentCheckChange:function(a){k.toggle(this._numStopsExtentLabel,"disabled",!a)},_createPointFeatColl:function(b){var c;c={layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPoint"}};c.layerDefinition={currentVersion:10.11,copyrightText:"",defaultVisibility:!0,relationships:[],isDataVersioned:!1,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,geometryType:"esriGeometryPoint",minScale:0,maxScale:0,
objectIdField:"OBJECTID",templates:[],type:"Feature Layer",displayField:"TITLE",visibilityField:"VISIBLE",name:b,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",allowGeometryUpdates:!0,htmlPopupType:"",hasM:!1,hasZ:!1,globalIdField:"",supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:-1,indexes:[],types:[],fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",
name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};new X({title:"{title}",description:"{description}"});b=new aa(c,{id:b});this.map.addLayer(b);m.connect(b,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}));return b},_addStartFeatures:function(a){var b=[],c,g,k=[];c={};g=(new U({url:this.esriDijitPath+
"/images/Directions/greenPoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4OTI1MkU2ODE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4OTI1MkU2OTE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTY2MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg5MjUyRTY3MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iVNkdQAABJlJREFUeNp0VltvG0UUnpkdr72261CnCQWEIA9FqOKlqooARUKCtAUhoA+VoBVRhfgFXKSKJ97goRL8ARCIclGgL0VUkBBAoBaVoggEQQVSAhFS06SJje3Y3t25cc7srL3YjddHs3N85pvvfOfMyJRs83n8o+P7POI9yQibooTeBa68ISbSRv+hifpCGHX2s6dnfrrRWjroOPzB0T0+zZ0q8uDRSrniF/MB8X2fADhR8IRRRDphh7Q6rbgtOucU0Sdnj59Z2hb00PtHD+Zp/p2x6uitO4o7iLYP8DMafjVE2wXUboALm50W2ahtXO3q8MTX02fnh0Affu/IkSAXnL55dLzMPU6kURZMIZQhFtRk2VBKcpQTIQVZ21hrdUX4zDcnPv2kBzr59mP3BLnChfGx8YrHPKIAELSzMPhQk+ydzpOvIYwywjFeK7K+vt6IlZw8/+y5RZ4gm9eCUrGCmkUyBkCV0Sd5UlBtTLIhRWQE9ixwsVwe6dY3X4WwJ+j9bx7a7/v5i6O7qlxisFZJAvBF7Rjty56CWlmszilj6BNgXd+syTCO7uNK62nuezyUkWWASTPHDtOjbgOHkJTOsbXAyJhIC+rlODdROM211gcQKBJxoh+EKAs4AGqybHVfBvdICNIU/IDHYbcJiS6le4wwbW1B9UDXJcg9QBxtbglh1BlAJzjoUxIGQZFRwtAypgnjtH0spDG9MWVs34xrN5uBLnEoTKQUgDLgZ6hliLunBaIDhy4LYhyotptZlphGyLUhfyspxxj3AIpaVqikdgyzoGn7p0xNj71rNamweCscWC0qoQ8YRm3K2OgpeFoc+j9FSUYKB+4OgxIK4RcZUJ6RsUgqCrShxWzza9035aw/lzYGY5P4xFSMR5vMcFpm87opL4HjXsr76dLhC2xYhgx3I0BfoS7RCp+3K/e8vn+Ke2zWK+cYofQG9yMlw1eK1aAni9oSWil9eOmFhXkPnbXZ1eXqwVsirfQU9Vynm75lymLbxvpSP4yqI4iR5uWlFxdOI56Xbro5t3qhOrW7ZmL1EOFwp7k6pRXuWaZgBmuwJSIl1fNXXvrxjRTLy2ZTm1v9YeTBXedNbCYZZ1U4pdt+NGiomuKKEvKp5ZM/f5z9zctc1vju1b9cv5q/M/icBd4+KNztlnGWKfYjAMqm+K7zZ/PYP6d+X3TrafbmR8N71QcrOPMLd5RGdj838WFup393orNLWRki6vFv197661i40m6AKwYLneG79BzDPNhNYFWwnfguGyKgPl32bwseoTnKekVpS9n49vorWwv1JsSVwAJHCHcW2Agsk3rBBZXBihhcn11biTfDixpPik1bEZyj34EVXXzJrUccWwrbZo5+B6ztRpvO1kLjjO5qW3YccZ5JeTAecQxqqV0Q6hM5KVIrNL5a/77yQPUyLbK9qiMv49zFhW6MMnPE0dwxlQ48ckXDNHJOq0C2xByreHtxhPk1sK4DEI5dut7+QWCZCyj9MXKLWmD/gl1Xtfhd6F2CI86dv+XiIrdOpeeCDd0VyW7KGbLptn9p/mrgNsIxwzKN0QO3IvlPgAEA3AQhIZtaN54AAAAASUVORK5CYII\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875);a=new O(a,g);this.map.graphics.add(a);c.description="blayer desc";c.title="blayer";a.setAttributes(c);b.push(a);0<this._startDrawPointfLayer.graphics.length&&(k=this._startDrawPointfLayer.graphics);this._startDrawPointfLayer.applyEdits(b,null,k);this.validateStartEndLayer()},_addEndFeatures:function(a){var b=[],c,g,k=[];c={};g=(new U({url:this.esriDijitPath+"/images/Directions/redPoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNEZDQTg5MTE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNEZDQTg5MjE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTZBMTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI0RkNBODkwMTRDNjExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pmgrrgAABHNJREFUeNqEVU2IHEUUflVd3fO/P3FWRPAQ0EVWL2FZFBS8REgQXD0GDILg0Zsgbg7ezCFXb15iFCUigkJAzF5y0RgQPUyIRBFz2SxusszO7uxMd1e953vV1TM9m6gF31S96qqvvvdTNerH9RWQFtUSUCYCRWwkddAAJ8iYdVD6JIJa5tkaAKUK8bZCexWc/QYJflXO8jADcsRAz2XgwfYU4wI1Wqebnfmk1mhCnNSYWwFZB3meLo0Phy+M9gcbcLh/hde+x/i9SnCU9GWXNC8udLuPN9sdYBo+PQcYsxIivyDmLmk2oNNsJMNB4/X+/XvPKZu9yZ82H0b6mo7rn3aXum1jYqDDAyBEJitcgkDKA/+rlIZmLYaEBezu2K/taPQGT39bJX2WVPTJ4tx828coTZnQFQRCptSE2B9STjGxYgGLC4udnSy7BA5f5NmeQSZRcXy+02rOKbJAo5FXyDsKqFlSD/6O3CsZRxp0ZKDTas33x/c+JGtfFaWrURSdqvFHPBwWhJ5DsRDt1UzaRCmDM83BAZULcQR1HUFkzGlr7aoh587WtTaUjv3igrQgJNRTlWXzXkgCOTwcIpTD2Vs5nInNAdFZw1ldY42AWeozrLzLvI1JJRmeVFAmqlSLQYDYIEJYqfA4WhOlxyPLsdQhL56ECWWTJ62onBQAToiLsZzrIPJn4HHDdovyHFCrEMciOQV5KKcJM01DMFFMRTjYxiKJLYPWpSRKhcTHUQiwIC8KcjamvgKguAyEwUZvyzVFpLFRSH9Z65Zizr4vESjJS8KH+F+WFk1VinrHqpnvDpcU9XKHawZKlzkEhLNk1TqtHEAz5AC58zHuac7W5bHF4EVwwbtRAZePx4yNfq3fE/YKD5K6rLsRbubO3citmyTA9+j+A/gAZH+OeEP4pJAcB+PcAc/4U0u4CsIlmtqzEPX71gf1nPCVd3Azc7ixl/Fjwq5R6dpRhPAUISrC4RiDjFU62iifv0k2Np9/VMrzHa6kC3NG1yIF/9tYNAwsps7hu/ywfHTy+t8zVT3J85XVYy/FWn88H+snE/3vzOwZ7Fn6g6P29is/716r3De+rtMrI+Po87ujrZWW+Y7VnkgUPBGV5VlBxhJ3c/rhl73szFu9fm/6Tk7JVHisE0Y9IHmmbebPL8998VgSPW0qgi2Tbmfut/dvD87cPLB7IpoxDpCxjYJC/qeEBcYxxqKMdzJs1BT8udzQp+r8Dhd3naCfO/vl9viDq/ezAa9rMRpBkBydl9kvXa+HRW1GUxZf3Brd2UrxeuqKApdebJkPZM2wvhX2RxCedfK1Wsg/ZAxD791hRV8NnX80QXqxKy4fXe//2Ix/kopFEp80hKJE/bPt0U/rjyS32lqt7GV4S+ywbhz6tGILD5qg1AbyNCRN3IhDrBp9S98vIa1Iz/Y2YxQI8qCu3O//a3TlTSs/pmHTPqPP2LmbuUsST+nFDvP7YV0a9rmyVvWRmqZwmgsQNaNr/fwmP+MgfUVluQarhS/tHwEGAEyHOx7EoDsBAAAAAElFTkSuQmCC",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875);a=new O(a,g);this.map.graphics.add(a);c.description="blayer desc";c.title="blayer";a.setAttributes(c);b.push(a);0<this._endDrawPointfLayer.graphics.length&&(k=this._endDrawPointfLayer.graphics);this._endDrawPointfLayer.applyEdits(b,null,k);this.validateStartEndLayer()},_updateStops:function(){var b={},b={geometry:this.map.extent.getExtent()};C.isDefined(this.stopsLayer)&&C.isDefined(this.stopsLayer.queryCount)&&P.getLayerFeatureCount(this.stopsLayer,
b).then(a.hitch(this,function(a){u.set(this._numStopsExtentLabel,"innerHTML",c.substitute(this.i18n.stopsLabelByExtent,{numStops:a}))}),function(a){console.log(a)})},_showMessages:function(b){u.set(this._bodyNode,"innerHTML",b);r.fadeIn({node:this._errorMessagePane,easing:g.quadIn,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();r.fadeOut({node:this._errorMessagePane,easing:g.quadOut,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,
{display:"none"})})}).play()}});e("extend-esri")&&a.setObject("dijit.analysis.PlanRoutes",h,L);return h})},"esri/dijit/analysis/MergeLayers":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/RadioButton dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils dojo/i18n!../../nls/jsapi dojo/text!./templates/MergeLayers.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R){d=d([g,q,w,v,z,N,G],{declaredClass:"esri.dijit.analysis.MergeLayers",templateString:R,widgetsInTemplate:!0,inputLayer:null,mergeLayers:null,mergingAttributes:null,outputLayerName:null,i18n:null,toolName:"MergeLayers",helpFileName:"MergeLayers",resultParameter:"MergedLayer",constructor:function(a){this._pbConnects=[];this._mergeFieldsRows=[];this._includedMergeFields=[];a.containerNode&&(this.container=a.containerNode)},
destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,O.mergeLayers)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this.set("showReadyToUseLayers",!1);this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",
{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(b){b.preventDefault();if(this._form.validate()){b={};var c;c=this.mergeLayers[this._mergeLayersSelect.get("value")];b.InputLayer=m.toJson(C.constructAnalysisInputLyrObj(this.inputLayer));b.MergeLayer=m.toJson(C.constructAnalysisInputLyrObj(c));b.MergingAttributes=m.toJson(this.get("mergingAttributes"));this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&
this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},_handleSaveBtnClick:function(){if(this._form.validate()){this._saveBtn.set("disabled",!0);var a={},b={},c;c=this.mergeLayers[this._mergeLayersSelect.get("value")];a.InputLayer=m.toJson(C.constructAnalysisInputLyrObj(this.inputLayer));a.MergeLayer=m.toJson(C.constructAnalysisInputLyrObj(c));
a.MergingAttributes=m.toJson(this.get("mergingAttributes"));this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=m.toJson(c));b.jobParams=
a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_handleLayerChange:function(a){var b="";"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this.inputLayer&&("Point"===this.inputLayer.geometryType?b=' AND tags:"point"':"Polyline"===this.inputLayer.geometryType?b=
' AND tags:"line"':"Polygon"===this.inputLayer.geometryType&&(b=' AND tags:"polygon"')),this._browsedlg.browseItems.set("query",this._analysisquery+b),this._isAnalysisSelect=!1,this._browsedlg.show()):(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name,mergelayername:this.mergeLayers[a].name}),this._outputLayerInput.set("value",this.outputLayerName),this._removeMergeFieldsRows(),this._createMergeFieldsRow())},_handleAttrSelectChange:function(b,g){var k,e;"0"!==
g&&(k=b.get("statisticSelect"),"0"!==k.get("value")&&(!k.get("isnewRowAdded")&&null!==this._includedMergeFields&&"0"!==b.get("value"))&&(this._includedMergeFields.push(b.get("value")),e=this.mergeLayers[this._mergeLayersSelect.get("value")].fields.length,this._includedMergeFields.length!==e-1&&(e=k.get("removeTd"),c.set(e,"display","block"),e=k.get("referenceWidget"),a.hitch(e,e._createMergeFieldsRow()),k.set("isnewRowAdded",!0))))},_handleAttrMatchSelectChange:function(a,c){if("0"!==c&&"0"!==a.get("value")){var g=
this.mergeLayers[this._mergeLayersSelect.get("value")].fields,k=this.inputLayer.fields,e="";b.forEach(g,function(b){b.name===a.get("value")&&(e=b.type)});var f="";b.forEach(k,function(a){a.name===c&&(f=a.type)});e!==f?-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],e)&&-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],f)?(this._handleCloseMsg(),this.set("disableRunAnalysis",
!1)):(this._showMessages(this.i18n.fieldTypeMatchValidationMsg),this.set("disableRunAnalysis",!0)):(this._handleCloseMsg(),this.set("disableRunAnalysis",!1))}},_handleStatsValueUpdate:function(b,g,k,e){var f;b&&(g=b.get("statisticSelect"),k=b.get("attributeMatchSelect"),f=b.get("attributeRenameBox"),"Rename"===e?(c.set(f.domNode.parentNode,{display:"","padding-left":0,"padding-right":0}),f.domNode.style.display="block",f.set("required",!0),k.domNode.style.display="none",c.set(g.domNode.parentNode,
"width","34%"),c.set(b.domNode.parentNode,"width","35%")):"Remove"===e||"0"===e?(f.domNode.style.display="none",f.set("required",!1),k.domNode.style.display="none",c.set(g.domNode.parentNode,"width","44%"),c.set(b.domNode.parentNode,"width","55%"),c.set(f.domNode.parentNode,"display","none")):(c.set(k.domNode.parentNode,{display:"","padding-left":0,"padding-right":0}),f.domNode.style.display="none",f.set("required",!1),k.domNode.style.display="table",c.set(g.domNode.parentNode,"width","34%"),c.set(b.domNode.parentNode,
"width","35%")),"0"!==b.get("value")&&"0"!==e&&(!g.get("isnewRowAdded")&&null!==this._includedMergeFields&&"0"!==b.get("value"))&&(this._includedMergeFields.push(b.get("value")),b=this.mergeLayers[this._mergeLayersSelect.get("value")].fields.length,this._includedMergeFields.length!==b-1&&(b=g.get("removeTd"),c.set(b,"display","block"),b=g.get("referenceWidget"),a.hitch(b,b._createMergeFieldsRow()),g.set("isnewRowAdded",!0))))},_save:function(){},_buildUI:function(){var b=!0;this._loadConnections();
C.initHelpLinks(this.domNode,this.showHelp);c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),C.populateAnalysisLayers(this,"inputLayer","inputLayers"));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);this.inputLayer&&this._updateAnalysisLayerUI(b);C.addReadyToUseLayerOption(this,[this._analysisSelect,this._mergeLayersSelect]);
c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;C.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none")},_updateAnalysisLayerUI:function(c){var g=[],
k=[],e=this._mergeLayersSelect.getOptions();this.inputLayer&&n.set(this._mergeLayersDescription,"innerHTML",f.substitute(this.i18n.mergeLayersDefine,{layername:this.inputLayer.name}));this.mergeLayers&&(this._mergeLayersSelect.removeOption(e),b.forEach(this.mergeLayers,function(a,b){a!==this.inputLayer&&a.geometryType===this.inputLayer.geometryType&&k.push({value:b,label:a.name})},this),this._mergeLayersSelect.addOption(k));0===k.length?(this._showMessages(this.i18n.mergeValidationMsg),this.set("disableRunAnalysis",
!0)):(this.set("disableRunAnalysis",!1),c&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name,mergelayername:this.mergeLayers[this._mergeLayersSelect.get("value")].name})),this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName),this._removeMergeFieldsRows(),this._createMergeFieldsRow(),b.forEach(this.mergingAttributes,function(b){b=b.split(" ");-1===g.indexOf(b[0])&&(this._currentAttrSelect.set("value",b[0]),a.hitch(this._currentAttrSelect,
this._handleAttrSelectChange,b[0])(),this._currentStatsSelect.set("value",b[1]),a.hitch(this._currentStatsSelect,this._handleStatsValueUpdate,"value","",b[1])(),"Rename"===b[1]?this._currentAttrMatchSelect.set("value",b[2]):"Match"===b[1]&&this._currentAttrRenameBox.set("value",b[2]),g.push(b[0]))},this),0<g.length&&(this._includedMergeFields=g))},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",
this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this.mergingAttributes=[],this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&C.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?this.inputLayers:this.mergeLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._mergeLayersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},
_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_createMergeFieldsRow:function(){var b,c,g,k,e,f,n;b=u.create("tr",null,this._afterMergeFieldsRow,"before");c=u.create("table",{"class":"esriFormTable"},b);c=u.create("tbody",null,c);g=u.create("tr",null,c);c=u.create("td",{style:{width:"35%"}},g);k=u.create("td",{style:{width:"34%"}},g);e=u.create("td",{style:{width:"30%"}},g);c=new y({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin025 attrSelect",
style:{overflowX:"hidden",tableLayout:"fixed",width:"100%"}},u.create("select",null,c));this.set("attributes",{selectWidget:c,layer:this.mergeLayers[this._mergeLayersSelect.get("value")]});k=new y({"class":"mediumInput statsSelect",style:{overflowX:"hidden",tableLayout:"fixed",width:"100%"}},u.create("select",null,k));this.set("statistics",{selectWidget:k});f=new H({maxHeight:200,"class":"longTextInput",style:{overflowX:"hidden",display:"none",tableLayout:"fixed",width:"100%"}},u.create("validationtextbox",
null,e));e=new y({maxHeight:200,"class":"mediumInput attrSelect",style:{overflowX:"hidden",display:"none",tableLayout:"fixed",width:"100%"}},u.create("select",null,e));this.set("attributes",{selectWidget:e,layer:this.inputLayer});l.connect(e,"onChange",a.hitch(this,this._handleAttrMatchSelectChange,c));c.set("statisticSelect",k);c.set("attributeRenameBox",f);c.set("attributeMatchSelect",e);l.connect(c,"onChange",a.hitch(this,this._handleAttrSelectChange,c));n=u.create("td",{"class":"esriFloatTrailing removeTd",
style:{display:"none",width:"1%",maxWidth:"12px"}},g);g=u.create("a",{title:this.i18n.removeAttrStats,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+h.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},n);l.connect(g,"onclick",a.hitch(this,this._removeMergeFieldsRow,b));this._mergeFieldsRows.push(b);k.set("attributeSelect",c);k.set("removeTd",n);k.set("isnewRowAdded",!1);k.set("referenceWidget",this);k.watch("value",a.hitch(this,this._handleStatsValueUpdate,c));this._currentStatsSelect=
k;this._currentAttrSelect=c;this._currentAttrMatchSelect=e;this._currentAttrRenameBox=f;return!0},_removeMergeFieldsRows:function(){b.forEach(this._mergeFieldsRows,this._removeMergeFieldsRow,this);this._mergeFieldsRows=[];this._includedMergeFields=[]},_removeMergeFieldsRow:function(a){b.forEach(x.findWidgets(a),function(a,b){if(0===b){var c=this._includedMergeFields.indexOf(a.get("value"));-1!==c&&this._includedMergeFields.splice(c,1)}a.destroyRecursive()},this);u.destroy(a)},_setAnalysisGpServerAttr:function(a){a&&
(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_setInputLayersAttr:function(a){this.inputLayers=a},_setMergeLayersAttr:function(a){this.mergeLayers=a},_setAttributesAttr:function(a){if(a.layer){var c,g;c=a.layer;g=a.selectWidget;a=c.fields;g.addOption({value:"0",label:this.i18n.attribute});b.forEach(a,function(a){a.name!==c.objectIdField&&-1===this._includedMergeFields.indexOf(a.name)&&g.addOption({value:a.name,
label:a.name})},this)}},_setStatisticsAttr:function(a){a=a.selectWidget;a.addOption({value:"0",label:this.i18n.operation});a.addOption({value:"Rename",label:this.i18n.rename});a.addOption({value:"Remove",label:this.i18n.remove});a.addOption({value:"Match",label:this.i18n.match})},_setMergingAttributesAttr:function(a){this.mergingAttributes=a},_getMergingAttributesAttr:function(){var a="",b=[],c,g,k,e;t(".statsSelect",this.domNode).forEach(function(f){c=x.byNode(f);g=c.get("attributeSelect");k=g.get("attributeMatchSelect");
e=g.get("attributeRenameBox");"0"!==g.get("value")&&"0"!==c.get("value")&&("Remove"===c.get("value")?(a+=g.get("value")+" "+c.get("value")+";",b.push(g.get("value")+" "+c.get("value"))):"Rename"===c.get("value")?(a+=g.get("value")+" "+c.get("value")+" "+e.get("value")+";",b.push(g.get("value")+" "+c.get("value")+" "+e.get("value"))):(a+=g.get("value")+" "+c.get("value")+" "+k.get("value")+";",b.push(g.get("value")+" "+c.get("value")+" "+k.get("value"))))});return b},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",
a)},validateServiceName:function(a){return C.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))},_showMessages:function(b){n.set(this._bodyNode,"innerHTML",b);p.fadeIn({node:this._errorMessagePane,easing:k.quadIn,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();p.fadeOut({node:this._errorMessagePane,easing:k.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,
{display:"none"})})}).play()}});r("extend-esri")&&a.setObject("dijit.analysis.MergeLayers",d,J);return d})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(h,d,a,b,l,m,p,r,e,f){var c={fromJson:function(a){var c=null;switch(a.type){case "esriSMS":c=new b(a);break;case "esriPMS":c=new l(a);break;case "esriTS":c=
new f(a);break;case "esriSLS":c=void 0!==a.cap?new p(a):new m(a);break;case "esriCLS":c=new p(a);break;case "esriSFS":c=new r(a);break;case "esriPFS":c=new e(a)}return c},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};d("extend-esri")&&h.mixin(h.getObject("symbol",!0,a),c);return c})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w){function v(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(r.hitch(this,a,b))}}var z=d("dijit.form._SelectMenu",u,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;
r.isArray(b)&&(b=b[b.length-1]);b&&h.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});l=d("dijit.form.Select"+(f("dojo-bidi")?"_NoBidi":""),[c,n,g],{baseClass:"dijitSelect dijitValidationTextBox",templateString:w,_buttonInputDisabled:f("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new z({id:this.id+"_menu",parentWidget:this});b.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new s({ownerDocument:this.ownerDocument});var b=r.hitch(this,"_setValueAttr",a);a=new t({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,
"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&
this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=q.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,g){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{h.forEach(this._getChildren(),
function(a){a.destroyRecursive()});var b=new t({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(b){this.inherited(arguments);a.set(this.valueNode,"value",this.get("value"));this._refreshState()},
_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?k.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):k.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);k.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=m.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[p.LEFT_ARROW];delete a[p.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);
b.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);k.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){k.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
f("dojo-bidi")&&(l=d("dijit.form.Select",l,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));l._Menu=z;l.prototype._onContainerKeydown=v("_onContainerKeydown");l.prototype._onContainerKeypress=v("_onContainerKeypress");return l})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g){var q=b("dijit.Calendar",[u,t,s],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){r.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new q._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:f.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),c(this.dateRowsNode,"mouseover",f.hitch(this,"_onDayMouseOver")),c(this.dateRowsNode,"mouseout",f.hitch(this,"_onDayMouseOut")),c(this.dateRowsNode,"mousedown",f.hitch(this,"_onDayMouseDown")),c(this.dateRowsNode,"mouseup",f.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=m.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!m.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))m.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",m.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),m.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!m.contains(a,"dijitCalendarDisabledDate"))m.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&m.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,c,g=this.currentFocus;switch(a.keyCode){case e.RIGHT_ARROW:b=1;case e.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case e.DOWN_ARROW:b=1;case e.UP_ARROW:c="week";break;case e.PAGE_DOWN:b=1;case e.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case e.END:g=this.dateModule.add(g,"month",1),c="day";case e.HOME:g=new this.dateClassObj(g);g.setDate(1);break;default:return!0}c&&(g=this.dateModule.add(g,c,b));this._setCurrentFocusAttr(g);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});q._MonthDropDownButton=b("dijit.Calendar._MonthDropDownButton",g,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new q._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==n("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});q._MonthDropDown=b("dijit.Calendar._MonthDropDown",[t,k,s],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";h.forEach(a,function(a,b){p.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(l.get(a.target,"month"))},onChange:function(){}});return q})},"esri/dijit/geoenrichment/DataBrowser/autoTooltip":function(){define(["dojo/on","dojo/query","dijit/Tooltip"],function(h,d,a){var b=null;return function(d){h(d,".TrimWithEllipses:mouseover",function(){this!==b&&this.offsetWidth<this.scrollWidth&&
(b=this,a.show(b.textContent,b,["above","below"]),h.once(b,"mouseleave, mousedown, touchstart",function(){a.hide(b);b=null}))})}})},"esri/tasks/geoenrichment/StudyAreaOptions":function(){define(["../../declare"],function(h){return h("esri.tasks.geoenrichment.StudyAreaOptions",null,{toJson:function(){throw"'toJson' method is not implemented";}})})},"esri/tasks/geoenrichment/ReportParameters":function(){define(["../../declare","./EnrichParametersBase"],function(h,d){return h("esri.tasks.geoenrichment.ReportParameters",
[d],{reportID:null,format:"pdf",fields:null,constructor:function(a){a&&(this.reportID=a.report||a.reportID||null,this.format=a.format,this.fields=a.reportFields||a.fields||null)},toJson:function(){var a=this.inherited(arguments);this.reportID&&(a.report=this.reportID);this.format&&(a.format=this.format);this.fields&&(a.reportFields=this.fields);return a}})})},"esri/dijit/analysis/AnalysisToggleButton":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/dom-class dijit/_Widget ../../kernel".split(" "),
function(h,d,a,b,l,m,p,r){h=d([p],{groupName:"defaultGroup",declaredClass:"esri.dijit.analysis.AnalysisToggleButton",postMixInProperties:function(){this.inherited(arguments);this.unselectChannel="/ButtonGroupCtr/"+this.groupName;b.subscribe(this.unselectChannel,this,"doUnselect")},postCreate:function(){this.inherited(arguments);m.add(this.domNode,"esriGroupButton")},doUnselect:function(a){a!==this&&this.get("checked")&&this.set("checked",!1)},_getCheckedAttr:function(){return this.checked},_setCheckedAttr:function(a){this.inherited(arguments);
(this.checked=a)&&b.publish(this.unselectChannel,[this]);m.toggle(this.domNode,"esriGroupselected",a)}});l("extend-esri")&&a.setObject("dijit.analysis.AnalysisToggleButton",h,r);return h})},"esri/dijit/analysis/TraceDownstream":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator ../../symbols/PictureMarkerSymbol dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!../../nls/jsapi dojo/text!./templates/TraceDownstream.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$){h=d([g,q,w,v,z,L,N],{declaredClass:"esri.dijit.analysis.TraceDownstream",templateString:$,widgetsInTemplate:!0,inputLayer:null,boundingPolygonLayer:null,outputLayerName:null,splitDistance:null,splitUnits:"Kilometers",maxDistance:null,maxDistanceUnits:"Kilometers",getResultLyrInfos:!1,i18n:null,map:null,toolName:"TraceDownstream",helpFileName:"TraceDownstream",resultParameter:"traceLayer",
constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,V.findHotSpotsTool);a.mixin(this.i18n,V.traceDownstreamTool);this.set("drawLayerName",this.i18n.blayerName);this.set("drawPointLayerName",this.i18n.pointlayerName)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,
"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),this.boundingPolygonLayers.splice(b,1))},this)),this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.predictAtPointLayers,
function(a,b){a===this._pointfeatureLayer&&(this._analysisSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.inputLayers.splice(b,1))},this)));this._handleBoundingBtnChange(!1);this._handleInputDrawPointChange(!1);this.emit("close",{save:!a})},clear:function(){this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),
this.boundingPolygonLayers.splice(b,1))},this));this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.predictAtPointLayers,function(a,b){a===this._pointfeatureLayer&&(this._predictPointSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.predictAtPointLayers.splice(b,1))},this));this._handleBoundingBtnChange(!1);this._handleInputDrawPointChange(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.inputLayer=
p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer"))),this.get("boundingPolygonLayer")&&(b.boundingPolygonLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.boundingPolygonLayer))),this.get("maxDistance")&&(b.maximumDistance=this.get("maxDistance"),b.maxDistanceUnits=this.get("maxDistanceUnits")),this.get("splitDistance")&&(b.splitDistance=this.get("splitDistance"),b.splitUnits=this.get("splitUnits")),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),
this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer")));this.get("boundingPolygonLayer")&&(a.boundingPolygonLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.boundingPolygonLayer)));
this.get("maxDistance")&&(a.maxDistance=this.get("maxDistance"),a.maxDistanceUnits=this.get("maxDistanceUnits"));this.get("splitDistance")&&(a.splitDistance=this.get("splitDistance"),a.splitUnits=this.get("splitUnits"),this.getResultLyrInfos=!0);this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}}));this.showChooseExtent&&!this.get("DisableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));
this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnFeatureCollection=this.returnFeatureCollection;b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name,fieldname:!a.field?"":a.field}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));
console.log(b);this.execute(b)}},_save:function(){},_buildUI:function(){this._loadConnections();this.signInPromise.then(a.hitch(this,Q.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),Q.populateAnalysisLayers(this,"inputLayer","inputLayers",{posIncrement:1}));var g=[{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},
{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}],k=!0;this._splitTraceUnitsSelect.addOption(g);this._maxTraceUnitsSelect.addOption(g);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),k=!1);this.inputLayer&&this._updateAnalysisLayerUI(k);this.maxDistanceUnits&&this._maxTraceUnitsSelect.set("value",this.maxDistanceUnits);this.maxDistance&&this._maxTraceInput.set("value",this.maxDistance);
this.splitUnits&&this._splitTraceUnitsSelect.set("value",this.splitUnits);this.splitDistance&&this._splitTraceInput.set("value",this.splitDistance);if(this.boundingPolygonLayers){this._boundingAreaSelect.addOption({value:"-1",label:this.i18n.defaultBoundingOption,selected:!0});var e=!1;b.forEach(this.boundingPolygonLayers,function(a,b){"esriGeometryPolygon"===a.geometryType&&(e=this.get("boundingPolygonLayer")&&this.get("boundingPolygonLayer").name===a.name,this._boundingAreaSelect.addOption({value:b+
1,label:a.name,selected:e}))},this)}Q.addReadyToUseLayerOption(this,[this._analysisSelect,this._boundingAreaSelect]);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;Q.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,
"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none")},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._analysisPointDrawBtn.reset(),this._isAnalysisSelect=!0,this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._browsedlg.show()):(this.inputLayer=this.inputLayers[a-1],this._updateAnalysisLayerUI(!0))},
_updateAnalysisLayerUI:function(a){this.inputLayer&&(n.set(this._interpolateToolDescription,"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name})),this._pointfeatureLayer&&this._pointfeatureLayer.name!==this.inputLayer.name&&this._analysisPointDrawBtn.reset(),this._outputLayerInput.set("value",this.outputLayerName))},_handleBrowseItemsSelect:function(b){b&&b.selection&&Q.addAnalysisReadyLayer({item:b.selection,
layers:this._isAnalysisSelect?this.inputLayers:this.boundingPolygonLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._boundingAreaSelect,posIncrement:this._isAnalysisSelect?0:1,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_handleBoundingSelectChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._isAnalysisSelect=!1,this._browsedlg.browseItems.set("query",this._analysisquery+
' AND tags:"polygon"'),this._browsedlg.show()):"-1"===a||this._featureLayer&&this.get("boundingPolygonLayer").id===this._featureLayer.id?this._bndgPolyDrawBtn.set("disabled",!1):(this._bndgPolyDrawBtn.set("disabled",!0),this._bndgPolyDrawBtn.set("checked",!1))},_handleBoundingBtnChange:function(a){a?(this.emit("drawtool-activate",{}),this._featureLayer||this._createBoundingPolyFeatColl(),this._analysisPointDrawBtn.set("checked",!1),this._toolbar.activate(R.POLYGON)):(this._toolbar.deactivate(),this._analysisPointDrawBtn.get("checked")||
this.emit("drawtool-deactivate",{}))},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_createBoundingPolyFeatColl:function(){var b=Q.createPolygonFeatureCollection(this.drawLayerName);this._featureLayer=new S(b,{id:this.drawLayerName});this.map.addLayer(this._featureLayer);l.connect(this._featureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addFeatures:function(a){var c=
[],g={},k=new C(C.STYLE_NULL,new O(O.STYLE_SOLID,new m([0,0,0]),4));a=new P(a,k);this.map.graphics.add(a);g.description="blayer desc";g.title="blayer";a.setAttributes(g);c.push(a);this._featureLayer.applyEdits(c,null,null);if(0===this.boundingPolygonLayers.length||this.boundingPolygonLayers[this.boundingPolygonLayers.length-1]!==this._featureLayer)c=this.boundingPolygonLayers.push(this._featureLayer),g=this._boundingAreaSelect.getOptions(),this._boundingAreaSelect.removeOption(g),g=b.map(g,function(a){a.selected=
!1;return a}),g.push({value:c,label:this._featureLayer.name,selected:!0}),this._boundingAreaSelect.addOption(g)},_handleInputDrawPointChange:function(a){a?(this.emit("drawtool-activate",{}),this._pointfeatureLayer||this._createPointFeatColl(),this._pointtoolbar.activate(R.POINT),this._bndgPolyDrawBtn.set("checked",!1)):(this._pointtoolbar.deactivate(),this._bndgPolyDrawBtn.get("checked")||this.emit("drawtool-deactivate",{}))},_createPointFeatColl:function(){var b=Q.createPointFeatureCollection(this.drawPointLayerName);
this._pointfeatureLayer=new S(b,{id:this.drawPointLayerName});this.map.addLayer(this._pointfeatureLayer);l.connect(this._pointfeatureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addPointFeatures:function(a){var c=[],g={},k=(new X({height:24,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"})).setOffset(0,12);a=new P(a,k);this.map.graphics.add(a);g.description="blayer desc";g.title="blayer";
a.setAttributes(g);c.push(a);this._pointfeatureLayer.applyEdits(c,null,null);if(0===this.inputLayers.length||this.inputLayers[this.inputLayers.length-1]!==this._pointfeatureLayer)this.inputLayers.push(this._pointfeatureLayer),c=this.inputLayers.length-1,g=this._analysisSelect.getOptions(),this._analysisSelect.removeOption(g),g=b.map(g,function(a){a.selected=!1;return a}),this._analysisSelect.addOption({value:c+1,label:this._pointfeatureLayer.name,selected:!0}),this._analysisSelect.addOption(g),this._handleAnalysisLayerChange(c+
1)},validateServiceName:function(a){return Q.validateServiceName(a,{textInput:this._outputLayerInput})},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},_setInputLayersAttr:function(a){this.inputLayers=a},_getBoundingPolygonLayerAttr:function(){this._boundingAreaSelect&&(this.boundingPolygonLayer=null,"-1"!==this._boundingAreaSelect.get("value")&&
(this.boundingPolygonLayer=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1]));return this.boundingPolygonLayer},_setBoundingPolygonLayerAttr:function(a){this.boundingPolygonLayer=a},_setBoundingPolygonLayersAttr:function(a){this.boundingPolygonLayers=a},_setSplitUnitsAttr:function(a){this.splitUnits=a},_getSplitUnitsAttr:function(){this._splitTraceUnitsSelect&&this._splitTraceUnitsSelect.get("value")&&(this.splitUnits=this._splitTraceUnitsSelect.get("value"));return this.splitUnits},
_setSplitDistanceAttr:function(a){this.splitDistance=a},_getSplitDistanceAttr:function(){this._splitTraceInput&&this._splitTraceInput.get("value")&&(this.splitDistance=this._splitTraceInput.get("value"));return this.splitDistance},_setMaxDistanceUnitsAttr:function(a){this.maxDistanceUnits=a},_getMaxDistanceUnitsAttr:function(){this._maxTraceUnitsSelect&&this._maxTraceUnitsSelect.get("value")&&(this.maxDistanceUnits=this._maxTraceUnitsSelect.get("value"));return this.maxDistanceUnits},_setMaxDistanceAttr:function(a){this.maxDistance=
a},_getMaxDistanceAttr:function(){this._maxTraceInput&&this._maxTraceInput.get("value")&&(this.maxDistance=this._maxTraceInput.get("value"));return this.maxDistance},_getOutputLayerNameAttr:function(){this._outputLayerInput&&(this.outputLayerName=this._outputLayerInput.get("value"));return this.outputLayerName},_setOutputLayerNameAttr:function(a){this.outputLayerName=a},_setMapAttr:function(b){this.map=b;this._toolbar=new R(this.map);l.connect(this._toolbar,"onDrawEnd",a.hitch(this,this._addFeatures));
this._pointtoolbar=new R(this.map);l.connect(this._pointtoolbar,"onDrawEnd",a.hitch(this,this._addPointFeatures))},_getMapAttr:function(){return this.map},_setDrawLayerNameAttr:function(a){this.drawLayerName=a},_getDrawLayerNameAttr:function(){return this._featureLayer.name},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_getDrawLayerAttr:function(){var a=[];this._featureLayer&&a.push(this._featureLayer);this._pointfeatureLayer&&a.push(this._pointfeatureLayer);return a},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",
!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_setDrawPointLayerNameAttr:function(a){this.drawPointLayerName=a},_getDrawPointLayerNameAttr:function(){return this._pointfeatureLayer.name},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.TraceDownstream",h,F);return h})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(h,d,a,b,l,m,p,r){h=h(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft",
"below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter",
"below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},
constructor:function(a){if(a&&(d.mixin(this,a),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=m.valueOf(this._labelPlacementLookup,a.labelPlacement)),a.format&&(this.format=a.format),a.fieldInfos&&(this.fieldInfos=a.fieldInfos),a.symbol&&(this.symbol="esriSHD"===a.symbol.type?new r(a.symbol):new p(a.symbol)),a=this.sizeInfo))a.minSize&&(a.minSize=b.pt2px(a.minSize)),a.maxSize&&(a.maxSize=b.pt2px(a.maxSize))},getSymbol:function(){return this.symbol},toJson:function(){var a=
this.sizeInfo;a&&(a=d.mixin({},a),a.minSize&&(a.minSize=b.px2pt(a.minSize)),a.maxSize&&(a.maxSize=b.px2pt(a.maxSize)));a={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&d.clone(this.labelExpressionInfo),format:this.format,fieldInfos:this.fieldInfos,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:a,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:
this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return m.fixJson(a)}});a("extend-esri")&&d.setObject("layers.LabelClass",h,l);return h})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(h,d,a,b,l,m,p){h=h(p,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(a){if(a&&!a.declaredClass){var b=a;this.symbol=(a=b.symbol)&&(a.declaredClass?a:m.fromJson(a));
this.label=b.label;this.description=b.description}else this.symbol=a},getSymbol:function(a){return this.symbol},toJson:function(){var a=d.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return l.fixJson(a)}});a("extend-esri")&&d.setObject("renderer.SimpleRenderer",h,b);return h})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(h,
d,a){return h("dijit.form.RangeBoundTextBox",a,{rangeMessage:"",rangeCheck:function(a,d){return("min"in d?0<=this.compare(a,d.min):!0)&&("max"in d?0>=this.compare(a,d.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var d=!1;"min"in this.constraints&&(d=this.constraints.min,d=0>this.compare(a,"number"==typeof d&&0<=d&&0!=a?0:d));!d&&"max"in this.constraints&&(d=this.constraints.max,
d=0<this.compare(a,"number"!=typeof d||0<d?d:0));return d},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var d=this.get("value");return null!=d&&""!==d&&("number"!=typeof d||!isNaN(d))&&!this.isInRange(a)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
this.rangeMessage||(this.messages=d.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"esri/tasks/geoenrichment/EnrichParameters":function(){define(["../../declare","../../SpatialReference","./EnrichParametersBase","./StandardIntersectingGeography"],function(h,d,a,b){return h("esri.tasks.geoenrichment.EnrichParameters",[a],{variables:null,returnGeometry:!1,outSR:null,intersectingGeographies:null,forStorage:!0,constructor:function(a){this.variables=
[];if(a&&(this.variables=a.analysisVariables||a.variables||null,a.returnGeometry&&(this.returnGeometry=!0),a.outSR&&(this.outSR=new d(a.outSR)),a.forStorage&&(this.forStorage=a.forStorage),a.intersectingGeographies)){this.intersectingGeographies=[];for(var m=0;m<a.intersectingGeographies.length;m++){var h=a.intersectingGeographies[m];if("standard"==h.geographyType)this.intersectingGeographies.push(new b(h));else if("external"==h.geographyType)throw Error("Not implemented");}}},toJson:function(){var a=
this.inherited(arguments);a.analysisVariables=this.variables;this.returnGeometry&&(a.returnGeometry=!0);this.outSR&&(a.outSR=this.outSR.toJson());this.forStorage||(a.forStorage=!1);if(this.intersectingGeographies){a.intersectingGeographies=[];for(var b=0;b<this.intersectingGeographies.length;b++)a.intersectingGeographies.push(this.intersectingGeographies[b].toJson())}return a}})})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(h){var d=h.getObject("dojox.html.entities",!0),
a=function(a,b){var d,h;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)d=b._encCache.mapper,h=b._encCache.regexp;else{d={};h=["["];var e;for(e=0;e<b.length;e++)d[b[e][0]]="\x26"+b[e][1]+";",h.push(b[e][0]);h.push("]");h=RegExp(h.join(""),"g");b._encCache={mapper:d,regexp:h,length:b.length}}return a=a.replace(h,function(a){return d[a]})},b=function(a,b){var d,h;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)d=b._decCache.mapper,
h=b._decCache.regexp;else{d={};h=["("];var e;for(e=0;e<b.length;e++){var f="\x26"+b[e][1]+";";e&&h.push("|");d[f]=b[e][0];h.push(f)}h.push(")");h=RegExp(h.join(""),"g");b._decCache={mapper:d,regexp:h,length:b.length}}return a=a.replace(h,function(a){return d[a]})};d.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];d.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],
["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],
["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd",
"Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7",
"divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3",
"Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],
["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],
["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],
["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],
["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];d.encode=function(b,m){b&&(m?b=a(b,m):(b=a(b,d.html),b=a(b,d.latin)));
return b};d.decode=function(a,m){a&&(m?a=b(a,m):(a=b(a,d.html),a=b(a,d.latin)));return a};return d})},"esri/dijit/analysis/ExtractData":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dojo/date/locale dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ToggleButton dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/form/RadioButton dijit/Dialog dojox/form/CheckedMultiSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ../../geometry/jsonUtils ../../toolbars/draw ../../graphic ../../layers/FeatureLayer ./utils ../../geometry/Point ../../geometry/Polyline ../../geometry/Polygon ../../geometry/Multipoint ../../geometry/Extent ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../SpatialReference dojo/i18n!../../nls/jsapi dojo/text!./templates/ExtractData.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$,ba,Y,ca,da,ea,fa,ga){h=d([v,z,x,A,E,W,S],{declaredClass:"esri.dijit.analysis.ExtractData",templateString:ga,widgetsInTemplate:!0,clip:!1,dataFormat:"CSV",inputLayers:null,featureLayers:null,outputLayerName:null,i18n:null,toolName:"ExtractData",helpFileName:"ExtractData",resultParameter:"contentID",constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},
destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,m.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);this.i18n={};a.mixin(this.i18n,fa.common);a.mixin(this.i18n,fa.analysisTools);a.mixin(this.i18n,fa.extractDataTool)},postCreate:function(){this.inherited(arguments);k.add(this._form.domNode,"esriSimpleForm");n.set(this._inputLayersSelect.selectNode,"width","90%");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));
this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},clear:function(){this._extentArea&&(this.map.graphics.remove(this._extentArea),this._extentArea=null);this._featureLayer&&(this.map.removeLayer(this._featureLayer),this._featureLayer=null);this._toolbar.deactivate()},_buildJobParams:function(){var a={},c,g,k=[];g=b.map(this._inputLayersSelect.get("value"),function(a){return this.featureLayers[parseInt(a,10)]},this);
c=[];c=b.map(g,function(a){return p.toJson(U.constructAnalysisInputLyrObj(a))},this);a.InputLayers=c;a.Clip=this.get("clip");a.DataFormat=this._dataFormatSelect.get("value");if("-1"!==this._extentSelect.get("value")||this._extentArea)this._extentArea?(this._featureLayer||(this._featureLayer=this._createBoundingPolyFeatColl(),this.map.addLayer(this._featureLayer)),k.push(this._extentArea),this._featureLayer.applyEdits(k,null,null),a.Extent=p.toJson(U.constructAnalysisInputLyrObj(this._featureLayer))):
a.Extent=p.toJson(U.constructAnalysisInputLyrObj(this.featureLayers[parseInt(this._extentSelect.get("value"),10)-1])),a.context=p.toJson({extent:this.get("extent")});else{c=new ca(ca.STYLE_NULL,new da(da.STYLE_SOLID,new l([0,0,0]),4));g=this._createBoundingPolyFeatColl();var k=this.map.extent._normalize(!0),e=new $(k.spatialReference);e.addRing([[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]);g.add(new X(e,c));a.Extent=p.toJson(U.constructAnalysisInputLyrObj(g));
a.context=p.toJson({extent:this.map.extent._normalize(!0)})}a.OutputName=p.toJson({itemProperties:{title:this._outputLayerInput.get("value"),description:this.i18n.itemDescription,tags:this.i18n.itemTags,snippet:this.i18n.itemSnippet,folderId:this._webMapFolderSelect.item?this.folderStore.getValue(this._webMapFolderSelect.item,"id"):""}});return a},_handleShowCreditsClick:function(b){var c={};b.preventDefault();this._form.validate()&&(c=this._buildJobParams(),c.InputLayers=p.toJson(c.InputLayers),
this.getCreditsEstimate(this.toolName,c).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){a={};var b={};this._form.validate()&&(this._saveBtn.set("disabled",!0),a=this._buildJobParams(),b.jobParams=a,this._featureLayer&&(this.map.removeLayer(this._featureLayer),this._featureLayer=null),this._extentArea&&(this.map.graphics.remove(this._extentArea),this._extentArea=null),this.execute(b))},_save:function(){},_buildUI:function(){var g;
this._loadConnections();n.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this.signInPromise.then(a.hitch(this,U.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));g=q.format(new Date,{datePattern:"MMMM d yyyy",timePattern:"h.m.s a"});this._outputLayerInput.set("value",c.substitute(this.i18n.outputfileName,{datetime:g}));this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName);this.featureLayers&&(this._extentSelect.addOption({value:"-1",
label:this.i18n.sameAsDisplay}),b.forEach(this.featureLayers,function(a,g){this._inputLayersSelect.addOption({value:g,label:a.name,selected:this.featureLayers&&-1!==b.indexOf(this.inputLayers,a)});this._extentSelect.addOption({value:g+1,label:c.substitute(this.i18n.sameAsLayer,{layername:a.name})})},this));this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName);n.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,
function(a){this.folderStore=a;U.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));n.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");this.clip&&this._clipRadioBtn.set("value",this.clip);this.dataFormat&&this._dataFormatSelect.set("value",this.dataFormat)},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",
!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_handleDataFormatSelectChange:function(){var a,c;c=!1;"CSV"===this._dataFormatSelect.get("value")?(c=b.some(this._inputLayersSelect.get("value"),function(b){a=this.featureLayers[parseInt(b,10)];return"esriGeometryPolyline"===a.geometryType||"esriGeometryPolygon"===a.geometryType},this))?(this._showMessages(this.i18n.linesCSVValidationMsg),this.set("disableRunAnalysis",!0)):(this._handleCloseMsg(),this.set("disableRunAnalysis",
!1)):(this._handleCloseMsg(),this.set("disableRunAnalysis",!1))},_handleExtentSelectChange:function(a){var b;this._drawExtentBtn.set("disabled","-1"!==this._extentSelect.get("value"));this._extentArea&&(this.map.graphics.remove(this._extentArea),this._extentArea=null,this._extentSelect.updateOption({value:"-1",label:this.i18n.sameAsDisplay}));"-1"!==a?(b=this.featureLayers[parseInt(a-1,10)].toJson(),a=this.featureLayers[parseInt(a-1,10)],this.set("extent",R.isDefined(b.layerDefinition.extent)?b.layerDefinition.extent:
this._getLayerFullExtent(a))):this.set("extent",this.map.extent._normalize(!0))},_getLayerFullExtent:function(a){var c=null;b.forEach(a.graphics,function(a,b){var g=this._getExtent(a.geometry);g&&(c=c?c.union(g):g)},this);return c},_getExtent:function(a){if(!a)return null;var b=null;if("esri.geometry.Extent"===a.declaredClass)b=a;else if("esri.geometry.Point"===a.declaredClass)b=new Y(a.x-1E-4,a.y-1E-4,a.x+1E-4,a.y+1E-4,a.spatialReference);else if(b=a.getExtent())b.spatialReference=new ea(a.spatialReference.toJson());
return b},_handleExtentBtnClick:function(a){a.preventDefault();this.emit("drawtool-activate",{});this._toolbar.activate(T.POLYGON);this._featureLayer&&(this.map.removeLayer(this._featureLayer),this._featureLayer=null);this._extentArea&&(this.map.graphics.remove(this._extentArea),this._extentArea=null)},_addFeatures:function(a){this.emit("drawtool-deactivate",{});this._toolbar.deactivate();var b;b=new ca(ca.STYLE_NULL,new da(da.STYLE_SOLID,new l([0,0,0]),4));this.set("extent",a.getExtent());this._extentArea=
new X(a,b);this.map.graphics.add(this._extentArea);this._extentSelect.updateOption({value:"-1",label:this.i18n.drawnBoundary})},_setExtentAttr:function(a){this.extent=a},_getExtentAttr:function(){return this.extent},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setFeatureLayersAttr:function(a){this.featureLayers=b.filter(a,function(a){return-1!==a.capabilities.indexOf("Extract")})},_getFeatureLayersAttr:function(){return this.featureLayers},
_setInputLayersAttr:function(a){this.inputLayers=a},_getInputLayersAttr:function(){return this.inputLayers=b.map(this._inputLayersSelect.get("value"),function(a){return this.featureLayers[parseInt(a,10)]},this)},_setClipAttr:function(a){this.clip=a},_getClipAttr:function(){return this.clip=this._clipRadioBtn.get("checked")},_setDataFormatAttr:function(a){this.dataFormat=a},_getDataFormatAttr:function(){return this._dataFormatSelect.get("value")},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",
a)},_setMapAttr:function(b){this.map=b;this._toolbar=new T(this.map);this.set("extent",this.map.extent._normalize(!0));m.connect(this._toolbar,"onDrawEnd",a.hitch(this,this._addFeatures))},validateServiceName:function(a){return U.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(m.connect(a,b,c))},_showMessages:function(b){u.set(this._bodyNode,"innerHTML",b);r.fadeIn({node:this._errorMessagePane,easing:w.quadIn,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,
{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();r.fadeOut({node:this._errorMessagePane,easing:w.quadOut,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,{display:"none"})})}).play()},_createBoundingPolyFeatColl:function(){return new aa({layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPolygon"},layerDefinition:{currentVersion:10.11,copyrightText:"",defaultVisibility:!0,relationships:[],isDataVersioned:!1,supportsRollbackOnFailureParameter:!0,
supportsStatistics:!0,supportsAdvancedQueries:!0,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,objectIdField:"OBJECTID",templates:[],type:"Feature Layer",displayField:"TITLE",visibilityField:"VISIBLE",name:"Boundary",hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",allowGeometryUpdates:!0,htmlPopupType:"",hasM:!1,hasZ:!1,globalIdField:"",supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:-1,indexes:[],types:[],drawingInfo:{renderer:{type:"simple",symbol:{color:[0,0,
0,255],outline:{color:[0,0,0,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSNull"},label:"",description:""},transparency:0,labelingInfo:null,fixedSymbols:!0},fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",
editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]}},{id:"boundary"})}});e("extend-esri")&&a.setObject("dijit.analysis.ExtractData",h,O);return h})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(h,d,a,b,l,m){h=h(m,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return l.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});
a("extend-esri")&&d.setObject("layers.LayerMapSource",h,b);return h})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(h,d,a,b){var l=h(null,{declaredClass:"esri.TimeExtent",constructor:function(a){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(a)if(d.isArray(a)){var b=a[0],l=a[1];this.startTime=null===b||"null"===b?null:new Date(b);this.endTime=null===l||"null"===l?null:new Date(l)}else a instanceof Date&&this._create(a,
null)},offset:function(a,b){var d=new l,e=this.startTime,f=this.endTime;e&&(d.startTime=this._getOffsettedDate(e,a,b));f&&(d.endTime=this._getOffsettedDate(f,a,b));return d},intersection:function(a){return this._intersection(this,a)},toJson:function(){var a=[],b=this.startTime;a.push(b?b.getTime():"null");b=this.endTime;a.push(b?b.getTime():"null");return a},_create:function(a,b){this.startTime=a?new Date(a.getTime()):null;this.endTime=b?new Date(b.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(a,b){if(a&&b){var d=a.startTime,e=a.endTime,f=b.startTime,c=b.endTime,d=d?d.getTime():-Infinity,f=f?f.getTime():-Infinity,e=e?e.getTime():Infinity,c=c?c.getTime():Infinity,n,h;f>=d&&f<=e?n=f:d>=f&&d<=c&&(n=d);e>=f&&e<=c?h=
e:c>=d&&c<=e&&(h=c);if(!isNaN(n)&&!isNaN(h))return d=new l,d.startTime=-Infinity===n?null:new Date(n),d.endTime=Infinity===h?null:new Date(h),d}return null},_getOffsettedDate:function(a,b,d){var e=this._refData;a=new Date(a.getTime());b&&d&&(e=e[d],a[e.setter](a[e.getter]()+b*e.multiplier));return a}});a("extend-esri")&&(b.TimeExtent=l);return l})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(h,d,a,b,l,m){h=
h([m],{declaredClass:"esri.layers.RangeDomain",constructor:function(a){a&&d.isObject(a)&&(this.minValue=a.range[0],this.maxValue=a.range[1])},toJson:function(){var a=this.inherited(arguments);a.range=[this.minValue,this.maxValue];return l.fixJson(a)}});a("extend-esri")&&d.setObject("layers.RangeDomain",h,b);return h})},"esri/tasks/geoenrichment/StandardIntersectingGeography":function(){define(["../../declare","./IntersectingGeography"],function(h,d){return h("esri.tasks.geoenrichment.StandardIntersectingGeography",
[d],{geographyLayerID:null,constructor:function(a){a&&(this.geographyLayerID=a.geographyLayer||a.geographyLayerID||null)},toJson:function(){var a=this.inherited(arguments);a.geographyType="standard";a.geographyLayer=this.geographyLayerID;return a}})})},"xstyle/css":function(){define(["require"],function(h){function d(a,b,d){var m=document.documentElement;a=m.insertBefore(document.createElement(a),m.firstChild);a.id=b;b=(a.currentStyle||getComputedStyle(a,null))[d];m.removeChild(a);return b}return{load:function(a,
b,l,m){function p(){var a=d("x-parse",null,"content");a&&"none"!=a?b([eval(a)],l):l()}var r=b.toUrl(a),e=b.cache["url:"+r];if(e)return e.xCss&&(e=e.cssText),h(["./util/createStyleSheet"],function(a){a(e)}),p();if("none"==d("div",a.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return p();h(["./load-css"],function(a){a(r,p)})}}})},"esri/dijit/analysis/CreateWatersheds":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator ../../symbols/PictureMarkerSymbol dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!../../nls/jsapi dojo/text!./templates/CreateWatersheds.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$){h=d([g,q,w,v,z,L,N],{declaredClass:"esri.dijit.analysis.CreateWatersheds",templateString:$,widgetsInTemplate:!0,inputLayer:null,searchDistance:null,searchUnits:"Meters",outputLayerName:null,i18n:null,map:null,toolName:"CreateWatersheds",helpFileName:"CreateWatersheds",resultParameter:["watershedLayer","snapPourPtsLayer"],constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=
a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,V.createWatershedTool);this.set("drawPointLayerName",this.i18n.pointlayerName)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&
this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.inputLayers,function(a,b){a===this._pointfeatureLayer&&(this._analysisSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.inputLayers.splice(b,1))},this));this._handleInputDrawPointChange(!1);this.emit("close",{save:!a})},clear:function(){this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.inputLayers,function(a,b){a===this._pointfeatureLayer&&(this._analysisSelect.removeOption({value:b+
1,label:this._pointfeatureLayer.name}),this.inputLayers.splice(b,1))},this));this._handleInputDrawPointChange(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer"))),b.searchDistance=this.get("searchDistance"),b.searchUnits=this.get("searchUnits"),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer")));a.searchDistance=this.get("searchDistance");a.searchUnits=this.get("searchUnits");this.returnFeatureCollection||(a.OutputName=
p.toJson({serviceProperties:{name:this.get("outputLayerName")}}));this.showChooseExtent&&!this.get("disableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnFeatureCollection=this.returnFeatureCollection;b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,
tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name,fieldname:!a.field?"":a.field}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));console.log(b);this.execute(b)}},_save:function(){},_buildUI:function(){var b=!0;this._loadConnections();this.signInPromise.then(a.hitch(this,Q.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&
this.set("inputLayer",this.inputLayers[0]),Q.populateAnalysisLayers(this,"inputLayer","inputLayers",{posIncrement:1}));Q.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);this.inputLayer&&this._updateAnalysisLayerUI(b);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;Q.setupFoldersUI({folderStore:this.folderStore,
folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._distanceUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},
{value:"Meters",label:this.i18n.meters}]);this.searchUnits&&this._distanceUnitsSelect.set("value",this.searchUnits);this.searchDistance&&this._searchDistanceInput.set("value",this.searchDistance)},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._analysisPointDrawBtn.reset(),
this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._browsedlg.show()):(this.inputLayer=this.inputLayers[a-1],this._updateAnalysisLayerUI(!0))},_updateAnalysisLayerUI:function(a){this.inputLayer&&(n.set(this._interpolateToolDescription,"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name})),this._outputLayerInput.set("value",this.outputLayerName),
this._pointfeatureLayer&&this._pointfeatureLayer.name!==this.inputLayer.name&&this._analysisPointDrawBtn.reset())},_handleBrowseItemsSelect:function(b){b&&b.selection&&Q.addAnalysisReadyLayer({item:b.selection,layers:this.inputLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_handleInputDrawPointChange:function(a){a?(this.emit("drawtool-activate",{}),this._pointfeatureLayer||this._createPointFeatColl(),this._pointtoolbar.activate(R.POINT)):
this._pointtoolbar.deactivate()},_createPointFeatColl:function(){var b=Q.createPointFeatureCollection(this.drawPointLayerName);this._pointfeatureLayer=new S(b,{id:this.drawPointLayerName});this.map.addLayer(this._pointfeatureLayer);l.connect(this._pointfeatureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addPointFeatures:function(a){var c=[],g={},k=(new X({height:24,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"})).setOffset(0,
12);a=new P(a,k);this.map.graphics.add(a);g.description="blayer desc";g.title="blayer";a.setAttributes(g);c.push(a);this._pointfeatureLayer.applyEdits(c,null,null);if(0===this.inputLayers.length||this.inputLayers[this.inputLayers.length-1]!==this._pointfeatureLayer)this.inputLayers.push(this._pointfeatureLayer),c=this.inputLayers.length-1,g=this._analysisSelect.getOptions(),this._analysisSelect.removeOption(g),g=b.map(g,function(a){a.selected=!1;return a}),this._analysisSelect.addOption({value:c+
1,label:this._pointfeatureLayer.name,selected:!0}),this._analysisSelect.addOption(g),this._handleAnalysisLayerChange(c+1)},validateServiceName:function(a){return Q.validateServiceName(a,{textInput:this._outputLayerInput})},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayersAttr:function(a){this.inputLayers=a},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},
_getOutputLayerNameAttr:function(){this._outputLayerInput&&(this.outputLayerName=this._outputLayerInput.get("value"));return this.outputLayerName},_setOutputLayerNameAttr:function(a){this.outputLayerName=a},_setMapAttr:function(b){this.map=b;this._pointtoolbar=new R(this.map);l.connect(this._pointtoolbar,"onDrawEnd",a.hitch(this,this._addPointFeatures))},_getMapAttr:function(){return this.map},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",
!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_setSearchUnitsAttr:function(a){this.searchUnits=a},_getSearchUnitsAttr:function(){this._distanceUnitsSelect&&this._distanceUnitsSelect.get("value")&&(this.searchUnits=this._distanceUnitsSelect.get("value"));return this.searchUnits},_setSearchDistanceAttr:function(a){this.searchDistance=a},_getSearchDistanceAttr:function(){this._searchDistanceInput&&this._searchDistanceInput.get("value")&&
(this.searchDistance=this._searchDistanceInput.get("value"));return this.searchDistance},_setDrawPointLayerNameAttr:function(a){this.drawPointLayerName=a},_getDrawPointLayerNameAttr:function(){return this._pointfeatureLayer.name},_getDrawLayerAttr:function(){var a=[];this._featureLayer&&a.push(this._featureLayer);this._pointfeatureLayer&&a.push(this._pointfeatureLayer);return a},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.CreateWatersheds",
h,F);return h})},"esri/dijit/geoenrichment/_WizardPage":function(){define("../../declare dojo/string dojo/dom-class dojox/mvc/Templated dojo/text!./templates/_WizardPage.html ./Grid".split(" "),function(h,d,a,b,l,m){var p={busy:"Wizard_Loading",done:"Wizard_Done",error:"Wizard_Error"};return h("esri.dijit.geoenrichment._WizardPage",[b],{buttonsNode:null,progressPromises:null,buildRendering:function(){var a=this.templateString;0<a.length&&"\ufeff"==a[0]&&(a=a.substr(1));this.templateString=d.substitute(l,
{content:a});this.inherited(arguments);this.layoutGrid.rows=[m.AUTO,m.AUTO,m.AUTO]},resize:function(){this.layoutGrid.resize()},_setStackingAttr:function(a){switch(a){case "stretch":this.layoutGrid.rows[1]=m.STRETCH;break;case "stack":this.layoutGrid.rows[1]=m.STACK}},showProgress:function(a,b){this.progressPromises||(this.progressPromises={});var f;f="string"==typeof b||b instanceof String?b:Math.random().toString();this.progressPromises[f]&&this.progressPromises[f].cancel();var c=a.isResolved(),
d=this;c||(this.progressPromises[f]=a,a.always(function(){delete d.progressPromises[f]}),this._setState("busy"));a.then(function(){(b instanceof Function?b:d[b]).apply(d,arguments);c||d._setState("done")},function(a){"CancelError"==a.name?c||d._setState("done"):d._setState("error",a.toString())})},cancelProgress:function(a){(a=this.progressPromises&&this.progressPromises[a])&&a.cancel()},_setState:function(b,e){if(this.progressDiv){this.progressDiv.innerHTML=e||"";for(var f in p)f==b?a.add(this.progressDiv,
p[f]):a.remove(this.progressDiv,p[f])}},destroy:function(){if(this.progressPromises){for(var a in this.progressPromises)a.hasOwnProperty(a)&&this.progressPromises[a].cancel();this.progressPromises=null}this.inherited(arguments)}})})},"esri/dijit/geoenrichment/Pagination":function(){define("../../declare dojo/_base/lang dojox/mvc/Templated dojo/aspect dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/on dgrid/List dijit/_WidgetBase ./AnimationHelper dojo/text!./templates/Pagination.html dijit/layout/ContentPane".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n){return h("esri.dijit.geoenrichment.Pagination",[f,a],{templateString:n,items:null,paneNode:null,_pageCount:0,_pageSize:0,currentPage:0,minRows:1,minColumns:1,scrollAnim:null,constructor:function(){this.inherited(arguments);this.scrollAnim=new c},buildRendering:function(){this.inherited(arguments)},resize:function(){function a(){return c.scrollHeight-2>c.clientHeight&&c.clientHeight>f.h*g.minRows||c.scrollWidth-2>c.clientWidth&&c.clientWidth>f.w*g.minColumns}this.scrollAnim.finish();
var b=this.items||[],c=this.itemsNode.parentNode,k=this.itemsNode.firstChild;k||(k=p.create("div",null,this.itemsNode));for(var g=this,e=k.childNodes,f=1<=e.length?m.getMarginBox(k.firstChild):{h:0,w:0,fake:!0};!a()&&e.length<b.length;){var n=this.createItemContainer();r(n,"click",d.hitch(this,this.onItemClick,n));k.appendChild(n);f.fake&&(f=m.getMarginBox(k.firstChild))}for(;a()&&1<e.length||e.length>b.length;)p.destroy(k.lastChild);var l=this._pageSize=e.length,n=this._pageCount=0===l?0:Math.ceil(b.length/
l);this.currentPage=this._coerceCurrentPage(this.currentPage);for(var h=0,A=l*this.currentPage;h<l&&A<b.length;)this.updateItemContainer(e[h],b[A]),h++,A++;for(;h<l;)p.destroy(k.lastChild),h++;b=this.bulletsNode;b.innerHTML="";if(1<n)for(k=0;k<n;k++)e=p.create("span",{"class":"Pagination_Bullet",innerHTML:"\x26bull;"},b),r(e,"click",d.hitch(this,this.set,"currentPage",k));this._updateNavigationControls()},createItemContainer:function(){},updateItemContainer:function(a,b){},onItemClick:function(a){this.onSelect(a)},
_coerceCurrentPage:function(a){0>a?a=0:a>=this._pageCount&&(a=this._pageCount-1);return a},_updateNavigationControls:function(){var a=this.currentPage;this.backNode&&(this.backNode.style.display=0<a?"":"none");this.forwardNode&&(this.forwardNode.style.display=a<this._pageCount-1?"":"none");for(var b=this.bulletsNode.childNodes,c=0;c<b.length;c++)c==a?l.add(b[c],"Pagination_BulletCurrent"):l.remove(b[c],"Pagination_BulletCurrent")},_setCurrentPageAttr:function(a){a=this._coerceCurrentPage(a);if(this.currentPage!==
a){this.scrollAnim.finish();for(var b=this.items||[],c=this.itemsNode,k=0,g=this._pageSize*a,e=this.itemsNode.firstChild,f=p.create("div");k<this._pageSize&&g<b.length;){var n=this.createItemContainer();r(n,"click",d.hitch(this,this.onItemClick,n));this.updateItemContainer(n,b[g]);f.appendChild(n);k++;g++}a===this.currentPage+1?(c.appendChild(f),this._slideAnim(c,e,["Pagination_SlideAnim","Anim_SlideLeft"])):a===this.currentPage-1?(c.insertBefore(f,c.firstChild),this._slideAnim(c,e,["Pagination_SlideAnim",
"Anim_SlideRight"])):(c.appendChild(f),this.scrollAnim.start([{node:e,classes:["Pagination_FadeAnim","Anim_FadeOut"]},{node:f,classes:["Pagination_FadeAnim","Anim_FadeIn"]}],e));this.currentPage=a;this._updateNavigationControls()}},_slideAnim:function(a,b,c){a.parentNode.style.overflow="hidden";this.scrollAnim.start([{node:a,classes:c}],b).then(function(){a.parentNode.style.overflow=""})},_back:function(){this.set("currentPage",this.currentPage-1)},_forward:function(){this.set("currentPage",this.currentPage+
1)},_onSelect:function(a){this.set("selectedItems",[a]);this.onSelect()},onSelect:function(){}})})},"esri/dijit/analysis/TrafficTime":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/_base/kernel dojo/dom-attr dojo/string dojo/dom-style dojo/dom-class dojo/has dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/form/CheckBox dijit/form/RadioButton dijit/form/TimeTextBox dijit/form/Select dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels ../../kernel dojo/i18n!../../nls/jsapi dojo/text!./templates/TrafficTime.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D){h=d([n,u,t,s,k],{declaredClass:"esri.dijit.analysis.TrafficTime",i18n:null,templateString:D,widgetsInTemplate:!0,_liveOffset:0,postMixInProperties:function(){this.i18n={};a.mixin(this.i18n,B.common);a.mixin(this.i18n,B.driveTimes)},postCreate:function(){this.inherited(arguments);this._handleUseTrafficCheckChange(this._useTrafficCheck.get("value"))},_handleUseTrafficCheckChange:function(a){this._typicalTrafficRadioBtn.set("disabled",!a);
this._liveTrafficRadioBtn.set("disabled",!a);a?this._handleLifeTrafficRadioChange(this._liveTrafficRadioBtn.get("value")):(this._liveTimeSlider.set("disabled",!a),this._trafficTime.set("disabled",!a),this._trafficDay.set("disabled",!a));a?(f.remove(this._liveTraficLabel,"esriAnalysisTextDisabled"),f.remove(this._typicalTraficLabel,"esriAnalysisTextDisabled"),f.remove(this._liveTimeRuleLabels,"esriAnalysisTextDisabled")):(f.add(this._liveTraficLabel,"esriAnalysisTextDisabled"),f.add(this._typicalTraficLabel,
"esriAnalysisTextDisabled"),f.add(this._liveTimeRuleLabels,"esriAnalysisTextDisabled"))},_handleLifeTrafficRadioChange:function(a){this._liveTimeSlider.set("disabled",!a);this._trafficTime.set("disabled",a);this._trafficDay.set("disabled",a)},_setDisabledAttr:function(a){this._useTrafficCheck.set("disabled",a)},_setResetAttr:function(a){a&&this._useTrafficCheck.set("checked",!1)},_getCheckedAttr:function(){return this._useTrafficCheck.get("checked")},_setCheckedAttr:function(a){this._useTrafficCheck.set("checked",
a)},_getTimeOfDayAttr:function(){var a;this._liveTrafficRadioBtn.get("value")?a=(new Date).getTime()+6E4*this._liveOffset:(a=new Date(this._trafficDay.get("value")),a=a.getTime()-6E4*a.getTimezoneOffset()+this._trafficTime.get("value").getTime()-6E4*this._trafficTime.get("value").getTimezoneOffset());return a},_getTimeZoneForTimeOfDayAttr:function(){return this._liveTrafficRadioBtn.get("value")?"UTC":""},_handleLiveTimeSliderChange:function(a){var b,c;b=60*a;a=Math.floor(a);c=b-60*a;a=0===a&&0===
c?this.i18n.liveTrafficLabel:0===a?r.substitute(this.i18n.liveTimeMinutesLabel,{minute:c}):1===a?0===c?this.i18n.liveSingularHourTimeLabel:r.substitute(this.i18n.liveSingularTimeLabel,{minute:c}):0===c?r.substitute(this.i18n.liveTimeHoursLabel,{hour:a,minute:c}):r.substitute(this.i18n.liveTimeLabel,{hour:a,minute:c});this._liveOffset=b;p.set(this._liveTraficLabel,"innerHTML",a)}});c("extend-esri")&&a.setObject("dijit.analysis.TrafficTime",h,E);return h})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k){h=h(null,{declaredClass:"esri.PopupInfo",initialize:function(b,c){if(b){d.mixin(this,c);this.info=b;this.title=this.getTitle;this.content=this.getContent;var k=this._fieldLabels={},e=this._fieldsMap={};b.fieldInfos&&a.forEach(b.fieldInfos,function(a){var b=a.fieldName.toLowerCase();k[b]=a.label;e[b]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(b.title&&-1!==b.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return b.fromJson(b.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(b){var c;a.some(this.info&&this.info.fieldInfos,function(a){a.fieldName===b&&(c=a);return!!c});return c},getComponents:function(b){var c=this.info,k=new p,e,f;c.fieldInfos&&(f=a.filter(c.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));f&&0<f.length&&(e=this._getRelatedRecords({graphic:b,fieldsInfo:f}));e?e.always(d.hitch(this,function(){k.resolve(this._getPopupValues(b))})):k.resolve(this._getPopupValues(b));
return k.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_getPopupValues:function(b,c){var k=this.info,e=b.getLayer(),n=d.clone(b.attributes)||{},l=d.clone(n),m=k.fieldInfos,h="",p="",t,s,u,r,M,K=e&&e._getDateOpts&&e._getDateOpts().properties,K=K&&K.slice(0),J={dateFormat:{properties:K,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};
if(this._relatedInfo)for(r in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(r)){var F=this._relatedInfo[r],G=this._relatedLayersInfo[r];F&&(a.forEach(F.relatedFeatures,function(a){for(M in a.attributes)if(a.attributes.hasOwnProperty(M)&&"esriRelCardinalityOneToOne"===G.relation.cardinality){var b=this._toRelatedFieldName([G.relation.id,M]);n[b]=l[b]=a.attributes[M]}},this),a.forEach(F.relatedStatsFeatures,function(a){for(M in a.attributes)if(a.attributes.hasOwnProperty(M)){var b=this._toRelatedFieldName([G.relation.id,
M]);n[b]=l[b]=a.attributes[M]}},this))}m&&a.forEach(m,function(b){s=b.fieldName;var c=this._getLayerFieldInfo(e,s);c&&(s=b.fieldName=c.name);l[s]=this._formatValue(l[s],s,J);K&&(b.format&&b.format.dateFormat)&&(b=a.indexOf(K,s),-1<b&&K.splice(b,1))},this);if(e){r=e.types;var N=(F=e.typeIdField)&&n[F];for(s in n)if(n.hasOwnProperty(s)&&-1===s.indexOf(this._relatedFieldPrefix)&&(u=n[s],f.isDefined(u))){var L=this._getDomainName(e,b,r,N,s,u);f.isDefined(L)?l[s]=L:s===F&&(L=this._getTypeName(e,b,u),f.isDefined(L)&&
(l[s]=L))}}k.title&&(h=this._processFieldsInLinks(this._fixTokens(k.title,e),n),h=d.trim(f.substitute(l,h,J)||""));if(c)return{title:h};k.description&&(p=this._processFieldsInLinks(this._fixTokens(k.description,e),n),p=d.trim(f.substitute(l,p,J)||""));m&&(t=[],a.forEach(m,function(a){(s=a.fieldName)&&a.visible&&t.push([a.label||s,f.substitute(l,"${"+s+"}",J)||""])}));var C,O;k.mediaInfos&&(C=[],a.forEach(k.mediaInfos,function(b){O=0;u=b.value;switch(b.type){case "image":var c=u.sourceURL,c=c&&d.trim(f.substitute(n,
this._fixTokens(c,e)));O=!!c;break;case "piechart":case "linechart":case "columnchart":case "barchart":var g,c=u.normalizeField;u.fields=a.map(u.fields,function(a){return(g=this._getLayerFieldInfo(e,a))?g.name:a},this);c&&(g=this._getLayerFieldInfo(e,c),u.normalizeField=g?g.name:c);O=a.some(u.fields,function(a){return f.isDefined(n[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(O){b=d.clone(b);u=b.value;var c=b.title?this._processFieldsInLinks(this._fixTokens(b.title,
e),n):"",k=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,e),n):"";b.title=c?d.trim(f.substitute(l,c,J)||""):"";b.caption=k?d.trim(f.substitute(l,k,J)||""):"";if("image"===b.type)u.sourceURL=f.substitute(n,this._fixTokens(u.sourceURL,e)),u.linkURL&&(u.linkURL=d.trim(f.substitute(n,this._fixTokens(u.linkURL,e))||""));else{var q,m;a.forEach(u.fields,function(a,b){if(-1!==a.indexOf(this._relatedFieldPrefix))m=this._getRelatedChartInfos(a,u,n,J),m instanceof Array?u.fields=m:u.fields[b]=
m;else{var c=n[a],c=void 0===c?null:c;q=n[u.normalizeField]||0;c&&q&&(c/=q);u.fields[b]={y:c,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(c,a,J,!!q)}}},this)}C.push(b)}},this));return{title:h,description:p,hasDescription:!!k.description,fields:t&&t.length?t:null,mediaInfos:C&&C.length?C:null,formatted:l,editSummary:e&&e.getEditSummary?e.getEditSummary(b):""}},_getRelatedChartInfos:function(b,c,k,e){var f,d,n,l,m,h;f=[];h=this._fromRelatedFieldName(b);m=h[0];d=this._relatedInfo[m];
m=this._relatedLayersInfo[m];d&&a.forEach(d.relatedFeatures,function(a){a=a.attributes;var d,m;for(m in a)if(a.hasOwnProperty(m)&&m===h[1]){d={};l=a[m];c.normalizeField&&(n=-1!==c.normalizeField.indexOf(this._relatedFieldPrefix)?a[this._fromRelatedFieldName(c.normalizeField)[1]]:k[c.normalizeField]);l&&n&&(l/=n);if(c.tooltipField)if(-1!==c.tooltipField.indexOf(this._relatedFieldPrefix)){var p=this._fromRelatedFieldName(c.tooltipField)[1];d.tooltip=a[p]&&"string"===typeof a[p]?a[p]+":\x3cbr/\x3e"+
this._formatValue(l,a[p],e,!!n):p+":\x3cbr/\x3e"+this._formatValue(l,p,e,!!n)}else d.tooltip=(this._fieldLabels[b.toLowerCase()]||b)+":\x3cbr/\x3e"+this._formatValue(l,c.tooltipField,e,!!n);else d.tooltip=l;d.y=l;f.push(d)}},this);return"esriRelCardinalityOneToMany"===m.relation.cardinality||"esriRelCardinalityManyToMany"===m.relation.cardinality?f:f[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",
dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,g,k){a=c._getLayerFieldInfo(b,k);return"$"+(a?"{"+a.name+"}":g)})},_encodeAttributes:function(a){a=d.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),
k=this;a&&(a=a.replace(this._reHref,function(a,g){return k._addValuesToHref(a,g,b,c)}).replace(this._reHrefApos,function(a,g){return k._addValuesToHref(a,g,b,c)}));return a},_addValuesToHref:function(a,b,c,k){b=b&&d.trim(b);return f.substitute(b&&0===b.indexOf("${")?c:k,a)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(b,c,e,n){var l=this._fieldsMap[c.toLowerCase()],m=l&&l.format;c=-1!==a.indexOf(e.dateFormat.properties,c);var h="number"===typeof b&&
!c&&(!m||!m.dateFormat);if(!f.isDefined(b)||!l||!f.isDefined(m))return h?this._forceLTR(b):b;var p="",l=[],t=m.hasOwnProperty("places")||m.hasOwnProperty("digitSeparator"),s=m.hasOwnProperty("digitSeparator")?m.digitSeparator:!0;if(t&&!c)p="NumberFormat",l.push("places: "+(f.isDefined(m.places)&&(!n||0<m.places)?Number(m.places):"Infinity")),l.length&&(p+="("+l.join(",")+")");else if(m.dateFormat)p="DateFormat"+this._insertOffset(this._dateFormats[m.dateFormat]||this._dateFormats.shortDateShortTime);
else return h?this._forceLTR(b):b;var u=this._applyFormatting(b,p,e);t&&-1<b.constructor.toString().indexOf("Array")&&(u="",a.forEach(b,d.hitch(this,function(a){u=u+this._applyFormatting(a,p,e)+" "})));t&&!s&&k.group&&(u=u.replace(RegExp("\\"+k.group,"g"),""));return h?this._forceLTR(u):u},_applyFormatting:function(a,b,c){return f.substitute({myKey:a},"${myKey:"+b+"}",c)||""},_forceLTR:function(a){var b=r("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(a){a&&
(a=f.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):a);return a},_getDomainName:function(a,b,c,k,e,f){return(a=a.getDomain&&a.getDomain(e,{feature:b}))&&a.codedValues?a.getName(f):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new p,k;this._relatedLayersInfo?this._queryRelatedLayers(b).then(d.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),d.hitch(this,this._handlerErrorResponse,
c)):this._getRelatedLayersInfo(a).then(d.hitch(this,function(a){for(k in a)a.hasOwnProperty(k)&&a[k]&&(this._relatedLayersInfo[k].relatedLayerInfo=a[k]);this._queryRelatedLayers(b).then(d.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),d.hitch(this,this._handlerErrorResponse,c))}),d.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(b){var c=b.fieldsInfo,k,f,d={};k=b.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});
a.forEach(c,function(b){var c,g,e,f;c=this._fromRelatedFieldName(b.fieldName);g=c[0];c=c[1];g&&(this._relatedLayersInfo[g]||(a.some(k.relationships,function(a){if(a.id==g)return f=a,!0}),f&&(this._relatedLayersInfo[g]={relation:f,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[g]&&(this._relatedLayersInfo[g].relatedFields.push(c),b.statisticType&&(e=new s,e.statisticType=b.statisticType,e.onStatisticField=c,e.outStatisticFieldName=c,this._relatedLayersInfo[g].outStatistics.push(e))))},
this);for(f in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(f)&&this._relatedLayersInfo[f]&&(b=this._relatedLayersInfo[f].relation,b=k.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[f].relatedLayerUrl=b,d[f]=n({url:b,content:{f:"json"},callbackParamName:"callback"}));return e(d)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));
return e(b)},_queryRelatedLayer:function(b){var c,k,f,d,n,l,m,h,p,s;c=b.graphic;k=c.getLayer().url.match(/[0-9]+$/g)[0];h=b.relatedInfo;m=h.relatedLayerInfo;p=h.relatedLayerUrl;s=h.relation;a.some(m.relationships,function(a){if(a.relatedTableId===parseInt(k,10))return f=a,!0},this);f&&(b=new u,a.some(m.fields,function(b){if(b.name===f.keyField)return n=-1!==a.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],b.type)?"number":"string",!0}),d="string"===
n?f.keyField+"\x3d'"+c.attributes[s.keyField]+"'":f.keyField+"\x3d"+c.attributes[s.keyField],b.where=d,b.outFields=h.relatedFields,h.outStatistics&&(0<h.outStatistics.length&&m.supportsStatistics)&&(l=new u,l.where=b.where,l.outFields=b.outFields,l.outStatistics=h.outStatistics),c=new t(p),d=[],d.push(c.execute(b)),l&&d.push(c.execute(l)));return e(d)},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var c in b)if(b.hasOwnProperty(c)&&b[c]){var k=b[c];this._relatedInfo[c]={};this._relatedInfo[c].relatedFeatures=
k[0].features;f.isDefined(k[1])&&(this._relatedInfo[c].relatedStatsFeatures=k[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});m("extend-esri")&&(c.PopupInfo=c.PopupInfoTemplate=h);return h})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z){var x=d("dijit.form._SliderMover",c,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=l.position(b.sliderBarContainer,!0),b._setPixelValue_=r.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){c.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,
!0)}});a=d("dijit.form.HorizontalSlider",[w,v],{templateString:z,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:s.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",
_onKeyUp:function(a){!this.disabled&&(!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey)&&this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.keyCode){case p.HOME:this._setValueAttr(this.minimum,!1);break;case p.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?p.RIGHT_ARROW:p.LEFT_ARROW:case !1===this._descending?p.DOWN_ARROW:p.UP_ARROW:case !1===this._descending?p.PAGE_DOWN:
p.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?p.LEFT_ARROW:p.RIGHT_ARROW:case !1===this._descending?p.UP_ARROW:p.DOWN_ARROW:case !1===this._descending?p.PAGE_UP:p.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){!this.disabled&&!this.readOnly&&(e("ie")||k.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&
!this.readOnly&&this.clickSelect){k.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=l.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var g=this.discreteValues;if(1>=g||Infinity==g)g=b;g--;a=Math.round(a/(b/g));this._setValueAttr(Math.max(Math.min((this.maximum-
this.minimum)*a/g+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,c){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var g=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,k=!1===this._descending?this.remainingBar:this.progressBar,e=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(c&&
0<this.slideDuration&&k.style[this._progressPixelSize]){var f=this,d={},n=parseFloat(k.style[this._progressPixelSize]),l=this.slideDuration*(g-n/100);0!=l&&(0>l&&(l=0-l),d[this._progressPixelSize]={start:n,end:100*g,units:"%"},this._inProgressAnim=b.animateProperty({node:k,duration:l,onAnimate:function(a){e.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:d}),this._inProgressAnim.play())}else k.style[this._progressPixelSize]=
100*g+"%",e.style[this._progressPixelSize]=100*(1-g)+"%"},_bumpValue:function(a,b){if(!this.disabled&&!(this.readOnly||this.maximum<=this.minimum)){var c=m.getComputedStyle(this.sliderBarContainer),g=l.getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(1>=c||Infinity==c)c=g[this._pixelCount];c--;g=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;0>g&&(g=0);g>c&&(g=c);g=g*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(g,b)}},_onClkBumper:function(a){!this.disabled&&
(!this.readOnly&&this.clickSelect)&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==p.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==p.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();this._bumpValue(0>
a.wheelDelta?-1:1,!0)},startup:function(){this._started||(h.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display=
"",this.decrementButton.style.display="");var a=n('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(g.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),g.addMouseListener(this.incrementButton,this,"_typematicCallback",
25,500));this.own(t(this.domNode,u.wheel,r.hitch(this,"_mouseWheeled")));var a=d(x,{widget:this});this._movable=new f(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});a._Mover=x;return a})},"esri/dijit/analysis/AnalysisToolItem":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-class dojo/dom-attr dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_OnDijitClickMixin dijit/_FocusMixin ../../kernel dojo/i18n!../../nls/jsapi dojo/text!./templates/AnalysisToolItem.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k){h=d([f,c,n,u],{declaredClass:"esri.dijit.analysis.AnalysisToolItem",templateString:k,widgetsInTemplate:!0,i18n:null,_helpIconNode:null,_toolIcon:null,_toolIconClass:null,_toolNameLabel:null,toolName:null,helpTopic:null,helpFileName:"Analysis",constructor:function(a,b){a.toolIcon&&(this._toolIconClass=a.toolIcon);a.name&&(this.toolName=a.name,this.helpTopic=a.helpTopic)},postCreate:function(){this.inherited(arguments);this._toolNameLabel.innerHTML=this.toolName;
p.add(this._toolIcon,this._toolIconClass);r.set(this._helpIconNode,"esriHelpTopic",this.helpTopic);this.set("showComingSoonLabel",!0)},postMixInProperties:function(){this.inherited(arguments);this.i18n={};a.mixin(this.i18n,s.common);a.mixin(this.i18n,s.analysisTools)},_handleToolNameClick:function(){this.onToolSelect(this)},_handleToolIconClick:function(a){l.stop(a);this.onToolSelect(this)},_setShowComingSoonLabelAttr:function(a){e.set(this.optionsDiv,"display",!0===a?"block":"none");p.toggle(this._toolCtr,
"esriToolContainerDisabled",a);p.toggle(this._toolNameLabel,"esriTransparentNode",a);p.toggle(this._toolIcon,"esriTransparentNode",a);e.set(this._toolNameLabel,"cursor",!0===a?"default":"pointer");e.set(this._toolCtr,"cursor",!0===a?"default":"pointer")},onToolSelect:function(a){}});m("extend-esri")&&a.setObject("dijit.analysis.AnalysisToolItem",h,t);return h})},"esri/tasks/ClassificationDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=
h(null,{declaredClass:"esri.tasks.ClassificationDefinition",type:null,baseSymbol:null,colorRamp:null,toJson:function(){var a={};this.baseSymbol&&d.mixin(a,{baseSymbol:this.baseSymbol.toJson()});this.colorRamp&&!d.isString(this.colorRamp)&&d.mixin(a,{colorRamp:this.colorRamp.toJson()});return a}});a("extend-esri")&&d.setObject("tasks.ClassificationDefinition",h,b);return h})},"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),
function(h,d,a,b,l,m,p,r,e){function f(a,b){for(var c=a.unselectable=b?"on":"",k=a.getElementsByTagName("*"),e=k.length;--e;)"INPUT"===k[e].tagName||"TEXTAREA"===k[e].tagName||(k[e].unselectable=c)}function c(a,c){var k=a.bodyNode,e=c?"text":21>l("ff")?"-moz-none":"none";u&&"msUserSelect"!==u?k.style[u]=e:l("dom-selectstart")?!c&&!a._selectstartHandle?a._selectstartHandle=b(k,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):c&&a._selectstartHandle&&
(a._selectstartHandle.remove(),delete a._selectstartHandle):(f(k,!c),!c&&!a._unselectableHandle?a._unselectableHandle=m.after(a,"renderRow",function(a){f(a,!0);return a}):c&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle))}l.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});l.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});l.add("css-user-select",function(a,b,c){a=c.style;b=
["Khtml","O","ms","Moz","Webkit"];c=b.length;var k="userSelect";do if("undefined"!==typeof a[k])return k;while(c--&&(k=b[c]+"UserSelect"));return!1});l.add("dom-selectstart","undefined"!==typeof document.onselectstart);var n=l("mac")?"metaKey":"ctrlKey",u=l("css-user-select"),t=(p=l("pointer"))&&"MS"===p.slice(0,2),s=p?p+(t?"Down":"down"):"mousedown",k=p?p+(t?"Up":"up"):"mouseup";return d("dgrid.Selection",null,{selectionDelegate:".dgrid-row",selectionEvents:s+","+k+",dgrid-cellfocusin",selectionTouchEvents:l("touch")?
r.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();
this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){h.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?c(this,a):c(this,"none"===this.selectionMode);
this.allowTextSelection=a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(b))&&!("dgrid-cellfocusin"===a.type&&"mousedown"===a.parentType||a.type===k&&b!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32==a.keyCode)if(!a.shiftKey&&a.type===s&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,
b){var c=a.keyCode?a.ctrlKey:a[n];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,k=a.keyCode?a.ctrlKey:a[n],e;a.shiftKey||(e=k?null:!0,c=null);this.select(b,c,e);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?!this.isSelected(b):!(a.keyCode?a.ctrlKey:a[n]))&&this.clearSelection(null,!0);this._multipleSelectionHandler(a,
b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,c=this.contentNode,e=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};l("touch")&&!l("pointer")&&this.selectionTouchEvents?(b(c,r.selector(e,this.selectionTouchEvents),function(b){a._handleSelect(b,this);a._ignoreMouseSelect=this}),b(c,b.selector(e,this.selectionEvents),function(b){a._ignoreMouseSelect!==this?a._handleSelect(b,this):b.type===k&&(a._ignoreMouseSelect=
null)})):b(c,b.selector(e,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[n]&&(65==b.keyCode&&!/\bdgrid-input\b/.test(b.target.className))&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setStore&&m.after(this,"_setStore",function(){a._updateDeselectionAspect()});this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function a(c,
g,k){c=g||c&&c[b.idProperty||"id"];if(null!=c&&(g=(c=b.row(c))&&b.selection[c.id]))b[k](c,null,g)}var b=this,c=this.store,k,e;this._removeDeselectSignals&&this._removeDeselectSignals();c&&c.notify?(k=m.before(c,"notify",function(b,c){b||a(b,c,"deselect")}),e=m.after(c,"notify",function(b,c){a(b,c,"select")},!0),this._removeDeselectSignals=function(){k.remove();e.remove()}):(k=m.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)}),this._removeDeselectSignals=
function(){k.remove()})},allowSelect:function(a){return!0},_fireSelectionEvent:function(a){var c=this._selectionEventQueues[a],k=this._selectionTriggerEvent,e;e={bubbles:!0,grid:this};k&&(e.parentType=k.type);e[this._selectionTargetType]=c;this._selectionEventQueues[a]=[];b.emit(this.contentNode,"dgrid-"+a,e)},_fireSelectionEvents:function(){var a=this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var k,f,d;"undefined"===typeof c&&(c=!0);a.element||
(a=this.row(a));if(!1===c||this.allowSelect(a))if(k=this.selection,f=!!k[a.id],null===c&&(c=!f),d=a.element,!c&&!this.allSelected?delete this.selection[a.id]:k[a.id]=c,d&&(c?e(d,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):e(d,"!dgrid-selected!ui-state-active")),c!==f&&d&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)if(b.element||(b=this.row(b)),b){if(b=b.element){k=this._determineSelectionDirection(d,b);k||(b=document.getElementById(b.id),k=this._determineSelectionDirection(d,
b));for(;a.element!=b&&(a=this[k](a));)this._select(a,null,c)}}else this._lastSelected=d,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")},_determineSelectionDirection:l("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return c&1?!1:2===c?"down":"up"}:
function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,
null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var b=this,c=this.inherited(arguments);a.when(c,function(a){var c=b.selection,k,e,f;for(k=0;k<a.length;k++)e=b.row(a[k]),
(f=e.id in c?c[e.id]:b.allSelected)&&b._select(e,null,f);b._fireSelectionEvents()});return c}})})},"esri/dijit/analysis/FindHotSpots":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ToggleButton dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator dojo/i18n!../../nls/jsapi dojo/text!./templates/FindHotSpots.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X){h=d([k,g,q,w,v,N,G],{declaredClass:"esri.dijit.analysis.FindHotSpots",templateString:X,widgetsInTemplate:!0,analysisLayer:null,analysisField:null,aggregationPolygonLayer:null,boundingPolygonLayer:null,outputLayerName:null,returnProcessInfo:!0,i18n:null,map:null,toolName:"FindHotSpots",helpFileName:"FindHotSpots",resultParameter:"HotSpotsResultLayer",constructor:function(a,b){this._pbConnects=[];a.containerNode&&
(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,T.findHotSpotsTool);this.set("drawLayerName",this.i18n.blayerName)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&
this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),this.boundingPolygonLayers.splice(b,1))},this));this._handleBoundingBtnClick(!1);this.emit("close",{save:!a})},clear:function(){this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+
1,label:this._featureLayer.name}),this.boundingPolygonLayers.splice(b,1))},this),this._featureLayer=null);this._boundingDrawBtn.reset();this._handleBoundingBtnClick(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};var c;this._form.validate()&&(b.analysisLayer=p.toJson(P.constructAnalysisInputLyrObj(this.analysisLayer)),"0"!==this._analysFieldSelect.get("value")&&(b.analysisField=this._analysFieldSelect.get("value")),this._isPoint&&"0"===this._analysFieldSelect.get("value")&&("-1"!==
this._boundingAreaSelect.get("value")&&(c=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1],b.boundingPolygonLayer=p.toJson(P.constructAnalysisInputLyrObj(c))),"-1"!==this._aggAreaSelect.get("value")&&(c=this.aggregationPolygonLayers[this._aggAreaSelect.get("value")-1],b.aggregationPolygonLayer=p.toJson(P.constructAnalysisInputLyrObj(c)))),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),this.showChooseExtent&&
!this.get("DisableExtent")&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.analysisLayer=p.toJson(P.constructAnalysisInputLyrObj(this.analysisLayer));"0"!==this.get("analysisField")&&(a.analysisField=this.get("analysisField"));
this._isPoint&&"0"===this._analysFieldSelect.get("value")&&("-1"!==this._boundingAreaSelect.get("value")&&(c=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1],a.boundingPolygonLayer=p.toJson(P.constructAnalysisInputLyrObj(c))),"-1"!==this._aggAreaSelect.get("value")&&(c=this.aggregationPolygonLayers[this._aggAreaSelect.get("value")-1],a.aggregationPolygonLayer=p.toJson(P.constructAnalysisInputLyrObj(c))));"0"!==this.get("dividedByField")&&(a.dividedByField=this.get("dividedByField"));
this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&!this.get("DisableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnProcessInfo=this.returnProcessInfo;
b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.analysisLayer.name,fieldname:!a.analysisField?"":a.analysisField}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_save:function(){},_buildUI:function(){var k=!0;this._loadConnections();this.signInPromise.then(a.hitch(this,P.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&
(!this.get("allowChooseLabel")&&(!this.get("analysisLayer")&&this.get("analysisLayers"))&&this.set("analysisLayer",this.analysisLayers[0]),P.populateAnalysisLayers(this,"analysisLayer","analysisLayers",{chooseLabel:this.get("allowChooseLabel")}));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),k=!1);this._boundingAreaSelect.addOption({value:"-1",label:this.i18n.defaultBoundingOption,selected:!0});this.boundingPolygonLayers&&b.forEach(this.boundingPolygonLayers,function(a,
b){"esriGeometryPolygon"===a.geometryType&&this._boundingAreaSelect.addOption({value:b+1,label:a.name,selected:!1})},this);this._aggAreaSelect.addOption({value:"-1",label:this.i18n.defaultAggregationOption,selected:!0});this.aggregationPolygonLayers&&b.forEach(this.aggregationPolygonLayers,function(a,b){"esriGeometryPolygon"===a.geometryType&&this._aggAreaSelect.addOption({value:b+1,label:a.name,selected:!1})},this);P.addReadyToUseLayerOption(this,[this._analysisSelect]);this._updateAnalysisLayerUI(k);
c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;P.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?
"block":"none")},_updateAnalysisLayerUI:function(a){if(this.analysisLayer)if("esriGeometryPolygon"===this.analysisLayer.geometryType)this._isPoint=!1,n.set(this._hotspotsToolDescription,"innerHTML",f.substitute(this.i18n.hotspotsPolyDefine,{layername:this.analysisLayer.name})),c.set(this._optionsRow,"display","none");else{if("esriGeometryPoint"===this.analysisLayer.geometryType||"esriGeometryMultipoint"===this.analysisLayer.geometryType)this._isPoint=!0,n.set(this._hotspotsToolDescription,"innerHTML",
f.substitute(this.i18n.hotspotsPointDefine,{layername:this.analysisLayer.name})),s.add(this._analysFieldSelect.domNode,"esriLeadingMargin1"),c.set(this._optionsRow,"display",""),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.analysisLayer.name}))}else c.set(this._optionsRow,"display","none"),c.set(this._optionsRow,"display","none"),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:""})),this._isPoint=!1;this.set("analysisFields",this.analysisLayer);
this._isPoint?this._aggAreaSelect.set("value","-1"):this.set("dividedByFields",this.analysisLayer);this.analysisLayer&&("esriGeometryPolygon"===this.analysisLayer.geometryType&&a)&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:F.isDefined(this._analysFieldSelect.getOptions(0))?this._analysFieldSelect.getOptions(0).label:""}));this._outputLayerInput.set("value",this.outputLayerName)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=
this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND (tags:"point" OR tags:"polygon") '),this._selectedwidget=0,this._browsedlg.show()):(-1!==a?(this.get("allowChooseLabel")&&(a-=1),this.analysisLayer=this.analysisLayers[a]):this.analysisLayer=null,this._updateAnalysisLayerUI(!0))},_handleFieldChange:function(a){"0"===this._analysFieldSelect.get("value")?(this._outputLayerInput.set("value",f.substitute(this.i18n.outputLayerName,{layername:this.analysisLayer.name})),
this._isPoint&&(c.set(this._optionsRow,"display",""),s.remove(this._optionsDiv,"disabled"),s.remove(this._optionsDiv,"optionsClose"),s.add(this._optionsDiv,"optionsOpen"))):(this._outputLayerInput.set("value",f.substitute(this.i18n.outputLayerName,{layername:this._analysFieldSelect.getOptions(a).label})),this._isPoint&&(s.add(this._optionsDiv,"disabled"),c.set(this._optionsRow,"display","none"),this._boundingAreaSelect.set("value","-1"),this.clear(),s.contains(this._optionsDiv,"optionsOpen")&&(s.remove(this._optionsDiv,
"optionsOpen"),s.add(this._optionsDiv,"optionsClose"))));this.set("analysisField",this._analysFieldSelect.get("value"));a="-1"!==this._aggAreaSelect.get("value");var b=null;"0"!==this._analysFieldSelect.get("value")?b=this.analysisLayer:a&&this._isPoint&&this._aggAreaSelect.set("value","-1");this.set("dividedByFields",b)},_handleDividedByFieldChange:function(a){},_handleBoundingSelectChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),
this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._selectedwidget=2,this._browsedlg.show()):"-1"!==a?(a=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1],a.id!==this.drawLayerName&&this.clear()):this.clear();this._boundingDrawBtn.reset()},_handleAggAreaSelectChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),
this._selectedwidget=1,this._browsedlg.show()):(a="-1"!==this._aggAreaSelect.get("value"),this._boundingAreaSelect.set("disabled",a),s.toggle(this._boundingAreaSelect.domNode,"esriAnalysisTextDisabled",a),this._boundingDrawBtn.set("disabled",a),a?(this.clear(),c.set(this._boundingAreaLabelRow,"display","none"),c.set(this._boundingAreaSelectRow,"display","none"),this._boundingAreaSelect.set("value","-1")):(c.set(this._boundingAreaLabelRow,"display",""),c.set(this._boundingAreaSelectRow,"display","")),
s.toggle(this._boundingDrawBtn.domNode,"esriAnalysisTextDisabled",a),this.set("dividedByFields",a?this.aggregationPolygonLayers[this._aggAreaSelect.get("value")-1]:null))},_handleBoundingBtnClick:function(a){a?(this.emit("drawtool-activate",{}),this._featureLayer||this._createBoundingPolyFeatColl(),this._toolbar.activate(O.POLYGON)):(this._toolbar.deactivate(),this.emit("drawtool-deactivate",{}))},_handleBrowseItemsSelect:function(b){var c={};b&&b.selection&&F.isDefined(this._selectedwidget)&&(0===
this._selectedwidget?(c.layers=this.analysisLayers,c.layersSelect=this._analysisSelect):1===this._selectedwidget?(c.layers=this.aggregationPolygonLayers,c.layersSelect=this._aggAreaSelect,c.posIncrement=1):2===this._selectedwidget&&(c.layers=this.boundingPolygonLayers,c.layersSelect=this._boundingAreaSelect),c.item=b.selection,c.browseDialog=this._browsedlg,c.widget=this,P.addAnalysisReadyLayer(c).always(a.hitch(this,this._updateAnalysisLayerUI,!0)))},_loadConnections:function(){this.on("start",a.hitch(this,
"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_createBoundingPolyFeatColl:function(){var b=P.createPolygonFeatureCollection(this.drawLayerName);this._featureLayer=new W(b,{id:this.drawLayerName});this.map.addLayer(this._featureLayer);l.connect(this._featureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addFeatures:function(a){var c=[],k={},g=new L(L.STYLE_NULL,new C(C.STYLE_SOLID,new m([0,0,0]),4));a=new S(a,g);this.map.graphics.add(a);
k.description="blayer desc";k.title="blayer";a.setAttributes(k);c.push(a);this._featureLayer.applyEdits(c,null,null);if(0===this.boundingPolygonLayers.length||this.boundingPolygonLayers[this.boundingPolygonLayers.length-1]!==this._featureLayer)c=this.boundingPolygonLayers.push(this._featureLayer),k=this._boundingAreaSelect.getOptions(),this._boundingAreaSelect.removeOption(k),k=b.map(k,function(a){a.selected=!1;return a}),k.push({value:c,label:this._featureLayer.name,selected:!0}),this._boundingAreaSelect.addOption(k),
this._handleBoundingSelectChange(c)},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setAnalysisLayerAttr:function(a){this.analysisLayer=a},_getAnalysisLayerAttr:function(a){return this.analysisLayer},_getAnalysisFieldAttr:function(){this._analysFieldSelect&&(this.analysisField=this._analysFieldSelect.get("value"));return this.analysisField},_setAnalysisFieldAttr:function(a){this.analysisField=a},_setDividedByFieldAttr:function(a){this.dividedByField=
a},_getDividedByFieldAttr:function(){this._divideFieldSelect&&(this.dividedByField=this._divideFieldSelect.get("value"));return this.dividedByField},_setAnalysisFieldsAttr:function(a){var c=F.isDefined(a)&&F.isDefined(a.fields)?a.fields:[],k,g;this._analysFieldSelect&&(this._analysFieldSelect.removeOption(this._analysFieldSelect.getOptions()),this._isPoint?this._analysFieldSelect.addOption({value:"0",label:this.i18n.pointCounts}):!this._isPoint&&this.get("allowChooseLabel")&&this._analysFieldSelect.addOption({value:"0",
label:this.i18n.chooseLabel}),b.forEach(c,function(c,e){-1===b.indexOf(["GiZScore","GiPValue","Gi_Bin",a.objectIdField],c.name)&&-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],c.type)&&(k={value:c.name,label:F.isDefined(c.alias)&&""!==c.alias?c.alias:c.name},this.analysisField&&k.label===this.analysisField&&(k.selected="selected",g=c.name),this._analysFieldSelect.addOption(k))},this),g?this._analysFieldSelect.set("value",g):this.set("analysisField",
this._analysFieldSelect.get("value")))},_setAnalysisLayersAttr:function(a){this.analysisLayers=a},_setDividedByFieldsAttr:function(a){var c=F.isDefined(a)&&F.isDefined(a.fields)?a.fields:[],k,g;this._divideFieldSelect&&(this._divideFieldSelect.removeOption(this._divideFieldSelect.getOptions()),this._divideFieldSelect.addOption({value:"0",label:this.i18n.noneLabel}),(!this._isPoint||this._isPoint&&(!F.isDefined(this.analysisField)||"0"===this.analysisField))&&this._divideFieldSelect.addOption({value:"esriPopulation",
label:this.i18n.enrichLabel,disabled:!this.get("enableEnrichmentFields")}),b.forEach(c,function(c,e){-1===b.indexOf(["GiZScore","GiPValue","Gi_Bin",a.objectIdField,F.isDefined(this.analysisField)&&this.analysisField],c.name)&&-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],c.type)&&(k={value:c.name,label:F.isDefined(c.alias)&&""!==c.alias?c.alias:c.name},this.dividedByField&&k.label===this.dividedByField&&(k.selected="selected",g=c.name),
this._divideFieldSelect.addOption(k))},this),g&&this._divideFieldSelect.set("value",g))},_setEnableEnrichmentFieldsAttr:function(a){this.enableEnrichmentFields=a},_getEnableEnrichmentFieldsAttr:function(){return this.enableEnrichmentFields},_setMapAttr:function(b){this.map=b;this._toolbar=new O(this.map);l.connect(this._toolbar,"onDrawEnd",a.hitch(this,this._addFeatures))},_getMapAttr:function(){return this.map},_setDrawLayerNameAttr:function(a){this.drawLayerName=a},_getDrawLayerNameAttr:function(){return this._featureLayer.name},
_getDrawLayerAttr:function(){return this._featureLayer},_getDrawToolbarAttr:function(){return this._toolbar},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},validateServiceName:function(a){return P.validateServiceName(a,{textInput:this._outputLayerInput})},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,
b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.FindHotSpots",h,J);return h})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(h,d,a,b,l,m,p,r){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},f={color:[0,0,0,1],style:e.STYLE_SOLID,width:1};h=h(r,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",
longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(b,n,m){b?d.isString(b)?(this.style=b,n&&(this.color=n),m&&(this.width=m)):this.style=p.valueOf(this._styles,b.style)||e.STYLE_SOLID:(d.mixin(this,f),this.color=new a(this.color),this.width=l.pt2px(this.width))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.style===e.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},
getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return p.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}});d.mixin(h,e);h.defaultProps=f;b("extend-esri")&&(d.setObject("symbol.SimpleLineSymbol",h,m),m.symbol.defaultSimpleLineSymbol=f);return h})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],
function(h,d,a,b){h=h(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(a){a&&d.isObject(a)&&(this.objectId=a.objectId,this.success=a.success,a.success||(a=a.error,this.error=Error(),this.error.code=a.code,this.error.message=a.description))}});a("extend-esri")&&d.setObject("layers.FeatureEditResult",h,b);return h})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(h,d,a,b,l,m,p,r){new Date("X");return b("dijit.form._DateTimeTextBox",[m,p],{templateString:r,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:d.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,b){var c=this._isInvalidDate(a),d=this._isInvalidDate(b);if(c||d)return c&&d?0:!c?1:-1;var c=this.format(a,this._unboundedConstraints),d=this.format(b,this._unboundedConstraints),
l=this.parse(c,this._unboundedConstraints),m=this.parse(d,this._unboundedConstraints);return c==d?0:h.compare(l,m,this._selector)},autoWidth:!0,format:function(a,b){return!a?"":this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(b,f){b.toGregorian&&(b=b.toGregorian());return a.toISOString(b,f)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){a=
a||{};this.dateModule=a.datePackage?l.getObject(a.datePackage,!1):h;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=a.datePackage?l.getObject(a.datePackage+".locale",!1):d;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var f=a.fromISOString;"string"==typeof b.min&&(b.min=f(b.min),this.dateClassObj instanceof Date||(b.min=new this.dateClassObj(b.min)));"string"==typeof b.max&&(b.max=f(b.max),this.dateClassObj instanceof Date||(b.max=new this.dateClassObj(b.max)));this.inherited(arguments);this._unboundedConstraints=l.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||
isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(b,f,c){void 0!==b&&("string"==typeof b&&(b=a.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments,[b,f,c]);this.value instanceof Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(a,b){if("value"==a){b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b));
var c=this._get("value");if(c instanceof this.dateClassObj&&0==this.compare(b,c))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=l.isString(this.popupClass)?l.getObject(this.popupClass,!1):this.popupClass,c=this,d=this.get("value");this.dropDown=new b({onChange:function(a){c.set("value",a,!0)},id:this.id+"_popup",dir:c.dir,
lang:c.lang,value:d,textDir:c.textDir,currentFocus:!this._isInvalidDate(d)?d:this.dropDownDefaultValue,constraints:c.constraints,filterString:c.filterString,datePackage:c.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),
function(h,d,a,b,l,m,p){h=h(m,{declaredClass:"esri.layers.QueryDataSource",constructor:function(a){a&&(a.oidFields&&d.isString(a.oidFields)&&(this.oidFields=a.oidFields.split(",")),a.spatialReference&&(this.spatialReference=new p(a.spatialReference)))},toJson:function(){var a={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var b;b="point"===
this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;a.geometryType=b}return l.fixJson(a)}});a("extend-esri")&&d.setObject("layers.QueryDataSource",h,b);return h})},"esri/dijit/geoenrichment/DataBrowser/ShoppingCart":function(){define("dojo/dom-construct dojo/dom-attr dojo/_base/lang dojox/mvc/Templated dojo/on ../../../declare dijit/_WidgetBase dojo/text!./templates/ShoppingCart.html dgrid/List dojo/i18n!../../../nls/jsapi dojo/_base/window".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c){f=f.geoenrichment.dijit.ShoppingCart;return m("esri.dijit.geoenrichment.ShoppingCart",[p,b],{nls:f,templateString:r,list:null,content:null,constructor:function(){this.content={}},buildRendering:function(){this.inherited(arguments);l(this.divList,"click, touchend",a.hitch(this,this._stopEvent))},displayCounter:function(){this.divCounter.innerHTML=this.contentLength().toString()},contentLength:function(){var a=0,b;for(b in this.content)this.content.hasOwnProperty(b)&&
a++;return a},startup:function(){this.inherited(arguments);this.list=new e({renderRow:a.hitch(this,this.renderVariableRow)},this.divList);this.list.startup();this.displayCounter();this.divOuter.style.display="none"},renderVariableRow:function(b){var c=h.create("div",{"class":"ShoppingCartRowOuter"}),e=h.create("div",{"class":"ShoppingCartRow"},c);h.create("div",{"class":"TrimWithEllipses ShoppingCartRowLabel",innerHTML:b.alias},e);e=h.create("div",{"class":"ShoppingCartRowCloser"},e);d.set(e,"idDesc",
b.idDesc);l(e,"click",a.hitch(this,this.onClick));return c},onClick:function(a){delete this.content[a.currentTarget.attributes.idDesc.value];this.onRemoveElement(a.currentTarget.attributes.idDesc.value);this.refresh()},_showList:function(a){"none"===this.divOuter.style.display&&(this._stopEvent(a),this._displayList())},_toggleList:function(a){this._stopEvent(a);"none"===this.divOuter.style.display?this._displayList():this._hideList()},_displayList:function(){this.refresh();this.divOuter.style.display=
"";event.stopPropagation&&event.stopPropagation();l.once(this.divOuter,"mouseleave",a.hitch(this,this._hideList));l.once(c.doc,"click",a.hitch(this,this._hideList))},_hideList:function(){this.divOuter&&(this.divOuter.style.display="none")},_stopEvent:function(a){a.stopPropagation&&a.stopPropagation()},addVariable:function(a){this.content[a.idDesc]||(this.content[a.idDesc]=a,this.displayCounter(),this.onSelect());return!0},setVariables:function(a){this.content={};for(var b=0;b<a.length;b++)this.content[a[b].idDesc]=
a[b];this.displayCounter()},addVariables:function(a){for(var b=0;b<a.length;b++)this.content[a[b].idDesc]=a[b];this.displayCounter();this.onSelect()},removeVariable:function(a){delete this.content[a];this.displayCounter()},refresh:function(){var a=[],b;for(b in this.content)this.content.hasOwnProperty(b)&&a.push(this.content[b]);this.list.refresh();this.list.renderArray(a);this.displayCounter();this.divEmpty.style.visibility=0===a.length?"visible":"hidden"},collectSelection:function(){var a=[],b;
for(b in this.content)this.content.hasOwnProperty(b)&&a.push(this.content[b].id2);return a},onRemoveElement:function(a){},onSelect:function(){}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(h,d,a,b,l,m,p,r,e,f,c,n,u,t){m("dijit-legacy-requires")&&e(0,function(){require(["dijit/layout/StackController"])});
a=a("dijit.layout.StackContainer",t,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(r(this.domNode,"keydown",p.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();h.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=n.byId(d(this.id+"_selectedChild")):h.some(a,function(a){a.selected&&
(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);f.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=l.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",
a.domNode,"replace"),e=a["aria-label"]||a.title||a.label;e&&c.setAttribute("aria-label",e);l.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(f.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=h.indexOf(this.getChildren(),a);this.inherited(arguments);l.destroy(a._wrapper);
delete a._wrapper;this._started&&f.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var c=this.getChildren();c.length&&this.selectChild(c[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var g;a=n.byId(a);this.selectedChildWidget!=a&&(g=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",a),f.publish(this.id+"-selectChild",a),this.persist&&d(this.id+
"_selectedChild",this.selectedChildWidget.id));return c(g||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=h.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){f.publish(this.id+
"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var c=this.getChildren();a.isFirstChild=a==c[0];a.isLastChild=a==c[c.length-1];a._set("selected",!0);a._wrapper&&b.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&b.replace(a._wrapper,"dijitHidden","dijitVisible");
a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;h.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});a.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};p.extend(u,a.ChildWidgetProperties);return a})},"esri/dijit/geoenrichment/DataBrowser":function(){define("../../declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/when dojox/mvc/sync ./_Wizard ./DataBrowser/DataCategoriesPage ./DataBrowser/DataCollectionsPage ./DataBrowser/DataVariablesPage ./DataBrowser/ShoppingCart ./DataBrowser/VariableInfo ./DataBrowser/Breadcrumb ./DataBrowser/autoTooltip ./AnimationHelper dojo/i18n!../../nls/jsapi".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k){k=k.geoenrichment.dijit;return h("esri.dijit.geoenrichment.DataBrowser",[p],{title:k.DataBrowser.title,okButton:k.WizardButtons.apply,backButton:k.WizardButtons.back,cancelButton:k.WizardButtons.cancel,countryID:null,countryBox:!0,selection:null,shoppingCart:null,variableInfo:null,breadcrumb:null,dataCollections:null,previousPage:null,_titleNode:null,_flyAnim:null,_varTitle:null,constructor:function(){this.shoppingCart=new c;this.variableInfo=new n;this.breadcrumb=
new u({onCategoriesClick:d.hitch(this,this.loadPage,"cat"),onDCsClick:d.hitch(this,this.loadPage,"col")})},buildRendering:function(){this.inherited(arguments);this._flyAnim=new s(this.domNode);this.breadcrumb.flyAnim=this._flyAnim;a.add(this.domNode,"DataBrowser");this.shoppingCart.placeAt(this.domNode);this.breadcrumb.placeAt(this.domNode);var c=b.create("div",{style:"position: absolute;"},this.domNode);this._titleNode=b.create("div",{"class":"DataBrowser_Title"},c);t(this.domNode)},startup:function(){this.inherited(arguments);
this.shoppingCart.multiSelect=!0;this.shoppingCart.onSelect=d.hitch(this,this._onSelect);this.shoppingCart.startup();this.dataCollections||(this.dataCollections={});this.pages.cat=new r({countryBox:this.countryBox,shoppingCart:this.shoppingCart,selection:this.selection,dataCollections:this.dataCollections,flyAnim:this._flyAnim,onSelect:d.hitch(this,function(a){this.previousPage="cat";this._loadCollectionsPage(a)}),onSearch:d.hitch(this,function(a){this._varTitle=a;this.previousPage="cat";this._loadVarsPage()})});
m(this,"countryID",this.pages.cat,"countryID");var a=[];this.backButton&&a.push({label:this.backButton,onClick:d.hitch(this,this._onBack)});this.okButton&&a.push({label:this.okButton,onClick:d.hitch(this,this._onOK)});this.cancelButton&&a.push({label:this.cancelButton,onClick:d.hitch(this,this._onCancel)});this.addButtons("cat",a);this.loadPage("cat")},loadPage:function(a){switch(a){case "cat":this.pages.col&&(this.pages.col.set("selectedCategory",null),this.pages.col.set("selectedCollections",null));
this.pages["var"]&&(this.pages["var"].set("selectedCategory",null),this.pages["var"].set("selectedCollections",null));break;case "col":this.pages.col&&this.pages.col.set("selectedCollections",null),this.pages["var"]&&this.pages["var"].set("selectedCollections",null)}this.inherited(arguments);this._currentPage.syncWithShoppingCart&&this._currentPage.syncWithShoppingCart();this._updateBreadcrumb(a)},_updateBreadcrumb:function(a){switch(a){case "cat":this.breadcrumb.domNode.style.display="none";break;
case "col":this.breadcrumb.domNode.style.display="";this.breadcrumb.selectCategory(this.pages.col.get("selectedCategory"));break;case "var":this.breadcrumb.domNode.style.display="";a=this.pages["var"].get("selectedCollections");var b=!this.pages.col?null:this.pages.col.get("selectedCategory");1===a.length?this.breadcrumb.selectDataCollection(a[0].metadata.title,b):this.breadcrumb.selectDataCollection("All Variables",b)}},_loadCollectionsPage:function(a){if(!this.pages.col){this.pages.col=new e({onSelect:d.hitch(this,
function(a,b){this._varTitle=b;this.previousPage="col";this._loadVarsPage(a)}),shoppingCart:this.shoppingCart,variableInfo:this.variableInfo,multiSelect:!0,flyAnim:this._flyAnim});var b=[{label:k.WizardButtons.back,onClick:d.hitch(this,this.loadPage,"cat")}];this.okButton&&b.push({label:this.okButton,onClick:d.hitch(this,this._onOK)});this.cancelButton&&b.push({label:this.cancelButton,onClick:d.hitch(this,this._onCancel)});this.addButtons("col",b)}a&&(this.pages.col.set("selectedCategory",a),this.loadPage("col"),
this.pages.col.syncWithShoppingCart(),this.shoppingCart.onRemoveElement=d.hitch(this.pages.col,this.pages.col.onRemoveElementFromShoppingCart))},_loadVarsPage:function(a){if(!this.pages["var"]){this.pages["var"]=new f({shoppingCart:this.shoppingCart,variableInfo:this.variableInfo,multiSelect:!0,flyAnim:this._flyAnim});var b=[{label:k.WizardButtons.back,onClick:d.hitch(this,function(){this.loadPage(this.previousPage)})}];this.okButton&&b.push({label:this.okButton,onClick:d.hitch(this,this._onOK)});
this.cancelButton&&b.push({label:this.cancelButton,onClick:d.hitch(this,this._onCancel)});this.addButtons("var",b)}this.pages["var"].varTitle=this._varTitle;this.pages["var"].set("selectedCategory",a);if(a=this.pages[this.previousPage].get("selectedCollections"))this.pages["var"].set("selectedCollections",a),this.loadPage("var"),this.pages["var"].syncWithShoppingCart(),this.shoppingCart.onRemoveElement=d.hitch(this.pages["var"],this.pages["var"].onRemoveElementFromShoppingCart)},_setTitleAttr:function(a){this._set("title",
a);this._titleNode.innerHTML=a},_onSelect:function(){this.selection=this.shoppingCart.collectSelection();this.emit("select");this.onSelect()},onSelect:function(){},_onBack:function(){this.emit("back");this.onBack()},onBack:function(){},_onOK:function(){this.selection=this.shoppingCart.collectSelection();this.emit("ok");this.onOK()},onOK:function(){},_onCancel:function(){this.emit("cancel");this.onCancel()},onCancel:function(){}})})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare",
"dojo/dom-geometry","dijit/registry"],function(h,d,a){return h("dgrid.extensions.DijitRegistry",null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){a.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var b=a.getEnclosingWidget(this.domNode.parentNode);b&&b.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);
a.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(a){a&&d.setMarginBox(this.domNode,a);this.inherited(arguments)},_set:function(a,d){this[a]=d},watch:function(){},getParent:function(){return a.getEnclosingWidget(this.domNode.parentNode)}})})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),
function(h,d,a,b,l,m,p,r){var e=h(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=e.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",
kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(f){var c={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},d=f&&f.geometry||this.geometry,l=this.objectIds,m=this.outFields,h=this.outSpatialReference,k=this.groupByFieldsForStatistics,
g=this.orderByFields,q=this.outStatistics;f=this.distance;d&&(c.geometry=d,c.geometryType=p.getJsonType(d),c.inSR=d.spatialReference.wkid||b.toJson(d.spatialReference.toJson()));l&&(c.objectIds=l.join(","));m&&(c.outFields=m.join(","));this.returnDistinctValues&&(c.returnDistinctValues=!0);k&&(c.groupByFieldsForStatistics=k.join(","));g&&(c.orderByFields=g.join(","));if(q){var w=[];a.forEach(q,function(a){w.push(a.toJson())});c.outStatistics=b.toJson(w)}h?c.outSR=h.wkid||b.toJson(h.toJson()):d&&(c.outSR=
d.spatialReference.wkid||b.toJson(d.spatialReference.toJson()));d=this.timeExtent;c.time=d?d.toJson().join(","):null;if((d=this.relationParam)&&this.spatialRelationship===e.SPATIAL_REL_RELATION)c.relationParam=d;f&&(c.distance=this.distance,this.hasOwnProperty("units")?c.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),c.units=this._units.meters));this.hasOwnProperty("start")&&(c.resultOffset=this.start,c.resultRecordCount=
10,""===c.where&&(c.where="1\x3d1"));this.hasOwnProperty("num")&&(c.resultRecordCount=this.num);c.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null;c.multipatchOption=this.multipatchOption;this.quantizationParameters&&(c.quantizationParameters=b.toJson(this.quantizationParameters));c._ts=this._ts;return c}});d.mixin(e,r);l("extend-esri")&&d.setObject("tasks.Query",e,m);return e})},"esri/layers/GeoRSSLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ./ServiceGeneratedFeatureCollection".split(" "),
function(h,d,a,b,l,m,p,r){h=h([r],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:location.protocol+"//utility.arcgis.com/sharing/rss",constructor:function(a,b){m.defaults.geoRSSService&&(this.serviceUrl=m.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=p({url:this.serviceUrl,content:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this._outSR?a.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(a){this.inherited(arguments);
this.loaded||(this.loaded=!0,this.onLoad(this))}});b("extend-esri")&&d.setObject("layers.GeoRSSLayer",h,l);return h})},"esri/dijit/analysis/GroupToggleButton":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/dom-class dijit/form/ToggleButton ../../kernel".split(" "),function(h,d,a,b,l,m,p,r){h=d([p],{groupName:"defaultGroup",declaredClass:"esri.dijit.analysis.GroupToggleButton",postMixInProperties:function(){this.inherited(arguments);this.unselectChannel=
"/ButtonGroup/"+this.groupName;b.subscribe(this.unselectChannel,this,"doUnselect")},postCreate:function(){this.inherited(arguments);m.add(this.domNode,"esriGroupButton")},doUnselect:function(a){a!==this&&this.checked&&this.set("checked",!1)},_setCheckedAttr:function(a,f){this.inherited(arguments);a&&b.publish(this.unselectChannel,[this]);m.toggle(this.focusNode,"esriGroupChecked",a)}});l("extend-esri")&&a.setObject("dijit.analysis.GroupToggleButton",h,r);return h})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u){h=h(f,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;window.CanvasRenderingContext2D||console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(a){var b,k;this._currentGraphic=a;if(!this._supportsCanvas)return null;this._map||(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",
d.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]])return b=this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],k=this._getShapeProperties(a),b.setOffset(k.dx,k.dy),b;b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);k=this._getShapeProperties(a);
b=new c(this._generateImageSrc(k.width,k.height,b,k.minXY,k.maxXY),this.outline,k.width,k.height);b.setOffset(k.dx,k.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=b},_generateFieldsCount:function(a,b,c){var g,e;for(e=a.length-1;0<=e;e--)g=b[a[e].name]/c,a[e].numPoints=Math.round(g);return a},_getShapeProperties:function(a){var b,c,g,e;b=a.geometry.getExtent();b.contains(this._map.extent)&&
(b=this._map.extent);g=Math.ceil(b.getWidth()/this._currentResolution);e=Math.ceil(b.getHeight()/this._currentResolution);c=this._map.toScreen(new u(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new u(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();return{minXY:c,maxXY:b,dx:(c.x-a.e)%g,dy:(b.y-a.f)%e,width:g,height:e}},_generateImageSrc:function(a,b,c,g,e,f){var d=this.dotSize,n,l,m;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,
b);n=this._canvas.getContext("2d");if(f=f||this.backgroundColor)n.fillStyle=f.toCss(!0),n.fillRect(0,0,a,b),n.fill();for(f=c.length-1;0<=f;f--){n.fillStyle=c[f].color.toCss(!0);for(l=c[f].numPoints-1;0<=l;l--)m=this._getRandomPoint(a,b,g,e),"square"===this.dotShape?n.fillRect(m.x,m.y,d,d):"circle"===this.dotShape&&(n.beginPath(),n.arc(m.x,m.y,d/2,0,2*Math.PI,!0)),n.fill()}return this._canvas.toDataURL()},_initCanvas:function(a,c){var k=b.create("canvas",{id:"canvas",width:a+"px",height:c+"px",style:"position: absolute; left: -10000px; top: 0px;"},
null);document.body.appendChild(k);return k},_getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},_getRandomPoint:function(a,b,c,g){var e={},f=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&a*b>this._exactCountMinArea){do e.x=this._getRandomInt(c.x,g.x),e.y=this._getRandomInt(g.y,c.y),a=new n(e.x,e.y),a=this._checkPointShapeBounds(a,this.dotSize+f,this._currentGraphic.geometry),!0===a&&(e.x-=c.x,e.y-=g.y);while(!1===a)}else e.x=this._getRandomInt(0,
a),e.y=this._getRandomInt(0,b);return e},_checkPointShapeBounds:function(a,b,c){var g=null,g=!1,e=!0,f=0;do{switch(f){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b}g=this._map.toMap(a);g=c.contains(g);!1===g&&(e=!1);f+=1}while(3>=f&&!0===e);return g},setDotSize:function(a){0<a&&(this.dotSize=a)},setDotValue:function(a){0<a&&(this.dotValue=a)},setOutline:function(a){this.outline=a},setBackgroundColor:function(a){this.backgroundColor=a},toJson:function(){var b=d.mixin(this.inherited(arguments),
{type:"dotDensity",backgroundColor:e.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?m.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(a){return r.fixJson({color:e.toJsonColor(a.color),name:a.name})}),legendOptions:this.legendOptions&&r.fixJson({backgroundColor:e.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),
outline:this.outline&&this.outline.toJson()});return r.fixJson(b)}});l("extend-esri")&&d.setObject("renderer.DotDensityRenderer",h,p);return h})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D){var y=h(s,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(a,b){this.markerSymbol=new k(k.STYLE_SOLID,10,new g(g.STYLE_SOLID,new l([255,0,0]),2),new l([0,0,0,0.25]));this.lineSymbol=new g(g.STYLE_SOLID,new l([255,0,0]),2);this.fillSymbol=new q(q.STYLE_SOLID,new g(g.STYLE_SOLID,new l([255,0,0]),2),new l([0,0,0,0.25]));this._points=[];this._mouse=!p("esri-touch")&&!p("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=d.mixin(d.mixin({},this._defaultOptions),b||{});if(r("ios")||r("android"))this._options.showTooltips=!1;this._onKeyDownHandler=d.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=d.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=d.hitch(this,this._onMouseUpHandler);this._onClickHandler=d.hitch(this,this._onClickHandler);this._onMouseMoveHandler=d.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=d.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=d.hitch(this,this._onDblClickHandler);this._updateTooltip=d.hitch(this,this._updateTooltip);this._hideTooltip=d.hitch(this,this._hideTooltip);this._redrawGraphic=d.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(a){this.respectDrawingVertexOrder=a},setMarkerSymbol:function(a){this.markerSymbol=a},setLineSymbol:function(a){this.lineSymbol=a},
setFillSymbol:function(a){this.fillSymbol=a},activate:function(a,c){this._geometryType&&this.deactivate();var k=this.map,g=b.connect,e=y;this._options=d.mixin(d.mixin({},this._options),c||{});k.navigationManager.setImmediateClick(!1);switch(a){case e.ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:case e.UP_ARROW:case e.DOWN_ARROW:case e.TRIANGLE:case e.CIRCLE:case e.ELLIPSE:case e.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=g(k,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=g(k,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=g(k,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=g(k,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler2_connect=g(k,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=g(k,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=g(k,"onMouseDragEnd",this._onMouseUpHandler));p("esri-touch")&&!p("esri-pointer")&&
(this._onMouseDownHandler2_connect=g(k,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=g(k,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=g(k,"onSwipeEnd",this._onMouseUpHandler));break;case e.POINT:this._onClickHandler_connect=g(k,"onClick",this._onClickHandler);break;case e.LINE:case e.EXTENT:case e.FREEHAND_POLYLINE:case e.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=g(k,"onMouseDown",this._onMouseDownHandler),
this._onMouseDragHandler_connect=g(k,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=g(k,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=g(k,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=g(k,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=g(k,"onMouseDragEnd",this._onMouseUpHandler));p("esri-touch")&&!p("esri-pointer")&&(this._onMouseDownHandler2_connect=g(k,"onSwipeStart",this._onMouseDownHandler),
this._onMouseDragHandler2_connect=g(k,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=g(k,"onSwipeEnd",this._onMouseUpHandler));break;case e.POLYLINE:case e.POLYGON:case e.MULTI_POINT:k.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=g(k,"onClick",this._onClickHandler);this._onDblClickHandler_connect=g(k,"onDblClick",this._onDblClickHandler);this._dblClickZoom=k.isDoubleClickZoom;k.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+
a);return}this._onKeyDown_connect=g(k,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=g(k,"onExtentChange",this._redrawGraphic);this._geometryType=a;this._toggleTooltip(!0);k.snappingManager&&("freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType)&&(k.snappingManager._startSelectionLayerQuery(),k.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var a=this.map;this._clear();var c=b.disconnect;c(this._onMouseMoveHandler_connect);
c(this._onMouseDownHandler_connect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);c(this._onMouseDownHandler2_connect);c(this._onMouseDragHandler2_connect);c(this._onMouseUpHandler2_connect);c(this._onClickHandler_connect);c(this._onDblClickHandler_connect);c(this._onKeyDown_connect);c(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=
this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;a.snappingManager&&(a.snappingManager._stopSelectionLayerQuery(),a.snappingManager._killOffSnapping());switch(this._geometryType){case y.CIRCLE:case y.ELLIPSE:case y.TRIANGLE:case y.ARROW:case y.LEFT_ARROW:case y.RIGHT_ARROW:case y.UP_ARROW:case y.DOWN_ARROW:case y.RECTANGLE:case y.LINE:case y.EXTENT:case y.FREEHAND_POLYLINE:case y.FREEHAND_POLYGON:this._activateMapTools(!0,
!1,!1,!0);break;case y.POLYLINE:case y.POLYGON:case y.MULTI_POINT:this._dblClickZoom&&a.enableDoubleClickZoom()}c=this._geometryType;this._geometryType=null;a.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(c)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0);this._graphic=this._tGraphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},
finishDrawing:function(){var c,k=this._points,g=this.map.spatialReference,e=y,k=k.slice(0,k.length);switch(this._geometryType){case e.POLYLINE:if(!this._graphic||2>k.length)return;c=new x(g);c.addPath([].concat(k));break;case e.POLYGON:if(!this._graphic||3>k.length)return;c=new A(g);k=[].concat(k,[k[0].offset(0,0)]);!A.prototype.isClockwise(k)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),k.reverse());
c.addRing(k);break;case e.MULTI_POINT:c=new E(g),a.forEach(k,function(a){c.addPoint(a)})}b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(c)},_drawEnd:function(a){if(a){var b=this.map.spatialReference,c;this.onDrawEnd(a);b&&(b.isWebMercator()?c=z.webMercatorToGeographic(a,!0):4326===b.wkid&&(c=v.fromJson(a.toJson())));this.onDrawComplete({geometry:a,geographicGeometry:c})}},_normalizeRect:function(a,b,c){var k=a.x;a=a.y;var g=b.x;b=b.y;var e=Math.abs(k-
g),f=Math.abs(a-b);return{x:Math.min(k,g),y:Math.max(a,b),width:e,height:f,spatialReference:c}},_onMouseDownHandler:function(a){this._dragged=!1;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=b||a.mapPoint,k=y;b=this.map;var g=b.spatialReference;this._points.push(c.offset(0,0));switch(this._geometryType){case k.LINE:this._graphic=b.graphics.add(new w(new x({paths:[[[c.x,c.y],[c.x,c.y]]],spatialReference:g}),this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);
break;case k.FREEHAND_POLYLINE:this._oldPoint=a.screenPoint;c=new x(g);c.addPath(this._points);this._graphic=b.graphics.add(new w(c,this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);break;case k.CIRCLE:case k.ELLIPSE:case k.TRIANGLE:case k.ARROW:case k.LEFT_ARROW:case k.RIGHT_ARROW:case k.UP_ARROW:case k.DOWN_ARROW:case k.RECTANGLE:case k.FREEHAND_POLYGON:this._oldPoint=a.screenPoint,c=new A(g),c.addRing(this._points),this._graphic=b.graphics.add(new w(c,this.fillSymbol),
!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic)}p("esri-touch")&&a.preventDefault()},_onMouseMoveHandler:function(a){var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[this._points.length-1];a=b||a.mapPoint;b=this._tGraphic;var k=b.geometry;switch(this._geometryType){case y.POLYLINE:case y.POLYGON:k.setPoint(0,0,{x:c.x,y:c.y}),k.setPoint(0,1,{x:a.x,y:a.y}),b.setGeometry(k)}},_onMouseDragHandler:function(a){if(this._graphic||this._points.length)if(p("esri-touch")&&
!this._points.length)a.preventDefault();else{this._dragged=!0;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[0],k=b||a.mapPoint,g=this.map,e=g.spatialReference;b=this._graphic;var f=y,n=g.toScreen(c),l=g.toScreen(k),m=[],m=l.x-n.x,l=l.y-n.y,q=Math.sqrt(m*m+l*l);switch(this._geometryType){case f.CIRCLE:this._hideTooltip();b.geometry=A.createCircle({center:n,r:q,numberOfPoints:60,map:g});b.setGeometry(b.geometry);break;case f.ELLIPSE:this._hideTooltip();
b.geometry=A.createEllipse({center:n,longAxis:m,shortAxis:l,numberOfPoints:60,map:g});b.setGeometry(b.geometry);break;case f.TRIANGLE:this._hideTooltip();m=[[0,-q],[0.8660254037844386*q,0.5*q],[-0.8660254037844386*q,0.5*q],[0,-q]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.ARROW:this._hideTooltip();c=l/q;g=m/q;k=0.25*g*q;e=0.25*q/(l/m);q*=0.25*c;m=[[m,l],[m-k*(1+24/e),l+24*g-q],[m-k*(1+12/e),l+12*g-q],[-12*c,12*g],[12*c,-12*g],[m-k*(1-12/e),l-12*g-q],[m-k*(1-24/e),
l-24*g-q],[m,l]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.LEFT_ARROW:this._hideTooltip();m=0>=m?[[m,0],[0.75*m,l],[0.75*m,0.5*l],[0,0.5*l],[0,-0.5*l],[0.75*m,-0.5*l],[0.75*m,-l],[m,0]]:[[0,0],[0.25*m,l],[0.25*m,0.5*l],[m,0.5*l],[m,-0.5*l],[0.25*m,-0.5*l],[0.25*m,-l],[0,0]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.RIGHT_ARROW:this._hideTooltip();m=0<=m?[[m,0],[0.75*m,l],[0.75*m,0.5*l],[0,0.5*l],[0,-0.5*l],[0.75*m,-0.5*l],[0.75*
m,-l],[m,0]]:[[0,0],[0.25*m,l],[0.25*m,0.5*l],[m,0.5*l],[m,-0.5*l],[0.25*m,-0.5*l],[0.25*m,-l],[0,0]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.UP_ARROW:this._hideTooltip();m=0>=l?[[0,l],[-m,0.75*l],[-0.5*m,0.75*l],[-0.5*m,0],[0.5*m,0],[0.5*m,0.75*l],[m,0.75*l],[0,l]]:[[0,0],[-m,0.25*l],[-0.5*m,0.25*l],[-0.5*m,l],[0.5*m,l],[0.5*m,0.25*l],[m,0.25*l],[0,0]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.DOWN_ARROW:this._hideTooltip();
m=0<=l?[[0,l],[-m,0.75*l],[-0.5*m,0.75*l],[-0.5*m,0],[0.5*m,0],[0.5*m,0.75*l],[m,0.75*l],[0,l]]:[[0,0],[-m,0.25*l],[-0.5*m,0.25*l],[-0.5*m,l],[0.5*m,l],[0.5*m,0.25*l],[m,0.25*l],[0,0]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.RECTANGLE:this._hideTooltip();m=[[0,0],[m,0],[m,l],[0,l],[0,0]];b.geometry=this._toPolygon(m,n.x,n.y);b.setGeometry(b.geometry);break;case f.LINE:b.setGeometry(d.mixin(b.geometry,{paths:[[[c.x,c.y],[k.x,k.y]]]}));break;case f.EXTENT:b&&g.graphics.remove(b,
!0);b=new B(this._normalizeRect(c,k,e));b._originOnly=!0;this._graphic=g.graphics.add(new w(b,this.fillSymbol),!0);g.snappingManager&&g.snappingManager._setGraphic(this._graphic);break;case f.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){p("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([k.offset(0,0)],0);b.setGeometry(b.geometry);break;case f.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){p("esri-touch")&&
a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([k.offset(0,0)],0);b.setGeometry(b.geometry)}p("esri-touch")&&a.preventDefault()}},_canDrawFreehandPoint:function(a){if(!this._oldPoint)return!1;var b=this._oldPoint.x-a.screenPoint.x,c=this._oldPoint.y-a.screenPoint.y,k=this._options.tolerance;if((0>b?-1*b:b)<k&&(0>c?-1*c:c)<k)return!1;b=new Date;if(b-this._startTime<this._options.drawTime)return!1;this._startTime=b;this._oldPoint=a.screenPoint;return!0},
_onMouseUpHandler:function(a){if(!this._dragged||!this._graphic)this._clear();else{0===this._points.length&&this._points.push(a.mapPoint.offset(0,0));var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[0];b=b||a.mapPoint;var k=this.map.spatialReference,g=y,e;switch(this._geometryType){case g.CIRCLE:case g.ELLIPSE:case g.TRIANGLE:case g.ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.UP_ARROW:case g.DOWN_ARROW:case g.RECTANGLE:e=this._graphic.geometry;break;
case g.LINE:e=new x({paths:[[[c.x,c.y],[b.x,b.y]]],spatialReference:k});break;case g.EXTENT:e=(new B(this._normalizeRect(c,b,k))).getExtent();break;case g.FREEHAND_POLYLINE:e=new x(k);e.addPath([].concat(this._points,[b.offset(0,0)]));break;case g.FREEHAND_POLYGON:e=new A(k),c=[].concat(this._points,[b.offset(0,0),this._points[0].offset(0,0)]),!A.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),
c.reverse()),e.addRing(c)}p("esri-touch")&&a.preventDefault();this._clear();this._drawEnd(e)}},_onClickHandler:function(a){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);a=c||a.mapPoint;c=this.map;var k=c.toScreen(a),g=y;this._points.push(a.offset(0,0));switch(this._geometryType){case g.POINT:this._drawEnd(a.offset(0,0));this._setTooltipMessage(0);break;case g.POLYLINE:1===this._points.length?(k=new x(c.spatialReference),k.addPath(this._points),this._graphic=c.graphics.add(new w(k,
this.lineSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=b.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new w(new x({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),c=this._tGraphic,k=c.geometry,k.setPoint(0,0,a.offset(0,0)),k.setPoint(0,
1,a.offset(0,0)),c.setGeometry(k));break;case g.POLYGON:1===this._points.length?(k=new A(c.spatialReference),k.addRing(this._points),this._graphic=c.graphics.add(new w(k,this.fillSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=b.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new w(new x({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,
0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),c=this._tGraphic,k=c.geometry,k.setPoint(0,0,a.offset(0,0)),k.setPoint(0,1,a.offset(0,0)),c.setGeometry(k));break;case g.MULTI_POINT:a=this._points;1===a.length?(k=new E(c.spatialReference),k.addPoint(a[a.length-1]),this._graphic=c.graphics.add(new w(k,this.markerSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(a[a.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));
break;case g.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],k.x,k.y);break;case g.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],k.x,k.y);break;case g.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],k.x,k.y);break;case g.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],k.x,k.y);break;case g.DOWN_ARROW:this._addShape([[0,
0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],k.x,k.y);break;case g.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],k.x,k.y);break;case g.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],k.x-48,k.y+48);break;case g.CIRCLE:this._clear();this._drawEnd(A.createCircle({center:k,r:48,numberOfPoints:60,map:c}));break;case g.ELLIPSE:this._clear(),this._drawEnd(A.createEllipse({center:k,longAxis:48,shortAxis:24,numberOfPoints:60,
map:c}))}this._setTooltipMessage(this._points.length)},_addShape:function(a,b,c){this._setTooltipMessage(0);this._clear();this._drawEnd(this._toPolygon(a,b,c))},_toPolygon:function(b,c,k){var g=this.map,e=new A(g.spatialReference);e.addRing(a.map(b,function(a){return g.toMap({x:a[0]+c,y:a[1]+k})}));return e},_onDblClickHandler:function(c){var k,g=this._points,e=this.map.spatialReference,f=y;p("esri-touch")&&g.push(c.mapPoint);var d=g[g.length-1],n=g[g.length-2],g=d&&n&&d.x===n.x&&d.y===n.y?g.slice(0,
g.length-1):g.slice(0,g.length);switch(this._geometryType){case f.POLYLINE:if(!this._graphic||2>g.length){b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return}k=new x(e);k.addPath([].concat(g));break;case f.POLYGON:if(!this._graphic||2>g.length){b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return}k=new A(e);c=[].concat(g,[g[0].offset(0,0)]);!A.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+
" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),c.reverse());k.addRing(c);break;case f.MULTI_POINT:k=new E(e),a.forEach(g,function(a){k.addPoint(a)})}b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(k)},_onKeyDownHandler:function(a){a.keyCode===e.ESCAPE&&(b.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(a){this._options.showTooltips&&(a?this._tooltip||
(this._tooltip=f.create("div",{"class":"tooltip"},this.map.container),n.isBodyLtr()||c.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=b.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=b.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=b.connect(this.map,"onMouseMove",this._updateTooltip)):
this._tooltip&&(b.disconnect(this._onTooltipMouseEnterHandler_connect),b.disconnect(this._onTooltipMouseLeaveHandler_connect),b.disconnect(this._onTooltipMouseMoveHandler_connect),f.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var a=this._tooltip;a&&(a.style.display="none")},_setTooltipMessage:function(a){var b=this._tooltip;if(b){var c="";switch(this._geometryType){case y.POINT:c=D.toolbars.draw.addPoint;break;case y.ARROW:case y.LEFT_ARROW:case y.RIGHT_ARROW:case y.UP_ARROW:case y.DOWN_ARROW:case y.TRIANGLE:case y.RECTANGLE:case y.CIRCLE:case y.ELLIPSE:c=
D.toolbars.draw.addShape;break;case y.LINE:case y.EXTENT:case y.FREEHAND_POLYLINE:case y.FREEHAND_POLYGON:c=D.toolbars.draw.freehand;break;case y.POLYLINE:case y.POLYGON:c=D.toolbars.draw.start;1===a?c=D.toolbars.draw.resume:2<=a&&(c=D.toolbars.draw.complete);break;case y.MULTI_POINT:c=D.toolbars.draw.addMultipoint,1<=a&&(c=D.toolbars.draw.finish)}b.innerHTML=c}},_updateTooltip:function(a){var b=this._tooltip;if(b){var k;a.clientX||a.pageY?(k=a.clientX,a=a.clientY):(k=a.clientX+m.body().scrollLeft-
m.body().clientLeft,a=a.clientY+m.body().scrollTop-m.body().clientTop);b.style.display="none";c.set(b,{left:k+this._options.tooltipOffset+"px",top:a+"px"});b.style.display=""}},_redrawGraphic:function(a,b,c,k){if(c||this.map.wrapAround180)(a=this._graphic)&&a.setGeometry(a.geometry),(a=this._tGraphic)&&a.setGeometry(a.geometry)},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});d.mixin(y,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",
POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});p("extend-esri")&&d.setObject("toolbars.Draw",y,u);return y})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(h,d,a){return function(b,l){if(d("extend-esri")){var m=b.substring(b.indexOf(".")+
1);h.setObject(m,l,a)}}})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(h,d,a){return h("dgrid.OnDemandGrid",[d,a],{})})},"arcgisonline/map/dijit/AnalysisTool":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/layout/BorderContainer,dijit/layout/ContentPane,esri/dijit/analysis/AggregatePoints,esri/dijit/analysis/FindHotSpots,esri/dijit/analysis/OverlayLayers,esri/dijit/analysis/CreateBuffers,esri/dijit/analysis/SummarizeWithin,esri/dijit/analysis/SummarizeNearby,esri/dijit/analysis/EnrichLayer,esri/dijit/analysis/CreateDriveTimeAreas,esri/dijit/analysis/ConnectOriginsToDestinations,esri/dijit/analysis/PlanRoutes,esri/dijit/analysis/DissolveBoundaries,esri/dijit/analysis/ExtractData,esri/dijit/analysis/FindNearest,esri/dijit/analysis/MergeLayers,esri/dijit/analysis/FindExistingLocations,esri/dijit/analysis/DeriveNewLocations,esri/dijit/analysis/FindSimilarLocations,esri/dijit/analysis/InterpolatePoints,esri/dijit/analysis/CalculateDensity,esri/dijit/analysis/TraceDownstream,esri/dijit/analysis/CreateWatersheds,esri/dijit/analysis/CreateViewshed,esri/dijit/analysis/utils,dojo/topic"],
function(h,d,a){d.provide("arcgisonline.map.dijit.AnalysisTool");d.require("dijit._Widget");d.require("dijit._Templated");d.require("dijit.layout.BorderContainer");d.require("dijit.layout.ContentPane");d.require("esri.dijit.analysis.AggregatePoints");d.require("esri.dijit.analysis.FindHotSpots");d.require("esri.dijit.analysis.OverlayLayers");d.require("esri.dijit.analysis.CreateBuffers");d.require("esri.dijit.analysis.SummarizeWithin");d.require("esri.dijit.analysis.SummarizeNearby");d.require("esri.dijit.analysis.EnrichLayer");
d.require("esri.dijit.analysis.CreateDriveTimeAreas");d.require("esri.dijit.analysis.ConnectOriginsToDestinations");d.require("esri.dijit.analysis.PlanRoutes");d.require("esri.dijit.analysis.DissolveBoundaries");d.require("esri.dijit.analysis.ExtractData");d.require("esri.dijit.analysis.FindNearest");d.require("esri.dijit.analysis.MergeLayers");d.require("esri.dijit.analysis.FindExistingLocations");d.require("esri.dijit.analysis.DeriveNewLocations");d.require("esri.dijit.analysis.FindSimilarLocations");
d.require("esri.dijit.analysis.InterpolatePoints");d.require("esri.dijit.analysis.CalculateDensity");d.require("esri.dijit.analysis.TraceDownstream");d.require("esri.dijit.analysis.CreateWatersheds");d.require("esri.dijit.analysis.CreateViewshed");d.require("esri.dijit.analysis.utils");d.require("dojo.topic");d.declare("arcgisonline.map.dijit.AnalysisTool",[h._Widget,h._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoType\x3d"dijit.layout.BorderContainer" region\x3d"top"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"aggregateToolContentPane" dojoType\x3d"dijit.layout.ContentPane" region\x3d"center" class\x3d"panel panel_left panel_analysis" style\x3d"padding: 0 5px 0 5px;overflow-x:hidden;overflow-y:auto;"\x3e\r\n      \x3cdiv dojoAttachPoint\x3d"toolCtr" style\x3d"width:100%;height:90%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"aggrFooterPane" dojoType\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px;"\x3e\r\n      \x3cdiv class\x3d"footer" id \x3d"aggrfooter" dojoAttachPoint\x3d"aggrfooter" dojoType\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
featureLayers:null,i18n:null,currentTool:null,topic:d.topic,utils:esri.dijit.analysis.utils,shareUtil:arcgisonline.sharing.util,constructor:function(a,d){a=a||{};this.container=a.containerNode;this.featureLayers=a.featureLayers;this._pbConnects=[];this._drawnPredictPtlayerCount=this._drawnInputPtlayerCount=this._drawnPtlayerCount=this._drawnBlayerCount=0},destroy:function(){this.inherited(arguments);d.forEach(this._pbConnects,d.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);
this.i18n=d.i18n.getLocalization("arcgisonline","arcgisonline").common;d.mixin(this.i18n,d.i18n.getLocalization("arcgisonline","arcgisonline").tocPanel);d.mixin(this.i18n,d.i18n.getLocalization("arcgisonline","arcgisonline").analysisTool)},postCreate:function(){this.container.addChild(h.byId(this.id))},startup:function(){this.inherited(arguments);this._init()},save:function(){console.log("saving")},_onClose:function(a){this.aggregateToolContentPane.scrollTop=0;a&&a.save&&this.save();this.currentTool&&
this.currentTool.domNode&&esri.hide(this.currentTool.domNode);a&&a.save?(arcgisonline.map.leftPanel.openLeftTOCPanel(),this._saveFolders()):(d.map(this.featureLayers,function(a){return{layer:a}}),a={showSelectedCategory:!0},this.analysisType&&(a.analysisType=this.analysisType),this.topic.publish("Analysis/ShowAnalysis",a))},clear:function(a){"block"===d.style(a.domNode,"display")&&-1!==d.indexOf("PlanRoutes FindHotSpots FindSimilarLocations ExtractData CalculateDensity InterpolatePoints TraceDownstream CreateViewshed CreateWaterSheds".split(" "),
a.toolName)&&(a.clear(),esri.hide(a.domNode));d.query(".esriAnalyisHelpWindow").forEach(function(a){h.popup.close(h.byNode(a))});this._saveFolders()},_init:function(){this._connect(h.byId("leftContentPanel"),"resize",d.hitch(this,"adjustHeight"));this.adjustHeight()},_saveFolders:function(){this.currentTool.folderStore&&(arcgisonline.map.main.analysisProps.folderStore=this.currentTool.folderStore,arcgisonline.map.main.analysisProps.selectedFolder=this.currentTool.get("folderId"))},_loadConnections:function(){this.currentTool.on("close",
d.hitch(this,this._onClose));this.currentTool.on("start",d.hitch(this,function(a){var l={},l=d.mixin({},a);l.tool=this.currentTool;if(this.currentTool.map){a=this.currentTool.get("drawLayer");var m=[];a instanceof Array?m=a:m.push(a);d.forEach(m,function(a,b){this._addLayertoMapLayer({layer:a})},this)}this.topic.publish("Analysis/OnExecute",l)}));this.currentTool.on("add-ready-to-use-layer",d.hitch(this,function(a){this._addLayertoMapLayer(a)}));this.currentTool.on("job-submit",d.hitch(this,function(a){this.topic.publish("Analysis/OnJobSubmit",
a)}));this.currentTool.on("job-status",d.hitch(this,function(a){this.topic.publish("Analysis/OnJobStatus",a)}));this.currentTool.on("job-result",d.hitch(this,function(a){this.topic.publish("Analysis/OnJobResult",a)}));this.currentTool.on("job-success",d.hitch(this,function(a){this.topic.publish("Analysis/OnJobSuccess",a)}));this.currentTool.on("job-fail",d.hitch(this,function(a){this._handleJobError(a);this.topic.publish("Analysis/OnJobFailed",a)}));this.currentTool.on("job-cancel",d.hitch(this,function(a){this.topic.publish("Analysis/OnJobSuccess",
a)}))},_addLayertoMapLayer:function(a){var l;a.layer&&(l={layer:a.layer,url:a.layer.url,id:a.layer.id,type:"user",title:a.layer.name,defaultVisibility:!0,defaultOpacity:1,snippet:"",showLegend:!0,identify:!1},a.layerInfo&&(l.serviceInfo=a.layerInfo),a.item&&(l.itemId=a.item.itemId,l.title=a.item.title),a=arcgisonline.map.layer.getLayerPosition(l),arcgisonline.map.main.mapLayers.splice(a.list,0,l),a=a.map,arcgisonline.map.main.map.removeLayer(l.layer),arcgisonline.map.main.map.addLayer(l.layer,a,function(){d.publish("onLayerUpdate",
[""])}))},_connect:function(a,l,m){this._pbConnects.push(d.connect(a,l,m))},adjustHeight:function(a){a=d.coords(d.byId("leftPanelDiv")).h;var l=d.coords(d.byId("aggrfooter_links")).h+10;d.style(this.aggrFooterPane.domNode,"height",l+"px");d.style(this.aggregateToolContentPane.domNode,"height",a-l+"px")},getGpServer:function(){var a="";return a=esriGeowConfig.isAnalysisDebugServer?esriGeowConfig.analysisDebugServerUrl:esriGeowConfig.self.helperServices.analysis&&esriGeowConfig.self.helperServices.analysis.url?
esriGeowConfig.self.helperServices.analysis.url:null},_getCurrentToolAttr:function(){return this.currentTool},isValidAnalysisLayer:function(a){a.showReadyToUseLayers=!this.shareUtil.isPortal();var d=this.utils.isValidAnalysisLayer(a),m=d.isValid,d=d.validationMessage;m?a.infoMsg&&arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.infoTitle,message:a.infoMsg}):(arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.validationError,
message:d}),this._onClose());return m},_setCurrentToolAttr:function(a){var l="english"===arcgisonline.map.main.scaleBarUnits;this.toolName=a.toolName;this.featureLayers=a.featureLayers;this.analysisLayer=a.analysisLayer;this.analysisGpServer=this.getGpServer();a.analysisType&&(this.analysisType=a.analysisType);var m=d.filter(this.featureLayers,function(a){return"esriGeometryPolygon"===a.geometryType}),h=d.filter(this.featureLayers,function(a){return"esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===
a.geometryType}),r=d.filter(this.featureLayers,function(a){return"esriGeometryPolyline"===a.geometryType}),e=this.shareUtil.isPortal(),f=d.map(this.featureLayers,function(a){return a}),c=d.map(this.featureLayers,function(a){return a});if(!(a&&a.analysisLayer&&!e||e)||this.isValidAnalysisLayer(a))a={showSelectAnalysisLayer:!0},a.helperServices=esriGeowConfig.self.helperServices,a.portalSelf=esriGeowConfig.self,this.analysisGpServer?a.analysisGpServer=this.analysisGpServer:a.portalUrl=(esriGeowConfig.self.allSSL?
"https:":"http:")+"//"+esriGeowConfig.self.portalHostname,esriGeowConfig.isAnalysisDebugServer&&(a._isDebug=!0),arcgisonline.map.main.analysisProps.folderStore&&(a.folderStore=arcgisonline.map.main.analysisProps.folderStore),esri.isDefined(arcgisonline.map.main.analysisProps.selectedFolder)&&(a.folderId=arcgisonline.map.main.analysisProps.selectedFolder),a.showSelectFolder=!0,a.showCredits=!e,a.isSingleTenant=e,a.showReadyToUseLayers=!e,a.map=arcgisonline.map.main.map,"AggregatePoints"===this.toolName?
(d.mixin(a,{pointLayer:this.analysisLayer,polygonLayers:m,pointLayers:h}),this.currentTool=new esri.dijit.analysis.AggregatePoints(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"FindHotSpots"===this.toolName?(d.forEach(arcgisonline.map.main.mapLayers,function(a){a.layer&&(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.blayerName))&&(-1!==a.layer.name.indexOf("_")&&(a=a.layer.name.split("_"),this._drawnBlayerCount=parseInt(a[1],10)),this._drawnBlayerCount++)},this),d.mixin(a,{analysisLayer:this.analysisLayer,
boundingPolygonLayers:m,aggregationPolygonLayers:m,enableEnrichmentFields:arcgisonline.map.dijit.toc.analysis.canPerformGeoEnrichment(),allowChooseLabel:!1,analysisLayers:[].concat(h).concat(m)}),this.currentTool=new esri.dijit.analysis.FindHotSpots(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnBlayerCount&&this.currentTool.set("drawLayerName",this.i18n.blayerName+"_"+this._drawnBlayerCount),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=
!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"InterpolatePoints"===this.toolName?(d.forEach(arcgisonline.map.main.mapLayers,function(a){if(a.layer&&a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.blayerName)){if(-1!==a.layer.name.indexOf("_")){var b=a.layer.name.split("_");this._drawnBlayerCount=parseInt(b[1],10)}this._drawnBlayerCount++}a.layer&&
(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.predictPointlayerName))&&(-1!==a.layer.name.indexOf("_")&&(b=a.layer.name.split("_"),this._drawnPredictPtlayerCount=parseInt(b[1],10)),this._drawnPredictPtlayerCount++)},this),d.mixin(a,{inputLayer:this.analysisLayer,boundingPolygonLayers:m,predictAtPointLayers:h,inputLayers:h}),this.currentTool=new esri.dijit.analysis.InterpolatePoints(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnBlayerCount&&this.currentTool.set("drawLayerName",
this.i18n.blayerName+"_"+this._drawnBlayerCount),0<this._drawnPredictPtlayerCount&&this.currentTool.set("drawPointLayerName",this.i18n.predictPointlayerName+"_"+this._drawnPredictPtlayerCount),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"CalculateDensity"===
this.toolName?(d.forEach(arcgisonline.map.main.mapLayers,function(a){if(a.layer&&a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.blayerName)){if(-1!==a.layer.name.indexOf("_")){var b=a.layer.name.split("_");this._drawnBlayerCount=parseInt(b[1],10)}this._drawnBlayerCount++}a.layer&&(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.ptlayerName))&&(-1!==a.layer.name.indexOf("_")&&(b=a.layer.name.split("_"),this._drawnPtlayerCount=parseInt(b[1],10)),this._drawnPtlayerCount++)},this),d.mixin(a,{inputLayer:this.analysisLayer,
boundingPolygonLayers:m,radiusUnits:l?"Miles":"Kilometers",areaUnits:l?"SquareMiles":"SquareKilometers",inputLayers:[].concat(h).concat(r)}),this.currentTool=new esri.dijit.analysis.CalculateDensity(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnBlayerCount&&this.currentTool.set("drawLayerName",this.i18n.blayerName+"_"+this._drawnBlayerCount),0<this._drawnPtlayerCount&&this.currentTool.set("drawPointLayerName",this.i18n.ptlayerName+"_"+this._drawnPtlayerCount),this.currentTool.on("drawtool-activate",
function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"OverlayLayers"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:f,overlayLayer:c}),this.currentTool=new esri.dijit.analysis.OverlayLayers(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"CreateBuffers"===this.toolName?(d.mixin(a,
{inputLayer:this.analysisLayer,inputLayers:this.featureLayers,units:l?"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.CreateBuffers(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"SummarizeWithin"===this.toolName?(d.mixin(a,{sumWithinLayer:this.analysisLayer,sumWithinLayers:m,summaryLayers:this.featureLayers,shapeUnits:l?"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.SummarizeWithin(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"SummarizeNearby"===
this.toolName?(d.mixin(a,{sumNearbyLayer:this.analysisLayer,sumNearbyLayers:f,summaryLayers:c,units:l?"Miles":"Kilometers",enableTravelModes:arcgisonline.map.dijit.toc.analysis.canPerformDriveAnalysis()}),this.currentTool=new esri.dijit.analysis.SummarizeNearby(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"CreateDriveTimeAreas"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:h,distanceDefaultUnits:l?"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.CreateDriveTimeAreas(a,
d.create("div",{style:{width:"100%"}},this.toolCtr))):"ConnectOriginsToDestinations"===this.toolName?(d.mixin(a,{originsLayer:this.analysisLayer,originsLayers:h,featureLayers:this.featureLayers,distanceDefaultUnits:l?"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.ConnectOriginsToDestinations(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"PlanRoutes"===this.toolName?(d.mixin(a,{stopsLayer:this.analysisLayer,stopsLayers:h,featureLayers:this.featureLayers,distanceDefaultUnits:l?
"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.PlanRoutes(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"EnrichLayer"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:this.featureLayers,
enableTravelModes:arcgisonline.map.dijit.toc.analysis.canPerformDriveAnalysis()}),this.currentTool=new esri.dijit.analysis.EnrichLayer(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"DissolveBoundaries"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:m}),this.currentTool=new esri.dijit.analysis.DissolveBoundaries(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"FindNearest"===this.toolName?(d.mixin(a,{analysisLayer:this.analysisLayer,analysisLayers:f,nearLayers:c,
searchCutoffUnits:l?"Miles":"Kilometers",enableTravelModes:arcgisonline.map.dijit.toc.analysis.canPerformNearestAnalysis()}),this.currentTool=new esri.dijit.analysis.FindNearest(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"MergeLayers"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:f,mergeLayers:c}),this.currentTool=new esri.dijit.analysis.MergeLayers(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"ExtractData"===this.toolName?(d.mixin(a,{featureLayers:this.featureLayers,
inputLayers:[this.analysisLayer]}),this.currentTool=new esri.dijit.analysis.ExtractData(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),d.forEach(this._pbConnects,d.disconnect),this.currentTool.on("close",d.hitch(this,this._onClose)),this.currentTool.on("start",d.hitch(this,function(a){arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.infoTitle,message:this.i18n.runAnalysisMsg})})),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=
!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"FindExistingLocations"===this.toolName?(d.mixin(a,{analysisLayer:this.analysisLayer,analysisLayers:f,inputLayers:c,primaryActionButttonClass:"btn calcite blue"}),this.currentTool=new esri.dijit.analysis.FindExistingLocations(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"DeriveNewLocations"===
this.toolName?(d.mixin(a,{analysisLayer:esri.isDefined(this.analysisLayer)?this.analysisLayer:this.featureLayers[0],showSelectAnalysisLayer:!1,inputLayers:this.featureLayers,primaryActionButttonClass:"btn calcite blue"}),this.currentTool=new esri.dijit.analysis.DeriveNewLocations(a,d.create("div",{style:{width:"100%"}},this.toolCtr))):"FindSimilarLocations"===this.toolName?(d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:f,searchLayers:c,primaryActionButttonClass:"btn calcite blue"}),this.currentTool=
new esri.dijit.analysis.FindSimilarLocations(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),this.currentTool.on("selecttool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("selecttool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"TraceDownstream"===this.toolName?(d.forEach(arcgisonline.map.main.mapLayers,function(a){if(a.layer&&a.layer.name&&
-1!==a.layer.name.indexOf(this.i18n.blayerName)){if(-1!==a.layer.name.indexOf("_")){var b=a.layer.name.split("_");this._drawnBlayerCount=parseInt(b[1],10)}this._drawnBlayerCount++}a.layer&&(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.ptInputlayerName))&&(-1!==a.layer.name.indexOf("_")&&(b=a.layer.name.split("_"),this._drawnInputPtlayerCount=parseInt(b[1],10)),this._drawnInputPtlayerCount++)},this),d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:h,boundingPolygonLayers:m,maxDistanceUnits:l?
"Miles":"Kilometers",splitUnits:l?"Miles":"Kilometers"}),this.currentTool=new esri.dijit.analysis.TraceDownstream(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnBlayerCount&&this.currentTool.set("drawLayerName",this.i18n.blayerName+"_"+this._drawnBlayerCount),0<this._drawnInputPtlayerCount&&this.currentTool.set("drawPointLayerName",this.i18n.ptInputlayerName+"_"+this._drawnInputPtlayerCount),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=
!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"CreateWatersheds"===this.toolName?(d.forEach(arcgisonline.map.main.mapLayers,function(a){a.layer&&(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.ptInputlayerName))&&(-1!==a.layer.name.indexOf("_")&&(a=a.layer.name.split("_"),this._drawnInputPtlayerCount=parseInt(a[1],10)),this._drawnInputPtlayerCount++)},
this),d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:h,searchUnits:l?"Feet":"Meters"}),this.currentTool=new esri.dijit.analysis.CreateWatersheds(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnInputPtlayerCount&&this.currentTool.set("drawPointLayerName",this.i18n.ptInputlayerName+"_"+this._drawnInputPtlayerCount),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),this.currentTool.on("drawtool-deactivate",
function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})):"CreateViewshed"===this.toolName&&(d.forEach(arcgisonline.map.main.mapLayers,function(a){a.layer&&(a.layer.name&&-1!==a.layer.name.indexOf(this.i18n.ptInputlayerName))&&(-1!==a.layer.name.indexOf("_")&&(a=a.layer.name.split("_"),this._drawnInputPtlayerCount=parseInt(a[1],10)),this._drawnInputPtlayerCount++)},this),d.mixin(a,{inputLayer:this.analysisLayer,inputLayers:h,maxDistanceUnits:l?"Miles":
"Kilometers",maximumDistance:l?9:15,observerHeightUnits:l?"Feet":"Meters",observerHeight:l?6:1.75,targetHeightUnits:l?"Feet":"Meters"}),this.currentTool=new esri.dijit.analysis.CreateViewshed(a,d.create("div",{style:{width:"100%"}},this.toolCtr)),0<this._drawnInputPtlayerCount&&this.currentTool.set("drawPointLayerName",this.i18n.ptInputlayerName+"_"+this._drawnInputPtlayerCount),this.currentTool.on("drawtool-activate",function(){arcgisonline.map.edit.analysisDrawActivated=!0;arcgisonline.map.popup.disablePopupHandler()}),
this.currentTool.on("drawtool-deactivate",function(){arcgisonline.map.edit.analysisDrawActivated=!1;arcgisonline.map.popup.setupPopupHandler()})),this.currentTool&&(d.replaceClass(d.query(".esriAnalysisCloseIcon",this.currentTool.domNode)[0],"panel panel_close panel_collapse"),d.replaceClass(d.query("a[esriHelpTopic\x3d'toolDescription']",this.currentTool.domNode)[0],"helpIcon"),d.query(".esriAnalysisSubmitButton",this.currentTool.domNode).forEach(function(a){d.addClass(a,"btn calcite small blue")},
this),d.query(".esriTertiaryActionBtn",this.currentTool.domNode).forEach(function(a){d.addClass(a,"calcite green tiny")},this),this.currentTool.startup()),"ExtractData"!==this.toolName?this._loadConnections():(this.currentTool.on("job-status",d.hitch(this,function(a){"esriJobFailed"===a.jobStatus&&this._handleJobError(a)})),this.currentTool.on("job-fail",d.hitch(this,this._handleJobError)))},_handleJobError:function(a){var l,m="";l=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();
a.message&&(m=a.message);"warning"===a.type&&this.currentTool.set("disableRunAnalysis",!1);esri.isDefined(a.messageCode)&&-1!==d.indexOf(["AB_0003","AB_0001"],a.messageCode)&&this.currentTool.set("disableRunAnalysis",!0);l.show({title:this.i18n.errorTitle,message:m})}})})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(h,d,a,b,l,m,p,r){h=h(m,{declaredClass:"esri.layers.DynamicLayerInfo",
defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(a){a&&(a.source?a="mapLayer"===a.source.type?new p(a.source):new r(a.source):(a=new p,a.mapLayerId=this.id),this.source=a)},toJson:function(){var a=this.inherited(arguments);a.source=this.source&&this.source.toJson();return l.fixJson(a)}});a("extend-esri")&&d.setObject("layers.DynamicLayerInfo",h,b);return h})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(h,d,a,b,l,m,p,r){var e={xoffset:0,yoffset:0,width:12,height:12};h=h(r,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(f,c,n,l){f?d.isString(f)?(this.url=f,void 0!==c&&(this.outline=c),void 0!==n&&(this.width=n),void 0!==l&&(this.height=l)):(this.xoffset=b.pt2px(f.xoffset),this.yoffset=b.pt2px(f.yoffset),this.width=b.pt2px(f.width),this.height=b.pt2px(f.height),c=f.imageData,!(9>a("ie"))&&c&&(n=this.url,this.url=
"data:"+(f.contentType||"image")+";base64,"+c,this.imageData=n)):(d.mixin(this,e),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setXScale:function(a){this.xscale=a;return this},setYScale:function(a){this.yscale=a;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return d.mixin({},b.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=this.url,c=this.imageData;if(0===a.indexOf("data:"))var e=a,a=c,c=e.indexOf(";base64,")+
8,c=e.substr(c);if(d.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=p.getAbsoluteUrl(a);var e=b.px2pt(this.width),e=isNaN(e)?void 0:e,l=b.px2pt(this.height),l=isNaN(l)?void 0:l,h=b.px2pt(this.xoffset),h=isNaN(h)?void 0:h,s=b.px2pt(this.yoffset),s=isNaN(s)?void 0:s,a=m.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:c,contentType:this.contentType,width:e,height:l,xoffset:h,yoffset:s,xscale:this.xscale,yscale:this.yscale}));
a.imageData||delete a.imageData;return a}});h.defaultProps=e;a("extend-esri")&&(d.setObject("symbol.PictureFillSymbol",h,l),l.symbol.defaultPictureFillSymbol=e);return h})},"esri/tasks/GenerateRendererParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.tasks.GenerateRendererParameters",classificationDefinition:null,where:null,precision:null,prefix:null,unitLabel:null,formatLabel:null,toJson:function(){return{classificationDef:a.toJson(this.classificationDefinition.toJson()),
where:this.where}}});b("extend-esri")&&d.setObject("tasks.GenerateRendererParameters",h,l);return h})},"esri/dijit/geoenrichment/DataBrowser/Breadcrumb":function(){define("../../../declare dojo/_base/lang dojo/dom-class dojo/when dojox/mvc/Templated dojo/text!./templates/Breadcrumb.html".split(" "),function(h,d,a,b,l,m){return h([l],{templateString:m,flyAnim:null,selectCategory:function(a){this._hideCategory();a&&b(this.flyAnim.progress,d.hitch(this,this._showCategory,a));this._hideDataCollection()},
_hideCategory:function(){this.dcIcon.className="";this.dcIcon.style.display="none";this.connect1.style.display="none";this.angConnect1.style.display="none";this.connect1andHalf.style.display="none"},_showCategory:function(a){this.dcIcon.className="Breadcrumb_DataCollections DataCategoriesPage_Item_"+a.id.replace(/ /g,"_");this.dcIcon.style.display="";this.connect1.style.display="";this.angConnect1.style.display="";this.connect1andHalf.style.display="none"},selectDataCollection:function(a,l){this.angConnect1.style.display=
"none";this._hideDataCollection();a&&b(this.flyAnim.progress,d.hitch(this,this._showDataCollection,a,l))},_hideDataCollection:function(){this.varsNode.style.display="none";this.connect2.style.display="none";this.angConnect2.style.display="none";this.connect1andHalf.style.display="none"},_showDataCollection:function(b,d){d||(this.dcIcon.style.display="none",this.connect1.style.display="",this.connect1andHalf.style.display="");this.varsNode.style.display="";this.varsLabel.innerHTML=b;this.connect2.style.display=
"";this.angConnect2.style.display="";a.add(this.dcIcon,"DataBrowser_Clickable")},_onCategoriesClick:function(){this.onCategoriesClick()},onCategoriesClick:function(){},_onDCsClick:function(){this.onDCsClick()},onDCsClick:function(){}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(h,d,a){d.switchTo(a);return d})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),
function(h,d,a,b,l,m,p){function r(a,b){b&&b.nodeType&&a.appendChild(b)}function e(a,b,e,f){if(this.formatter){f=this.formatter;var d=this.grid.formatterScope;e.innerHTML="string"===typeof f&&d?d[f](b,a):this.formatter(b,a)}else null!=b&&e.appendChild(document.createTextNode(b))}var f=8>b("ie")&&!b("quirks");d=d("dgrid.Grid",m,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!=typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,
b){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var e;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var f=a.columnId;if(f){b=f;e=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!e&&"undefined"!=typeof b){var d=this.row(a);if(f=d&&d.element)for(var f=f.getElementsByTagName("td"),k=0;k<f.length;k++)if(f[k].columnId==b){e=f[k];break}}if(null!=a)return{row:d||this.row(a),column:b&&this.column(b),element:e}},createRowCells:function(a,e,d,m){var h=l("table.dgrid-row-table[role\x3dpresentation]"),
k=9>b("ie")||b("quirks")?l(h,"tbody"):h,g,q,w,v,r,x,A,E,B,D;d=d||this.subRows;q=0;for(w=d.length;q<w;q++){x=d[q];g=l(k,"tr");x.className&&l(g,"."+x.className);v=0;for(r=x.length;v<r;v++){A=x[v];E=A.id;B=A.field?".field-"+p.escapeCssIdentifier(A.field,"-"):"";(D="function"===typeof A.className?A.className(m):A.className)&&(B+="."+D);B=l(a+(".dgrid-cell.dgrid-cell-padding"+(E?".dgrid-column-"+p.escapeCssIdentifier(E,"-"):"")+B.replace(/ +/g,"."))+"[role\x3d"+("th"===a?"columnheader":"gridcell")+"]");
B.columnId=E;f?(E=l(B,"!dgrid-cell-padding div.dgrid-cell-padding"),B.contents=E):E=B;if(D=A.colSpan)B.colSpan=D;if(D=A.rowSpan)B.rowSpan=D;e(E,A);g.appendChild(B)}}return h},left:function(a,b){a.element||(a=this.cell(a));return this.cell(this._move(a,-(b||1),"dgrid-cell"))},right:function(a,b){a.element||(a=this.cell(a));return this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,b){var f=this.createRowCells("td",function(f,d){var k=a;d.get?k=d.get(a):"field"in d&&"_item"!=d.field&&(k=
k[d.field]);d.renderCell?r(f,d.renderCell(a,k,f,b)):e.call(d,a,k,f,b)},b&&b.subRows,a);return l("div[role\x3drow]\x3e",f)},renderHeader:function(){var c=this,e=this.headerNode,d=e.childNodes.length;for(e.setAttribute("role","row");d--;)l(e.childNodes[d],"!");d=this.createRowCells("th",function(a,b){var c=b.headerNode=a;f&&(a=a.parentNode);var g=b.field;g&&(a.field=g);if(b.renderHeaderCell)r(c,b.renderHeaderCell(c));else if("label"in b||b.field)c.appendChild(document.createTextNode("label"in b?b.label:
b.field));!1!==b.sortable&&(g&&"_item"!=g)&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[d.id=this.id+"-header"]=this.columns;e.appendChild(d);this._sortListener&&this._sortListener.remove();this._sortListener=a(d,"click,keydown",function(f){if("click"==f.type||32==f.keyCode||!b("opera")&&13==f.keyCode){var d=f.target,k,g,l;do if(d.sortable){l=[{attribute:k=d.field||d.columnId,descending:(g=c._sort[0])&&g.attribute==k&&!g.descending}];
k={bubbles:!0,cancelable:!0,grid:c,parentType:f.type,sort:l};a.emit(f.target,"dgrid-sort",k)&&(c._sortNode=d,c.set("sort",l));break}while((d=d.parentNode)&&d!=e)}})},resize:function(){var a=this.headerNode.firstChild,e=this.contentNode,f;this.inherited(arguments);if(!b("ie")||7<b("ie")&&!b("quirks"))if(e.style.width="",e&&a&&(f=a.offsetWidth)!=e.offsetWidth)e.style.width=f+"px"},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(a,
b){this.inherited(arguments);this.updateSortArrow(this._sort)},_findSortArrowParent:function(a){var b=this.columns,e;for(e in b){var f=b[e];if(f.field==a)return f.headerNode}},updateSortArrow:function(a,b){this._lastSortedArrow&&(l(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down"),l(this._lastSortedArrow,"!"),delete this._lastSortedArrow);b&&(this._sort=a);if(a[0]){var e=a[0].attribute,f=a[0].descending,e=this._sortNode||this._findSortArrowParent(e),d;delete this._sortNode;e&&(e=e.contents||
e,d=this._lastSortedArrow=l("div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]"),d.innerHTML="\x26nbsp;",e.insertBefore(d,e.firstChild),l(e,f?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(a,b){return this.addCssRule("#"+p.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+p.escapeCssIdentifier(a,"-"),b)},_configColumns:function(a,b){var e=[],f=b instanceof Array;p.each(b,function(d,k){"string"==typeof d&&(b[k]=d={label:d});!f&&!d.field&&(d.field=k);k=d.id=d.id||(isNaN(k)?
k:a+k);this._configColumn&&(this._configColumn(d,k,b,a),k=d.id);f&&(this.columns[k]=d);d.grid=this;"function"===typeof d.init&&d.init();e.push(d)},this);return f?b:e},_destroyColumns:function(){var a=this.subRows,b=a&&a.length,e,f,d,k;this.cleanup();for(e=0;e<b;e++){f=0;for(k=a[e].length;f<k;f++)d=a[e][f],"function"===typeof d.destroy&&d.destroy()}},configStructure:function(){var a=this.subRows,b=this._columns=this.columns;this.columns=!b||b instanceof Array?{}:b;if(a)for(b=0;b<a.length;b++)a[b]=
this._configColumns(b+"-",a[b]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},setColumns:function(a){h.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",a)},setSubRows:function(a){h.deprecated("setSubRows(...)",
'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",a)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});d.appendIfNode=r;d.defaultRenderCell=e;return d})},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(h,d){h.add("dom-contains",function(a,b,c){return!!c.contains});
var a=[],b,l,m,p=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,r={defaultDelay:15,throttle:function(a,b,c){var d=!1;c=c||r.defaultDelay;return function(){d||(d=!0,a.apply(b,arguments),setTimeout(function(){d=!1},c))}},throttleDelayed:function(a,b,c){var d=!1;c=c||r.defaultDelay;return function(){if(!d){d=!0;var l=arguments;setTimeout(function(){d=!1;a.apply(b,l)},c)}}},debounce:function(a,b,c){var d;c=c||r.defaultDelay;return function(){d&&(clearTimeout(d),d=null);var l=arguments;d=setTimeout(function(){a.apply(b,
l)},c)}},each:function(a,b,c){var d,l;if(a)if("number"===typeof a.length){d=0;for(l=a.length;d<l;d++)b.call(c,a[d],d,a)}else for(d in a)b.call(c,a[d],d,a)},contains:function(a,b){return h("dom-contains")?a.contains(b):a.compareDocumentPosition(b)&8},addCssRule:function(e,f){b||(b=d(document.getElementsByTagName("head")[0],"style"),b=b.sheet||b.styleSheet,l=b.deleteRule?"deleteRule":"removeRule",m=b.cssRules?"cssRules":"rules");var c=a.length;a[c]=(b.cssRules||b.rules).length;b.addRule?b.addRule(e,
f):b.insertRule(e+"{"+f+"}",a[c]);return{get:function(e){return b[m][a[c]].style[e]},set:function(e,f){"undefined"!==typeof a[c]&&(b[m][a[c]].style[e]=f)},remove:function(){var e=a[c],f,d;if(void 0!==e){b[l](e);a[c]=void 0;f=c+1;for(d=a.length;f<d;f++)a[f]>e&&a[f]--}}}},escapeCssIdentifier:function(a,b){return"string"===typeof a?a.replace(p,b||"\\$1"):a}};return r})},"esri/dijit/analysis/AggregatePoints":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog dijit/InlineEditBox ../../kernel ../../lang ./AnalysisBase ./utils ./CreditEstimator ./_AnalysisOptions dojo/i18n!../../nls/jsapi dojo/text!./templates/AggregatePoints.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){d=d([s,k,g,q,w,L,F],{declaredClass:"esri.dijit.analysis.AggregatePoints",templateString:O,widgetsInTemplate:!0,pointLayer:null,polygonLayers:null,summaryFields:null,outputLayerName:null,keepBoundariesWithNoPoints:!0,polygonLayer:null,groupByField:null,minorityMajority:!1,percentPoints:!1,i18n:null,toolName:"AggregatePoints",helpFileName:"AggregatePoints",resultParameter:"AggregatedLayer",_afterAnalysisStr:"",_beforeAnalysisStr:"",
constructor:function(a){this._pbConnects=[];this._statsRows=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.aggregatePointsTool);this._beforeAnalysisStr=this.i18n.aggregateDefine.substring(0,this.i18n.aggregateDefine.indexOf("\x3cb\x3e${layername}\x3c/b\x3e"));this._afterAnalysisStr=this.i18n.aggregateDefine.substring(this.i18n.aggregateDefine.indexOf("\x3cb\x3e${layername}\x3c/b\x3e")+
19)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleSaveBtnClick:function(){if(this._form.validate()){this._saveBtn.set("disabled",!0);var a={},b={},c,k;c=this.polygonLayers[this._layersSelect.get("value")];a.PolygonLayer=m.toJson(G.constructAnalysisInputLyrObj(c));
a.PointLayer=m.toJson(G.constructAnalysisInputLyrObj(this.pointLayer));a.SummaryFields=m.toJson(this.get("summaryFields"));this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));a.KeepBoundariesWithNoPoints=this._keepPolygonsCheck.get("checked");"0"!==this._groupBySelect.get("value")&&(a.GroupByField=this._groupBySelect.get("value"),this.resultParameter=["aggregatedLayer","groupSummary"],a.minorityMajority=this.get("minorityMajority"),
a.percentPoints=this.get("percentPoints"));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(k={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(k.extent=this.map.extent._normalize(!0)),a.context=m.toJson(k));b.jobParams=a;b.itemParams={description:e.substitute(this.i18n.itemDescription,{pointlayername:this.pointLayer.name,polygonlayername:c.name}),tags:e.substitute(this.i18n.itemTags,
{pointlayername:this.pointLayer.name,polygonlayername:c.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_handleLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._isAnalysisSelect=!1,this._browsedlg.show()):this.polygonLayers[a]&&this.pointLayer&&(this.outputLayerName=
e.substitute(this.i18n.outputLayerName,{pointlayername:this.pointLayer.name,polygonlayername:this.polygonLayers[a].name}),this._outputLayerInput.set("value",this.outputLayerName))},_handleBrowseItemsSelect:function(b){b&&b.selection&&G.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?this.pointLayers:this.polygonLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,
!0))},_handleAttrSelectChange:function(b){var c;"0"!==b&&(b=this.get("statisticSelect"),"0"!==b.get("value")&&!b.get("isnewRowAdded")&&(c=b.get("removeTd"),f.set(c,"display","block"),c=b.get("referenceWidget"),a.hitch(c,c._createStatsRow()),b.set("isnewRowAdded",!0)))},_handleStatsValueUpdate:function(b,c,k){this.get("attributeSelect")&&(b=this.get("attributeSelect"),"0"!==b.get("value")&&"0"!==k&&!this.get("isnewRowAdded")&&(k=this.get("removeTd"),f.set(k,"display","block"),k=this.get("referenceWidget"),
a.hitch(k,k._createStatsRow()),this.set("isnewRowAdded",!0)))},_handleShowCreditsClick:function(b){b.preventDefault();b={};var c;this._form.validate()&&(c=this.polygonLayers[this._layersSelect.get("value")],b.PolygonLayer=m.toJson(G.constructAnalysisInputLyrObj(c)),b.PointLayer=m.toJson(G.constructAnalysisInputLyrObj(this.pointLayer)),b.SummaryFields=m.toJson(this.get("summaryFields")),this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),
b.KeepBoundariesWithNoPoints=this._keepPolygonsCheck.get("checked"),"0"!==this._groupBySelect.get("value")&&(b.GroupByField=this._groupBySelect.get("value")),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.Context=m.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_save:function(){},_buildUI:function(){var k=!0;G.initHelpLinks(this.domNode,this.showHelp);
this.get("showSelectAnalysisLayer")&&(!this.get("pointLayer")&&this.get("pointLayers")&&this.set("pointLayer",this.pointLayers[0]),G.populateAnalysisLayers(this,"pointLayer","pointLayers"));this.pointLayer&&c.set(this._aggregateToolDescription,"innerHTML",e.substitute(this.i18n.aggregateDefine,{layername:this.pointLayer.name}));this.polygonLayers&&b.forEach(this.polygonLayers,function(a,b){"esriGeometryPolygon"===a.geometryType&&this._layersSelect.addOption({value:b,label:a.name})},this);G.addReadyToUseLayerOption(this,
[this._analysisSelect,this._layersSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),k=!1);this._keepPolygonsCheck.set("checked",this.keepBoundariesWithNoPoints);this.polygonLayer&&this._layersSelect.set("value",this.polygonLayer);b.forEach(this.summaryFields,function(b){b=b.split(" ");this._currentAttrSelect.set("value",b[0]);a.hitch(this._currentAttrSelect,this._handleAttrSelectChange,b[0])();this._currentStatsSelect.set("value",b[1]);a.hitch(this._currentStatsSelect,
this._handleStatsValueUpdat,"value","",b[1])()},this);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;G.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":
"none");this.set("groupBySelect",this.groupByField);f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this.minorityMajority&&this._minmajorityCheck.set("checked",this.minorityMajority);this.percentPoints&&this._percentPointsCheck.set("checked",this.percentPoints);f.set(this._closeBtn,"display",this.get("showCloseIcon")?"block":"none");this._updateAnalysisLayerUI(k);this._loadConnections()},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,
"onclick",a.hitch(this,"_onClose",!1))},_createStatsRow:function(){var b,c,k,g,e;b=n.create("tr",null,this._afterStatsRow,"before");k=n.create("td",{style:{width:"45%",maxWidth:"100px"}},b);c=n.create("td",{style:{width:"55%",maxWidth:"104px"}},b);k=new E({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin025 attrSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},n.create("select",null,k));this.set("attributes",{selectWidget:k,pointLayer:this.pointLayer});c=new E({"class":"mediumInput statsSelect",
style:{tableLayout:"fixed",overflowX:"hidden"}},n.create("select",null,c));this.set("statistics",{selectWidget:c});k.set("statisticSelect",c);l.connect(k,"onChange",this._handleAttrSelectChange);e=n.create("td",{"class":"shortTextInput removeTd",style:{display:"none",maxWidth:"12px"}},b);g=n.create("a",{title:this.i18n.removeAttrStats,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+h.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},e);l.connect(g,"onclick",a.hitch(this,this._removeStatsRow,
b));this._statsRows.push(b);c.set("attributeSelect",k);c.set("removeTd",e);c.set("isnewRowAdded",!1);c.set("referenceWidget",this);c.watch("value",this._handleStatsValueUpdate);this._currentStatsSelect=c;this._currentAttrSelect=k;return!0},_removeStatsRow:function(a){b.forEach(v.findWidgets(a),function(a){a.destroyRecursive()});n.destroy(a)},_removeStatsRows:function(){b.forEach(this._statsRows,this._removeStatsRow,this);this._statsRows=[]},_handleGroupBySelectChange:function(a){a="0"===a;t.toggle(this._minmajorityLabel,
"esriAnalysisTextDisabled",a);t.toggle(this._percentPointsLabel,"esriAnalysisTextDisabled",a);this._percentPointsCheck.set("disabled",a);this._minmajorityCheck.set("disabled",a)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.pointLayer=this.pointLayers[a],this._updateAnalysisLayerUI(!0))},
_updateAnalysisLayerUI:function(a){if(this.pointLayer){c.set(this._aggregateToolDescription,"innerHTML",e.substitute(this.i18n.aggregateDefine,{layername:this.pointLayer.name}));var b=this.polygonLayers[this._layersSelect.get("value")];a&&b&&(this.outputLayerName=e.substitute(this.i18n.outputLayerName,{pointlayername:this.pointLayer.name,polygonlayername:b.name}),this._outputLayerInput.set("value",this.outputLayerName));this._removeStatsRows();this._createStatsRow();this.set("groupBySelect",this.groupByField)}},
_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setPointLayerAttr:function(a){if(J.isDefined(a)&&("esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType))this.pointLayer=a},_setPolygonLayersAttr:function(a){this.polygonLayers=a},_setLayersAttr:function(a){this.polygonLayers=[];b.forEach(a,function(a){"esriGeometryPolygon"===a.geometryType?this.polygonLayers.push(a):"esriGeometryPoint"===
a.geometryType&&(this.pointLayer=a)},this)},_setAttributesAttr:function(a){if(a.pointLayer){var c,k;c=a.pointLayer;k=a.selectWidget;a=c.fields;k.addOption({value:"0",label:this.i18n.attribute});b.forEach(a,function(a){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)&&a.name!==c.objectIdField&&k.addOption({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)}},_setStatisticsAttr:function(a){a=a.selectWidget;
a.addOption({value:"0",label:this.i18n.statistic});a.addOption({value:"SUM",label:this.i18n.sum});a.addOption({value:"MIN",label:this.i18n.minimum});a.addOption({value:"MAX",label:this.i18n.maximum});a.addOption({value:"MEAN",label:this.i18n.average});a.addOption({value:"STDDEV",label:this.i18n.standardDev})},_setSummaryFieldsAttr:function(a){this.summaryFields=a},_getSummaryFieldsAttr:function(){var a="",b=[],c,k;u(".statsSelect",this.domNode).forEach(function(g){c=v.byNode(g);k=c.get("attributeSelect");
"0"!==k.get("value")&&"0"!==c.get("value")&&(a+=k.get("value")+" "+c.get("value")+";",b.push(k.get("value")+" "+c.get("value")))});return b},_setGroupBySelectAttr:function(a){if(this.pointLayer){var c=this.pointLayer.fields;this._groupBySelect.removeOption(this._groupBySelect.getOptions());this._groupBySelect.addOption({value:"0",label:this.i18n.attribute});b.forEach(c,function(a){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeString","esriFieldTypeDate"],a.type)&&
a.name!==this.pointLayer.objectIdField&&this._groupBySelect.addOption({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this);a&&this._groupBySelect.set("value",a);this._handleGroupBySelectChange(this._groupBySelect.get("value"))}},_setMinorityMajorityAttr:function(a){this.minorityMajority=a},_getMinorityMajorityAttr:function(a){this._minmajorityCheck&&(this.minorityMajority=this._minmajorityCheck.get("checked"));return this.minorityMajority},_setPercentPointsAttr:function(a){this.percentPoints=
a},_getPercentPointsAttr:function(a){this._percentPointsCheck&&(this.percentPoints=this._percentPointsCheck.get("checked"));return this.percentPoints},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},validateServiceName:function(a){return G.validateServiceName(a,{textInput:this._outputLayerInput})},_setPointLayersAttr:function(a){J.isDefined(a)&&(this.pointLayers=a=b.filter(a,function(a,b){return"esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType}))},
_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});p("extend-esri")&&a.setObject("dijit.analysis.AggregatePoints",d,K);return d})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.layers.Domain",constructor:function(a){a&&d.isObject(a)&&(this.name=a.name,this.type=a.type)},toJson:function(){return l.fixJson({name:this.name,type:this.type})}});a("extend-esri")&&d.setObject("layers.Domain",
h,b);return h})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z){var x=h("dojox.form._CheckedMultiSelectItem",[e,f,c],{templateString:w,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1);this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1);
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){!this.get("disabled")&&!this.get("readOnly")&&(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(a){this.get("disabled")||this.get("readOnly")?b.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",
this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",this.disabled);m.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),A=h("dojox.form._CheckedMultiSelectMenu",u,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=p.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});
a.parentNode&&a.parentNode.replaceChild(b,a);m.remove(a,"dijitMenuTable");b.className=a.className+" dojoxCheckedMultiSelectMenu";a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");b.setAttribute("role","presentation");b.appendChild(a)},resize:function(a){a&&(l.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==
typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();a.onClick(b)}}),E=h("dojox.form._CheckedMultiSelectMenuItem",t,{templateString:q,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;
this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){m.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||m.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(b){!this.disabled&&!this.readOnly&&(this.parent.multiple?
(this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(a.forEach(this.parent.getChildren(),function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return h("dojox.form.CheckedMultiSelect",k,{templateString:v,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],
postMixInProperties:function(){this.inherited(arguments);this._nlsResources=r.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(m.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=
new A({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:d.hitch(this,"_updateSelection")}))},startup:function(){this.dropDown&&(this.dropDownButton=new g({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode));this.inherited(arguments)},_onMouseDown:function(a){a.preventDefault()},validator:function(){return!this.required?!0:a.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&
0!=a.value.toString().length})},validate:function(a){s.hide(this.domNode);(a=this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(a){return this.validator()},getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(a){s.hide(this.domNode);a&&s.show(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new E({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):
(b=new x({option:a,parent:this,disabled:this.disabled,readOnly:this.readOnly}),this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},reset:function(){this.inherited(arguments);s.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);a.forEach(this._getChildren(),function(a){a._updateBox()});p.empty(this.containerNode);var b=this;a.forEach(this.value,
function(a){a=p.create("option",{value:a,label:a,selected:"selected"});p.place(a,b.containerNode)});if(this.dropDown&&this.dropDownButton){var c=0,k="";a.forEach(this.options,function(a){a.selected&&(c++,k=a.label)});this.dropDownButton.set("label",this.multiple?d.replace(this._nlsResources.multiSelectLabelText,{num:c}):k)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():a.map(this.wrapperDiv.childNodes,function(a){return n.byNode(a)})},invertSelection:function(b){this.multiple&&
(a.forEach(this.options,function(a){a.selected=!a.selected}),this._updateSelection())},_setDisabledAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",b);a.forEach(this._getChildren(),function(a){a&&a.set&&a.set("disabled",b)})},_setReadOnlyAttr:function(b){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",b);this.readOnly=b;a.forEach(this._getChildren(),function(a){a&&a.set&&a.set("readOnly",
b)})},uninitialize:function(){s.hide(this.domNode);a.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"esri/dijit/geoenrichment/DataBrowser/DataVariablesPage":function(){define("../../../declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/Stateful dojo/query dojo/i18n!../../../nls/jsapi dojo/text!./templates/DataVariablesPage.html ../_WizardPage ../_Invoke ../CheckList dojo/store/Memory dojo/data/ObjectStore dgrid/tree dgrid/OnDemandGrid dgrid/extensions/DijitRegistry dgrid/Selection dojo/aspect dijit/Tooltip dojo/on dojo/_base/window dijit/registry dijit/layout/ContentPane".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A){r=r.geoenrichment.dijit.DataVariablesPage;m=h([m],{checked:!0,getLabel:function(){},getClass:function(){return""}});var E=h([t],{getChildren:function(a){return a.getChildren()},mayHaveChildren:function(a){return!!a.getChildren}}),B=h([k,g,q,c],{selectionMode:"toggle",shoppingCart:null,variableInfo:null,useTouchScroll:!1,_lockAnimation:!1,constructor:function(){this._ltr=l.isBodyLtr()},removeRow:function(a,b){var c=A.findWidgets(a);if(c)for(var k=
0;k<c.length;k++)c[k].destroy();this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.on("dgrid-select",d.hitch(this,this._onSelect));this.on("dgrid-deselect",d.hitch(this,this._onDeselect))},select:function(b,c,k){var g=this.row(b).element;if(null===k||void 0===k)k=!a.contains(g,"dgrid-selected");var e=this.row(b).data;if(e&&e._children){var e=e.getChildren(),f;0<e.length&&!this.row(e[0]).element&&this.expand(this.row(b),!1,!0);this._lockAnimation=!0;for(var d=0;d<e.length;d++)f=
this.row(e[d]),this.select(f,c,k);this._lockAnimation=!1;g&&(k?(a.add(g,"dgrid-selected"),this.flyAnim.fly(p(".VarLabel",g)[0],"DataBrowser_SelectVar",["top",this._ltr?"right":"left"])):a.remove(g,"dgrid-selected"))}this.inherited(arguments);g&&(e=p(".dijitCheckBox",g)[0])&&(a.contains(g,"dgrid-selected")?a.add(e,"dijitCheckBoxChecked"):a.remove(e,"dijitCheckBoxChecked"))},syncOneBranchWithShoppingCart:function(a){for(var b=this.shoppingCart.content,c=0;c<a.length;c++)this.select(a[c],null,!!b[a[c].idDesc])},
_setSelection:function(a){this.selection=this.get("selection");this.selectedItems=[];if(this.selection&&this.store.data){a=this.store.data;for(var b,c=0;c<a.length;c++){b=a[c].getChildren();for(var k=0;k<b.length;k++)this.selection[b[k].id]&&this.selectedItems.push(b[k])}}},_onSelect:function(a){if(!this._lockAnimation&&this.flyAnim&&a.parentType){var b=this.row(a.rows[0]).element;this.flyAnim.fly(p(".VarLabel",b)[0],"DataBrowser_SelectVar",["top",this._ltr?"right":"left"])}this._setSelection(a);
this.onSelect(a)},_onDeselect:function(a){this._setSelection(a);this.onDeselect(a)},onDeselect:function(a){for(var b=0;b<a.rows.length;b++)this.shoppingCart.removeVariable(a.rows[b].data.idDesc)},onSelect:function(){this.invoke("_addVariablesToCart")},_addVariablesToCart:function(){this.shoppingCart.addVariables(this.selectedItems)}}),D=h([m],{variables:null,_updateChildren:!0,_label:null,constructor:function(a,b){this.set("id",""+a);this._label=a;this._children=[];this.variables=[];for(var c in b)b.hasOwnProperty(c)&&
(this.variables.push(b[c]),this._children.push(b[c]))},getLabel:function(){return this._label},getChildren:function(){return this._children}});return h([f,c],{templateString:e,nls:r,baseClass:"DataVariablesPage",varTree:null,varTitle:null,_grid:null,_model:null,selectedCollection:null,store:null,storeModel:null,multiSelect:!0,filtration:null,shoppingCart:null,_icon:null,flyAnim:null,_setSelectedCollectionsAttr:function(a){this._set("selectedCollections",a);if(a){var b=0;this._model=[];for(var c={},
k,g,e=0;e<a.length;e++)if(a[e].variables)for(var f=0;f<a[e].variables.length;f++){k=a[e].variables[f];var l=k.fieldCategory;g=k.idDesc;c[l]||(c[l]={});c[l][g]=k}for(var n in c)if(c.hasOwnProperty(n)){for(g in c[n])c[n].hasOwnProperty(g)&&b++;this._model.push(new D(n,c[n]))}this.spnVarsQuant.innerHTML=b.toString();this.spnVarTitle.innerHTML=this.varTitle.toString();a=new u({data:this._model});a=new E(a);if(this._grid)this._grid.set("store",a);else{b=[s({label:" ",field:"expander",shouldExpand:d.hitch(this,
this._shouldExpand)}),{label:"Variables",field:"alias",sortable:!1,renderCell:d.hitch(this,this._renderCheckBox)}];this._grid=new B({store:a,columns:b,showHeader:!1,shoppingCart:this.shoppingCart,selectionMode:this.multiSelect?"toggle":"single",selectionDelegate:this.multiSelect?".TrimWithEllipses":".dgrid-row",flyAnim:this.flyAnim},this.divTree);var m=d.hitch(this._grid,this._grid.expand);this._grid.expand=function(a,b,c){var k=a.element?a:this.row(a),k=this.row(k).data,g=null,e=!1;k.getChildren&&
(g=k.getChildren(),e=!!this.row(g[0]).element);a=m(a,b,c);g&&!1!==b&&0<g.length&&!e&&this.syncOneBranchWithShoppingCart(k.variables);return a};w.after(this._grid,"expand",d.hitch(this,this.invoke,"resize"));this._grid.startup()}}},_refreshGrid:function(){for(var a=0,b=0;b<this._model.length;b++){this._model[b]._children=[];for(var c=0;c<this._model[b].variables.length;c++)0===this._model[b].variables[c].hidden&&this._model[b]._children.push(this._model[b].variables[c]);a+=this._model[b]._children.length}this._grid.store=
new E(new u({data:this._model}));this.spnVarsQuant.innerHTML=a.toString();this._grid.refresh();this._grid.resize()},_shouldExpand:function(a,b,c){return void 0!==c?c:1==this._model.length},_renderCheckBox:function(c,k,g,e){k=(e=!c.variables)?c.description||c.alias:c.getLabel();g=b.create("div",{"class":"TrimWithEllipses VariableRowRoot"});this.multiSelect&&b.create("div",{"class":"dijit dijitInline dijitCheckBox VarCheck"},g);e&&(a.add(g.children[0],"DataVariablesPage_VarCheck"),e=b.create("div",
{"class":"DataBrowserInfoIcon"},g),z(e,"click",d.hitch(this,this._toggleTooltip,e,c)),z(e,"mouseenter",d.hitch(this,this._showTooltip,e,c)),z(e,"mouseover",d.hitch(this,this._showTooltip,e,c)),z(e,"mouseleave",d.hitch(this,this._hideTooltip,e,c)),z(e,"mousedown,touchstart,MSPointerDown,dgrid-cellfocusin",function(a){a.stopPropagation&&a.stopPropagation()}));b.create("span",{"class":"VarLabel",innerHTML:k},g);return g},_toggleTooltip:function(a,b,c){c.stopPropagation&&c.stopPropagation();this._icon?
this._hideTooltip():this._showTooltip(a,b,c)},_showTooltip:function(a,b,c){this._icon=a;this.variableInfo.set("variable",b);v.show(this.variableInfo.domNode.outerHTML,a,["above","below"]);c.stopPropagation&&c.stopPropagation();z.once(x.doc,"click",d.hitch(this,this._hideTooltip))},_hideTooltip:function(){v.hide(this._icon);this._icon=null},onRemoveElementFromShoppingCart:function(a){for(var b,c=0;c<this._grid.store.data.length;c++){for(var k=0;k<this._grid.store.data[c].variables.length;k++)if(a===
this._grid.store.data[c].variables[k].idDesc){b=this._grid.store.data[c].variables[k];break}if(b)break}b&&this._grid.select(b,null,!1)},syncWithShoppingCart:function(){var b,c=this.shoppingCart.content,k=!1,g=!1;if(this._grid)for(var e=0;e<this._grid.store.data.length;e++){for(var g=!0,f=0;f<this._grid.store.data[e].variables.length;f++)b=this._grid.store.data[e].variables[f],k=!!c[b.idDesc],this._grid.select(b,null,k),k||(g=!1);if(g&&(b=this._grid.row(this._grid.store.data[e]).element))a.add(b,"dgrid-selected"),
(b=p(".dijitCheckBox",b)[0])&&a.add(b,"dijitCheckBoxChecked")}},onSelect:function(){}})})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(a){d.mixin(this,a)}});d.mixin(h,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",
TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});a("extend-esri")&&d.setObject("tasks.GPMessage",h,b);return h})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(a){a&&d.mixin(this,a)},toJson:function(){}});a("extend-esri")&&d.setObject("layers.LayerSource",
h,b);return h})},"esri/tasks/geoenrichment/DriveUnits":function(){define(["dojo/_base/lang","../../units"],function(h,d){var a=h.clone(d);h.mixin(a,{MINUTES:"esriDriveTimeUnitsMinutes"});return a})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s){h=h(f,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=d.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,e=a.length;for(c=0;c<e;c++)b.push(a[c].toJson());
return{geometryType:s.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(b,c,e){var f=s.getGeometryType(c);b=b.geometries;var l=[],n={spatialReference:e.toJson()},m=d.mixin;a.forEach(b,function(a,b){l[b]=new f(m(a,n))});return l},_toProjectGeometry:function(a){var b=a.spatialReference.toJson();return a instanceof c?new u({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new n({paths:[[].concat(a.points)],spatialReference:b})},
_fromProjectedGeometry:function(a,b,e){return"esriGeometryEnvelope"===b?(a=a.rings[0],new c(a[0][0],a[0][1],a[2][0],a[2][1],e)):new t({points:a.paths[0],spatialReference:e.toJson()})},project:function(a,c,f,n){var m=d.mixin({},this._url.query,{f:"json"}),h;a.geometries?(n=f,f=c,c=a.outSR,h=a.geometries[0],m=d.mixin(m,a.toJson())):(h=a[0],m=d.mixin(m,{outSR:c.wkid||b.toJson(c.toJson()),inSR:h.spatialReference.wkid||b.toJson(h.spatialReference.toJson()),geometries:b.toJson(this._encodeGeometries(a))}));
var p=s.getJsonType(h),t=this._projectHandler,u=this._errorHandler,B=new l(e._dfdCanceller);B._pendingDfd=r({url:this._url.path+"/project",content:m,callbackParamName:"callback",load:function(a,b){t(a,b,p,c,f,n,B)},error:function(a){u(a,n,B)}});return B},_projectHandler:function(a,b,c,e,f,d,l){try{var n=this._decodeGeometries(a,c,e);this._successHandler([n],"onProjectComplete",f,l)}catch(m){this._errorHandler(m,d,l)}},onProjectComplete:function(){},simplify:function(a,c,f){var n=a[0].spatialReference,
m=d.mixin({},this._url.query,{f:"json",sr:n.wkid?n.wkid:b.toJson(n.toJson()),geometries:b.toJson(this._encodeGeometries(a))}),h=s.getJsonType(a[0]),p=this._simplifyHandler,t=this._errorHandler,u=new l(e._dfdCanceller);u._pendingDfd=r({url:this._url.path+"/simplify",content:m,callbackParamName:"callback",load:function(a,b){p(a,b,h,n,c,f,u)},error:function(a){t(a,f,u)}});return u},_simplifyHandler:function(a,b,c,e,f,d,l){try{var n=this._decodeGeometries(a,c,e);this._successHandler([n],"onSimplifyComplete",
f,l)}catch(m){this._errorHandler(m,d,l)}},onSimplifyComplete:function(){},convexHull:function(a,c,f){var n=a[0].spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(n.toJson()),geometries:b.toJson(this._encodeGeometries(a))});var m=this._convexHullHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,n,c,f,p)},error:function(a){h(a,f,p)}});return p},_convexHullHandler:function(a,
b,c,e,f,d){try{var l=s.fromJson(a.geometry).setSpatialReference(c);this._successHandler([l],"onConvexHullComplete",e,d)}catch(n){this._errorHandler(n,f,d)}},onConvexHullComplete:function(){},union:function(a,c,f){var n=a[0].spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(n.toJson()),geometries:b.toJson(this._encodeGeometries(a))});var m=this._unionHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(a,b){m(a,b,n,c,f,p)},error:function(a){h(a,f,p)}});return p},_unionHandler:function(a,b,c,e,f,d){try{var l=s.fromJson(a.geometry).setSpatialReference(c);this._successHandler([l],"onUnionComplete",e,d)}catch(n){this._errorHandler(n,f,d)}},onUnionComplete:function(){},autoComplete:function(a,c,f,n){var m=a[0].spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(m.toJson()),polygons:b.toJson(this._encodeGeometries(a).geometries),polylines:b.toJson(this._encodeGeometries(c).geometries)});
var h=this._autoCompleteHandler,p=this._errorHandler,t=new l(e._dfdCanceller);t._pendingDfd=r({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,m,f,n,t)},error:function(a){p(a,n,t)}});return t},_autoCompleteHandler:function(a,b,c,e,f,d){try{var l=a.geometries;a=[];var n,m=l.length;for(n=0;n<m;n++)a[n]=new u({spatialReference:c,rings:l[n].rings});this._successHandler([a],"onAutoCompleteComplete",e,d)}catch(h){this._errorHandler(h,f,d)}},onAutoCompleteComplete:function(){},
reshape:function(a,c,f,n){var m=a.spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(m.toJson()),target:b.toJson({geometryType:s.getJsonType(a),geometry:a.toJson()}),reshaper:b.toJson(c.toJson())});var h=this._reshapeHandler,p=this._errorHandler,t=new l(e._dfdCanceller);t._pendingDfd=r({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,m,f,n,t)},error:function(a){p(a,n,t)}});return t},_reshapeHandler:function(a,b,c,e,f,d){try{var l=s.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([l],"onReshapeComplete",e,d)}catch(n){this._errorHandler(n,f,d)}},onReshapeComplete:function(){},cut:function(c,g,f,n){var m=c[0].spatialReference,h=a.map(c,function(a){return a.toJson()});c=d.mixin({},this._url.query,{f:"json",sr:b.toJson(m.toJson()),target:b.toJson({geometryType:s.getJsonType(c[0]),geometries:h}),cutter:b.toJson(g.toJson())});var p=this._cutHandler,t=this._errorHandler,u=new l(e._dfdCanceller);u._pendingDfd=r({url:this._url.path+"/cut",content:c,callbackParamName:"callback",
load:function(a,b){p(a,b,m,f,n,u)},error:function(a){t(a,n,u)}});return u},_cutHandler:function(b,c,e,f,d,l){try{var n=b.geometries,m={};m.cutIndexes=b.cutIndexes;m.geometries=[];a.forEach(n,function(a){m.geometries.push(s.fromJson(a).setSpatialReference(e))});this._successHandler([m],"onCutComplete",f,l)}catch(h){this._errorHandler(h,d,l)}},onCutComplete:function(){},intersect:function(a,c,f,n){var m=a[0].spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(m.toJson()),geometries:b.toJson(this._encodeGeometries(a)),
geometry:b.toJson({geometryType:s.getJsonType(c),geometry:c.toJson()})});var h=this._intersectHandler,p=this._errorHandler,t=new l(e._dfdCanceller);t._pendingDfd=r({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,m,f,n,t)},error:function(a){p(a,n,t)}});return t},_intersectHandler:function(b,c,e,f,d,l){try{var n=[];a.forEach(b.geometries,function(a){n.push(s.fromJson(a).setSpatialReference(e))});this._successHandler([n],"onIntersectComplete",f,l)}catch(m){this._errorHandler(m,
d,l)}},onIntersectComplete:function(){},difference:function(a,c,f,n){var m=a[0].spatialReference;a=d.mixin({},this._url.query,{f:"json",sr:b.toJson(m.toJson()),geometries:b.toJson(this._encodeGeometries(a)),geometry:b.toJson({geometryType:s.getJsonType(c),geometry:c.toJson()})});var h=this._differenceHandler,p=this._errorHandler,t=new l(e._dfdCanceller);t._pendingDfd=r({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,m,f,n,t)},error:function(a){p(a,
n,t)}});return t},_differenceHandler:function(b,c,e,f,d,l){try{var n=[];a.forEach(b.geometries,function(a){n.push(s.fromJson(a).setSpatialReference(e))});this._successHandler([n],"onDifferenceComplete",f,l)}catch(m){this._errorHandler(m,d,l)}},onDifferenceComplete:function(){},buffer:function(a,b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.outSpatialReference||a.geometries[0].spatialReference,m=this._bufferHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+
"/buffer",content:f,callbackParamName:"callback",load:function(a,k){m(a,k,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_bufferHandler:function(a,b,c,e,f,d){try{var l=a.geometries;a=[];var n,m=l.length;for(n=0;n<m;n++)a[n]=new u({spatialReference:c,rings:l[n].rings});this._successHandler([a],"onBufferComplete",e,d)}catch(h){this._errorHandler(h,f,d)}},onBufferComplete:function(){},areasAndLengths:function(a,b,c){a=d.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._areasAndLengthsHandler,
n=this._errorHandler,m=new l(e._dfdCanceller);m._pendingDfd=r({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,k){f(a,k,b,c,m)},error:function(a){n(a,c,m)}});return m},_areasAndLengthsHandler:function(a,b,c,e,f){try{this._successHandler([a],"onAreasAndLengthsComplete",c,f)}catch(d){this._errorHandler(d,e,f)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,c){a=d.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._lengthsHandler,n=this._errorHandler,
m=new l(e._dfdCanceller);m._pendingDfd=r({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,k){f(a,k,b,c,m)},error:function(a){n(a,c,m)}});return m},_lengthsHandler:function(a,b,c,e,f){try{this._successHandler([a],"onLengthsComplete",c,f)}catch(d){this._errorHandler(d,e,f)}},onLengthsComplete:function(){},labelPoints:function(c,g,f){var n=a.map(c,function(a){return a.toJson()}),m=c[0].spatialReference,n=d.mixin({},this._url.query,{f:"json",sr:m.wkid?m.wkid:b.toJson(m.toJson()),
polygons:b.toJson(n)}),h=this._labelPointsHandler,p=this._errorHandler,t=new l(e._dfdCanceller);t._pendingDfd=r({url:this._url.path+"/labelPoints",content:n,callbackParamName:"callback",load:function(a,b){h(a,b,c,m,g,f,t)},error:function(a){p(a,f,t)}});return t},_labelPointsHandler:function(b,c,e,f,d,n,l){try{var m=[];a.forEach(b.labelPoints,function(a){m.push(s.fromJson(a).setSpatialReference(f))});this._successHandler([m],"onLabelPointsComplete",d,l)}catch(h){this._errorHandler(h,n,l)}},onLabelPointsComplete:function(){},
relation:function(a,b,c){a=d.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._relationHandler,n=this._errorHandler,m=new l(e._dfdCanceller);m._pendingDfd=r({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,k){f(a,k,b,c,m)},error:function(a){n(a,c,m)}});return m},_relationHandler:function(a,b,c,e,f){try{this._successHandler([a.relations],"onRelationComplete",c,f)}catch(d){this._errorHandler(d,e,f)}},onRelationComplete:function(){},trimExtend:function(a,
b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.sr,m=this._trimExtendHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/trimExtend",content:f,callbackParamName:"callback",load:function(a,k){m(a,k,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_trimExtendHandler:function(a,b,c,e,f,d){try{var l=a.geometries;a=[];var m,h=l.length;for(m=0;m<h;m++)a[m]=new n({spatialReference:c,paths:l[m].paths});this._successHandler([a],"onTrimExtendComplete",
e,d)}catch(p){this._errorHandler(p,f,d)}},onTrimExtendComplete:function(){},densify:function(a,b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.geometries[0].spatialReference,m=this._densifyHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/densify",content:f,callbackParamName:"callback",load:function(a,e){m(a,e,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_densifyHandler:function(b,c,e,f,d,n){try{var l=[];a.forEach(b.geometries,function(a){l.push(s.fromJson(a).setSpatialReference(e))});
this._successHandler([l],"onDensifyComplete",f,n)}catch(m){this._errorHandler(m,d,n)}},onDensifyComplete:function(){},generalize:function(a,b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.geometries[0].spatialReference,m=this._generalizeHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/generalize",content:f,callbackParamName:"callback",load:function(a,e){m(a,e,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_generalizeHandler:function(b,
c,e,f,d,n){try{var l=[];a.forEach(b.geometries,function(a){l.push(s.fromJson(a).setSpatialReference(e))});this._successHandler([l],"onGeneralizeComplete",f,n)}catch(m){this._errorHandler(m,d,n)}},onGeneralizeComplete:function(){},offset:function(a,b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.geometries[0].spatialReference,m=this._offsetHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/offset",content:f,callbackParamName:"callback",load:function(a,
e){m(a,e,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_offsetHandler:function(b,c,e,f,d,n){try{var l=[];a.forEach(b.geometries,function(a){l.push(s.fromJson(a).setSpatialReference(e))});this._successHandler([l],"onOffsetComplete",f,n)}catch(m){this._errorHandler(m,d,n)}},onOffsetComplete:function(){},distance:function(a,b,c){var f=d.mixin({},this._url.query,{f:"json"},a.toJson()),n=a.geometry1.spatialReference,m=this._distanceHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=
r({url:this._url.path+"/distance",content:f,callbackParamName:"callback",load:function(a,e){m(a,e,n,b,c,p)},error:function(a){h(a,c,p)}});return p},_distanceHandler:function(a,b,c,e,f,d){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",e,d)}catch(n){this._errorHandler(n,f,d)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,c,f){var n={};d.isObject(a.sr)?n.sr=a.sr.wkid||b.toJson(a.sr.toJson()):n.sr=a.sr;n.coordinates=b.toJson(a.coordinates);n.conversionType=a.conversionType||
"MGRS";n.conversionMode=a.conversionMode;n.numOfDigits=a.numOfDigits;n.rounding=a.rounding;n.addSpaces=a.addSpaces;a=d.mixin({},this._url.query,{f:"json"},n);var m=this._toGeoCoordinateHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,c,f,p)},error:function(a){h(a,f,p)}});return p},_toGeoCoordinateHandler:function(a,b,c,e,f){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,f)}catch(d){this._errorHandler(d,e,f)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,c,f){var n={};d.isObject(a.sr)?n.sr=a.sr.wkid||b.toJson(a.sr.toJson()):n.sr=a.sr;n.strings=b.toJson(a.strings);n.conversionType=a.conversionType||"MGRS";n.conversionMode=a.conversionMode;a=d.mixin({},this._url.query,{f:"json"},n);var m=this._fromGeoCoordinateHandler,h=this._errorHandler,p=new l(e._dfdCanceller);p._pendingDfd=r({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,b){m(a,b,c,f,p)},error:function(a){h(a,f,p)}});return p},_fromGeoCoordinateHandler:function(a,b,c,e,f){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,f)}catch(d){this._errorHandler(d,e,f)}},onFromGeoCoordinateStringComplete:function(){}});d.mixin(h,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});m("extend-esri")&&d.setObject("tasks.GeometryService",h,p);return h})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(h,d,a,b,l,m){h=h(null,{declaredClass:"esri.layers.FeatureTemplate",
constructor:function(a){a&&d.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,a=a.prototype,this.prototype=new m(a.geometry,null,a.attributes))},toJson:function(){return l.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()})}});d.mixin(h,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",
TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});
a("extend-esri")&&d.setObject("layers.FeatureTemplate",h,b);return h})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(h,d){var a,b={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,
2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,
3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,
3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,
3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,
5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6210:0,6211:0,6316:0,6391:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,
25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,
32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,
103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,
103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,
103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,
103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2046>a;a++)b[a]=0;for(a=2056;2066>a;a++)b[a]=0;for(a=2067;2136>a;a++)b[a]=0;for(a=2137;2155>a;a++)b[a]=0;for(a=2161;2171>a;a++)b[a]=0;for(a=2172;2194>a;a++)b[a]=0;for(a=2195;2199>a;a++)b[a]=0;for(a=2200;2204>a;a++)b[a]=0;for(a=2205;2218>a;a++)b[a]=0;for(a=2222;2225>
a;a++)b[a]=1;for(a=2225;2251>a;a++)b[a]=2;for(a=2251;2254>a;a++)b[a]=1;for(a=2257;2265>a;a++)b[a]=2;for(a=2274;2280>a;a++)b[a]=2;for(a=2280;2283>a;a++)b[a]=1;for(a=2283;2290>a;a++)b[a]=2;for(a=2290;2293>a;a++)b[a]=0;for(a=2308;2314>a;a++)b[a]=0;for(a=2315;2463>a;a++)b[a]=0;for(a=2523;2867>a;a++)b[a]=0;for(a=2867;2870>a;a++)b[a]=1;for(a=2870;2889>a;a++)b[a]=2;for(a=2891;2896>a;a++)b[a]=2;for(a=2896;2899>a;a++)b[a]=1;for(a=2902;2909>a;a++)b[a]=2;for(a=2915;2921>a;a++)b[a]=2;for(a=2921;2924>a;a++)b[a]=
1;for(a=2924;2931>a;a++)b[a]=2;for(a=2931;2963>a;a++)b[a]=0;for(a=2964;2969>a;a++)b[a]=2;for(a=2969;2974>a;a++)b[a]=0;for(a=2975;2992>a;a++)b[a]=0;for(a=2995;3052>a;a++)b[a]=0;for(a=3054;3080>a;a++)b[a]=0;for(a=3081;3089>a;a++)b[a]=0;for(a=3092;3102>a;a++)b[a]=0;for(a=3106;3139>a;a++)b[a]=0;for(a=3146;3152>a;a++)b[a]=0;for(a=3153;3167>a;a++)b[a]=0;for(a=3168;3173>a;a++)b[a]=0;for(a=3174;3204>a;a++)b[a]=0;for(a=3294;3359>a;a++)b[a]=0;for(a=3367;3404>a;a++)b[a]=0;for(a=3408;3417>a;a++)b[a]=0;for(a=
3417;3439>a;a++)b[a]=2;for(a=3441;3447>a;a++)b[a]=2;for(a=3447;3451>a;a++)b[a]=0;for(a=3451;3460>a;a++)b[a]=2;for(a=3460;3479>a;a++)b[a]=0;for(a=3554;3560>a;a++)b[a]=0;for(a=3560;3571>a;a++)b[a]=2;for(a=3571;3582>a;a++)b[a]=0;for(a=3594;3598>a;a++)b[a]=0;for(a=3601;3605>a;a++)b[a]=0;for(a=3637;3640>a;a++)b[a]=0;for(a=3665;3668>a;a++)b[a]=0;for(a=3693;3696>a;a++)b[a]=0;for(a=3701;3728>a;a++)b[a]=0;for(a=3728;3740>a;a++)b[a]=2;for(a=3740;3752>a;a++)b[a]=0;for(a=3753;3761>a;a++)b[a]=2;for(a=3761;3774>
a;a++)b[a]=0;for(a=3775;3778>a;a++)b[a]=0;for(a=3779;3782>a;a++)b[a]=0;for(a=3783;3786>a;a++)b[a]=0;for(a=3788;3792>a;a++)b[a]=0;for(a=3797;3803>a;a++)b[a]=0;for(a=3814;3817>a;a++)b[a]=0;for(a=3825;3830>a;a++)b[a]=0;for(a=3832;3842>a;a++)b[a]=0;for(a=3844;3853>a;a++)b[a]=0;for(a=3873;3886>a;a++)b[a]=0;for(a=3890;3894>a;a++)b[a]=0;for(a=3907;3913>a;a++)b[a]=0;for(a=3942;3951>a;a++)b[a]=0;for(a=3968;3971>a;a++)b[a]=0;for(a=3973;3977>a;a++)b[a]=0;for(a=3986;3990>a;a++)b[a]=0;for(a=3994;3998>a;a++)b[a]=
0;for(a=4048;4052>a;a++)b[a]=0;for(a=4056;4064>a;a++)b[a]=0;for(a=4093;4097>a;a++)b[a]=0;for(a=4399;4414>a;a++)b[a]=2;for(a=4418;4434>a;a++)b[a]=2;for(a=4455;4458>a;a++)b[a]=2;for(a=4484;4490>a;a++)b[a]=0;for(a=4491;4555>a;a++)b[a]=0;for(a=4568;4590>a;a++)b[a]=0;for(a=4652;4657>a;a++)b[a]=0;for(a=4766;4801>a;a++)b[a]=0;for(a=5014;5017>a;a++)b[a]=0;for(a=5069;5073>a;a++)b[a]=0;for(a=5105;5131>a;a++)b[a]=0;for(a=5173;5189>a;a++)b[a]=0;for(a=5253;5260>a;a++)b[a]=0;for(a=5269;5276>a;a++)b[a]=0;for(a=
5292;5312>a;a++)b[a]=0;for(a=5329;5332>a;a++)b[a]=0;for(a=5343;5350>a;a++)b[a]=0;for(a=5355;5358>a;a++)b[a]=0;for(a=5387;5390>a;a++)b[a]=0;for(a=5459;5464>a;a++)b[a]=0;for(a=5479;5483>a;a++)b[a]=0;for(a=5518;5521>a;a++)b[a]=0;for(a=5530;5540>a;a++)b[a]=0;for(a=5550;5553>a;a++)b[a]=0;for(a=5562;5584>a;a++)b[a]=0;for(a=5623;5626>a;a++)b[a]=2;for(a=5631;5640>a;a++)b[a]=0;for(a=5649;5654>a;a++)b[a]=0;for(a=5663;5681>a;a++)b[a]=0;for(a=5682;5686>a;a++)b[a]=0;for(a=5875;5878>a;a++)b[a]=0;for(a=5921;5941>
a;a++)b[a]=0;for(a=6050;6126>a;a++)b[a]=0;for(a=6244;6276>a;a++)b[a]=0;for(a=6328;6349>a;a++)b[a]=0;for(a=6350;6355>a;a++)b[a]=0;for(a=20002;20033>a;a++)b[a]=0;for(a=20062;20093>a;a++)b[a]=0;for(a=20135;20139>a;a++)b[a]=0;for(a=20248;20259>a;a++)b[a]=0;for(a=20348;20359>a;a++)b[a]=0;for(a=20436;20441>a;a++)b[a]=0;for(a=20822;20825>a;a++)b[a]=0;for(a=20934;20937>a;a++)b[a]=0;for(a=21035;21038>a;a++)b[a]=0;for(a=21095;21098>a;a++)b[a]=0;for(a=21148;21151>a;a++)b[a]=0;for(a=21413;21424>a;a++)b[a]=0;
for(a=21473;21484>a;a++)b[a]=0;for(a=21780;21783>a;a++)b[a]=0;for(a=21891;21895>a;a++)b[a]=0;for(a=21896;21900>a;a++)b[a]=0;for(a=22171;22178>a;a++)b[a]=0;for(a=22181;22188>a;a++)b[a]=0;for(a=22191;22198>a;a++)b[a]=0;for(a=22234;22237>a;a++)b[a]=0;for(a=22521;22526>a;a++)b[a]=0;for(a=22991;22995>a;a++)b[a]=0;for(a=23028;23039>a;a++)b[a]=0;for(a=23830;23854>a;a++)b[a]=0;for(a=23866;23873>a;a++)b[a]=0;for(a=23877;23885>a;a++)b[a]=0;for(a=23886;23895>a;a++)b[a]=0;for(a=23946;23949>a;a++)b[a]=0;for(a=
24311;24314>a;a++)b[a]=0;for(a=24342;24348>a;a++)b[a]=0;for(a=24370;24375>a;a++)b[a]=10;for(a=24375;24382>a;a++)b[a]=0;for(a=24718;24722>a;a++)b[a]=0;for(a=24817;24822>a;a++)b[a]=0;for(a=24877;24883>a;a++)b[a]=0;for(a=24891;24894>a;a++)b[a]=0;for(a=25391;25396>a;a++)b[a]=0;for(a=25828;25839>a;a++)b[a]=0;for(a=26191;26196>a;a++)b[a]=0;for(a=26391;26394>a;a++)b[a]=0;for(a=26701;26723>a;a++)b[a]=0;for(a=26729;26800>a;a++)b[a]=2;for(a=26801;26804>a;a++)b[a]=2;for(a=26811;26814>a;a++)b[a]=2;for(a=26847;26871>
a;a++)b[a]=2;for(a=26891;26900>a;a++)b[a]=0;for(a=26901;26924>a;a++)b[a]=0;for(a=26929;26947>a;a++)b[a]=0;for(a=26948;26999>a;a++)b[a]=0;for(a=27037;27041>a;a++)b[a]=0;for(a=27205;27233>a;a++)b[a]=0;for(a=27258;27261>a;a++)b[a]=0;for(a=27391;27399>a;a++)b[a]=0;for(a=27561;27565>a;a++)b[a]=0;for(a=27571;27575>a;a++)b[a]=0;for(a=27581;27585>a;a++)b[a]=0;for(a=27591;27595>a;a++)b[a]=0;for(a=28191;28194>a;a++)b[a]=0;for(a=28348;28359>a;a++)b[a]=0;for(a=28402;28433>a;a++)b[a]=0;for(a=28462;28493>a;a++)b[a]=
0;for(a=29118;29123>a;a++)b[a]=0;for(a=29168;29173>a;a++)b[a]=0;for(a=29177;29186>a;a++)b[a]=0;for(a=29187;29196>a;a++)b[a]=0;for(a=29900;29904>a;a++)b[a]=0;for(a=30161;30180>a;a++)b[a]=0;for(a=30491;30495>a;a++)b[a]=0;for(a=30729;30733>a;a++)b[a]=0;for(a=31251;31260>a;a++)b[a]=0;for(a=31265;31269>a;a++)b[a]=0;for(a=31275;31280>a;a++)b[a]=0;for(a=31281;31298>a;a++)b[a]=0;for(a=31461;31470>a;a++)b[a]=0;for(a=31491;31496>a;a++)b[a]=0;for(a=31917;31923>a;a++)b[a]=0;for(a=31965;32001>a;a++)b[a]=0;for(a=
32001;32004>a;a++)b[a]=2;for(a=32005;32032>a;a++)b[a]=2;for(a=32033;32061>a;a++)b[a]=2;for(a=32064;32068>a;a++)b[a]=2;for(a=32074;32078>a;a++)b[a]=2;for(a=32081;32087>a;a++)b[a]=0;for(a=32107;32131>a;a++)b[a]=0;for(a=32133;32159>a;a++)b[a]=0;for(a=32164;32168>a;a++)b[a]=2;for(a=32180;32200>a;a++)b[a]=0;for(a=32201;32261>a;a++)b[a]=0;for(a=32301;32361>a;a++)b[a]=0;for(a=32601;32663>a;a++)b[a]=0;for(a=32664;32668>a;a++)b[a]=2;for(a=32701;32762>a;a++)b[a]=0;for(a=53001;53005>a;a++)b[a]=0;for(a=53008;53020>
a;a++)b[a]=0;for(a=53021;53033>a;a++)b[a]=0;for(a=53042;53047>a;a++)b[a]=0;for(a=54001;54005>a;a++)b[a]=0;for(a=54008;54020>a;a++)b[a]=0;for(a=54021;54033>a;a++)b[a]=0;for(a=54042;54047>a;a++)b[a]=0;for(a=54048;54054>a;a++)b[a]=0;for(a=102001;102041>a;a++)b[a]=0;for(a=102042;102064>a;a++)b[a]=0;for(a=102065;102068>a;a++)b[a]=0;for(a=102070;102118>a;a++)b[a]=0;for(a=102122;102217>a;a++)b[a]=0;for(a=102221;102378>a;a++)b[a]=0;for(a=102382;102389>a;a++)b[a]=0;for(a=102389;102399>a;a++)b[a]=2;for(a=102401;102445>
a;a++)b[a]=0;for(a=102445;102448>a;a++)b[a]=2;for(a=102450;102453>a;a++)b[a]=0;for(a=102461;102469>a;a++)b[a]=2;for(a=102469;102497>a;a++)b[a]=0;for(a=102500;102520>a;a++)b[a]=1;for(a=102520;102525>a;a++)b[a]=0;for(a=102525;102530>a;a++)b[a]=2;for(a=102530;102550>a;a++)b[a]=0;for(a=102570;102589>a;a++)b[a]=0;for(a=102590;102599>a;a++)b[a]=0;for(a=102601;102604>a;a++)b[a]=0;for(a=102605;102629>a;a++)b[a]=0;for(a=102629;102647>a;a++)b[a]=2;for(a=102648;102701>a;a++)b[a]=2;for(a=102701;102704>a;a++)b[a]=
0;for(a=102707;102731>a;a++)b[a]=2;for(a=102733;102759>a;a++)b[a]=2;for(a=102767;102799>a;a++)b[a]=0;for(a=102962;102970>a;a++)b[a]=0;for(a=102971;102974>a;a++)b[a]=0;for(a=102975;102990>a;a++)b[a]=0;for(a=102990;102993>a;a++)b[a]=1;for(a=102997;103003>a;a++)b[a]=0;for(a=103003;103009>a;a++)b[a]=2;for(a=103009;103012>a;a++)b[a]=0;for(a=103012;103015>a;a++)b[a]=2;for(a=103019;103022>a;a++)b[a]=0;for(a=103022;103025>a;a++)b[a]=2;for(a=103029;103032>a;a++)b[a]=0;for(a=103032;103035>a;a++)b[a]=2;for(a=
103065;103069>a;a++)b[a]=0;for(a=103074;103077>a;a++)b[a]=0;for(a=103077;103080>a;a++)b[a]=1;for(a=103080;103083>a;a++)b[a]=0;for(a=103083;103086>a;a++)b[a]=2;for(a=103090;103094>a;a++)b[a]=0;for(a=103097;103100>a;a++)b[a]=0;for(a=103100;103103>a;a++)b[a]=2;for(a=103107;103110>a;a++)b[a]=0;for(a=103110;103113>a;a++)b[a]=2;for(a=103113;103117>a;a++)b[a]=0;for(a=103117;103121>a;a++)b[a]=2;for(a=103153;103158>a;a++)b[a]=0;for(a=103158;103163>a;a++)b[a]=2;for(a=103163;103166>a;a++)b[a]=0;for(a=103166;103169>
a;a++)b[a]=1;for(a=103169;103172>a;a++)b[a]=2;for(a=103186;103189>a;a++)b[a]=0;for(a=103189;103192>a;a++)b[a]=2;for(a=103192;103196>a;a++)b[a]=0;for(a=103196;103200>a;a++)b[a]=2;for(a=103200;103225>a;a++)b[a]=0;for(a=103225;103228>a;a++)b[a]=1;for(a=103232;103238>a;a++)b[a]=0;for(a=103238;103244>a;a++)b[a]=2;for(a=103244;103247>a;a++)b[a]=0;for(a=103247;103250>a;a++)b[a]=2;for(a=103254;103257>a;a++)b[a]=0;for(a=103257;103260>a;a++)b[a]=2;for(a=103264;103267>a;a++)b[a]=0;for(a=103267;103270>a;a++)b[a]=
2;for(a=103300;103376>a;a++)b[a]=0;for(a=103381;103384>a;a++)b[a]=0;for(a=103384;103387>a;a++)b[a]=1;for(a=103387;103390>a;a++)b[a]=0;for(a=103390;103393>a;a++)b[a]=2;for(a=103397;103400>a;a++)b[a]=0;for(a=103400;103472>a;a++)b[a]=2;for(a=103476;103479>a;a++)b[a]=0;for(a=103479;103482>a;a++)b[a]=2;for(a=103486;103489>a;a++)b[a]=0;for(a=103489;103492>a;a++)b[a]=2;for(a=103492;103496>a;a++)b[a]=0;for(a=103496;103500>a;a++)b[a]=2;for(a=103528;103544>a;a++)b[a]=0;for(a=103544;103549>a;a++)b[a]=2;for(a=
103549;103552>a;a++)b[a]=0;for(a=103552;103555>a;a++)b[a]=1;for(a=103555;103558>a;a++)b[a]=2;for(a=103558;103561>a;a++)b[a]=0;for(a=103571;103574>a;a++)b[a]=0;for(a=103574;103577>a;a++)b[a]=2;for(a=103577;103581>a;a++)b[a]=0;for(a=103581;103584>a;a++)b[a]=2;for(a=103600;103695>a;a++)b[a]=0;for(a=103700;103794>a;a++)b[a]=2;for(a=103794;103872>a;a++)b[a]=0;for(a=103900;103972>a;a++)b[a]=2;h("extend-esri")&&(d.WKIDUnitConversion=b);return b})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(a){a&&d.mixin(this,a)},toJson:function(){return l.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});a("extend-esri")&&d.setObject("layers.LayerTimeOptions",h,b);return h})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),
function(h,d,a,b,l,m){function p(){d.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}p.prototype={addPlugin:function(a,b){var f=this,c=this._plugins,d=new l;try{h([a],function(l){a in c?d.resolve({id:c[a].declaredId||a.replace(/\//g,".")}):(c[a]=l,m(l.add(f,b),function(){var b={id:l.declaredId||a.replace(/\//g,".")};f.emit("plugin-add",b);d.resolve(b)},function(a){d.reject(a)}))})}catch(p){d.reject(p)}return d.promise},removePlugin:function(a){if(a in this._plugins){var b=
this._plugins[a];b.remove(this);delete this._plugins[a];this.emit("plugin-remove",{id:b.declaredId||a.replace(/\//g,".")})}},_pluginsHandler:function(){var b=this;a.some(arguments,function(a){if(a&&a.plugins&&a.plugins instanceof Array){a=a.plugins;var f,c,d;for(d=0;d<a.length;d++)f=a[d],c=f instanceof Object?f.id:f,b.addPlugin(c,f.options);return!0}})}};return p})},"esri/dijit/analysis/Analysis":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/layout/AccordionContainer dijit/TitlePane dojox/widget/TitleGroup ../../kernel ./AnalysisToolItem ./utils dojo/i18n!../../nls/jsapi dojo/text!./templates/Analysis.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I){h=d([s,k,g,q,w],{declaredClass:"esri.dijit.analysis.Analysis",templateString:I,widgetsInTemplate:!0,i18n:null,helpFileName:"Analysis",constructor:function(a,b){this._pbConnects=[]},postMixInProperties:function(){this.inherited(arguments);this.i18n={};a.mixin(this.i18n,y.common);a.mixin(this.i18n,y.tocPanel);a.mixin(this.i18n,y.analysisTools)},startup:function(){this.inherited(arguments);this._titlePanes=[this._summarizeTools,this._locationTools,
this._geoenrichTools,this._analyzePatTools,this._proximityTools,this._managedataTools];b.forEach(this._titlePanes,function(a){c.set(a.titleNode,"innerHTML","\x3cspan class\x3d'esriFloatTrailing helpIcon' esriHelpTopic\x3d'"+(a.get("data-esrihelptopic")?a.get("data-esrihelptopic"):a.get("data-esriHelpTopic"))+"' data-dojo-attach-point\x3d'_helpIconNode'\x3e\x3c/span\x3e"+a.titleNode.innerHTML)},this);this.set("summarizeTools");this.set("locationTools");this.set("geoenrichTools");this.set("analyzePatterns");
this.set("proximityTools");this.set("manageDataTools");this._leftAccordion.startup();b.forEach(this._titlePanes,function(a){a.startup()});D.initHelpLinks(this.domNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},_connect:function(a,b,c){b=l.connect(a,b,c);b._nodeId=a.id;this._pbConnects.push(b)},_setSummarizeToolsAttr:function(){var b=n.create("div"),c=new B({name:this.i18n.aggregatePoints,helpTopic:"AggregatePointsTool",toolIcon:"aggregateIcon"},
n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.summarizeNearby,helpTopic:"SummarizeNearbyTool",toolIcon:"sumNearbyIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.summarizeWithin,helpTopic:"SummarizeWithinTool",toolIcon:"sumWithinIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,
"onToolSelect",a.hitch(this,"onToolSelect"));this._summarizeTools.set("content",b)},_setLocationToolsAttr:function(){var b=n.create("div"),c=new B({name:this.i18n.findExistingLocations,helpTopic:"FindExistingLocationsTool",toolIcon:"findLocationsIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.deriveNewLocations,helpTopic:"DeriveNewLocationsTool",toolIcon:"findNewLocationsIcon"},n.create("div",null,
b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.findSimilarLocations,helpTopic:"FindSimilarLocationsTool",toolIcon:"findSimilarLocationsIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.createViewshed,helpTopic:"CreateViewshedTool",toolIcon:"createViewshedIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,
"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.createWatershed,helpTopic:"CreateWatershedsTool",toolIcon:"createWatershedIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.traceDownstream,helpTopic:"TraceDownstreamTool",toolIcon:"traceDownstreamIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));this._locationTools.set("content",
b)},_setGeoenrichToolsAttr:function(){var b=n.create("div"),c=new B({name:this.i18n.enrichLayer,helpTopic:"EnrichLayerTool",toolIcon:"geoenrichLayerIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));this._geoenrichTools.set("content",b)},_setProximityToolsAttr:function(){var b=n.create("div"),c=new B({name:this.i18n.createBuffers,helpTopic:"CreateBuffersTool",toolIcon:"buffersIcon"},n.create("div",null,b));this._connect(c,"onToolSelect",
a.hitch(this,"onToolSelect"));c.set("showComingSoonLabel",!1);c=new B({name:this.i18n.createDriveTimeAreas,helpTopic:"CreateDriveTimeAreasTool",toolIcon:"driveIcon"},n.create("div",null,b));f.set(c.optionsDiv,"margin-top","0");c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.findNearest,helpTopic:"FindNearestTool",toolIcon:"findClosestFacilityIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",
a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.planRoutes,helpTopic:"PlanRoutesTool",toolIcon:"planRoutesIcon"},n.create("div",null,b));f.set(c.optionsDiv,"margin-top","0");c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.connectOriginsToDestinations,helpTopic:"ConnectOriginsToDestinationsTool",toolIcon:"connectODIcon"},n.create("div",null,b));f.set(c.optionsDiv,"margin-top","0");c.set("showComingSoonLabel",!1);this._connect(c,
"onToolSelect",a.hitch(this,"onToolSelect"));this._proximityTools.set("content",b)},_setAnalyzePatternsAttr:function(){var b,c;b=n.create("div");c=new B({name:this.i18n.calculateDensity,helpTopic:"CalculateDensityTool",toolIcon:"createDensitySurfaceIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.findHotSpots,helpTopic:"FindHotSpotsTool",toolIcon:"findHotSpotsIcon"},n.create("div",null,b));c.set("showComingSoonLabel",
!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.interpolatePoints,helpTopic:"InterpolatePointsTool",toolIcon:"createInterpolatedSurfaceIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));this._analyzePatTools.set("content",b)},_setInterpolateToolsAttr:function(){var a;a=n.create("div");new B({name:this.i18n.createInterpolatedSurface,helpTopic:"SummarizeWithinTool",toolIcon:"createInterpolatedSurfaceIcon"},
n.create("div",null,a));this._interpolateTools.set("content",a)},_setManageDataToolsAttr:function(){var b,c;b=n.create("div");c=new B({name:this.i18n.dissolveBoundaries,helpTopic:"DissolveBoundariesTool",toolIcon:"dissolveBoundariesIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.extractData,helpTopic:"ExtractDataTool",toolIcon:"extractDataIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);
this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.mergeLayers,helpTopic:"MergeLayersTool",toolIcon:"mergeLayersIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));c=new B({name:this.i18n.overlayLayers,helpTopic:"OverlayLayersTool",toolIcon:"overlayLayersIcon"},n.create("div",null,b));c.set("showComingSoonLabel",!1);this._connect(c,"onToolSelect",a.hitch(this,"onToolSelect"));this._managedataTools.set("content",
b)},_getSelectedCategoryAttr:function(){return b.filter(this._titlePanes,function(a,b){return a.open})[0].get("data-esrihelptopic")},_getSelectedPaneAttr:function(){return b.filter(this._titlePanes,function(a,b){return a.open})[0]},_setSelectedCategoryAttr:function(a){console.log("setting",a);var c;b.forEach(this._titlePanes,function(b){c=b.get("data-esrihelptopic");c===a&&b.set("open",!0)},this)},hide:function(a){var b=u("div[data-esrihelptopic \x3d'"+a+"']");0===b.length&&(b=u("a[esrihelptopic \x3d'"+
a+"']"));0<b.length&&b.forEach(function(a){a&&v.getEnclosingWidget(a)&&f.set(v.getEnclosingWidget(a).domNode,"display","none")})},disable:function(a,c){var e=u("div[data-esrihelptopic \x3d'"+a+"']");0===e.length&&(e=u("a[esrihelptopic \x3d'"+a+"']"));0<e.length&&e.forEach(function(a){if(a&&v.getEnclosingWidget(a)){var e=v.getEnclosingWidget(a);e.set("showComingSoonLabel",c);f.set(e.optionsDiv,"display","none");c&&b.forEach(this._pbConnects,function(a){a._nodeId===e.id&&l.disconnect(a)},this)}},this)},
onToolSelect:function(a){}});p("extend-esri")&&a.setObject("dijit.analysis.Analysis",h,E);return h})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(h,d,a){return h("dijit.form.DateTextBox",a,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:d,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s){d=d("dijit.TitlePane",[u,n,c],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:s.defaultDuration,baseClass:"dijitTitlePane",templateString:t,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);a.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;this._wipeIn=p.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=p.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){h.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(b.remove(this.focusNode,"aria-controls"),b.remove(this.focusNode,
"tabIndex"),b.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){!this.open||!this._wipeOut||"playing"==this._wipeOut.status()?this.inherited(arguments):(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),m.setMarginBox(this.wipeNode,{h:m.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display="")},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");l.replace(a,this._titleBarClass,b||"");l.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(b||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==f.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(a){e.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}});r("dojo-bidi")&&d.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));b.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return d})},"esri/dijit/geoenrichment/Grid":function(){define(["../../declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-construct","dijit/layout/_LayoutWidget"],function(h,d,a,b,l){var m=h("esri.dijit.geoenrichment.Grid",[l],{_placeholder:null,layout:function(){var l=this.getChildren(),h=[],e,f,c;for(e=0;e<this.rows.length;e++)h.push(0);d.add(this.domNode,"Grid_Measure");var n=[];for(e=0;e<l.length;e++){f=l[e];c=f.row;f=f.domNode;f.style.position=
"absolute";d.add(f,"GridCell_Measure");var u=f.scrollHeight;d.remove(f,"GridCell_Measure");f=u;n.push(f);f>h[c]&&(h[c]=f)}c=a.getContentBox(this.domNode).h;d.remove(this.domNode,"Grid_Measure");e=this.rows;for(f=n=0;f<h.length;f++)switch(e[f]){case m.AUTO:c-=h[f];break;case m.STRETCH:case m.STACK:n++}if(1<n)throw Error("Multiple rows with flexible heights are not supported");n=[0];for(f=0;f<h.length;f++){var t;switch(e[f]){case m.AUTO:t=h[f];break;case m.STRETCH:t=c;break;case m.STACK:t=Math.min(c,
h[f])}n.push(n[f]+t)}for(e=0;e<l.length;e++)f=l[e],c=f.row,h=n[c+1]-n[c],t=f.domNode.style,t.top=n[c]+"px",t.height=h+"px";this._placeholder||(this._placeholder=b.create("div",null,this.domNode));this._placeholder.style.height=n[n.length-1]+"px"}});m.AUTO="auto";m.STRETCH="stretch";m.STACK="stack";return m})},"arcgisonline/map/dijit/AnalysisCategory":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/layout/ContentPane,esri/dijit/analysis/Analysis"],function(h,
d,a){d.provide("arcgisonline.map.dijit.AnalysisCategory");d.require("dijit._Widget");d.require("dijit._Templated");d.require("dijit.layout.ContentPane");d.require("esri.dijit.analysis.Analysis");d.declare("arcgisonline.map.dijit.AnalysisCategory",[h._Widget,h._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoType\x3d"dijit.layout.BorderContainer" region\x3d"top"\x3e\r\n  \x3cdiv dojoAttachPoint\x3d"analysisContentHeader" dojoType\x3d"dijit.layout.ContentPane" region\x3d"top" class\x3d"panel panel_left"\x3e\r\n    \x3ctable class\x3d"esriFormTable" \x3e \r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3cdiv class\x3d"iconPerformAnalysis32"\x3e\x3c/div\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\x3cdiv dojoAttachPoint\x3d"analysisContentTitle" class\x3d"panelSubHeader analysisTitle" style\x3d"padding:0.5em;"\x3e${i18n.performAnalysis}\x3c/div\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n            \x3ca href\x3d"#" dojoAttachPoint\x3d"_closeBtn" dojoAttachEvent\x3d"onclick:_onClose" title\x3d"${i18n.close}" class\x3d"panel panel_close panel_collapse close_icon"\x3e\r\n            \x3cimg src\x3d"images/close.gif" border\x3d"0"/\x3e\x3c/A\x3e\r\n          \x3c/div\x3e                \r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoAttachPoint\x3d"analysisContentPane"   dojoType\x3d"dijit.layout.ContentPane" region\x3d"center" style\x3d"overflow-x:hidden;overflow-y:auto;position:relative;" class\x3d"scrollPane"\x3e\r\n     \x3cdiv dojoAttachPoint\x3d"aggregateCtr" style\x3d"width:100%"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n   \x3cdiv dojoAttachPoint\x3d"analysisContentFooter" id\x3d"analysisContentFooter" dojoType\x3d"dijit.layout.ContentPane" region\x3d"bottom" style\x3d"height:40px; padding: 0 5px 0 5px;"\x3e \r\n      \x3cdiv class\x3d"footer" id\x3d"analysisSiteFooter" dojoAttachPoint\x3d"analysisSiteFooter" dojotype\x3d"arcgisonline.sharing.dijit.SiteFooterMap" style\x3d"white-space:normal;"\x3e\x3c/div\x3e\r\n   \x3c/div\x3e\r\n\x3c/div\x3e',
i18n:null,analysisTool:null,featureLayers:null,analysisLayer:null,constructor:function(a,d){null!=a&&(a.featureLayers&&(this.featureLayers=a.featurelayers),a.containerNode&&(this.container=a.containerNode),a.analysisLayer&&(this.analysisLayer=a.analysisLayer),a.selectedCategory&&(this.selectedCategory=a.selectedCategory),a.analysisType&&(this.analysisType=a.analysisType),this._pbConnects=[])},postMixInProperties:function(){this.inherited(arguments);this.i18n={};d.mixin(this.i18n,d.i18n.getLocalization("arcgisonline",
"arcgisonline").common);d.mixin(this.i18n,d.i18n.getLocalization("arcgisonline","arcgisonline").tocPanel)},postCreate:function(){this.inherited(arguments);this.container.addChild(h.byId(this.id))},startup:function(){this.inherited(arguments);this.analysisTool=new esri.dijit.analysis.Analysis({},this.aggregateCtr);this.analysisTool.startup();this.selectedCategory&&this.analysisTool.set("selectedCategory",this.selectedCategory);arcgisonline.map.dijit.toc.analysis.canPerformDriveAnalysis()||this.analysisTool.hide("CreateDriveTimeAreasTool");
arcgisonline.map.dijit.toc.analysis.canPerformPlanRoutesAnalysis()||this.analysisTool.hide("PlanRoutesTool");arcgisonline.map.dijit.toc.analysis.canPerformODAnalysis()||this.analysisTool.hide("ConnectOriginsToDestinationsTool");arcgisonline.map.dijit.toc.analysis.canPerformGeoEnrichment()||this.analysisTool.hide("EnrichLocationsCategory");arcgisonline.map.dijit.toc.analysis.canPerformElevationAnalysis()||this.analysisTool.hide("CreateViewshedTool");arcgisonline.map.dijit.toc.analysis.canPerformHydroAnalysis()||
(this.analysisTool.hide("TraceDownstreamTool"),this.analysisTool.hide("CreateWatershedsTool"));this.analysisTool.disable("ExtractDataTool",0===this.featureLayers.length&&!this.analysisLayer);this.analysisTool.disable("MergeLayersTool",2>this.featureLayers.length&&!this.analysisLayer);this._loadConnections();this.adjustHeight()},destroy:function(){this.inherited(arguments);d.forEach(this._pbConnects,d.disconnect);delete this._pbConnects},clear:function(){d.query(".esriAnalyisHelpWindow").forEach(function(a){h.popup.close(h.byNode(a))})},
_loadConnections:function(){this._connect(h.byId("leftContentPanel"),"resize",d.hitch(this,this.adjustHeight));this._connect(this.analysisTool,"onToolSelect",d.hitch(this,this._handleToolSelect))},_connect:function(a,l,m){this._pbConnects.push(d.connect(a,l,m))},_onClose:function(a){a.preventDefault();this.analysisContentPane.scrollTop=0;arcgisonline.map.leftPanel.openLeftTOCPanel()},adjustHeight:function(a){if(!("undefined"==typeof leftPanel||"analysisStack"!=leftPanel.visibleStack)){a=d.coords(d.byId("leftPanelDiv")).h;
var l=d.coords(this.analysisContentHeader.domNode).h,m=d.coords(d.byId("analysisSiteFooter_links")).h+10;d.style(d.byId("analysisContentFooter"),"height",m+"px");d.style(this.analysisContentPane.domNode,"height",a-(l+m)+"px")}},_handleToolSelect:function(a){var d={};d.featureLayers=this.featureLayers;a.helpTopic=a.helpTopic.replace("Tool","");a.helpTopic=a.helpTopic.replace("-","");d.toolName=a.helpTopic;d.analysisLayer=this.analysisLayer;this.analysisType&&(d.analysisType=this.analysisType);arcgisonline.map.leftPanel.openAnalysisToolPanel(d)}})})},
"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$){var ba=w.defaults,Y=a(C,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],
"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(a,b){this._preventInit||this._initFeatureLayer(a,b)},_initFeatureLayer:function(a,b){this.i18n=$;b=b||{};this.showLabels=null!=b.showLabels?b.showLabels:!0;
this._outFields=b.outFields;this._defnExpr=b.definitionExpression;this._loadCallback=b.loadCallback;var c=b._usePatch;this._usePatch=null===c||void 0===c?!0:c;this._trackIdField=b.trackIdField;this.objectIdField=b.objectIdField;this._maxOffset=null!=b.maxAllowableOffset?b.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=b.quantize?b.quantize:!0;this._optEditable=b.editable;this._optAutoGen=b.autoGeneralize;this.editSummaryCallback=b.editSummaryCallback;this.userId=b.userId;this.userIsAdmin=
b.userIsAdmin;this.useMapTime=b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0;this.source=b.source;this.gdbVersion=b.gdbVersion;this.orderByFields=b.orderByFields;this.maxPointCountForAuto=null!=b.maxPointCountForAuto?b.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=b.maxRecordCountForAuto?b.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=b.maxVertexCountForAuto?b.maxVertexCountForAuto:this.maxVertexCountForAuto;this.generalizeForScale=
null!=b.generalizeForScale?b.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=b.queryPagination?b.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=b.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var e=Y,c=this.mode=g.isDefined(b.mode)?b.mode:e.MODE_ONDEMAND;this._isStream&&(this.mode=c=e.MODE_STREAM);switch(c){case e.MODE_SNAPSHOT:this.currentMode=
e.MODE_SNAPSHOT;this._mode=new T(this);this._isSnapshot=!0;break;case e.MODE_ONDEMAND:case e.MODE_AUTO:this.currentMode=e.MODE_ONDEMAND;this._tileWidth=b.tileWidth||512;this._tileHeight=b.tileHeight||512;this._mode=new X(this);this.latticeTiling=b.latticeTiling;break;case e.MODE_SELECTION:this.currentMode=e.MODE_SELECTION;this._mode=new aa(this);this._isSelOnly=!0;break;case e.MODE_STREAM:this.currentMode=e.MODE_STREAM,this._mode=new U(this),this._isStream=!0}this._initLayer=l.hitch(this,this._initLayer);
this._selectHandler=l.hitch(this,this._selectHandler);this._editable=!1;if(l.isObject(a)&&a.layerDefinition)return this._collection=!0,this.mode=this._isStream?e.MODE_STREAM:e.MODE_SNAPSHOT,this._initLayer(a),this;this._task=new H(this.url,{source:this.source,gdbVersion:this.gdbVersion});c=this._url.path;this._fserver=!1;-1!==c.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===e.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(e=b.resourceInfo)?this._initLayer(e):(this.source&&
(e={source:this.source.toJson()},this._url.query=l.mixin(this._url.query,{layer:p.toJson(e)})),this.gdbVersion&&(this._url.query=l.mixin(this._url.query,{gdbVersion:this.gdbVersion})),q({url:c,content:l.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents()},_initLayer:function(a,b){if(a||b){this._json=a;this._findCredential();if(this.credential&&this.credential.ssl||a&&a._ssl)this._useSSL(),this._task._useSSL();
this.version=a.currentVersion;this.version||(this.version="capabilities"in a||"drawingInfo"in a||"hasAttachments"in a||"htmlPopupType"in a||"relationships"in a||"timeInfo"in a||"typeIdField"in a||"types"in a?10:9.3);this._collection&&(this._isStream||(this.currentMode=Y.MODE_SNAPSHOT,this._mode=new T(this)),this._isSnapshot=!0,this._featureSet=a.featureSet,this._nextId=a.nextObjectId,a=a.layerDefinition);this.geometryType=a.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===
this.geometryType&&(this.multipatchOption="xyFootprint");if(a.hasOwnProperty("capabilities")){var c=this.capabilities=a.capabilities;c&&-1!==c.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);g.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=p.toJson(this._json);if(this.isEditable())this._setMaxOffset(null);
else if(this.mode!==Y.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))this._autoGeneralize=g.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Y.MODE_ONDEMAND||this.mode===Y.MODE_AUTO,delete this._optAutoGen;var c=a.effectiveMinScale||a.minScale,e=a.effectiveMaxScale||a.maxScale;!this._hasMin&&c&&this.setMinScale(c);!this._hasMax&&e&&this.setMaxScale(e);this.layerId=a.id;this.name=a.name;this.description=a.description;
this.copyright=a.copyrightText;this.type=a.type;this.displayField=a.displayField;this.defaultDefinitionExpression=a.definitionExpression;this.fullExtent=new F(a.extent);this.initialExtent=new F(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new z(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=a.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=a.hasM||!1;
this.hasZ=a.hasZ||!1;this.indexedFields=a.indexedFields;this.maxRecordCount=a.maxRecordCount;this.canModifyLayer=a.canModifyLayer;this.supportsStatistics=a.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:a.supportsAdvancedQueries;this.supportsCalculate=a.supportsCalculate;this.supportsAttachmentsByUploadId=a.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=a.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
a.hasLabels;this.canScaleSymbols=a.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=a.supportsRollbackOnFailure;this.syncCanReturnChanges=a.syncCanReturnChanges;this.isDataVersioned=a.isDataVersioned;this.editFieldsInfo=a.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=a.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=a.relationships;
this.allowGeometryUpdates=g.isDefined(a.allowGeometryUpdates)?a.allowGeometryUpdates:!0;this.advancedQueryCapabilities=a.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;for(var k=this.fields=[],e=a.fields,c=0;c<e.length;c++)k.push(new O(e[c]));if(!this.objectIdField){this.objectIdField=a.objectIdField;if(!this.objectIdField){e=
a.fields;for(c=0;c<e.length;c++)if(k=e[c],"esriFieldTypeOID"===k.type){this.objectIdField=k.name;break}}!this.objectIdField&&!this._isStream&&console.debug("esri.layers.FeatureLayer: "+g.substitute({url:this.url},"objectIdField is not set [url: ${url}]"))}if(!g.isDefined(this._nextId)){e=this.objectIdField;k=-1;if(this._collection&&e)for(var d=(c=this._featureSet)&&c.features,n=d?d.length:0,h,c=0;c<n;c++)h=(h=d[c].attributes)&&h[e],h>k&&(k=h);this._nextId=k+1}this.globalIdField=a.globalIdField;if(c=
this.typeIdField=a.typeIdField)if(c=!this._getField(c)&&this._getField(c,!0))this.typeIdField=c.name;this.visibilityField=a.visibilityField;if(e=a.defaultSymbol)this.defaultSymbol=B.fromJson(e);var q=this.types=[],t=a.types,v,P,k=(c=this.editFieldsInfo)&&c.creatorField,d=c&&c.editorField;h=k||d;n=[];if(t)for(c=0;c<t.length;c++)v=new W(t[c]),P=v.templates,h&&(P&&P.length)&&(n=n.concat(P)),q.push(v);t=a.templates;v=this.templates=[];if(t)for(c=0;c<t.length;c++)q=new S(t[c]),h&&n.push(q),v.push(q);for(c=
0;c<n.length;c++)if(h=l.getObject("prototype.attributes",!1,n[c]))k&&delete h[k],d&&delete h[d];if(c=a.timeInfo)this.timeInfo=new R(c),this._startTimeField=c.startTimeField,this._endTimeField=c.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?c.trackIdField=this._trackIdField:this._trackIdField=c.trackIdField;this.hasAttachments=!this._collection&&a.hasAttachments?!0:!1;this.htmlPopupType=a.htmlPopupType;var c=a.drawingInfo,r;if((k=c&&c.labelingInfo)&&
!this.labelingInfo)this.labelingInfo=m.map(k,function(a){return new Q(a)}),this._fixLabelExpr();if(!this.renderer)if(c&&c.renderer){if(r=c.renderer,this.setRenderer(I.fromJson(r)),"classBreaks"===r.type&&this.renderer.setMaxInclusive(!0),!this._collection){var s=r.type,e=[];r=this.renderer;switch(s){case "simple":e.push(r.symbol);break;case "uniqueValue":case "classBreaks":e.push(r.defaultSymbol),e=e.concat(m.map(r.infos,function(a){return a.symbol}))}var e=m.filter(e,g.isDefined),u=this._url.path+
"/images/",w=this._getToken();m.forEach(e,function(a){var b=a.url;b&&(-1===b.search(/https?\:/)&&-1===b.indexOf("data:")&&(a.url=u+b),w&&-1!==a.url.search(/https?\:/)&&(a.url+="?token\x3d"+w))})}}else if(e)t=this.types,0<t.length?(r=new y(this.defaultSymbol,this.typeIdField),m.forEach(t,function(a){r.addValue(a.id,a.symbol)})):r=new D(this.defaultSymbol),this.setRenderer(r);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":s=new x;break;case "esriGeometryPolyline":s=
new A;break;case "esriGeometryPolygon":s=new E;break;default:this.hasXYFootprint()&&(s=new E)}this.setRenderer(s?new D(s):null)}s=c&&c.transparency||0;!this.hasOwnProperty("opacity")&&0<s&&(this.opacity=1-s/100);if((f("ie")||7<=f("trident")||f("safari"))&&this.isEditable()&&10.02>this.version)this._ts=!0;this.statistics=a.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var ba=function(){this.currentMode!==Y.MODE_SNAPSHOT&&(this.queryPagination=!1);null!=this._maxOffset&&
!this._isFractionalOffsetAllowed()&&this._setMaxOffset(this._maxOffset);this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this))};this._collection?(s=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new K(s)),this._fcAdded=!0,ba.call(this)):this._forceIdentity(this._limitPromise?function(){var a=this;this._limitPromise.then(function(b){a._checkMode(b)});this._limitPromise.always(function(){a._limitPromise=null;ba.call(a)})}:ba)}},setShowLabels:function(a){this.showLabels=
a;this.onShowLabelsChange()},onShowLabelsChange:function(){},onRendererChange:function(a){this.inherited(arguments);var b=this._map;this._ager=!(!a||!a.observationAger||!a.observationRenderer);a&&"colors"in a&&"blurRadius"in a&&"maxPixelIntensity"in a?"esriGeometryPoint"==this.geometryType&&(!this._heatmapManager&&b)&&(this._heatmapManager=new V(this),this._heatmapManager.initialize(b)):this.renderer&&this.renderer.getRendererInfo?m.some(this.renderer.rendererInfos,function(a){return a.renderer&&
"colors"in a.renderer&&"blurRadius"in a.renderer})||(this._heatmapManager=null):this._heatmapManager=null;if(a){var c=[],b=m.filter([a,a.observationRenderer,a.latestObservationRenderer,a.trackRenderer],g.isDefined),e=function(a){return null!=a&&"function"!=typeof a&&a};m.forEach(b,function(a){var b=e(a.attributeField),g=e(a.attributeField2);a=e(a.attributeField3);!1!==b&&c.push(b);!1!==g&&c.push(g);!1!==a&&c.push(a)});this._rendererFields=c}else this._rendererFields=[];this.loaded&&(this._fixRendererFields(),
this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0))},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(){this.inherited(arguments);var a=this._getRenderer();this._ager=!(!a||!a.observationAger||!a.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(a&&a.trackRenderer)},_setMap:function(a){var b=this.inherited(arguments),
c=this._mode,e=this;c&&c.initialize(a);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(a){a=a.graphic.attributes;(a=e._selectedFeatures[a&&a[e.objectIdField]])&&a.attr("data-selected","")});return b},_unsetMap:function(a){var c=this._mode;c&&c.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);b.disconnect(this._zoomConnect);b.disconnect(this._addHandle);
this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments)},refresh:function(){this._needsRefresh=!1;var a=this._mode;a&&a.refresh()},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return m.filter(this._getOutFields(),function(a){return"*"===a||!!this._getField(a)},this)},getField:function(a){return this._getField(a,!0)},getDomain:function(a,b){var c,e,g=b&&b.feature,
k=g&&this.typeIdField&&g.attributes&&g.attributes[this.typeIdField];null!=k&&m.some(this.types,function(b){if(b.id==k){if((c=b.domains&&b.domains[a])&&"inherited"===c.type)c=this._getLayerDomain(a),e=!0;return!0}return!1},this);!e&&!c&&(c=this._getLayerDomain(a));return c},_getLayerDomain:function(a){var b;m.some(this.fields,function(c){c.name===a&&(b=c.domain);return!!b});return b},getType:function(a){var b,c=a&&this.typeIdField&&a.attributes&&a.attributes[this.typeIdField];m.some(this.types,function(a){a.id==
c&&(b=a);return!!b});return b},setEditable:function(a){if(!this._collection)return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),this;if(!this.loaded)return this._optEditable=a,this;var b=this._editable;this._editable=a;this._updateCaps();if(b!==a)this.onCapabilitiesChange();return this},getEditCapabilities:function(a){var b={canCreate:!1,canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable())return b;var c=a&&a.feature;a=
a&&a.userId;var e=m.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],l.trim),g=-1<m.indexOf(e,"editing"),k=g&&-1<m.indexOf(e,"create"),b=g&&-1<m.indexOf(e,"update"),e=g&&-1<m.indexOf(e,"delete"),f=this.ownershipBasedAccessControlForFeatures,d=this.editFieldsInfo,n=d&&d.creatorField,d=d&&d.realm,c=(c=c&&c.attributes)&&n?c[n]:void 0,h=!!this.userIsAdmin,n=!f||h||!(!f.allowOthersToUpdate&&!f.allowUpdateToOthers),f=!f||h||!(!f.allowOthersToDelete&&!f.allowDeleteToOthers);if(h||g&&!k&&
!b&&!e)k=b=e=!0;g={canCreate:k,canUpdate:b,canDelete:e};null===c?(g.canUpdate=b&&n,g.canDelete=e&&f):""!==c&&c&&((a=a||this.getUserId())&&d&&(a=a+"@"+d),a.toLowerCase()!==c.toLowerCase()&&(g.canUpdate=b&&n,g.canDelete=e&&f));return g},getUserId:function(){var a;this.loaded&&(a=this.credential&&this.credential.userId||this.userId||"");return a},setUserIsAdmin:function(a){this.userIsAdmin=a},setEditSummaryCallback:function(a){this.editSummaryCallback=a},getEditSummary:function(a,b,c){c=g.isDefined(c)?
c:(new Date).getTime();var e="";c=this.getEditInfo(a,b,c);(b=b&&b.callback||this.editSummaryCallback)&&(c=b(a,c)||"");if(l.isString(c))e=c;else{if(c){a=c.action;b=c.userId;var k=c.timeValue,f=0;a&&f++;b&&f++;g.isDefined(k)&&f++;1<f&&(e=("edit"===a?"edit":"create")+(b?"User":"")+(g.isDefined(k)?c.displayPattern:""))}e=e&&g.substitute(c,this.i18n.layers.FeatureLayer[e])}return e},getEditInfo:function(a,b,c){if(this.loaded){c=g.isDefined(c)?c:(new Date).getTime();b=b&&b.action||"last";var e=this.editFieldsInfo,
k=e&&e.creatorField,f=e&&e.creationDateField,d=e&&e.editorField,e=e&&e.editDateField,d=(a=a&&a.attributes)&&d?a[d]:void 0,e=a&&e?a[e]:null,k=this._getEditData(a&&k?a[k]:void 0,a&&f?a[f]:null,c);c=this._getEditData(d,e,c);var n;switch(b){case "creation":n=k;break;case "edit":n=c;break;case "last":n=c||k}n&&(n.action=n===c?"edit":"creation");return n}},_getEditData:function(a,b,c){var k,f,d;g.isDefined(b)&&(f=c-b,d=0>f?"Full":6E4>f?"Seconds":12E4>f?"Minute":36E5>f?"Minutes":72E5>f?"Hour":864E5>f?"Hours":
6048E5>f?"WeekDay":"Full");if(void 0!==a||d)k=k||{},k.userId=a,d&&(a=e.format,c=new Date(b),k.minutes=Math.floor(f/6E4),k.hours=Math.floor(f/36E5),k.weekDay=a(c,{datePattern:"EEEE",selector:"date"}),k.formattedDate=a(c,{selector:"date"}),k.formattedTime=a(c,{selector:"time"}),k.displayPattern=d,k.timeValue=b);return k},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},setMaxAllowableOffset:function(a){this.isEditable()||this._setMaxOffset(a,!0);return this},getMaxAllowableOffset:function(){var a=
this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:a},_setMaxOffset:function(a,b){if(null==a)return delete this._maxOffset,delete this._quantizationParameters,this;if(this.quantize&&this.supportsCoordinatesQuantization)"esriGeometryPolyline"===this.geometryType?this._maxOffset=a:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:a,extent:this.fullExtent};else{if(!this._isFractionalOffsetAllowed()||
!b)a=Math.floor(a);isNaN(a)||0===a?delete this._maxOffset:this._maxOffset=a;delete this._quantizationParameters}return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(a){a=(a=a&&a.split("-"))&&a[0]&&a[0].toLowerCase();return-1!==m.indexOf(this._langsWithDot,a)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(a){if(this.loaded){if(!this.isEditable()&&
this.mode!==Y.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))(this._autoGeneralize=a)?(this._autoSnapshot&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)}else this._optAutoGen=a;return this},setGDBVersion:function(a){if(!this._collection&&a!==this.gdbVersion&&(a||this.gdbVersion))this.gdbVersion=a,this._task.gdbVersion=a,this._url.query=l.mixin(this._url.query,{gdbVersion:a}),this.loaded&&(this.clearSelection(),
this._map&&this.refresh()),this.onGDBVersionChange();return this},setDefinitionExpression:function(a){this._defnExpr=a;(a=this._mode)&&a.propertyChangeHandler(1);return this},getDefinitionExpression:function(){return this._defnExpr},setTimeDefinition:function(a){this._isSnapshot?(this._timeDefn=a,(a=this._mode)&&a.propertyChangeHandler(2)):console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d "+this.id+", Layer URL \x3d "+
this.url);return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(a,b){this._timeOffset=a;this._timeOffsetUnits=b;var c=this._mode;c&&c.propertyChangeHandler(0);return this},setUseMapTime:function(a){this.useMapTime=a;this._toggleTime(!this.suspended);(a=this._mode)&&a.propertyChangeHandler(0)},selectFeatures:function(a,b,c,e){b=b||Y.SELECTION_NEW;a=this._getShallowClone(a);var g=this._map,k,f=this,d=v._fixDfd(new r(v._dfdCanceller));a.outFields=this.getOutFields();
a.returnGeometry=!0;a.multipatchOption=this.multipatchOption;g&&(a.outSpatialReference=new z(g.spatialReference.toJson()));if(!this._applyQueryFilters(a,!0))return k={features:[]},this._selectHandler(k,b,c,e,d),d;if(g=this._canDoClientSideQuery(a))d._pendingDfd=t(this._doQuery(a,g)),d._pendingDfd.then(function(a){k={features:a};f._selectHandler(k,b,c,e,d)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,e,d,!0),d;var n=this;this._ts&&
(a._ts=(new Date).getTime());(d._pendingDfd=this._task.execute(a)).addCallbacks(function(a){n._selectHandler(a,b,c,e,d)},function(a){n._resolve([a],null,e,d,!0)})}return d},getSelectedFeatures:function(){var a=this._selectedFeatures,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},clearSelection:function(a){var b=this._selectedFeatures,c=this._mode,e;for(e in b)b.hasOwnProperty(e)&&(this._unSelectFeatureIIf(e,c),c._removeFeatureIIf(e));this._selectedFeatures={};this._isSelOnly&&c._applyTimeFilter(!0);
if(!a)this.onSelectionClear();return this},setSelectionSymbol:function(a){if(this._selectionSymbol=a){var b=this._selectedFeatures,c;for(c in b)b.hasOwnProperty(c)&&b[c].setSymbol(a)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(a){a?(this.labelingInfo=a,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange()},_fixLabelExpr:function(){var a=/\[([^\[\]]+)\]/ig,b,c=this,e=function(a,b){var e=
c._getField(b,!0);return"["+(e&&e.name||b)+"]"};m.forEach(this.labelingInfo,function(c){if(b=c.labelExpression)c.labelExpression=b.replace(a,e)})},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(a,b,c,e,g,k){var f=k.assembly,d=k.dfd;this._applyNormalized(a,f&&f[0]);this._applyNormalized(b,f&&f[1]);this.onBeforeApplyEdits(a,b,c);var n={},h=this.objectIdField,f={f:"json"},p=!1;if(this._collection)k={},k.addResults=a?m.map(a,function(){p=!0;return{objectId:this._nextId++,
success:!0}},this):null,k.updateResults=b?m.map(b,function(a){p=!0;var b=a.attributes[h];n[b]=a;return{objectId:b,success:!0}},this):null,k.deleteResults=c?m.map(c,function(a){p=!0;return{objectId:a.attributes[h],success:!0}},this):null,p?this._editHandler(k,a,n,e,g,d):this._resolve([k.addResults,k.updateResults,k.deleteResults],null,e,d);else{a&&0<a.length&&(f.adds=this._convertFeaturesToJson(a,0,1),p=!0);if(b&&0<b.length){for(k=0;k<b.length;k++){var t=b[k];n[t.attributes[h]]=t}f.updates=this._convertFeaturesToJson(b,
0,0,1);p=!0}if(c&&0<c.length){b=[];for(k=0;k<c.length;k++)b.push(c[k].attributes[h]);f.deletes=b.join(",");p=!0}if(p){var v=this;return q({url:this._url.path+"/applyEdits",content:l.mixin(f,this._url.query),callbackParamName:"callback",load:function(b){v._editHandler(b,a,n,e,g,d)},error:function(a){v._resolve([a],null,g,d,!0)}},{usePost:!0})}this._resolve([],null,e,d)}},queryFeatures:function(a,b,c){return this._query("execute","onQueryFeaturesComplete",a,b,c)},queryRelatedFeatures:function(a,b,c){return this._query("executeRelationshipQuery",
"onQueryRelatedFeaturesComplete",a,b,c)},queryIds:function(a,b,c){return this._query("executeForIds","onQueryIdsComplete",a,b,c)},queryCount:function(a,b,c){return this._query("executeForCount","onQueryCountComplete",a,b,c)},queryExtent:function(a,b,c){return this._query("executeForExtent","onQueryExtentComplete",a,b,c)},queryAttachmentInfos:function(a,b,e){var g=this._url.path+"/"+a+"/attachments",k=new r(v._dfdCanceller),f=this;k._pendingDfd=q({url:g,content:l.mixin({f:"json"},this._url.query),
callbackParamName:"callback",load:function(e){e=e.attachmentInfos;var d;m.forEach(e,function(b){d=c.objectToQuery({gdbVersion:f._url.query&&f._url.query.gdbVersion,layer:f._url.query&&f._url.query.layer,token:f._getToken()});b.url=g+"/"+b.id+(d?"?"+d:"");b.objectId=a});f._resolve([e],"onQueryAttachmentInfosComplete",b,k)},error:function(a){f._resolve([a],null,e,k,!0)}});return k},addAttachment:function(a,b,c,e){return this._sendAttachment("add",a,b,c,e)},updateAttachment:function(a,b,c,e,g){c.appendChild(n.create("input",
{type:"hidden",name:"attachmentId",value:b}));return this._sendAttachment("update",a,c,e,g)},deleteAttachments:function(a,b,c,e){var g=this._url.path+"/"+a+"/deleteAttachments",k=new r(v._dfdCanceller),f=this;b={f:"json",attachmentIds:b.join(",")};k._pendingDfd=q({url:g,content:l.mixin(b,this._url.query),callbackParamName:"callback",load:l.hitch(this,function(b){b=b.deleteAttachmentResults;b=m.map(b,function(b){b=new P(b);b.attachmentId=b.objectId;b.objectId=a;return b});f._resolve([b],"onDeleteAttachmentsComplete",
c,k)}),error:function(a){f._resolve([a],null,e,k,!0)}},{usePost:!0});return k},addType:function(a){var b=this.types;if(b){if(m.some(b,function(b){return b.id==a.id?!0:!1}))return!1;b.push(a)}else this.types=[a];return this._typesDirty=!0},deleteType:function(a){if(this._collection){var b=this.types;if(b){var c=-1;m.some(b,function(b,e){return b.id==a?(c=e,!0):!1});if(-1<c)return this._typesDirty=!0,b.splice(c,1)[0]}}},toJson:function(){var a=this._json;if(a=l.isString(a)?p.fromJson(a):l.clone(a)){var a=
a.layerDefinition?a:{layerDefinition:a},b=a.layerDefinition,c=this._collection;if(c&&this._typesDirty){b.types=m.map(this.types||[],function(a){return a.toJson()});var e=this.renderer,g=this.labelingInfo,k=b.drawingInfo;if((e||g)&&!k)k=b.drawingInfo={};k&&(e&&-1===e.declaredClass.indexOf("TemporalRenderer"))&&(k.renderer=e.toJson());g&&(k.labelingInfo=m.map(g,function(a){return a.toJson()}))}e=null;if(!c||this._fcAdded)e={geometryType:b.geometryType,features:this._convertFeaturesToJson(this.graphics,
!0)};a.featureSet=l.mixin({},a.featureSet||{},e);a.featureSet.transform&&(g=a.featureSet.transform,delete a.featureSet.transform,e=new K(a.featureSet),e.quantize(g),a.featureSet=e.toJson());c&&(a.nextObjectId=this._nextId,b.capabilities=this.capabilities);return a}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},
onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},_forceIdentity:function(a){function b(a){var c=["allowOthersToUpdate","allowOthersToDelete","allowOthersToQuery"];return a&&m.some(c,function(b){return a.hasOwnProperty(b)&&
!a[b]})}var c=this,e,g=this._url&&this._url.path;e=g&&g.toLowerCase().indexOf("/rest/services");(this.userIsAdmin||b(this.ownershipBasedAccessControlForFeatures))&&!this._getToken()&&-1<e&&k.id?(e=g.substring(0,e)+"/rest/info",q({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){if(a.owningSystemUrl)return k.id.checkSignInStatus(a.owningSystemUrl+"/sharing")}).then(function(a){if(a)return k.id.getCredential(g)}).then(function(a){a&&c._findCredential()}).always(function(){a.call(c)})):
a.call(this)},_checkMode:function(a){var b=this.geometryType,c=this.maxRecordCount;a=(a=a&&a.features&&a.features[0])&&a.attributes&&a.attributes.exceedslimit;if(this.mode===Y.MODE_AUTO&&!this.isEditable()&&0===a&&(this.queryPagination||("esriGeometryPolyline"===b||"esriGeometryPolygon"===b||"esriGeometryMultipoint"===b||this.hasXYFootprint())&&c>=this.maxRecordCountForAuto||"esriGeometryPoint"===b&&c>=this.maxPointCountForAuto))this.currentMode=Y.MODE_SNAPSHOT,this._mode=new T(this),this._isSnapshot=
this._autoSnapshot=!0},_queryLimit:function(){var a=this,b=new r;this._limitPromise=b.promise;setTimeout(function(){var c=new M,e=new J;e.statisticType="exceedslimit";e.maxPointCount=a.maxPointCountForAuto;e.maxRecordCount=a.maxRecordCountForAuto;e.maxVertexCount=a.maxVertexCountForAuto;e.outStatisticFieldName="exceedslimit";c.outStatistics=[e];a.queryFeatures(c).promise.then(function(a){b.resolve(a)},function(a){b.reject(a)})},0)},_updateCaps:function(){var a=this._editable,b=l.trim(this.capabilities||
""),c=m.map(b?b.split(","):[],l.trim),e=m.map(b?b.toLowerCase().split(","):[],l.trim),b=m.indexOf(e,"editing"),g,e={Create:m.indexOf(e,"create"),Update:m.indexOf(e,"update"),Delete:m.indexOf(e,"delete")};if(a&&-1===b)c.push("Editing");else if(!a&&-1<b){a=[b];for(g in e)-1<e[g]&&a.push(e[g]);a.sort();for(g=a.length-1;0<=g;g--)c.splice(a[g],1)}this.capabilities=c.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._toggleTime(!1);
var a=this._mode;a&&a.suspend()},onResume:function(a){this.inherited(arguments);this._toggleTime(!0);var c=this._mode,e=this._map,g=this._getRenderer();if(a.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||g&&(g.latestObservationRenderer||g.trackRenderer)))this._trackManager=new Z(this),this._trackManager.initialize(e);g&&("colors"in g&&"blurRadius"in g&&"maxPixelIntensity"in g)&&("esriGeometryPoint"==
this.geometryType&&!this._heatmapManager)&&(this._heatmapManager=new V(this),this._heatmapManager.initialize(e));if(this._autoSnapshot&&this._autoGeneralize&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.isEditable()&&null==this.getMaxAllowableOffset())g=this.generalizeForScale,this._calculatedScale=g=this.maxScale?this.maxScale:this.minScale?Math.min(g,this.minScale):Math.min(g,L.getScale(e,this.initialExtent)),this._calcMaxOffset=
e.extent.getWidth()/e.width/e.getScale()*g;this._zoomConnect=b.connect(e,"onZoomEnd",this,this._zoomEndHandler);this._updateMaxOffset();this._needsRefresh=!1;c&&c.startup()}else this._zoomEndHandler(),c&&c.resume()},_zoomEndHandler:function(){var a=this._map;this._updateMaxOffset();this._prevScale=a.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var a=this._map;a&&a.loaded&&this._autoGeneralize&&(this._autoSnapshot?(a=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),
!0),this._needsRefresh||(this._needsRefresh=a!=this.getMaxAllowableOffset())):this._setMaxOffset(a.extent.getWidth()/a.width,!a.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var a=this._map.getScale(),b=this._calculatedScale,c=this._calcMaxOffset,e=this._prevScale;return a>=b&&(null==e||e<b)?c:a<b&&(null==e||e>=b)?null:this.getMaxAllowableOffset()}},_toggleTime:function(a){var c=this._map;a&&this.timeInfo&&this.useMapTime&&c?(this._mapTimeExtent=c.timeExtent,
this._timeConnect||(this._timeConnect=b.connect(c,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,b.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(a){this._mapTimeExtent=a;(a=this._mode)&&a.propertyChangeHandler(0)},_getOffsettedTE:function(a){var b=this._timeOffset,c=this._timeOffsetUnits;return a&&b&&c?a.offset(-1*b,c):a},_getTimeOverlap:function(a,b){return a&&b?a.intersection(b):a||b},_getTimeFilter:function(a){var b=this.getTimeDefinition(),
c;if(b&&(c=this._getTimeOverlap(b,null),!c))return[!1];if(a){if(a=c?this._getTimeOverlap(a,c):a,!a)return[!1]}else a=c;return[!0,a]},_getAttributeFilter:function(a){var b=this.getDefinitionExpression();return a?b?"("+b+") AND ("+a+")":a:b},_applyQueryFilters:function(a,b){a.where=this._getAttributeFilter(a.where);a.maxAllowableOffset||(a.maxAllowableOffset=this._maxOffset);a.quantizationParameters=this._quantizationParameters;b&&this.supportsAdvancedQueries&&(a.orderByFields=a.orderByFields||this.getOrderByFields());
if(this.timeInfo){var c=this._getTimeFilter(a.timeExtent);if(c[0])a.timeExtent=c[1];else return!1}return!0},_add:function(a){var b=this._selectionSymbol,c=a.attributes,e=this.visibilityField;b&&this._isSelOnly&&a.setSymbol(b);if(e&&c&&c.hasOwnProperty(e))a[c[e]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(a){var b=[],c=this._map,e;if(!(this._isTable||!c&&!this._collection))if(!a.text&&!(a.where&&
a.where!==this.getDefinitionExpression()||a.orderByFields&&a.orderByFields.length&&(e=this.getOrderByFields()||[])&&a.orderByFields.join()!==e.join()||a.outStatistics||a.returnDistinctValues)){e=this._isSnapshot;var g=this._isSelOnly,k=a.geometry;if(k)if(!g&&a.spatialRelationship===M.SPATIAL_REL_INTERSECTS&&"extent"===k.type&&(e||c.extent.contains(k)))b.push(1);else return;if(c=a.objectIds)if(e)b.push(2);else{var k=c.length,f=this._mode,d=0,n;for(n=0;n<k;n++)f._getFeature(c[n])&&d++;if(d===k)b.push(2);
else return}if(this.timeInfo)if(a=a.timeExtent,c=this._mapTimeExtent,e)a&&b.push(3);else if(g){if(a)return}else if(c)if(-1!==m.indexOf(b,2))a&&b.push(3);else if(-1!==m.indexOf(b,1))a==c&&b.push(3);else return;else if(0<b.length)a&&b.push(3);else if(a)return;return 0<b.length?b:null}},_getAbsMid:function(a){return h.toAbsMid?h.toAbsMid(a):d.id.replace(/\/[^\/]*$/ig,"/")+a},_doQuery:function(a,b,c){var e=[],g=this.objectIdField,k=this,f=new r,d=new r,n=this.graphics;if(-1!==m.indexOf(b,1)){var h=this.spatialIndex||
this._map&&this._map.spatialIndex,q,p=a.geometry._normalize(null,!0);null==h&&ba.autoSpatialIndexing?q=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(l.hitch(this,l.partial(this._getFromIndex,p,h)),function(a){d.resolve(l.hitch(this,l.partial(this._filterByExtent,n,p)))}):h&&(q=this._getFromIndex(p,h));q?q.then(function(a){for(var b=0;b<a.length;b++)a[b].results&&(e=e.concat(a[b].results));d.resolve(e)}).otherwise(function(a){d.reject(a)}):d.resolve(this._filterByExtent(n,
p))}else d.resolve(n);d.then(function(d){e=d;if(-1!==m.indexOf(b,2)){var n=a.objectIds;e=m.filter(e,function(a){return-1<m.indexOf(n,a.attributes[g])})}-1!==m.indexOf(b,3)&&k.timeInfo&&(d=a.timeExtent,e=k._filterByTime(e,d.startTime,d.endTime).match);c&&(e=m.map(e,function(a){return a.attributes[g]},this));f.resolve(e)});return f},_getFromIndex:function(a,b){b=b||this.spatialIndex||this._map.spatialIndex;a instanceof Array||(a=[a]);var c=this.id;return s(m.map(a,function(a){return b.intersects(a,
c)}))},_filterByExtent:function(a,b){for(var c=[],e=0,g=a.length;e<g;e++){var k=a[e],f=k.geometry;f&&(this.normalization&&b.length?(b[0].intersects(f)||b[1].intersects(f))&&c.push(k):b.intersects(f)&&c.push(k))}return c},_filterByTime:function(a,b,c){var e=this._startTimeField,k=this._endTimeField,f;this._twoTimeFields||(f=e||k);var d=g.isDefined,n=[],l=[],m,h=a.length,q,p;b=b?b.getTime():-Infinity;c=c?c.getTime():Infinity;if(f)for(m=0;m<h;m++)q=a[m],p=q.attributes,e=p[f],e>=b&&e<=c?n.push(q):l.push(q);
else for(m=0;m<h;m++)q=a[m],p=q.attributes,f=p[e],p=p[k],f=d(f)?f:-Infinity,p=d(p)?p:Infinity,f>=b&&f<=c||p>=b&&p<=c||b>=f&&c<=p?n.push(q):l.push(q);return{match:n,noMatch:l}},_resolve:function(a,b,c,e,g){b&&this[b].apply(this,a);c&&c.apply(null,a);e&&v._resDfd(e,a,g)},_getShallowClone:function(a){var b=new M,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},_query:function(a,b,c,e,g){var k=this,f=this._map,d=new r(v._dfdCanceller),n=c,l,h;if("executeRelationshipQuery"!==a){var n=this._getShallowClone(c),
q=this.getOutFields();n.outFields||(n.outFields=q);n.outFields&&n.outFields.length&&(h=-1<m.indexOf(q,"*")?!1:!m.every(n.outFields,function(a){return-1<m.indexOf(q,a)}));n.returnGeometry=c.hasOwnProperty("returnGeometry")?c.returnGeometry:!c.outStatistics;n.returnGeometry&&(n.multipatchOption=this.multipatchOption);var p;f&&(c=f&&f.spatialReference,(f=n.outSpatialReference)?l=!f.equals(c):n.outSpatialReference=new z(c.toJson()));if(!this._applyQueryFilters(n,"execute"===a&&!n.outStatistics)){switch(a){case "execute":p=
new K({features:[]});break;case "executeForIds":p=[];break;case "executeForCount":p=0;break;case "executeForExtent":p={}}this._resolve([p],b,e,d);return d}if(c="executeForExtent"!==a&&!l&&!h&&this._canDoClientSideQuery(n))return d._pendingDfd=t(this._doQuery(n,c,"executeForIds"===a||"executeForCount"===a)),d._pendingDfd.then(function(c){switch(a){case "execute":p=new K;p.features=c;break;case "executeForIds":p=c;break;case "executeForCount":p=c.length}k._resolve([p],b,e,d)}),d}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+
this.invalidParams)],null,g,d,!0),d;this._ts&&(n._ts=(new Date).getTime());(d._pendingDfd=this._task[a](n)).addCallbacks(function(c){var g=!!n.outStatistics||l||h;if("execute"===a||"executeRelationshipQuery"===a){var f,m;if("execute"===a){f=c.features;m=f.length;for(m-=1;0<=m;m--)if(f[m]._layer=k,!g&&!k._isTable){var q=k._mode._getFeature(f[m].attributes[k.objectIdField]);q&&f.splice(m,1,q)}}else for(q in c)if(c.hasOwnProperty(q)){f=c[q].features;m=f.length;for(m-=1;0<=m;m--)f[m]._layer=k}}k._resolve([c],
b,e,d)},function(a){k._resolve([a],null,g,d,!0)});return d},_convertFeaturesToJson:function(a,b,c,e){var g=[],k=this._selectionSymbol,f=this.visibilityField,d,n=this.objectIdField;if(this.loaded&&(c||e))d=m.filter(this.fields,function(a){return!1===a.editable&&(!e||a.name!==n)});for(c=0;c<a.length;c++){var h=a[c],q={},t=h.geometry,v=h.attributes,P=h.symbol;if(t&&(!e||!this.loaded||this.allowGeometryUpdates))q.geometry=t.toJson();f?(q.attributes=v=l.mixin({},v),v[f]=h.visible?1:0):v&&(q.attributes=
l.mixin({},v));q.attributes&&(d&&d.length)&&m.forEach(d,function(a){delete q.attributes[a.name]});P&&P!==k&&(q.symbol=P.toJson());g.push(q)}return b?g:p.toJson(g)},_selectHandler:function(a,b,c,e,g){var k;e=Y;switch(b){case e.SELECTION_NEW:this.clearSelection(!0);k=!0;break;case e.SELECTION_ADD:k=!0;break;case e.SELECTION_SUBTRACT:k=!1}e=a.features;var f=this._mode,d=[],n=this.objectIdField,l,m;if(k)for(k=0;k<e.length;k++)l=e[k],m=l.attributes[n],l=f._addFeatureIIf(m,l),d.push(l),this._selectFeatureIIf(m,
l,f);else for(k=0;k<e.length;k++)l=e[k],m=l.attributes[n],this._unSelectFeatureIIf(m,f),m=f._removeFeatureIIf(m),d.push(m||l);this._isSelOnly&&f._applyTimeFilter(!0);this._resolve([d,b,a.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",c,g);if(a.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(a,b,c){var e=this._selectedFeatures,g=e[a];g||(c._incRefCount(a),e[a]=b,this._isTable||(this._setSelectSymbol(b),b.attr("data-selected","")));return g||
b},_unSelectFeatureIIf:function(a,b){var c=this._selectedFeatures[a];c&&(b._decRefCount(a),delete this._selectedFeatures[a],this._isTable||(this._setUnSelectSymbol(c),c.attr("data-selected")));return c},_isSelected:function(a){},_setSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&a.setSymbol(b)},_setUnSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&b===a.symbol&&a.setSymbol(null,!0)},_getOutFields:function(){var a=[this.objectIdField,this.typeIdField,
this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),a=m.filter(a,function(a,b,c){return!!a&&m.indexOf(c,a)===b}),b=l.clone(this._outFields);if(b){if(-1!==m.indexOf(b,"*"))return b;m.forEach(a,function(a){-1===m.indexOf(b,a)&&b.push(a)});return b}return a},_checkFields:function(a){var b=a||this._getOutFields();m.forEach(b,function(a){"*"!==a&&(this._getField(a)||console.debug("esri.layers.FeatureLayer: "+g.substitute({url:this.url,
field:a},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))},this);!a&&(!this._isTable&&!this._fserver&&!this._collection&&!this._isStream)&&(m.some(this.fields,function(a){return a&&"esriFieldTypeGeometry"===a.type?!0:!1})||console.debug("esri.layers.FeatureLayer: "+g.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]")))},
_fixFieldCase:function(a,b,c){var e=a&&a[b],g;if(e&&!l.isFunction(e)){if(g=!this._getField(e)&&this._getField(e,!0))e=a[b]=g.name;c&&c.push(e)}return e},_fixRendererFields:function(){var a=this.renderer;this._orderBy=null;if(a&&0<this.fields.length){var b=[],c,a=m.filter([a,a.observationRenderer,a.latestObservationRenderer,a.trackRenderer],g.isDefined),e=[].concat(a);m.forEach(a,function(a){m.forEach(a.rendererInfos,function(a){a.renderer&&e.push(a.renderer)})});m.forEach(e,function(a){this._fixFieldCase(a,
"attributeField",b);this._fixFieldCase(a,"attributeField2",b);this._fixFieldCase(a,"attributeField3",b);this._fixFieldCase(a.rotationInfo,"field",b);if((c=this._fixFieldCase(a.sizeInfo,"field",b))&&!this._orderBy)this._orderBy=[c+" DESC"];this._fixFieldCase(a.sizeInfo,"normalizationField",b);this._fixFieldCase(a.colorInfo,"field",b);this._fixFieldCase(a.colorInfo,"normalizationField",b);this._fixFieldCase(a.field,"field",b);this._fixFieldCase(a.opacityInfo,"field",b);this._fixFieldCase(a.opacityInfo,
"normalizationField",b);m.forEach(a.visualVariables,function(a){c=this._fixFieldCase(a,"field",b);"sizeInfo"===a.type&&(c&&!this._orderBy)&&(this._orderBy=[c+" DESC"]);this._fixFieldCase(a,"normalizationField",b)},this);if(!this._orderBy&&a.addBreak&&!l.isFunction(a.attributeField)&&(a.backgroundFillSymbol||this._hasSizeDiff(a)))this._orderBy=[a.attributeField+" DESC"]},this);this._rendererFields=m.filter(b,g.isDefined)}},_hasSizeDiff:function(a){var b=Number.MAX_VALUE,c=-Number.MAX_VALUE,e,g;m.forEach(a.infos,
function(a){if(g=a.symbol){e=0;switch(g.type){case "simplemarkersymbol":e=g.size;break;case "picturemarkersymbol":e=(g.width+g.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":e=g.width;break;case "simplefillsymbol":case "picturefillsymbol":e=g.outline&&g.outline.width}e&&(b=Math.min(b,e),c=Math.max(c,e))}});return b!==Number.MAX_VALUE&&c!==-Number.MAX_VALUE&&1<Math.abs(c-b)},getOrderByFields:function(){var a=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&
a?m.filter(a,function(a){a=a.split(" ")[0];return!!this._getField(a,!0)},this):null},_getField:function(a,b){var c=this.fields;if(!c||0===c.length)return null;var e;b&&(a=a.toLowerCase());m.some(c,function(c){var g=!1;(g=b?c&&c.name.toLowerCase()===a?!0:!1:c&&c.name===a?!0:!1)&&(e=c);return g});return e},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:m.map(m.filter(this.fields,function(a){return!!(a&&"esriFieldTypeDate"===a.type)}),function(a){return a.name})});return this._dtOpts},
_applyNormalized:function(a,b){a&&b&&m.forEach(a,function(a,c){a&&b[c]&&a.setGeometry(b[c])})},_editHandler:function(a,b,c,e,g,k){g=a.addResults;var f=a.updateResults;a=a.deleteResults;var d,n,h,q,p=this.objectIdField,t=this._mode,v=this._isTable;d=this.editFieldsInfo;var r=this.getOutFields()||[],s=d&&d.creatorField,u=d&&d.creationDateField,S=d&&d.editorField,w=d&&d.editDateField;d=d&&d.realm;-1===m.indexOf(r,"*")&&(s&&-1===m.indexOf(r,s)&&(s=null),u&&-1===m.indexOf(r,u)&&(u=null),S&&-1===m.indexOf(r,
S)&&(S=null),w&&-1===m.indexOf(r,w)&&(w=null));var r=u||w?(new Date).getTime():null,x=s||S?this.getUserId():void 0;x&&d&&(x=x+"@"+d);if(g)for(d=0;d<g.length;d++)g[d]=new P(g[d]),v||(n=g[d],n.success&&(n=n.objectId,h=b[d],(q=h._graphicsLayer)&&q!==this&&q.remove(h),q=h.attributes||{},q[p]=n,s&&(q[s]=x),S&&(q[S]=x),u&&(q[u]=r),w&&(q[w]=r),h.setAttributes(q),t._init&&t.drawFeature(h)));if(f)for(d=0;d<f.length;d++)if(f[d]=new P(f[d]),!v&&(n=f[d],n.success)){n=n.objectId;h=c[n];if(b=t._getFeature(n))b.geometry!==
h.geometry&&h.geometry&&b.setGeometry(G.fromJson(h.geometry.toJson())),b.attributes!==h.attributes&&h.attributes&&b.setAttributes(l.mixin(b.attributes,h.attributes)),this._repaint(b,n);h=b||h;q=h.attributes||{};S&&(q[S]=x);w&&(q[w]=r);h.setAttributes(q)}if(a){c=[];for(d=0;d<a.length;d++)if(a[d]=new P(a[d]),!v&&(n=a[d],n.success&&(n=n.objectId,h=t._getFeature(n))))this._unSelectFeatureIIf(n,t)&&c.push(h),h._count=0,t._removeFeatureIIf(n);if(0<c.length)this.onSelectionComplete(c,Y.SELECTION_SUBTRACT)}this._resolve([g,
f,a],"onEditsComplete",e,k)},_sendAttachment:function(a,b,c,e,g){var k=this;return q({url:this._url.path+"/"+b+"/"+("add"===a?"addAttachment":"updateAttachment"),form:c,content:l.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(c){var g="add"===a?"onAddAttachmentComplete":"onUpdateAttachmentComplete";c=new P(c["add"===a?"addAttachmentResult":"updateAttachmentResult"]);c.attachmentId=c.objectId;c.objectId=b;k._resolve([c],
g,e);return c}).addErrback(function(a){k._resolve([a],null,g,null,!0)})},_repaint:function(a,b,c){b=g.isDefined(b)?b:a.attributes[this.objectIdField];(!(b in this._selectedFeatures)||!this._selectionSymbol)&&a.setSymbol(a.symbol,c)},_getKind:function(a){var b=this._trackManager;return b?b.isLatestObservation(a)?1:0:0}});l.mixin(Y,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",
POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});N._createWrappers(Y);f("extend-esri")&&l.setObject("layers.FeatureLayer",Y,k);return Y})},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(h,d){function a(a,d,p,r){if(!(1<p.targetTouches.length)){var e=p.changedTouches[0],f=e.screenX,c=e.screenY;r&&p.preventDefault();var n=h(a,"touchend",function(a){var e=a.changedTouches[0];a.targetTouches.length||(Math.abs(e.screenX-f)<b.tapRadius&&
Math.abs(e.screenY-c)<b.tapRadius&&(r&&a.preventDefault(),d.call(this,a)),n.remove())})}}var b={tapRadius:10,dbltapTime:250,selector:function(a,b,p){return function(r,e){var f=b.bubble;f?b=f:!1!==p&&(p=!0);return h(r,b,function(b){var f=b.target;3==f.nodeType&&(f=f.parentNode);for(;!d.matches(f,a,r);)if(f==r||!p||!(f=f.parentNode))return;return e.call(f,b)})}},countCurrentTouches:function(a,b){if(!("touches"in a))return-1;var d,h,e;for(h=d=0;e=a.touches[d];++d)b.contains(e.target)&&++h;return h},
tap:function(b,d){return h(b,"touchstart",function(h){a(b,d,h)})},dbltap:function(d,m){var p,r;return h(d,"touchstart",function(e){p?a(d,function(a){if(p){var c=a.changedTouches[0];Math.abs(c.screenX-p.screenX)<b.tapRadius&&Math.abs(c.screenY-p.screenY)<b.tapRadius&&(r&&clearTimeout(r),p=r=null,m.call(this,a))}},e,!0):a(d,function(a){p=a.changedTouches[0];r=setTimeout(function(){p=r=null},b.dbltapTime)},e)})}};return b})},"esri/dijit/BrowseItems":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/has dojo/dom dojo/dom-construct dojo/mouse dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/extensions/DijitRegistry dgrid/OnDemandGrid dgrid/Selection dgrid/selector dgrid/Keyboard dgrid/util/mouse dgrid/util/touch put-selector/put dojo/store/Observable dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_FocusMixin dijit/form/Select ../arcgis/Portal ../Evented ../PluginTarget dojo/i18n!../nls/jsapi ./_RefreshMixin ../kernel ../lang ../config ../geometry/webMercatorUtils ../tasks/GeometryService ../SpatialReference".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z){var V=h(null,{idProperty:"id",constructor:function(a){h.safeMixin(this,a)},get:function(a,b){return O.PortalUtil.request(this.portalUrl+"content/items/"+a,b).then(function(a){return new O.PortalItem(d.mixin(a,{portal:this.portal}))})},getIdentity:function(a){return a[this.idProperty]},query:function(a,b){var c=d.isObject(a)?a:{q:a};if(b&&(c=d.mixin(c,{num:b.count,start:(b.start||0)+1}),b.sort&&
b.sort.length))var e=b.sort[0],c=d.mixin(c,{sortField:encodeURIComponent("created"===e.attribute?"uploaded":e.attribute),sortOrder:e.descending?"desc":"asc"});b.useExtent&&b.extent&&(c.bbox=b.extent);c=this.portal.queryItems(c,!0).then(function(a){a.results.total=a.total;return a.results});return O.PortalResult(c)}});b=h([F,G,N,W,L],{templateString:'\x3cdiv\x3e\x3cp data-dojo-attach-point\x3d"messageNode" class\x3d"hide"\x3e\x3c/p\x3e\x3cdiv style\x3d"width:100%" class\x3d"esriLeadingMargin1"\x3e\x3cselect id\x3d"${id}_categorySelect"class\x3d"categorySelect"\x3e\x3c/select\x3e\x3cdiv id\x3d"${id}_search"class\x3d"esriTrailingMargin2 esriFloatTrailing searchBar"\x3e\x3cinput class\x3d"esriSearchBox dijitTextBox" type\x3d"text" placeholder:\'${i18n.searchFor}\'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight"\x3e\x3c/div\x3e\x3cbr /\x3e\x3c/div\x3e',
_galleryTemplate:"\x3cdiv style\x3d'opacity:1;' class\x3d'grid-item gallery-view'\x3e${item:_formatItemTitle}${item:_formatThumbnail}\x3c/div\x3e",_popupTemplate:'\x3cdiv class\x3d"esriBrowsePopup quiet-scroll"\x3e\x3cp\x3e{summary}\x3c/p\x3e\x3c/div\x3e',baseClass:"esriBrowseItemsCtr",closePopupPerRow:!0,postMixInProperties:function(){this.inherited(arguments);this.i18n={};d.mixin(this.i18n,S.gallery)},postCreate:function(){this.inherited(arguments);this.self?(this._portal=new O.Portal({url:this.portalUrl,
self:this.self}),this._portal.on("load",d.hitch(this,this._fetchData))):(this._portal=new O.Portal(this.portalUrl),this._portal.signIn().then(d.hitch(this,this._fetchData)))},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();this._img_connect.remove();this._img_connect_error.remove();this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},_setPortalUrlAttr:function(a){this.portalUrl=a},_setSelfAttr:function(a){this.self=a},_setPluginAttr:function(a){this.addPlugin(a)},
_setMessageAttr:function(a){p.set(this.messageNode,"innerHTML",a);l.remove(this.messageNode,"hide")},_setCategoriesAttr:function(a){this.categories=a},_setDisabledAttr:function(b){var c=g.findWidgets(this.domNode).concat(g.findWidgets(this._content));a.forEach(c,function(a){a.set("disabled",b)});l[b?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(a){this.sortAttribute=a},_setSortDescendingAttr:function(a){this.sortDescending=a},_getSelectionAttr:function(){var a=
this._grid.selection,b;for(b in a)if(a.hasOwnProperty(b))break;return b&&this._grid.row(b).data},_setGalleryTemplateAttr:function(a){T.isDefined(a)&&(this._galleryTemplate=a)},_setFormatThumbnailAttr:function(a){T.isDefined(a)&&"function"===typeof a&&(this._formatThumbnail=a)},_setFormatItemTitleAttr:function(a){T.isDefined(a)&&"function"===typeof a&&(this._formatItemTitle=a)},_setItemsPerPageAttr:function(a){this._set("itemsPerPage",a)},_setPagingLinksAttr:function(a){this._set("pagingLinks",a)},
_setCategoryTypeAttr:function(a){this._set("categoryType",a)},_getQueryAttr:function(){return this._grid&&this._grid.get("query")},_setQueryAttr:function(a){this._grid&&(this._grid.set("query",a),this.reset())},_setSelectedCategoryAttr:function(a){this._set("selectedCategory",a)},_setClosePopupPerRowAttr:function(a){this._set("closePopupPerRow",a)},_setExtentAttr:function(a){a&&this._set("extent",this._extentToString(a))},_setUseExtentAttr:function(a){this._set("useExtent",a)},_setFetchTimeoutAttr:function(a){this._set("fetchTimeout",
a)},_validate:function(){return!!this.get("selection")},reset:function(){this._grid&&(this._categorySelect&&(this._categorySelect.reset(),this.get("selectedCategory")?(this._origQuery=null,this._categorySelect.set("value",this.get("selectedCategory"))):(this._origQuery=null,this._categorySelect.set("value",this.categories[0].value))),s(".esriSearchBox",n.byId(this.id+"_search")).forEach(function(a){p.set(a,"value","")}))},_showPopup:function(a){if(!this._isInsideTooltipDialog){this._closePopup();
var b=this._grid.row(a),c=s("img",b.element)[0];if((b={summary:b.data.snippet})&&b.summary)this._tooltip=new q({content:d.replace(this._popupTemplate,b),onMouseEnter:d.hitch(this,function(){this._isInsideTooltipDialog=!0}),onMouseLeave:d.hitch(this,function(){this._isInsideTooltipDialog=!1;this._closePopup(a)})}),w.open({className:"esriBrowsePopupCtr",popup:this._tooltip,around:c,orient:["after-centered","before-centered"]}),this._onCloseConnect=s(".dijitDialogCloseIcon",this._tooltip.domNode).on("click",
d.hitch(this,function(a){a.preventDefault();this._closePopup()}))}},_closePopup:function(){this._tooltip&&(this._onCloseConnect.remove(),w.close(this._tooltip),this._tooltip.destroyRecursive(),this._tooltip=this._onCloseConnect=void 0)},_clearQueryTimeout:function(){clearTimeout(this._queryTimer)},_createGrid:function(){var a=h([x,A,D,P,E]),b=new J(new V({portal:this._portal})),c=this._currentFilter,g=d.hitch(this,function(a){a.snippet=a.snippet||"";var b=K("div");a=r.substitute(this._galleryTemplate,
{item:a,i18n:this.i18n},null,this);u.place(a,b);return b}),k={};this.get("useExtent")&&(k.extent=this.get("extent"),k.useExtent=this.get("useExtent"));this._grid=new a({store:b,className:"dgrid-autoheight",query:c,selectionMode:"single",pagingLinks:this.get("pagingLinks")||2,rowsPerPage:this.get("itemsPerPage")||6,loadingMessage:"Loading items...",showLoadingMessage:!1,renderRow:g,noDataMessage:this.i18n.noItemsToDisplay,sort:[{attribute:"title"}],queryOptions:k},this.id+"_grid");this._grid.startup();
this.categories&&0<this.categories.length&&(this._categorySelect=new C({options:this.categories,sortByLabel:!1,"class":"categorySelect"},this.id+"_categorySelect"),this.own(this._categorySelect.on("change",d.hitch(this,function(a){var b;this._closePopup();this._origQuery||(this._origQuery=this._grid.get("query"));b=this._origQuery;a&&(b+=" AND ("+this.get("categoryType")+":"+a+")");this._fetchItems(b)}))));this.own(this._grid.on(H.enterRow,d.hitch(this,function(a){this._showPopup(a)})),this._grid.on(H.leaveRow,
d.hitch(this,function(a){this.get("closePopupPerRow")&&this._closePopup(a)})),e(s(".dgrid-footer,.dgrid-header",this._grid.domNode),t.leave,d.hitch(this,function(a){this._closePopup(a)})),this._grid.on("dgrid-refresh-complete",d.hitch(this,function(a){this._closePopup(a);s(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide")})),this._grid.on("refresh",d.hitch(this,function(){this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove(),
this._img_connect_error=this._img_connect=null);this._img_connect=s(".grid-item-thumb",this._grid.domNode).on("load",d.hitch(this,function(a){(a=this._grid.row(a))&&a.element&&s(".grid-item",a.element).addClass("fadeIn").style("opacity","1")}));this._img_connect_error=s(".grid-item-thumb",this._grid.domNode).on("error",d.hitch(this,function(a){p.set(a.target,"src",this._portal.staticImagesUrl+"/desktopapp.png")}))})),this._grid.on("dgrid-select,dgrid-deselect",d.hitch(this,function(){var a={selection:this.get("selection")};
this.emit("select-change",a)})),e(n.byId(this.id+"_search"),"keyup",d.hitch(this,function(a){a.preventDefault();this._closePopup();this._clearQueryTimeout();this._queryTimer=setTimeout(d.hitch(this,function(){this._fetchItems(this._currentFilter,p.get(a.target,"value"))}),this.searchKeypressDelay||250)})),this.watch("extent",d.hitch(this,function(a,b,c){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=this.get("useExtent");this._grid.refresh()})),this.watch("useExtent",
d.hitch(this,function(a,b,c){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=c;this._grid.refresh()})))},_fetchData:function(){this._user=this._portal.getPortalUser();return this.plugIn.fetchData()},_fetchItems:function(a,b){var c={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},e=b?" title:"+b+"* ":"",g=new z;this.get("extent")&&(c.extent=this.extent);c.useExtent=this.get("useExtent");setTimeout(d.hitch(this,function(){this._currentFilter=
a;this._grid?this._grid.set("query",this._currentFilter+e,c):this._createGrid();g.resolve(this._grid)}),this.fetchTimeout||60);return g},_formatThumbnail:function(a){return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+(a.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},_formatItemTitle:function(a){return"\x3ch5\x3e"+(a.title||a.name||"\x3cNo Title\x3e")+"\x3c/h5\x3e"},clear:function(){this._grid.clearSelection()},doProject:function(a,
b){var c=[102113,102100,3857],e=new z,g,k,f;g=function(a,b){a&&0<a.length&&a[0]&&"extent"==a[0].type&&!isNaN(a[0].xmin)&&!isNaN(a[0].ymin)&&!isNaN(a[0].xmax)&&!isNaN(a[0].ymax)?e.resolve(a,b):a&&(0<a.length&&a[0]&&"point"==a[0].type&&!isNaN(a[0].x)&&!isNaN(a[0].y))&&e.resolve(a,b)};if(null!=a.spatialReference.wkid&&4326==a.spatialReference.wkid&&null!=b.wkid&&this.contains(c,b.wkid)){a.ymin=Math.max(a.ymin,-89.99);a.ymax=Math.min(a.ymax,89.99);c=aa.geographicToWebMercator(a);if((g=c.spatialReference._getInfo())&&
c.xmin>c.xmax)k=g.valid[1]-c.xmin,f=c.xmax-g.valid[0],k>f?c.xmax=g.valid[1]+f:c.xmin=g.valid[0]-k;c.spatialReference.wkid=b.wkid;e.resolve([c])}else if(null!=a.spatialReference.wkid&&this.contains(c,a.spatialReference.wkid)&&null!=b.wkid&&4326==b.wkid){c=aa.webMercatorToGeographic(a);if((g=c.spatialReference._getInfo())&&c.xmin>c.xmax)k=g.valid[1]-c.xmin,f=c.xmax-g.valid[0],k>f?c.xmax=g.valid[1]+f:c.xmin=g.valid[0]-k;e.resolve([c])}else this.geometryService||(this.geometryService=new U(X.defaults.geometryService)),
this.geometryService.project([a],b,g);return e},contains:function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},_extentToGCS:function(a){a=a.shiftCentralMeridian(!0);return aa.webMercatorToGeographic(a)},_extentToString:function(a){var b="";null!=a&&(a=this._extentToGCS(a),b=this._roundValue(a.xmin,1E4)+","+this._roundValue(a.ymin,1E4)+","+this._roundValue(a.xmax,1E4)+","+this._roundValue(a.ymax,1E4));return b},_roundValue:function(a,b){return Math.round(a*b)/b}});c("extend-esri")&&
d.setObject("dijit.BrowseItems",b,Q);return b})},"esri/dijit/analysis/_AnalysisOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/has ../../kernel".split(" "),function(h,d,a,b,l,m){h=h([],{declaredClass:"esri.dijit.analysis._AnalysisOptions",showSelectFolder:!1,showChooseExtent:!0,showHelp:!0,showCredits:!0,returnFeatureCollection:!1,showCloseIcon:!0,showSelectAnalysisLayer:!1,map:null,showReadyToUseLayers:!0,showAnalysisBusyIndicator:!0,constructor:function(a){},
_setShowSelectFolderAttr:function(a){!0===a&&a===this.get("returnFeatureCollection")&&(a=!a);this.showSelectFolder=a;this._webMapFolderSelect&&this._webMapFolderSelect.set("required",a)},_getShowSelectFolderAttr:function(){return this.showSelectFolder},_setShowChooseExtentAttr:function(a){this.showChooseExtent=a},_getShowChooseExtentAttr:function(){return this.showChooseExtent},_setMapAttr:function(a){this.map=a},_getMapAttr:function(){return this.map},_setShowHelpAttr:function(a){this.showHelp=a},
_getShowHelpAttr:function(){return this.showHelp},_setReturnFeatureCollectionAttr:function(a){(this.returnFeatureCollection=a)&&this.set("showSelectFolder",!a)},_getReturnFeatureCollectionAttr:function(){return this.returnFeatureCollection},_setShowCreditsAttr:function(a){this.showCredits=a},_getShowCreditsAttr:function(){return this.showCredits},_setShowCloseIconAttr:function(a){this.showCloseIcon=a},_getShowCloseIconAttr:function(){return this.showCloseIcon},_setShowSelectAnalysisLayerAttr:function(a){this.showSelectAnalysisLayer=
a},_getShowSelectAnalysisLayerAttr:function(){return this.showSelectAnalysisLayer},_setIsSingleTenantAttr:function(a){this.isSingleTenant=a},_getIsSingleTenantAttr:function(){return this.isSingleTenant},_setAllowChooseLabelAttr:function(a){this.allowChooseLabel=a},_getAllowChooseLabelAttr:function(){return this.allowChooseLabel},_setTitleAttr:function(b){this.title=b;this._toolTitle&&a.set(this._toolTitle,"innerHTML",b)},_getTitleAttr:function(){return this.title=a.get(this._toolTitle,"innerHTML")},
_setShowReadyToUseLayersAttr:function(a){this.showReadyToUseLayers=a},_getShowReadyToUseLayersAttr:function(a){return this.showReadyToUseLayers},_setFolderIdAttr:function(a){this.folderId=a},_getFolderIdAttr:function(){this._webMapFolderSelect&&this.folderStore&&(this.folderId=this._webMapFolderSelect.item?this.folderStore.getValue(this._webMapFolderSelect.item,"id"):"");return this.folderId},_setFolderNameAttr:function(a){this.folderName=a},_getFolderNameAttr:function(){this._webMapFolderSelect&&
(this.folderStore&&this._webMapFolderSelect.item)&&(this.folderName=this.folderStore.getValue(this._webMapFolderSelect.item,"name"));return this.folderName},_setHelperServicesAttr:function(a){this.helperServices=a},_getHelperServicesAttr:function(a){return this.helperServices},_getPortalSelfAttr:function(){return this.portalSelf},_setPortalSelfAttr:function(a){this.portalSelf=a},_setShowAnalysisBusyIndicatorAttr:function(a){a&&this.own(this.on("start",d.hitch(this,function(){this.showLoadingIndicator()})),
this.on("job-fail, job-result, job-cancel",d.hitch(this,function(){this.hideLoadingIndicator()})))},showLoadingIndicator:function(){this.get("showAnalysisBusyIndicator")&&(this._saveBtn.set("iconClass","esriLoading"),this.set("disableRunAnalysis",!0))},hideLoadingIndicator:function(){this.get("showAnalysisBusyIndicator")&&(this._saveBtn.set("iconClass",""),this.set("disableRunAnalysis",!1))}});l("extend-esri")&&d.setObject("dijit.analysis._AnalysisOptions",h,m);return h})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(a){a&&d.mixin(this,a)},distance:0,units:null,toJson:function(){var a={};this.distance&&(a.distance=this.distance);this.units&&(a.units=this.units);return a}});a("extend-esri")&&d.setObject("tasks.LinearUnit",h,b);return h})},"esri/tasks/geoenrichment/AddressStudyArea":function(){define(["../../declare","./StudyArea"],function(h,d){return h("esri.tasks.geoenrichment.AddressStudyArea",
[d],{address:null,constructor:function(a){a&&a.address&&(this.address=a.address)},toJson:function(){var a=this.inherited(arguments);a.address=this.address;return a},getGeomType:function(){return"point"}})})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.layers.DataSource",constructor:function(a){a&&d.mixin(this,a)},toJson:function(){}});a("extend-esri")&&d.setObject("layers.DataSource",h,b);
return h})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h){h.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(d,a){var b=h.doc,l;a=a||"text/xml";if(d&&h.trim(d)&&"DOMParser"in h.global){l=(new DOMParser).parseFromString(d,a);b=l.documentElement;if("parsererror"==b.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==b.namespaceURI){var m=b.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml",
"sourcetext")[0];m&&(m=m.firstChild.data);throw Error("Error parsing text "+b.firstChild.data+" \n"+m);}return l}if("ActiveXObject"in h.global){b=function(a){return"MSXML"+a+".DOMDocument"};b=["Microsoft.XMLDOM",b(6),b(4),b(3),b(2)];h.some(b,function(a){try{l=new ActiveXObject(a)}catch(b){return!1}return!0});if(d&&l&&(l.async=!1,l.loadXML(d),b=l.parseError,0!==b.errorCode))throw Error("Line: "+b.line+"\nCol: "+b.linepos+"\nReason: "+b.reason+"\nError Code: "+b.errorCode+"\nSource: "+b.srcText);if(l)return l}else if(b.implementation&&
b.implementation.createDocument){if(d&&h.trim(d)&&b.createElement){m=b.createElement("xml");m.innerHTML=d;var p=b.implementation.createDocument("foo","",null);h.forEach(m.childNodes,function(a){p.importNode(a,!0)});return p}return b.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(d,a){if(1<arguments.length)return dojox.xml.parser.replaceChildren(d,(d.ownerDocument||h.doc).createTextNode(a)),a;if(void 0!==d.textContent)return d.textContent;var b="";d&&h.forEach(d.childNodes,
function(a){switch(a.nodeType){case 1:case 5:b+=dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:b+=a.nodeValue}});return b};dojox.xml.parser.replaceChildren=function(d,a){var b=[];h.isIE&&h.forEach(d.childNodes,function(a){b.push(a)});dojox.xml.parser.removeChildren(d);h.forEach(b,h.destroy);h.isArray(a)?h.forEach(a,function(a){d.appendChild(a)}):d.appendChild(a)};dojox.xml.parser.removeChildren=function(d){for(var a=d.childNodes.length;d.hasChildNodes();)d.removeChild(d.firstChild);return a};
dojox.xml.parser.innerXML=function(d){return d.innerXML?d.innerXML:d.xml?d.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(d):null};return dojox.xml.parser})},"esri/tasks/UniqueValueDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./ClassificationDefinition"],function(h,d,a,b,l){h=h(l,{declaredClass:"esri.tasks.UniqueValueDefinition",type:"uniqueValueDef",attributeField:null,attributeField2:null,attributeField3:null,fieldDelimiter:null,
toJson:function(){var a=this.inherited(arguments);this.uniqueValueFields=[];this.attributeField&&this.uniqueValueFields.push(this.attributeField);this.attributeField2&&this.uniqueValueFields.push(this.attributeField2);this.attributeField3&&this.uniqueValueFields.push(this.attributeField3);d.mixin(a,{type:this.type,uniqueValueFields:this.uniqueValueFields});this.fieldDelimiter&&d.mixin(a,{fieldDelimiter:this.fieldDelimiter});return a}});a("extend-esri")&&d.setObject("tasks.UniqueValueDefinition",h,
b);return h})},"esri/tasks/geoenrichment/EnrichParametersBase":function(){define(["../../declare","../../SpatialReference","./StudyAreaOptions","./studyAreaFromJson","./studyAreaOptionsFromJson"],function(h,d,a,b,l){return h("esri.tasks.geoenrichment.EnrichParametersBase",null,{studyAreaOptions:null,studyAreas:null,countryID:null,datasetID:null,constructor:function(m){this.studyAreas=[];if(m){if(m.studyAreas){var h;m.inSR&&(h=m.inSR);for(var r=m.studyAreas,e=0;e<r.length;e++){var f=b(r[e]);h&&f.geometry&&
f.geometry.setSpatialReference(new d(h));this.studyAreas.push(f)}}m.studyAreasOptions?this.studyAreaOptions=l(m.studyAreasOptions):m.studyAreaOptions&&(this.studyAreaOptions=m.studyAreaOptions instanceof a?m.studyAreaOptions:l(m.studyAreaOptions));(h=m.useData)?(h.sourceCountry&&(this.countryID=h.sourceCountry),h.dataset&&(this.datasetID=h.dataset)):(m.countryID&&(this.countryID=m.countryID),m.datasetID&&(this.datasetID=m.datasetID))}},toJson:function(){for(var a={},b=[],d=0;d<this.studyAreas.length;d++)b.push(this.studyAreas[d].toJson());
0<b.length&&(a.studyAreas=b);this.studyAreaOptions&&(a.studyAreasOptions=this.studyAreaOptions.toJson());if(this.countryID||this.datasetID)b={},this.countryID&&(b.sourceCountry=this.countryID),this.datasetID&&(b.dataset=this.datasetID),a.useData=b;return a}})})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(h,d,a,b,l,m,p){h=h([p],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&
d.isObject(a)&&(this.codedValues=a.codedValues)},getName:function(b){var e;a.some(this.codedValues,function(a){a.code==b&&(e=a.name);return!!e});return e},toJson:function(){var a=this.inherited(arguments);a.codedValues=d.clone(this.codedValues);return m.fixJson(a)}});b("extend-esri")&&d.setObject("layers.CodedValueDomain",h,l);return h})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(h,d){var a=h.matrix={},b={};a._degToRad=function(a){return b[a]||(b[a]=Math.PI*a/180)};
a._radToDeg=function(a){return 180*(a/Math.PI)};a.Matrix2D=function(b){if(b)if("number"==typeof b)this.xx=this.yy=b;else if(b instanceof Array){if(0<b.length){for(var m=a.normalize(b[0]),h=1;h<b.length;++h){var r=m,e=a.normalize(b[h]),m=new a.Matrix2D;m.xx=r.xx*e.xx+r.xy*e.yx;m.xy=r.xx*e.xy+r.xy*e.yy;m.yx=r.yx*e.xx+r.yy*e.yx;m.yy=r.yx*e.xy+r.yy*e.yy;m.dx=r.xx*e.dx+r.xy*e.dy+r.dx;m.dy=r.yx*e.dx+r.yy*e.dy+r.dy}d.mixin(this,m)}}else d.mixin(this,b)};d.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});
d.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(b,d){return 1<arguments.length?new a.Matrix2D({dx:b,dy:d}):new a.Matrix2D({dx:b.x,dy:b.y})},scale:function(b,d){return 1<arguments.length?new a.Matrix2D({xx:b,yy:d}):"number"==typeof b?new a.Matrix2D({xx:b,yy:b}):new a.Matrix2D({xx:b.x,yy:b.y})},rotate:function(b){var d=Math.cos(b);b=Math.sin(b);return new a.Matrix2D({xx:d,xy:-b,yx:b,yy:d})},rotateg:function(b){return a.rotate(a._degToRad(b))},
skewX:function(b){return new a.Matrix2D({xy:Math.tan(b)})},skewXg:function(b){return a.skewX(a._degToRad(b))},skewY:function(b){return new a.Matrix2D({yx:Math.tan(b)})},skewYg:function(b){return a.skewY(a._degToRad(b))},reflect:function(b,d){1==arguments.length&&(d=b.y,b=b.x);var h=b*b,r=d*d,e=h+r,f=2*b*d/e;return new a.Matrix2D({xx:2*h/e-1,xy:f,yx:f,yy:2*r/e-1})},project:function(b,d){1==arguments.length&&(d=b.y,b=b.x);var h=b*b,r=d*d,e=h+r,f=b*d/e;return new a.Matrix2D({xx:h/e,xy:f,yx:f,yy:r/e})},
normalize:function(b){return b instanceof a.Matrix2D?b:new a.Matrix2D(b)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(b){var d=new a.Matrix2D,h;for(h in b)"number"==typeof b[h]&&("number"==typeof d[h]&&d[h]!=b[h])&&(d[h]=b[h]);return d},invert:function(b){b=a.normalize(b);var d=b.xx*b.yy-b.xy*b.yx;return b=new a.Matrix2D({xx:b.yy/d,xy:-b.xy/d,yx:-b.yx/d,yy:b.xx/d,dx:(b.xy*b.dy-b.yy*b.dx)/d,dy:(b.yx*b.dx-b.xx*b.dy)/d})},_multiplyPoint:function(a,
b,d){return{x:a.xx*b+a.xy*d+a.dx,y:a.yx*b+a.yy*d+a.dy}},multiplyPoint:function(b,d,h){b=a.normalize(b);return"number"==typeof d&&"number"==typeof h?a._multiplyPoint(b,d,h):a._multiplyPoint(b,d.x,d.y)},multiplyRectangle:function(b,d){var h=a.normalize(b);d=d||{x:0,y:0,width:0,height:0};if(a.isIdentity(h))return{x:d.x,y:d.y,width:d.width,height:d.height};var r=a.multiplyPoint(h,d.x,d.y),e=a.multiplyPoint(h,d.x,d.y+d.height),f=a.multiplyPoint(h,d.x+d.width,d.y),c=a.multiplyPoint(h,d.x+d.width,d.y+d.height),
h=Math.min(r.x,e.x,f.x,c.x),n=Math.min(r.y,e.y,f.y,c.y),u=Math.max(r.x,e.x,f.x,c.x),r=Math.max(r.y,e.y,f.y,c.y);return{x:h,y:n,width:u-h,height:r-n}},multiply:function(b){for(var d=a.normalize(b),h=1;h<arguments.length;++h){var r=d,e=a.normalize(arguments[h]),d=new a.Matrix2D;d.xx=r.xx*e.xx+r.xy*e.yx;d.xy=r.xx*e.xy+r.xy*e.yy;d.yx=r.yx*e.xx+r.yy*e.yx;d.yy=r.yx*e.xy+r.yy*e.yy;d.dx=r.xx*e.dx+r.xy*e.dy+r.dx;d.dy=r.yx*e.dx+r.yy*e.dy+r.dy}return d},_sandwich:function(b,d,h){return a.multiply(a.translate(d,
h),b,a.translate(-d,-h))},scaleAt:function(b,d,h,r){switch(arguments.length){case 4:return a._sandwich(a.scale(b,d),h,r);case 3:return"number"==typeof h?a._sandwich(a.scale(b),d,h):a._sandwich(a.scale(b,d),h.x,h.y)}return a._sandwich(a.scale(b),d.x,d.y)},rotateAt:function(b,d,h){return 2<arguments.length?a._sandwich(a.rotate(b),d,h):a._sandwich(a.rotate(b),d.x,d.y)},rotategAt:function(b,d,h){return 2<arguments.length?a._sandwich(a.rotateg(b),d,h):a._sandwich(a.rotateg(b),d.x,d.y)},skewXAt:function(b,
d,h){return 2<arguments.length?a._sandwich(a.skewX(b),d,h):a._sandwich(a.skewX(b),d.x,d.y)},skewXgAt:function(b,d,h){return 2<arguments.length?a._sandwich(a.skewXg(b),d,h):a._sandwich(a.skewXg(b),d.x,d.y)},skewYAt:function(b,d,h){return 2<arguments.length?a._sandwich(a.skewY(b),d,h):a._sandwich(a.skewY(b),d.x,d.y)},skewYgAt:function(b,d,h){return 2<arguments.length?a._sandwich(a.skewYg(b),d,h):a._sandwich(a.skewYg(b),d.x,d.y)}});h.Matrix2D=a.Matrix2D;return a})},"dijit/form/HorizontalRule":function(){define(["dojo/_base/declare",
"../_Widget","../_TemplatedMixin"],function(h,d,a){return h("dijit.form.HorizontalRule",[d,a],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(a){return this._positionPrefix+a+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);
var a;if(1==this.count)a=this._genHTML(50,0);else{var d,h=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){a=this._genHTML(0,0);for(d=1;d<this.count-1;d++)a+=this._genHTML(h*d,d);a+=this._genHTML(100,this.count-1)}else{a=this._genHTML(100,0);for(d=1;d<this.count-1;d++)a+=this._genHTML(100-h*d,d);a+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=a}})})},"esri/tasks/geoenrichment/GeoenrichmentTask":function(){define("../../declare dojo/_base/array dojo/dom-construct ./taskHelper ../FeatureSet ./EnrichParameters ./ReportParameters ../../IdentityManager ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline dojo/i18n!../../nls/jsapi".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n){function u(a){this.name="UserError";this.message=a||""}function t(a,b){return a.getAvailableCountries().then(function(a){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c].name})}function s(a){a=a.getExtent();return new e((a.xmin+a.xmax)/2,(a.ymin+a.ymax)/2,a.spatialReference)}n=n.geoenrichment.task.GeoenrichmentTask;u.prototype=Error.prototype;return h("esri.tasks.geoenrichment.GeoenrichmentTask",null,{token:null,url:null,constructor:function(a){this.url=a||location.protocol+
"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"},enrich:function(a){return b.invokeMethod(this,"/Geoenrichment/enrich",function(){a instanceof m||(a=new m(a));return b.jsonToRest(a.toJson())},function(a){(!a.results||1>a.results.length||!a.results[0].value||!a.results[0].value.FeatureSet||1>a.results[0].value.FeatureSet.length)&&b.throwEmptyResponse();var c={featureSets:[],messages:a.messages};a=a.results[0].value.FeatureSet;for(var e=0;e<a.length;e++)c.featureSets.push(new l(a[e]));
return c},"onEnrichComplete","onError")},getAvailableCountries:function(){return b.invokeMethod(this,"/Geoenrichment/Countries",null,function(a){if(a.error)throw a.error;a=a.countries;for(var b=0;b<a.length;b++){var c=a[b].datasets;delete a[b].datasets;a[b].datasetIDs=c}return a},"onGetAvailableCountriesComplete","onError")},getDataCollections:function(a,c,e){var d;c?d="/GetDataCollections/execute":(d="/Geoenrichment/DataCollections",a&&(d+="/"+a));return b.invokeMethod(this,d,function(){var b={suppressNullValues:!0};
e&&(b.outFields=0===e.length?"none":JSON.stringify(e));c&&(a&&(b.sourcecountry=a),b.searchtext="id:"+c);return b},function(a){if(a.error)throw a.error;a=a.results||a.dataCollections||a.DataCollections;for(var b=0;b<a.length;b++)a[b]={id:a[b].dataCollectionID,metadata:a[b].metadata,variables:a[b].data};return a},"onGetDataCollectionsComplete","onError")},createReport:function(c){var e=this;r.getCredential(this.url).then(function(d){try{var f=a.create("form",{target:"_blank",action:e.url+"/Geoenrichment/CreateReport",
method:"post"});c instanceof p||(c=new p(c));var n=b.jsonToRest(c.toJson());n.f="bin";n.token=d.token;for(var h in n)n.hasOwnProperty(h)&&a.create("input",{type:"hidden",name:h,value:n[h]},f);a.place(f,document.body);f.submit();a.destroy(f)}catch(m){e.onError(m)}},function(a){e.onError(a)})},getReports:function(a){var c=this;return t(this,a).then(function(a){return b.invokeMethod(c,"/Geoenrichment/Reports/"+a,null,function(a){for(var b=0;b<a.reports.length;b++){var c=a.reports[b].reportID;delete a.reports[b].reportID;
a.reports[b].id=c}return a.reports},"onGetReportsComplete","onError")})},getStandardGeographyLevels:function(a){function c(a){return b.invokeMethod(e,a,null,function(a){a=a.geographyLevels;for(var b=0;b<a.length;b++){var c=a[b];c.id=c.countryID;delete c.countryID;c.name=c.countryName;delete c.countryName;for(var c=c.datasets,e=0;e<c.length;e++){var g=c[e];g.id=g.datasetID;delete g.datasetID;g.geographyLayers=g.levels;delete g.levels}}return a},"onGetStandardGeographyLevelsComplete","onError")}var e=
this;return a?t(this,a).then(function(a){return c("/Geoenrichment/StandardGeographyLevels/"+a)}):c("/Geoenrichment/StandardGeographyLevels")},getServiceLimits:function(){return b.invokeMethod(this,"/Geoenrichment/ServiceLimits",null,function(a){return a.serviceLimits.value},"onGetServiceLimitsComplete","onError")},getCountries:function(a){var b;switch(a.type){case "point":b=a;break;case "polyline":b=a.paths[0];a=new c(a.spatialReference);a.addPath(b);b=s(a);break;case "polygon":b=a.rings[0],a=new f(a.spatialReference),
a.addRing(b),b=s(a)}return this.enrich({variables:["GlobalIntersect.*"],studyAreas:[{geometry:b}],forStorage:!1}).then(function(a){var b=[];a=a.featureSets[0].features;for(var c=0;c<a.length;c++){var e=a[c].attributes.sourceCountry;0>d.indexOf(b,e)&&b.push(e)}if(0===b.length)throw new u(n.noData);return b})},onEnrichComplete:function(a){},onGetAvailableCountriesComplete:function(a){},onGetDataCollectionsComplete:function(a){},onCreateReportComplete:function(a){},onGetReportsComplete:function(a){},
onGetStandardGeographyLevelsComplete:function(a){},onGetServiceLimitsComplete:function(a){},onError:function(a){}})})},"dijit/form/HorizontalRuleLabels":function(){define("dojo/_base/declare dojo/has dojo/number dojo/query dojo/_base/lang ./HorizontalRule".split(" "),function(h,d,a,b,l,m){h=h("dijit.form.HorizontalRuleLabels",m,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,
minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"\x3e',_suffix:"\x3c/div\x3e\x3c/div\x3e",_calcPosition:function(a){return a},_genHTML:function(a,b){var e=this.labels[b];return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(e)+this._labelPrefix+e+this._suffix},_genDirectionHTML:function(a){return""},
getLabels:function(){var d=this.labels;!d.length&&this.srcNodeRef&&(d=b("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!d.length&&1<this.count)for(var h=this.minimum,e=(this.maximum-h)/(this.count-1),f=0;f<this.count;f++)d.push(f<this.numericMargin||f>=this.count-this.numericMargin?"":a.format(h,this.constraints)),h+=e;return d},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});d("dojo-bidi")&&h.extend({_setTextDirAttr:function(a){this.textDir!=
a&&(this._set("textDir",a),b(".dijitRuleLabelContainer",this.domNode).forEach(l.hitch(this,function(a){a.style.direction=this.getTextDir(a.innerText||a.textContent||"")})))},_genDirectionHTML:function(a){return this.textDir?"direction:"+this.getTextDir(a)+";":""}});return h})},"dojox/widget/TitleGroup":function(){define(["dojo","dijit/registry","dijit/_Widget","dijit/TitlePane"],function(h,d,a,b){a=b.prototype;var l=function(){var a=this._dxfindParent&&this._dxfindParent();a&&a.selectChild(this)};
a._dxfindParent=function(){var a=this.domNode.parentNode;return a?(a=d.getEnclosingWidget(a))&&a instanceof dojox.widget.TitleGroup&&a:a};h.connect(a,"_onTitleClick",l);h.connect(a,"_onTitleKey",function(a){(!a||!a.type||!("keypress"==a.type&&a.charOrCode==h.keys.TAB))&&l.apply(this,arguments)});return h.declare("dojox.widget.TitleGroup",dijit._Widget,{"class":"dojoxTitleGroup",addChild:function(a,b){return a.placeAt(this.domNode,b)},removeChild:function(a){this.domNode.removeChild(a.domNode);return a},
selectChild:function(a){a&&h.query("\x3e .dijitTitlePane",this.domNode).forEach(function(b){(b=d.byNode(b))&&b!==a&&b.open&&b.toggle()});return a}})})},"esri/dijit/analysis/FindSimilarLocations":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/fx/easing dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ToggleButton dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/Dialog dojox/form/CheckedMultiSelect ../../kernel ../../lang ../../layers/FeatureLayer ./AnalysisBase ./_AnalysisOptions ./utils ./CreditEstimator ./ExpressionForm ../../geometry/Extent ../../geometry/ScreenPoint ../../symbols/CartographicLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol ../../tasks/query ../../renderers/jsonUtils dojo/i18n!../../nls/jsapi dojo/text!./templates/FindSimilarLocations.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$,ba,Y,ca){h=d([q,w,v,z,x,W,R],{declaredClass:"esri.dijit.analysis.FindSimilarLocations",templateString:ca,widgetsInTemplate:!0,i18n:null,returnProcessInfo:!0,toolName:"FindSimilarLocations",helpFileName:"FindSimilarLocations",resultParameter:"similarResultLayer",primaryActionButttonClass:"esriAnalysisSubmitButton",inputLayer:null,searchLayer:null,inputQuery:null,searchLayers:[],analysisFields:[],
numberOfResults:0,enableInputSelection:!0,selectionLayer:null,_isAttrFlag:!1,constructor:function(a){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode);this._expression=null},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,m.disconnect);delete this._pbConnects;delete this._mapClickHandle},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,Y.findSimilarLocations);a.mixin(this.i18n,Y.expressionGrid)},postCreate:function(){this.inherited(arguments);
g.add(this._form.domNode,"esriSimpleForm");n.set(this._attrSelect.selectNode,"width","80%");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a});this.selectionLayer&&(this.selectionLayer.clearSelection(),this.map.removeLayer(this.selectionLayer),this.selectionLayer=null);this._mapClickHandle&&delete this._mapClickHandle;this._attrSelect.reset()},
clear:function(){this.selectionLayer&&(this.selectionLayer.clearSelection(),this.map.removeLayer(this.selectionLayer),this.selectionLayer=null);this._attrSelect.reset();this._mapClickHandle&&delete this._mapClickHandle},_handleSaveBtnClick:function(){if(this._form.validate()){this._saveBtn.set("disabled",!0);var a={},b={},e;a.inputLayer=p.toJson(S.constructAnalysisInputLyrObj(this.inputLayer));this.get("InputQuery")&&(a.inputQuery=this.inputQuery);a.searchLayer=p.toJson(S.constructAnalysisInputLyrObj(this.get("searchLayer")));
a.analysisFields=this.get("analysisFields");a.numberOfResults=this.get("numberOfResults");this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(e={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(e.extent=this.map.extent._normalize(!0)),a.context=
p.toJson(e));b.jobParams=a;b.itemParams={description:void 0,tags:c.substitute(this.i18n.itemTags,{analysisLayerName:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));a.returnProcessInfo=this.returnProcessInfo;this.execute(b)}},_handleShowCreditsClick:function(b){b.preventDefault();b={};var c;this._form.validate()&&(b.inputLayer=p.toJson(S.constructAnalysisInputLyrObj(this.inputLayer)),this.get("InputQuery")&&(b.inputQuery=this.inputQuery),
b.searchLayer=p.toJson(S.constructAnalysisInputLyrObj(this.get("searchLayer"))),b.analysisFields=this.get("analysisFields"),b.numberOfResults=this.get("numberOfResults"),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&(c.extent=
this.map.extent._normalize(!0)),b.context=p.toJson(c)),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_save:function(){},_buildUI:function(){var c=!0;this._loadConnections();this.signInPromise.then(a.hitch(this,S.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),
S.populateAnalysisLayers(this,"inputLayer","inputLayers"));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),c=!1);n.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;S.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:
""})}));n.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");n.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this.searchLayers&&b.forEach(this.searchLayers,function(a,b){this._candidateSelect.addOption({value:b+1,label:a.name})},this);S.addReadyToUseLayerOption(this,[this._analysisSelect,this._candidateSelect]);this._selectBtn.set("disabled",!this.enableInputSelection);this._queryBtn.set("disabled",!this.enableInputSelection);this.inputLayer&&
this._updateAnalysisLayerUI(c);this._expressionForm.on("add-expression",a.hitch(this,this._handleExpressionFormAdd));this._expressionForm.on("cancel-expression",a.hitch(this,this._handleExpressionFormCancel))},_updateAnalysisLayerUI:function(a){if(this.inputLayer){u.set(this._toolDescription,"innerHTML",c.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name}));var e=this._candidateSelect.getOptions(),g=!1,g=!1;this._isAnalysisSelect&&(g=b.some(e,function(a,b){return a.label===this.inputLayer.title},
this),g||(e=e.splice(e.length-2,2),(g=b.some(this.searchLayers,function(a){return a&&a.analysisReady&&this.inputLayer.analysisReady&&a.itemId===this.inputLayer.itemId},this))||this.searchLayers.push(this.inputLayer),e.unshift({value:this.searchLayers.length,label:this.inputLayer.title}),this._candidateSelect.addOption(e)));this.set("selectionLayer");this.set("analysisFields");a&&(this.outputLayerName=c.substitute(this.i18n.outputLayerName,{analysisLayerName:this.inputLayer.name}));this._outputLayerInput.set("value",
this.outputLayerName);this._expressionForm.set("showFirstRow",!1);this._expressionForm.set("firstOperands",[this.inputLayer]);this._expressionForm.set("inputOperands",[this.inputLayer]);this._expressionForm.set("selectedFirstOperand",this.inputLayer);this._expressionForm.init()}},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=
!0,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this.selectionLayer&&(this.clear(),this.set("inputQuery",null),this._expression=null,u.set(this._filterLabel,"innerHTML","")),this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&S.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?this.inputLayers:this.searchLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._candidateSelect,posIncrement:this._isAnalysisSelect?0:
1,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(){this._isAnalysisSelect&&(this._handleAnalysisLayerChange(this._analysisSelect.get("value")),this._isAnalysisSelect=!1)}))},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",
a)},_setSearchLayersAttr:function(a){this.searchLayers=a},_getSearchLayersAttr:function(){return this.searchLayers},_setSearchLayerAttr:function(a){this.searchLayer=a},_getSearchLayerAttr:function(){var a=this._candidateSelect.get("value");if(this._candidateSelect&&"search"!==a)this.searchLayer=this.searchLayers[this._candidateSelect.get("value")-1];else if("search"===a||"browse"===a)this.searchLayer=null;return this.searchLayer},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},
_setInputLayersAttr:function(a){this.inputLayers=a},_setEnableInputSelectionAttr:function(a){this.enableInputSelection=a},_getEnableInputSelectionAttr:function(){return this.enableInputSelection},_setAnalysisFieldsAttr:function(){var a,c;if(this.get("inputLayer")&&this.get("searchLayer")&&!(0===this.inputLayer.fields.length||0===this.searchLayer.fields.length))c=this.inputLayer.fields,a=b.map(this.searchLayer.fields,function(a){return a.name}),c=b.filter(c,function(c){if(-1!==b.indexOf(a,c.name)&&
-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],c.type)&&(c.name!==this.inputLayer.objectIdField||c.name!==this.searchLayer.objectIdField))return!0},this),c=b.map(c,function(a){return{value:a.name,label:C.isDefined(a.alias)&&""!==a.alias?a.alias:a.name}}),this._attrSelect&&(this._attrSelect.removeOption(this._attrSelect.get("options")),this._attrSelect.addOption(c)),this.analysisFields=c},_getAnalysisFieldsAttr:function(){this._attrSelect&&
(this.analysisFields=this._attrSelect.get("value"));return this.analysisFields},_setInputQueryAttr:function(a){this.inputQuery=a},_getInputQueryAttr:function(){return this.inputQuery},_setNumberOfResultsAttr:function(a){this.numberOfResults=a},_getNumberOfResultsAttr:function(){return this.numberOfResults},_getInputQueryObjAttr:function(){var a=null;this.get("InputQuery")&&(a={operator:"",layer:0},a.where=this.inputQuery);return this.inputQueryObj=a},_setSelectionLayerAttr:function(){if(this.get("inputLayer"))if(this.selectionLayer=
new O(this.inputLayer.url&&!this.inputLayer._collection?this.inputLayer.url:this.inputLayer.toJson(),{outFields:["*"],mode:this.inputLayer.url&&!this.inputLayer._collection?O.MODE_SELECTION:O.MODE_SNAPSHOT}),this.selectionLayer.setRenderer(null),this.selectionLayer.on("selection-complete",a.hitch(this,this._handleInputLayerSelectionComplete)),this.selectionLayer.loaded)this._onSelectionLayerLoad(this.inputLayer,this.selectionLayer);else this.selectionLayer.on("load",a.hitch(this,this._onSelectionLayerLoad,
this.inputLayer,this.selectionLayer))},_onSelectionLayerLoad:function(b,c){var e;b.renderer&&(c.setRenderer(ba.fromJson(b.renderer.toJson())),C.isDefined(b.renderer.isMaxInclusive)&&(c.renderer.isMaxInclusive=b.renderer.isMaxInclusive));c.setScaleRange(b.minScale,b.maxScale);this._connect(b,"onScaleRangeChange",a.hitch(this,function(a,b){a.setScaleRange(b.minScale,b.maxScale)},c,b));this.map.addLayer(c);"esriGeometryPoint"===c.geometryType||"esriGeometryMultPoint"===c.geometryType?(e=new U,e.setStyle(U.STYLE_TARGET),
e._setDim(16,16,0),e.setOutline(new aa(Z.STYLE_SOLID,new l([0,255,255]),2,aa.CAP_ROUND,aa.JOIN_ROUND)),e.setColor(new l([0,0,0,0])),c.setSelectionSymbol(e)):"esriGeometryPolyline"===c.geometryType?c.setSelectionSymbol(new Z(Z.STYLE_SOLID,new l([0,255,255]),2)):"esriGeometryPolygon"===c.geometryType&&c.setSelectionSymbol(new V(V.STYLE_NULL,new Z(Z.STYLE_SOLID,new l([0,255,255]),2),new l([0,0,0,0])))},validateServiceName:function(a){return S.validateServiceName(a,{textInput:this._outputLayerInput})},
_setPrimaryActionButttonClassAttr:function(a){this.primaryActionButttonClass=a},_getPrimaryActionButttonClassAttr:function(){return this.primaryActionButttonClass},_connect:function(a,b,c){this._pbConnects.push(m.connect(a,b,c))},validate:function(){this.get("searchLayer")&&this.get("inputLayer")&&this.get("inputLayer").id===this.get("searchLayer").id&&!this.get("inputQuery")?(this._showMessages(this.i18n.reqSelectionMsg),this.set("disableRunAnalysis",!0)):this.get("searchLayer")&&0===this._attrSelect.getOptions().length?
(this._showMessages(this.i18n.noFieldMatchMsg),this.set("disableRunAnalysis",!0)):(this._handleCloseMsg(),this.set("disableRunAnalysis",!1))},_handleCandidateChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show()):"search"===a?(this._attrSelect&&this._attrSelect.removeOption(this._attrSelect.get("options")),this.analysisFields=
[]):(this.set("analysisFields"),this.validate())},_handleQueryButtonClick:function(){this._expDialog.set("title",this.i18n.query);this._selectBtn.set("checked",!1);this._isAttrFlag=!0;this._expression?(this._expressionForm.set("action","edit"),this._expressionForm.set("expression",this._expression.expression)):this._expressionForm.set("action","add");this._expDialog.show()},_handleExpressionFormAdd:function(a){this.selectionLayer&&this.selectionLayer.clearSelection();if("add"===a.action||"edit"===
a.action){u.set(this._filterLabel,"innerHTML",c.trim(a.expression._attributeText));this._expression=a;var b;b=new $;b.returnGeometry=!0;b.where=a.expression.where;this.selectionLayer.selectFeatures(b,O.SELECTION_ADD)}this._expDialog.hide();this.set("inputQuery",a.expression.where);this.validate()},_handleExpressionFormCancel:function(){this._expDialog.hide()},_handleTopRankRadioChange:function(a){this._ranksInput.set("disabled",!a);a&&this.set("numberOfResults",this._ranksInput.get("value"))},_handleAllRankRadioChange:function(a){a&&
this.set("numberOfResults",0)},_handleTopRankInputChange:function(a){this.set("numberOfResults",a)},_handleSelectionButtonClick:function(b){b&&!this._mapClickHandle?(this._mapClickHandle=this.map.on("click",a.hitch(this,this._handleMapClick)),this.emit("selecttool-activate",{}),this._isAttrFlag=!1):(this._mapClickHandle.remove(),this._mapClickHandle=null,this.emit("selecttool-deactivate",{}))},_handleMapClick:function(c){var e,g,d;!this._isAttrFlag&&this._expression&&this.selectionLayer.clearSelection();
g=6;(e=this.inputLayer.renderer)&&"esri.renderer.SimpleRenderer"===e.declaredClass?(d=e.symbol,d.xoffset&&(g=Math.max(g,Math.abs(d.xoffset))),d.yoffset&&(g=Math.max(g,Math.abs(d.yoffset)))):e&&("esri.renderer.UniqueValueRenderer"===e.declaredClass||"esri.renderer.ClassBreaksRenderer"===e.declaredClass)&&b.forEach(e.infos,function(a){d=a.symbol;d.xoffset&&(g=Math.max(g,Math.abs(d.xoffset)));d.yoffset&&(g=Math.max(g,Math.abs(d.yoffset)))});e=c.screenPoint;c=this.map.toMap(new X(e.x-g,e.y+g));e=this.map.toMap(new X(e.x+
g,e.y-g));c=new T(c.x,c.y,e.x,e.y,this.map.spatialReference);e=new $;e.returnGeometry=!0;e.geometry=c;e.where=this.inputLayer.getDefinitionExpression();this.inputLayer.queryFeatures(e).then(a.hitch(this,function(a){if(a){var c,e,g;g=[];c=[];0<this.selectionLayer.getSelectedFeatures().length&&(e=b.map(this.selectionLayer.getSelectedFeatures(),function(a){return a.attributes[this.selectionLayer.objectIdField]},this));b.forEach(a.features,function(a){e?e&&-1===b.indexOf(e,a.attributes[this.selectionLayer.objectIdField])?
c.push(a.attributes[this.selectionLayer.objectIdField]):g.push(a.attributes[this.selectionLayer.objectIdField]):c.push(a.attributes[this.selectionLayer.objectIdField])},this);0<c.length&&(a=new $,a.returnGeometry=!0,a.objectIds=c,this.selectionLayer.selectFeatures(a,O.SELECTION_ADD));0<g.length&&(a=new $,a.returnGeometry=!0,a.objectIds=g,this.selectionLayer.selectFeatures(a,O.SELECTION_SUBTRACT))}}))},_showMessages:function(b){u.set(this._bodyNode,"innerHTML",b);r.fadeIn({node:this._errorMessagePane,
easing:k.quadIn,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();r.fadeOut({node:this._errorMessagePane,easing:k.quadOut,onEnd:a.hitch(this,function(){n.set(this._errorMessagePane,{display:"none"})})}).play()},_handleInputLayerSelectionComplete:function(a){a=this.selectionLayer.getSelectedFeatures();var e;!this._isAttrFlag&&0<a.length&&(e="",b.map(a,function(a){e+=this.selectionLayer.objectIdField+" \x3d "+a.attributes[this.selectionLayer.objectIdField]+
" OR ";return a.attributes[this.selectionLayer.objectIdField]},this),e=e.substring(0,e.lastIndexOf(" OR ")),u.set(this._filterLabel,"innerHTML",c.substitute(this.i18n.selectedFeaturesLabel,{total:a.length})),this.set("inputQuery",e),this._expression=null,this.validate());!this._isAttrFlag&&0===a.length&&(u.set(this._filterLabel,"innerHTML",""),this.set("inputQuery",null),this._expression=null,this.validate())}});e("extend-esri")&&a.setObject("dijit.analysis.FindSimilarLocations",h,L);return h})},
"esri/dijit/geoenrichment/DataBrowser/SearchTextBox":function(){define("../../../declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/keys dijit/Tooltip dijit/form/TextBox".split(" "),function(h,d,a,b,l,m,p,r){return h([r],{prompt:"",_trueValue:"",buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"SearchTextBox");var e=a.create("div",{"class":"SearchTextBox_SearchBox"},this.domNode);l(e,"click",d.hitch(this,this._onSearch));l(this,"keypress",d.hitch(this,this._stopEvent));
this._onBlur(null)},showTooltip:function(a){p.show(a,this.textbox,["above","below"])},_stopEvent:function(a){a.charOrCode&&13===a.charOrCode&&(a.stopPropagation(),a.preventDefault())},_setPromptMessageAttr:function(a){this.prompt=a;if(!this._trueValue||0===this._trueValue.length||!this.textbox.value||0===this.textbox.value.length)this._setDisplayedValueAttr(this.prompt),b.add(this.textbox,"SearchTextBox_PromptMode")},_onFocus:function(a){(!this._trueValue||0===this._trueValue.length)&&b.remove(this.textbox,
"SearchTextBox_PromptMode");this._setDisplayedValueAttr(this._trueValue);this.inherited(arguments)},_onBlur:function(a){p.hide(this.textbox);this._trueValue=this._getValueAttr();if(!this._trueValue||0===this._trueValue.length)this._setDisplayedValueAttr(this.prompt),b.add(this.textbox,"SearchTextBox_PromptMode");this.inherited(arguments)},_onInput:function(a){p.hide(this.textbox);a.keyCode==m.ENTER&&this._onSearch();this.inherited(arguments)},_onSearch:function(){this.onSearch()},onSearch:function(){}})})},
"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(h,d,a,b,l,m,p,r,e,f){h=h([f],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)?("string"==
typeof a&&(a=JSON.parse(a)),d.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)):console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=a.attributes.imageData;a=
a.attributes.size;if(!a)return null;var e=this._getContext(a[0],a[1]),d=e.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&d.data instanceof window.CanvasPixelArray)for(var f=d.data,k=f.length;k--;)f[k]=b[k];else d.data.set(b);e.putImageData(d,0,0);
return new r(e.canvas.toDataURL(),a[0],a[1])},setColors:function(a){if(a&&(a instanceof Array||a.colors))this.gradient=this._generateGradient(a.colors||a),this.colors=a;return this},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops))this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=
a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var b=d.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(b.fieldOffset=this.fieldOffset);
a.forEach(b.colorStops,function(a){a.color=e.toJsonColor(a.color)});return p.fixJson(b)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,e){var d=b.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: -10000px; top: 0px;"},null);d.width=a;d.height=e;document.body.appendChild(d);return d},_generateGradient:function(a,b){b||(b=
512);for(var e=this._colorsToStops(a),d=this._getContext(1,b||512),f=d.createLinearGradient(0,0,0,b),k=0,g;k<e.length;k++)g=e[k],f.addColorStop(g.ratio,g.color.toCss(!0));d.fillStyle=f;d.fillRect(0,0,1,b);return d.getImageData(0,0,1,b).data},_colorsToStops:function(b){var e=[];if(!b[0])return e;if(null!=b[0].ratio)e=a.map(b,function(a){return{ratio:a.ratio,color:this._toColor(a.color)}},this);else if(null!=b[0].value){var d=Infinity,e=-Infinity,f=0,h;for(h=0;h<b.length;h++){var k=b[h].value;k<d&&
(d=k);k>e&&(e=k)}f=e-d;this.maxPixelIntensity=e;this.minPixelIntensity=d;e=a.map(b,function(a){var b=a.value;a=this._toColor(a.color);return{value:b,ratio:(b-d)/f,color:a}},this)}else var g=b.length-1,e=a.map(b,function(a,b){return{color:this._toColor(a),ratio:b/g}},this);return e},_toColor:function(a){!a.toRgba&&!a.declaredClass&&(a=new e(a));return a}});l("extend-esri")&&d.setObject("renderer.HeatmapRenderer",h,m);return h})},"esri/dijit/analysis/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/has dojo/aspect dgrid/util/has-css3 dgrid/Grid dojo/has!touch?dgrid/util/touch put-selector/put ../../kernel".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u){function t(a,b,c,e){e=this.grid.isRTL?"right":"left";var d=".dgrid-expando-icon";b&&(d+=".ui-icon.ui-icon-triangle-1-"+(c?"se":"e"));a=n("div"+d+"[style\x3dmargin-"+e+": "+a*(this.indentWidth||9)+"px; float: "+e+"]");a.innerHTML="\x26nbsp;";return a}function s(a){var b=this,c=this.style.height;c&&(this.style.display="0px"==c?"none":"block");a&&(n(this,".dgrid-tree-resetting"),setTimeout(function(){n(b,"!dgrid-tree-resetting")}));this.style.height=""}function k(b){var k=
b.renderCell||f.defaultRenderCell,h,p;b||(b={});b.shouldExpand=b.shouldExpand||function(a,b,c){return c};r.after(b,"init",function(){var f=b.grid,k=".dgrid-content .dgrid-column-"+b.id,q=[];f.cleanEmptyObservers=!1;if(!f.store)throw Error("dgrid tree column plugin requires a store to operate.");b.renderExpando||(b.renderExpando=t);q.push(f.on(b.expandOn||".dgrid-expando-icon:click,"+k+":dblclick,"+k+":keydown",function(a){var b=f.row(a);(!f.store.mayHaveChildren||f.store.mayHaveChildren(b.data))&&
(("keydown"!=a.type||32==a.keyCode)&&!("dblclick"==a.type&&p&&1<p.count&&b.id==p.id&&-1<a.target.className.indexOf("dgrid-expando-icon")))&&f.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(p&&p.id==f.row(a).id?p.count++:p={id:f.row(a).id,count:1})}));e("touch")&&q.push(f.on(c.selector(k,c.dbltap),function(){f.expand(this)}));f._expanded||(f._expanded={});q.push(r.after(f,"insertRow",function(a){var c=this.row(a);b.shouldExpand(c,h,this._expanded[c.id])&&this.expand(a,!0,!0);return a}));
q.push(r.before(f,"removeRow",function(a,b){var c=a.connected;c&&(l("\x3e.dgrid-row",c).forEach(function(a){f.removeRow(a,!0)}),b||n(c,"!"))}));b.collapseOnRefresh&&q.push(r.after(f,"cleanup",function(){this._expanded={}}));f._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};f.expand=function(c,d,k){var h=c.element?c:f.row(c),q=e("transitionend");c=h.element;if((c=-1<c.className.indexOf("dgrid-expando-icon")?c:l(".dgrid-expando-icon",c)[0])&&c.mayHaveChildren&&
(k||d!==!!this._expanded[h.id])){var p=void 0===d?!this._expanded[h.id]:d;n(c,".ui-icon-triangle-1-"+(p?"se":"e")+"!ui-icon-triangle-1-"+(p?"e":"se"));var t=c.preloadNode;d=h.element;var v,r,u,x={originalQuery:this.query};if(!t){v=d.connected=n("div.dgrid-tree-container");var t=c.preloadNode=n(d,"+",v,"div.dgrid-preload"),w=function(a){return f.store.getChildren(h.data,a)};b.allowDuplicates&&(x.parentId=h.id);"level"in c&&(w.level=c.level);a.when(f.renderQuery?f._trackError(function(){return f.renderQuery(w,
t,x)}):f.renderArray(w(x),t,"level"in w?{queryLevel:w.level}:{}),function(){if(f._expanded[h.id]&&q){var a=v.scrollHeight;v.style.height=a?a+"px":"auto"}});q?m(v,q,s):s.call(v)}v=d.connected;v.hidden=!p;r=v.style;!q||k?(r.display=p?"block":"none",r.height=""):(p?(r.display="block",u=v.scrollHeight,r.height="0px"):(n(v,".dgrid-tree-resetting"),r.height=v.scrollHeight+"px"),setTimeout(function(){n(v,"!dgrid-tree-resetting");r.height=p?u?u+"px":"auto":"0px"}));p?this._expanded[h.id]=!0:delete this._expanded[h.id]}};
r.after(b,"destroy",function(){d.forEach(q,function(a){a.remove()});delete f.expand;delete f._calcRowHeight})});b.renderCell=function(a,c,e,d){var f=b.grid,n=Number(d&&d.queryLevel)+1,l=!f.store.mayHaveChildren||f.store.mayHaveChildren(a),m=d.parentId,n=h=isNaN(n)?0:n,f=b.renderExpando(n,l,f._expanded[(m?m+"-":"")+f.store.getIdentity(a)],a);f.level=n;f.mayHaveChildren=l;d.level=n;k.call(b,a,c,e,d);e.insertBefore(f,e.firstChild)};return b}k.defaultRenderExpando=t;p("extend-esri")&&b.setObject("dijit.analysis.tree",
k,u);return k})},"esri/tasks/geoenrichment/RingBuffer":function(){define(["../../declare","../../units","./StudyAreaOptions"],function(h,d,a){return h("esri.tasks.geoenrichment.RingBuffer",[a],{radii:null,units:null,constructor:function(a){a&&(a.bufferRadii?this.radii=a.bufferRadii:a.radius?this.radii=[a.radius]:a.radii&&(this.radii=a.radii),this.units=a.bufferUnits||a.units);this.radii||(this.radii=[1]);this.units||(this.units=d.MILES)},toJson:function(){return{areaType:"RingBuffer",bufferUnits:this.units,
bufferRadii:this.radii}}})})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(h,d,a,b,l,m,p){h=h(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(d.mixin(this,a),a.exportOptions&&(this.exportOptions=new p(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&(this.timeExtent=new l(a.timeExtent)),this.timeReference=new m(a.timeReference))}});
d.mixin(h,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});a("extend-esri")&&d.setObject("layers.TimeInfo",h,b);return h})},"esri/dijit/analysis/CreateDriveTimeAreas":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime dojo/i18n!../../nls/jsapi dojo/text!./templates/CreateDriveTimeAreas.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){h=d([k,g,q,w,v,J,F],{declaredClass:"esri.dijit.analysis.CreateDriveTimeAreas",templateString:O,widgetsInTemplate:!0,inputLayer:null,inputType:null,outputLayerName:null,breakValues:null,overlapPolicy:"Overlap",distanceDefaultUnits:"Miles",travelMode:"Driving",i18n:null,toolName:"CreateDriveTimeAreas",helpFileName:"CreateDriveTimeAreas",resultParameter:"DriveTimeAreasLayer",constructor:function(a,b){this._pbConnects=
[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.bufferTool);a.mixin(this.i18n,C.driveTimes)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");this._breakValuesInput.set("validator",a.hitch(this,this.validateDistance));this.outputLayerInput.set("validator",a.hitch(this,
this.validateServiceName));this.breakValues=[];this.breakValues.push(this._breakValuesInput.get("value"));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_toUpperFirstLetter:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.InputLayer=m.toJson(N.constructAnalysisInputLyrObj(this.inputLayer)),b.BreakValues=m.toJson(this.get("breakValues")),
b.Breakunits=this.get("breakUnits"),b.OverlapPolicy=this.get("overlapPolicy"),this._trafficTimeWidget.get("checked")&&(b.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(b.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay"))),this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this.outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)})),
this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){a={};var b={},c;this._form.validate()&&(this._saveBtn.set("disabled",!0),a.InputLayer=m.toJson(N.constructAnalysisInputLyrObj(this.inputLayer)),a.BreakValues=this.get("breakValues"),a.Breakunits=this.get("breakUnits"),a.OverlapPolicy=this.get("overlapPolicy"),c=this._drivingModeSelect.getOptions(this._drivingModeSelect.get("value")),
a.travelMode=c&&m.toJson(c.travelMode),this._trafficTimeWidget.get("checked")&&(a.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(a.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay"))),this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this.outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)})),
this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=m.toJson(c)),b.jobParams=a,b.itemParams={description:e.substitute(this.i18n.itemDescription,{layername:this.inputLayer.name,distance_field:a.Distances||a.Field,units:a.Units}),tags:e.substitute(this.i18n.itemTags,{layername:this.inputLayer.name}),snippet:this.i18n.itemSnippet},this.showSelectFolder&&(b.itemParams.folder=
this.get("folderId")),this.execute(b))},_handleResultLyrInputChange:function(a){this.set("outputLayerName",a)},_handleDistValueChange:function(){this.set("outputLayerName")},_handleDistUnitsChange:function(a){this.set("breakUnits",a);this.set("outputLayerName");this.validateDistance()},_handleDistanceTypeChange:function(a){var b,c;c=this._drivingModeSelect.getOptions(this._drivingModeSelect.get("value"));K.isDefined(c)?(a=c.modei18nKey,b=c.units.toLowerCase(),this.set("travelMode",c.travelMode.name)):
(c=a.split("-"),a=c[0].toLowerCase(),b=c[1]?c[1].toLowerCase():"distance",this.set("travelMode",c[0]));b&&(f.set(this._useTrafficLabelRow,"display","time"===b&&"driving"===a?"":"none"),this._trafficTimeWidget.set("disabled","time"!==b&&"driving"!==a),this._trafficTimeWidget.set("reset","time"!==b&&"driving"!==a));"time"===b?(this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Seconds",label:this.i18n.seconds},{value:"Minutes",
label:this.i18n.minutes,selected:"selected"},{value:"Hours",label:this.i18n.hours}]),this.set("breakUnits",this._distanceUnitsSelect.get("value"))):(this.get("distanceDefaultUnits")&&this.set("breakUnits",this.get("distanceDefaultUnits")),this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",
label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]),this._distanceUnitsSelect.set("value",this.breakUnits));this.set("outputLayerName");this.validateDistance()},_handleOverlapPolicyChange:function(a,b){this.set("overlapPolicy",b);t.remove(this._Overlap,"selected");t.remove(this._Dissolve,"selected");t.remove(this._Split,"selected");t.add(a,"selected")},_save:function(){},_buildUI:function(){var b=!0;f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");N.initHelpLinks(this.domNode,
this.showHelp);this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),N.populateAnalysisLayers(this,"inputLayer","inputLayers"));N.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this.outputLayerInput.set("value",this.outputLayerName),b=!1);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=
a;N.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));this.distanceDefaultUnits&&this._distanceUnitsSelect.set("value",this.distanceDefaultUnits);f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");N.populateTravelModes({selectWidget:this._drivingModeSelect,widget:this,separator:"-",selectDefaultMode:!0});this._handleDistanceTypeChange("Driving-Time");
this.inputLayer&&this._updateAnalysisLayerUI(b);this._loadConnections()},_updateAnalysisLayerUI:function(a){this.inputLayer&&(c.set(this._driveTimeDescription,"innerHTML",e.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&this.set("outputLayerName"))},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._browsedlg.show()):
(this.inputLayer=this.inputLayers[a],this.outputLayerName=null,this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&N.addAnalysisReadyLayer({item:b.selection,layers:this.inputLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},validateTime:function(){},validateDistance:function(){var c=this,e,g=[],d,f,k;this.set("breakValues");k=N.getMaxInputByMode({type:this._drivingModeSelect.get("value").replace("-",
""),units:this._distanceUnitsSelect.get("value")});e=a.trim(this._breakValuesInput.get("value")).split(" ");if(0===e.length)return!1;b.forEach(e,function(e){e=s.parse(e);if(isNaN(e)||e>k)return g.push(0),!1;d=s.format(e,{locale:"root"});K.isDefined(d)?K.isDefined(d)||(d=s.format(e,{locale:"en-us"})):d=s.format(e,{locale:"en"});K.isDefined(d)&&(f=a.trim(d).match(/\D/g));f&&b.forEach(f,function(a){"."===a||","===a?g.push(1):"-"===a&&"polygon"===c.inputType?g.push(1):g.push(0)})});return-1!==b.indexOf(g,
0)?(this._breakValuesInput.focus(),!1):!0},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1));l.connect(this._drivingModeSelect,"onChange",a.hitch(this,"_handleDistanceTypeChange"));l.connect(this._Overlap,"onclick",a.hitch(this,"_handleOverlapPolicyChange",this._Overlap,"Overlap"));l.connect(this._Dissolve,"onclick",a.hitch(this,"_handleOverlapPolicyChange",this._Dissolve,"Dissolve"));l.connect(this._Split,
"onclick",a.hitch(this,"_handleOverlapPolicyChange",this._Split,"Split"))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){K.isDefined(a)&&"esriGeometryPoint"===a.geometryType&&(this.inputLayer=a)},_getInputLayerAttr:function(){return this.inputLayer},_setInputLayersAttr:function(a){this.inputLayers=a},_setOverlapPolicyAttr:function(a){this.overlapPolicy=a},_getOverlapPolicyAttr:function(){return this.overlapPolicy},
_setBreakValuesAttr:function(c){c&&(this.breakValues=c);c=a.trim(this._breakValuesInput.get("value")).split(" ");var e=[];b.forEach(c,function(a){e.push(s.parse(a))});this.breakValues=e},_getBreakValuesAttr:function(){return this.breakValues},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_getTravelModeAttr:function(){return this.travelMode},_setTravelModeAttr:function(a){this._set("travelMode",a)},validateServiceName:function(a){return N.validateServiceName(a,{textInput:this.outputLayerInput})},
_setBreakUnitsAttr:function(a){this.breakUnits=a},_getBreakUnitsAttr:function(){return this.breakUnits},_setDistanceDefaultUnitsAttr:function(a){this.distanceDefaultUnits=a},_getDistanceDefaultUnitsAttr:function(){return this.distanceDefaultUnits},_setOutputLayerNameAttr:function(a){var c,g,d;g=[this.i18n.seconds,this.i18n.minutes,this.i18n.hours,this.i18n.miles,this.i18n.meters,this.i18n.kilometers,this.i18n.feet,this.i18n.yards];d=this._distanceUnitsSelect.getOptions(this._distanceUnitsSelect.get("value")).label;
this._drivingModeSelect.getOptions(this._drivingModeSelect.get("value"));c=this.i18n.other;a?(this.outputLayerName=a,this.outputLayerInput.set("value",a)):this._breakValuesInput&&(!this.outputLayerName&&this.inputLayer?this.outputLayerName=e.substitute(this.i18n.outputModeLayerName,{mode:c,layername:this.inputLayer.name,breakValues:this._breakValuesInput.get("value"),breakUnits:d}):(this.outputLayerName=this.outputLayerInput.get("value"),a=this.outputLayerName.substr(0,this.outputLayerName.indexOf(" ")),
a!==c&&(this.outputLayerName=this.outputLayerName.replace(a,c)),-1!==this.outputLayerName.lastIndexOf("(")&&(c=this.outputLayerName.substring(0,this.outputLayerName.lastIndexOf("(")),a=e.trim(this.outputLayerName.substring(this.outputLayerName.lastIndexOf(" "),this.outputLayerName.lastIndexOf(")"))),-1!==b.indexOf(g,a)&&(this.outputLayerName=e.substitute(c+"(${breakValues} ${breakUnits})",{breakValues:this._breakValuesInput.get("value"),breakUnits:d})))),this.outputLayerInput.set("value",this.outputLayerName))},
_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});p("extend-esri")&&a.setObject("dijit.analysis.CreateDriveTimeAreas",h,M);return h})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(h,d,a,b,l,m,p,r){h=h(r,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(a,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=
!0;if(a&&!a.declaredClass){var c=a;this.attributeField=c.field;this.defaultSymbol=(a=c.defaultSymbol)&&(a.declaredClass?a:p.fromJson(a));this.backgroundFillSymbol=(a=c.backgroundFillSymbol)&&(a.declaredClass?a:p.fromJson(a));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],c,this);var n=c.minValue;(c=c.classBreakInfos)&&(c[0]&&m.isDefined(c[0].classMaxValue))&&d.forEach(c,function(a){var b=a.classMaxValue;a.minValue=n;n=a.maxValue=
b},this);d.forEach(c,this._addBreakInfo,this)}else this.defaultSymbol=a,this.attributeField=b},addBreak:function(b,d,c){b=a.isObject(b)?b:{minValue:b,maxValue:d,symbol:c};this._addBreakInfo(b)},removeBreak:function(a,b){var c,d=this.breaks,h,l=d.length,m=this._symbols;for(h=0;h<l;h++)if(c=d[h],c[0]==a&&c[1]==b){d.splice(h,1);delete m[a+"-"+b];this.infos.splice(h,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(b){var d=this.attributeField,c=b.attributes,
n=this.breaks,h=n.length,l=this.isMaxInclusive;if(a.isFunction(d))b=d(b);else{b=parseFloat(c[d]);var d=this.normalizationType,m;if(d)if(m=parseFloat(this.normalizationTotal),c=parseFloat(c[this.normalizationField]),"log"===d)b=Math.log(b)*Math.LOG10E;else if("percent-of-total"===d&&!isNaN(m))b=100*(b/m);else if("field"===d)if(!isNaN(b)&&!isNaN(c))b/=c;else return-1}for(c=0;c<h;c++)if(d=n[c],d[0]<=b&&(l?b<=d[1]:b<d[1]))return c;return-1},getBreakInfo:function(a){a=this.getBreakIndex(a);return-1!==
a?this.infos[a]:null},getSymbol:function(a){return(a=this.breaks[this.getBreakIndex(a)])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},setMaxInclusive:function(a){this.isMaxInclusive=a},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation",
"esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(a,b,c){d.forEach(a,function(a){var e=a.split(":"),d,h,k;1<e.length&&(a=e[0],d=this["_"+a+"Enums"],"rest"===e[1]?(h="1",k="0"):"sdk"===e[1]&&(h="0",k="1"));e=b[a];if(void 0!==e&&(c[a]=e,d&&h)){var g,l=d.length;for(g=0;g<l;g++)if(d[g][h]===e){c[a]=d[g][k];break}}},this)},_addBreakInfo:function(a){var b=a.minValue,c=a.maxValue;this.breaks.push([b,c]);this.infos.push(a);var d=a.symbol;d&&!d.declaredClass&&
(a.symbol=p.fromJson(d));this._symbols[b+"-"+c]=a.symbol},toJson:function(){var b=this.infos||[],f=m.fixJson,c=b[0]&&b[0].minValue,n=this.backgroundFillSymbol,b=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:n&&n.toJson(),minValue:-Infinity===c?-Number.MAX_VALUE:c,classBreakInfos:d.map(b,function(b){b=a.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.classMaxValue=Infinity===b.maxValue?
Number.MAX_VALUE:b.maxValue;delete b.minValue;delete b.maxValue;return f(b)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,b);b.hasOwnProperty("normalizationType")&&!b.normalizationType&&delete b.normalizationType;b.hasOwnProperty("classificationMethod")&&!b.classificationMethod&&delete b.classificationMethod;return f(b)}});b("extend-esri")&&a.setObject("renderer.ClassBreaksRenderer",h,l);return h})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u){function t(){}function s(a){var b=a.layer;return{geometry:a.geometry,attributes:a.attributes,getLayer:function(){return b}}}h=h(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(a){this.sourceLayer=a;this._hndls=[]},initialize:function(a){this.map=a;var b=this.sourceLayer,e=b.renderer;b.setDrawMode(!1);this.imageLayer=a._getMapImageLyr();var f=this;this.heatmapRenderer=
e instanceof c?e:(e.getRendererInfoByZoom(a.getZoom())||e.getRendererInfoByScale(a.getScale())).renderer;this._setupDraw=this._setupDraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=
this._reprojectFeature.bind(this);l(["../workers/heatmapCalculator"],function(a){f._calculator=new a(d.mixin({width:f.map.width,height:f.map.height},f._getOptions()));f._setupRenderer();f.heatmapRenderer.getStats=a.calculateStats;f.heatmapRenderer.getHistogramData=a.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},
_handleRendererChange:function(a){var b=a.renderer,e=b instanceof c;this.heatmapRenderer?e?this.heatmapRenderer=b:this._removeRenderer(a):e&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(a){a=a.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(a)},_setupRenderer:function(){var c=this._hndls,e=this.sourceLayer,d=this.map,f=this;e._originalDraw=e._draw;e._draw=t;e._div.clear();clearTimeout(this._resetTimer);this._resetTimer=
setTimeout(this._resetGraphics.bind(this),250);c.push(e.on("update-end",this._setupDraw));c.push(e.on("suspend",function(a){(a=f._getImageBySourceId(f.sourceLayer.id))&&a.hide()}));c.push(e.on("resume",function(a){(a=f._getImageBySourceId(f.sourceLayer.id))&&a.show()}));c.push(a.after(e,"redraw",this._setupDraw));c.push(d.on("layer-remove",function(a){a.layer==e&&((a=f._getImageBySourceId(f.sourceLayer.id))&&f.imageLayer.removeImage(a),f._removeRenderer({target:e}))}));e._collection&&c.push(e.on("graphic-add",
function(a){f._reprojectFeature(a.graphic);f._setupDraw()}));1!==e.mode&&(c.push(d.on("resize, pan-end",this._setupDraw)),c.push(d.on("zoom-end",this._setupDraw)));c.push(e.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();e.graphics&&e.graphics.length&&(e.graphics[0].geometry&&!d.spatialReference.equals(e.graphics[0].geometry.spatialReference)&&b.forEach(e.graphics,function(a){this._reprojectFeature(a)}.bind(this)),this._setupDraw())},_setupDraw:function(){if(!this._drawTimer){var a=
this;this._drawTimer=setTimeout(function(){clearTimeout(a._drawTimer);a._drawTimer=null;a.sourceLayer._getRenderer().isInstanceOf(c)&&a.recalculateHeatmap()},16)}},_removeRenderer:function(a){var b=a.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var c=this._getImageBySourceId(this.sourceLayer.id);c&&this.imageLayer.removeImage(c);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=
a.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:(b.redraw(),this.destroy())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(a){if(a&&a.geometry){var b=a.geometry,c=this.map.spatialReference;c.equals(b.spatialReference)||(b=e.project(b,c),null==b?console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer"):a.geometry=
b)}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var a=this.sourceLayer,b=this.map,c=this.heatmapRenderer,e=this.map.extent,h=this.map.width,l=this.map.height,m=this._calculator,p=this,t=function(n){n=p._getScreenPoints(n.features,b,a);n=m.calculateImageData(d.mixin({screenPoints:n,mapinfo:{extent:[e.xmin,e.ymin,e.xmax,e.ymax],resolution:b.getResolution()},width:h,height:l},p._getOptions()));n=c.getSymbol(s({geometry:b.extent,attributes:{size:[h,l],imageData:n},layer:a}));n=new f({extent:b.extent,
href:n.url,opacity:0,sourceId:a.id});p._swapMapImages(n,p._getImageBySourceId(a.id));a.suspended&&n.hide()},r={geometry:b.extent,timeExtent:a.useMapTime?b.timeExtent:void 0,spatialRelationship:n.SPATIAL_REL_INTERSECTS};null!=a._canDoClientSideQuery(r)?a.queryFeatures(r,t):t({features:a.graphics})},_getScreenPoints:function(a,c,e){var d=[],f=a.length,n=0,h=0,l,m=new r(c.extent.xmin,c.extent.ymax,c.spatialReference),p=c.toScreen(m),t=p.x,p=p.y,s=c.getResolution(),u;for((h=c.extent.getCacheValue("_parts"))&&
(u=b.map(h,function(a){return e._intersects(c,a.extent)[0]}));f--;)h=a[f],h.geometry&&(l={x:Math.ceil((h.geometry.x-m.x)/s+t),y:Math.floor((m.y-h.geometry.y)/s-p),attributes:h.attributes},u&&(h=1<u.length&&l.x<-u[0]?u[1]:u[0],l.x+=h),d[n++]=l);return d},_getImageBySourceId:function(a){var c=this.imageLayer.getImages(),c=b.filter(c,function(b){return b.sourceId==a});if(c.length)return c[c.length-1]},_swapMapImages:function(a,b){function c(){e.removeImage(b)}var e=this.imageLayer,d=this.sourceLayer.opacity||
1;e.addImage(a);u.anim(a._node,{opacity:d},null,null,function(){a.opacity=d});null!=b&&u.anim(b._node,{opacity:0},null,null,c)},_removeHandlers:function(){if(null!=this._hndls)for(var a=this._hndls.length;a--;)this._hndls[a].remove()},_getOptions:function(){var a=this.heatmapRenderer;return{blurRadius:a.blurRadius,gradient:a.gradient,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity,field:a.field,fieldOffset:a.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);
this._resetTimer=null;for(var a=this.sourceLayer.graphics,b=a.length,c;b--;)c=a[b],c._shape=c._offsets=void 0}});p("extend-esri")&&d.setObject("layers.HeatmapManager",h,m);return h})},"dojox/mvc/_atBindingMixin":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/has dojo/Stateful ./resolve ./sync".split(" "),function(h,d,a,b,l,m,p){function r(a){var b;try{b=require("dijit/registry")}catch(c){return}for(a=a.domNode&&a.domNode.parentNode;a;){if(a=b.getEnclosingWidget(a)){var e=
a._relTargetProp||"target";if((d.isFunction(a.get)?a.get(e):a[e])||e in a.constructor.prototype)return a}a=a&&a.domNode.parentNode}}function e(a,c,e,h,k){function g(){l.Two&&l.Two.unwatch();delete l.Two;var g=w&&(d.isFunction(w.get)?w.get(v):w[v]),r=m(a,g),g=m(e,g);b("mvc-bindings-log-api")&&(!r||/^rel:/.test(a)&&!w)&&f(a,c);b("mvc-bindings-log-api")&&(!g||/^rel:/.test(e)&&!w)&&f(e,h);if(r&&g&&(!/^rel:/.test(a)&&!/^rel:/.test(e)||w))(!r.set||!r.watch)&&"*"==c?b("mvc-bindings-log-api")&&f(a,c):null==
c?(d.isFunction(g.set)?g.set(h,r):g[h]=r,b("mvc-bindings-log-api")&&console.log("dojox/mvc/_atBindingMixin set "+r+" to: "+[g._setIdAttr||!g.declaredClass?g:g.declaredClass,h].join(":"))):l.Two=p(r,c,g,h,k)}var l={},w=r(e),v=w&&w._relTargetProp||"target";g();if(w&&/^rel:/.test(a)||/^rel:/.test(e)&&d.isFunction(w.set)&&d.isFunction(w.watch))l.rel=w.watch(v,function(a,c,e){c!==e&&(b("mvc-bindings-log-api")&&console.log("Change in relative data binding target: "+w),g())});var z={};z.unwatch=z.remove=
function(){for(var a in l)l[a]&&l[a].unwatch(),delete l[a]};return z}if(b("mvc-bindings-log-api"))var f=function(a,b){console.warn(b+" could not be resolved"+("string"==typeof a?" with "+a:"")+".")};var c={dataBindAttr:"data-mvc-bindings",_dbpostscript:function(a,b){var c=this._refs=(a||{}).refs||{},e;for(e in a)if("dojox.mvc.at"==(a[e]||{}).atsignature){var d=a[e];delete a[e];c[e]=d}var d=new l,f=this;d.toString=function(){return"[Mixin value of widget "+f.declaredClass+", "+(f.id||"NO ID")+"]"};
d.canConvertToLoggable=!0;this._startAtWatchHandles(d);for(e in c)void 0!==d[e]&&((a=a||{})[e]=d[e]);this._stopAtWatchHandles()},_startAtWatchHandles:function(a){this.canConvertToLoggable=!0;var b=this._refs;if(b){var c=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var d in b)b[d]&&"*"!=d&&(c[d]=e(b[d].target,b[d].targetProp,a||this,d,{bindDirection:b[d].bindDirection,converter:b[d].converter,equals:b[d].equalsCallback}));if("dojox.mvc.at"==(b["*"]||{}).atsignature)c["*"]=
e(b["*"].target,b["*"].targetProp,a||this,"*",{bindDirection:b["*"].bindDirection,converter:b["*"].converter,equals:b["*"].equalsCallback})}},_stopAtWatchHandles:function(){for(var a in this._atWatchHandles)this._atWatchHandles[a].unwatch(),delete this._atWatchHandles[a]},_setAtWatchHandle:function(a,b){if("ref"==a)throw Error(this+": 1.7 ref syntax used in conjunction with 1.8 dojox/mvc/at syntax, which is not supported.");var c=this._atWatchHandles=this._atWatchHandles||{};c[a]&&(c[a].unwatch(),
delete c[a]);this._excludes=this[a]=null;this._started?c[a]=e(b.target,b.targetProp,this,a,{bindDirection:b.bindDirection,converter:b.converter,equals:b.equalsCallback}):this._refs[a]=b},_setBind:function(a){a=eval("({"+a+"})");for(var b in a){var c=a[b];"dojox.mvc.at"!=(c||{}).atsignature?console.warn(b+" in "+dataBindAttr+" is not a data binding handle."):this._setAtWatchHandle(b,c)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var a=[],b;for(b in this._atWatchHandles)"*"!=
b&&a.push(b);return a},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;var a=["onClick"].concat(this.constructor._setterAttrs);h.forEach(["id","excludes","properties","ref","binding"],function(b){b=h.indexOf(a,b);0<=b&&a.splice(b,1)});return this.constructor._attribs=a}};c[c.dataBindAttr]="";a=a("dojox/mvc/_atBindingMixin",null,c);a.mixin=c;return a})},"esri/tasks/geoenrichment/GeographyLevel":function(){define(["../../declare"],function(h){var d=h("esri.tasks.geoenrichment.GeographyLevel",
null,{layerID:null,datasetID:null,countryID:null,constructor:function(a){a&&(this.layerID=a.layer||a.layerID||null,this.datasetID=a.dataset||a.datasetID||null,this.countryID=a.sourceCountry||a.countryID||null)},toJson:function(){var a={};this.layerID&&(a.layer=this.layerID);this.datasetID&&(a.dataset=this.datasetID);this.countryID&&(a.sourceCountry=this.countryID);return a}});d.fromJsonArray=function(a){var b=[];if(!a)return b;for(var h=0;h<a.length;h++){var m=a[h];m instanceof d||(m=new d(m));b.push(m)}return b};
d.toJsonArray=function(a){if(!a||0===a.length)return null;for(var b=[],d=0;d<a.length;d++)b.push(a[d].toJson());return b};return d})},"esri/dijit/analysis/ExpressionForm":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/_base/event dojo/Evented dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog dijit/Tooltip ../../kernel ../../lang ./utils ../SingleFilter dojo/i18n!../../nls/jsapi dojo/text!./templates/ExpressionForm.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W){h=d([w,v,z,x,A,g],{declaredClass:"esri.dijit.analysis.ExpressionForm",templateString:W,widgetsInTemplate:!0,firstOperands:null,defaultUnits:"english",showFirstRow:!0,constructor:function(a){a.containerNode&&(this.container=a.containerNode);this._setClasses(a)},_setClasses:function(a){this._addBtnClass=a.primaryActionButttonClass||"esriAnalysisSubmitButton"},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,
l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);this.i18n={};a.mixin(this.i18n,R.common);a.mixin(this.i18n,R.expressionGrid);a.mixin(this.i18n,R.expressionForm)},postCreate:function(){this.inherited(arguments);this.attributeChangeHandler=l.subscribe("filter-expression-change",a.hitch(this,this._handleAttributeFilterChange));this._distanceInput.set("validator",a.hitch(this,this._validateDistance));this.set("action","add");c.set(this._firstRow,"display",
this.showFirstRow?"":"none")},init:function(){if(this._firstOperandSelect&&this.firstOperands&&this.inputOperands){this._firstOperandSelect.getOptions()&&this._firstOperandSelect.removeOption(this._firstOperandSelect.getOptions());var a,c,e=this.inputOperands.length,d=this.firstOperands.length,f=[];for(a=0;a<e;a+=1)for(c=0;c<d;c+=1)L.isDefined(this.inputOperands[a].id)&&L.isDefined(this.firstOperands[c].id)&&this.inputOperands[a].id===this.firstOperands[c].id?f[this.firstOperands[c].id]=a.toString():
L.isDefined(this.inputOperands[a].name)&&(L.isDefined(this.firstOperands[c].name)&&this.inputOperands[a].name===this.firstOperands[c].name)&&(f[this.firstOperands[c].name]=a.toString());b.forEach(this.firstOperands,function(a,b){L.isDefined(a)&&this._firstOperandSelect.addOption({value:f[a.id||a.name],label:a.name})},this);this.selectedFirstOperand&&this._firstOperandSelect.set("value",f[this.selectedFirstOperand.id]);this.get("showReadyToUseLayers")&&this.get("showReadyLayersForFirst")&&(this._firstOperandSelect.addOption({type:"separator",
value:""}),this._firstOperandSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle}));1===e&&!this.get("showReadyToUseLayers")&&(this._operatorSelect&&this._operatorSelect.getOptions())&&(this._operatorSelect.removeOption(this._operatorSelect.getOptions()),this._operatorSelect.addOption({value:"where",label:this.i18n.where}))}"add"===this.get("action")&&(this._operatorSelect.set("value","where"),this._handleOperatorChange("where"),this._distanceInput.set("value",""),"metric"===this.defaultUnits?
this._distanceUnitsSelect.set("value","Kilometers"):this._distanceUnitsSelect.set("value","Miles"))},startup:function(){},clear:function(){this.init()},_validateDistance:function(a){var c=this._operatorSelect.get("value");return-1===b.indexOf(["withinDistance","notWithinDistance"],c)?!0:a&&0<parseFloat(a,10)&&Infinity>parseFloat(a,10)},_handleAttributeFilterChange:function(){var a;this._attributeFilter&&(a=this._attributeFilter.toJson(),a=this._attributeFilter.builtSingleFilterString(a),a.whereClause?
this._addBtn.set("disabled",!1):this._addBtn.set("disabled",!0))},_handleSecondOperandChange:function(a){"browse"===a&&(this.owningWidget.showReadyToUseLayersDialog(!1),this.owningWidget.layersSelect=this._secondOperandSelect)},_handleFirstOperandChange:function(a){"browse"===a&&this.get("showReadyLayersForFirst")?(this.owningWidget.showReadyToUseLayersDialog(!0),this.owningWidget.layersSelect=this._firstOperandSelect):this._handleOperatorChange(a)},_handleDistanceInputChange:function(a){this._addBtn.set("disabled",
!this._distanceInput.validate())},_handleOperatorChange:function(a){a=this._operatorSelect.get("value");-1===b.indexOf(["where","withinDistance","notWithinDistance"],a)?this._buildSpatialExpression(a):"where"===a?(parseInt(this._firstOperandSelect.get("value"),10),this._buildAttributeExpression(a)):-1!==b.indexOf(["withinDistance","notWithinDistance"],a)&&this._buildDistanceExpression(a)},_isValidSecondOperand:function(a,b,c){var e=!1;"contains"===a||"notContains"===a?("esriGeometryPoint"===b||"esriGeometryMultipoint"===
b)&&("esriGeometryPoint"===c||"esriGeometryMultipoint"===c)?e=!0:"esriGeometryPolyline"===b&&("esriGeometryPoint"===c||"esriGeometryPolyline"===c||"esriGeometryMultipoint"===c)?e=!0:"esriGeometryPolygon"===b&&(e=!0):"within"===a||"notWithin"===a?"esriGeometryPoint"===b||"esriGeometryMultipoint"===b?e=!0:"esriGeometryPolyline"===b&&("esriGeometryPolygon"===c||"esriGeometryPolyline"===c)?e=!0:"esriGeometryPolygon"===b&&"esriGeometryPolygon"===c&&(e=!0):e=!0;return e},_isValidFirstOperand:function(a){var b=
!0;!a||!a.fields?b=!1:a.fields&&(1===a.fields.length&&"esriFieldTypeOID"===a.fields[0].type)&&(this._showMessages(f.substitute(this.i18n.inValidAttributeFilterMessage,{layername:a.name})),b=!1);return b},_buildSpatialExpression:function(a){var e,d;e=parseInt(this._firstOperandSelect.get("value"),10);d=this.inputOperands[e].geometryType;this._addBtn.set("disabled",!1);this._distanceInput.set("required",!1);c.set(this._attrFilterDiv,"display","none");c.set(this._secondOperandSelect.domNode,"display",
"");this._secondOperandSelect&&(this._secondOperandSelect.getOptions()&&this._secondOperandSelect.removeOption(this._secondOperandSelect.getOptions()),b.forEach(this.inputOperands,function(b,c){c.toString()!==this._firstOperandSelect.get("value")&&this._isValidSecondOperand(a,d,b.geometryType)&&this._secondOperandSelect.addOption({value:c.toString(),label:b.name})},this),this.get("showReadyToUseLayers")&&(this._secondOperandSelect.addOption({type:"separator",value:""}),this._secondOperandSelect.addOption({value:"browse",
label:this.i18n.browseAnalysisTitle})),c.set(this._secondRow,"display",""),c.set(this._secondExpressionDiv,"display","none"),c.set(this._secondOperandTd,"display",""),c.set(this._secondOperandSelect,{display:"",width:"75%"}))},_buildAttributeExpression:function(a){this._distanceInput.set("required",!1);c.set(this._secondExpressionDiv,"display","none");this._secondOperandSelect&&this._secondOperandSelect.getOptions()&&this._secondOperandSelect.removeOption(this._secondOperandSelect.getOptions());c.set(this._secondOperandSelect.domNode,
"display","none");a=parseInt(this._firstOperandSelect.get("value"),10);a=this.inputOperands[a];this._isValidFirstOperand(a)?(this._addBtn.set("disabled",!0),c.set(this._secondRow,"display",""),c.set(this._attrFilterDiv,"display",""),this._attributeFilter&&this._attributeFilter.init({mapLayer:a,version:a.version,fields:a.fields,allowAllDateTypes:!0,part:"edit"===this.get("action")&&this.expression&&this.expression._attributeExprObj?this.expression._attributeExprObj:null}),this._attributeFilter||(this._attributeFilter=
new O({"class":"filterSegment",mapLayer:a,version:a.version,fields:a.fields,part:"edit"===this.get("action")&&this.expression&&this.expression._attributeExprObj?this.expression._attributeExprObj:null,enableEvents:!0,isEnableInteractiveFilter:!1,allowAllDateTypes:!0},u.create("div",{},this._attrFilterDiv)),this._attributeFilter.fillFieldsList(this._attributeFilter.fieldsStore))):(c.set(this._secondRow,"display","none"),c.set(this._attrFilterDiv,"display","none"),this._addBtn.set("disabled",!0))},_buildDistanceExpression:function(a){this._addBtn.set("disabled",
!this._distanceInput.validate());this._distanceInput.set("required",!0);c.set(this._secondRow,"display","");c.set(this._secondOperandTd,"display","");c.set(this._secondOperandSelect.domNode,"display","");c.set(this._secondExpressionDiv,{display:"",width:"75%"});c.set(this._secondOperandSelect,{display:"",width:"75%"});c.set(this._attrFilterDiv,"display","none");this._secondOperandSelect&&this._secondOperandSelect.getOptions()&&(this._secondOperandSelect.removeOption(this._secondOperandSelect.getOptions()),
b.forEach(this.inputOperands,function(a,b){b.toString()!==this._firstOperandSelect.get("value")&&this._secondOperandSelect.addOption({value:b.toString(),label:a.name})},this),this.get("showReadyToUseLayers")&&(this._secondOperandSelect.addOption({type:"separator",value:""}),this._secondOperandSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle})))},_handleAddButtonClick:function(a){k.stop(a);this._expressionForm&&!this._expressionForm.validate()?this.emit("cancel-expression",{}):
(this.set("expression"),this.emit("add-expression",{expression:this.get("expression"),text:this.get("text"),displayText:this.get("displayText"),action:this.get("action")}))},_handleCloseButtonClick:function(a){k.stop(a);this.emit("cancel-expression",{})},_setInputOperandsAttr:function(a){this.inputOperands=a},_getInputOperandsAttr:function(){return this.inputOperands},_setFirstOperandsAttr:function(a){this.firstOperands=a},_getFirstOperandsAttr:function(a){return this.firstOperands},_setSelectedFirstOperandAttr:function(a){this.selectedFirstOperand=
a},_getExpressionAttr:function(a){return this.expression},_setExpressionAttr:function(a){var c,e,d=!1;a?this._operatorSelect&&(this._firstOperandSelect.set("value",a.layer),this._operatorSelect.set("value",a.spatialRel?a.spatialRel:"where"),"where"===this._operatorSelect.get("value")?d=!0:(-1!==b.indexOf(["withinDistance","notWithinDistance"],this._operatorSelect.get("value"))&&(this._distanceInput.set("value",a.distance),this._distanceUnitsSelect.set("value",a.units)),this._secondOperandSelect.set("value",
a.selectingLayer))):(a={},this._operatorSelect&&(a.layer=parseInt(this._firstOperandSelect.get("value"),10),"where"===this._operatorSelect.get("value")?(c=this._attributeFilter.toJson(),e=this._attributeFilter.builtSingleFilterString(c),a._attributeFilter=e,a._attributeExprObj=c,a._attributeText=this._attributeFilter.buildFriendlyTextExpr(c),a.where=e.whereClause):(a.selectingLayer=parseInt(this._secondOperandSelect.get("value"),10),a.spatialRel=this._operatorSelect.get("value"),-1!==b.indexOf(["withinDistance",
"notWithinDistance"],this._operatorSelect.get("value"))&&(a.distance=this._distanceInput.get("value"),a.units=this._distanceUnitsSelect.get("value")))));this.expression=a;d&&this._handleOperatorChange("where")},_showMessages:function(b){n.set(this._bodyNode,"innerHTML",b);p.fadeIn({node:this._errorMessagePane,easing:q.quadIn,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();p.fadeOut({node:this._errorMessagePane,
easing:q.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:"none"})})}).play()},_setActionAttr:function(a){this.action=a},_getActionAttr:function(){return this.action},_setTextAttr:function(a){this.text=a},_getTextAttr:function(){var a="";this.expression&&(a=this.inputOperands[this.expression.layer].name);this.expression.spatialRel?(a+=" "+this.i18n[this.expression.spatialRel],this.expression.distance&&(a+=" "+this.expression.distance+" "+this.expression.units+" "+this.i18n.from),
a+=" "+this.inputOperands[this.expression.selectingLayer].name):a+=" "+this.i18n.whereLabel+" "+this.expression._attributeText;return a},_getDisplayTextAttr:function(){var a="",b;this.expression&&(b=this.inputOperands[this.expression.layer].name,a+=this.shortenString(b));this.expression.spatialRel?(a+=" \x3clabel style\x3d'font-style: italic;'\x3e"+this.i18n[this.expression.spatialRel],this.expression.distance&&(a+=" "+this.expression.distance+" "+this.expression.units+" "+this.i18n.from),b=this.inputOperands[this.expression.selectingLayer].name,
a=a+"\x3c/label\x3e"+(" "+this.shortenString(b))):a+=" \x3clabel style\x3d'font-style: italic;'\x3e"+this.i18n.whereLabel+" "+this.expression._attributeText+"\x3c/label";return a+="\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"},shortenString:function(a){return"\x3clabel style\x3d'overflow: hidden;text-overflow: ellipsis'\x3e"+a+"\x3c/label\x3e\x3c/td\x3e"},_setPrimaryActionButttonClassAttr:function(a){this.primaryActionButttonClass=a},_getPrimaryActionButttonClassAttr:function(){return this.primaryActionButttonClass},
_setShowFirstRowAttr:function(a){this.showFirstRow=a},_getShowFirstRowAttr:function(){return this.showFirstRow},_setShowReadyToUseLayersAttr:function(a){this._set("showReadyToUseLayers",a)},_setShowReadyLayersForFirstAttr:function(a){this._set("showReadyLayersForFirst",a)},_setOwningWidgetAttr:function(a){this._set("owningWidget",a)}});r("extend-esri")&&a.setObject("dijit.analysis.ExpressionForm",h,N);return h})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(a,b){},_setSymbolSize:function(a,b){switch(a.type){case "simplemarkersymbol":a.setSize(b);break;case "picturemarkersymbol":a.setWidth(b);a.setHeight(b);break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(b);break;case "simplefillsymbol":case "picturefillsymbol":a.outline&&a.outline.setWidth(b)}}});a("extend-esri")&&d.setObject("renderer.SymbolAger",h,b);return h})},
"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(h,d,a,b,l){h=h(l,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});a("extend-esri")&&d.setObject("geometry.ScreenPoint",h,b);return h})},"esri/tasks/geoenrichment/studyAreaFromJson":function(){define(["./GeometryStudyArea","./AddressStudyArea","./StandardGeographyStudyArea","../../extend"],function(h,d,a,b){var l=function(b){if(b.geometry)return new h(b);
if(b.address)return new d(b);if(b.layer)return new a(b)};b("esri.tasks.geoenrichment.studyAreaFromJson",l);return l})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),function(h,d,a,b,l,m,p,r,e,f){h=h(m,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=
new p(a.dataSource);break;case "queryTable":a=new r(a.dataSource);break;case "joinTable":a=new e(a.dataSource);break;case "raster":a=new f(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return l.fixJson(a)}});a("extend-esri")&&d.setObject("layers.LayerDataSource",h,b);return h})},"esri/dijit/geoenrichment/AnimationHelper":function(){define("../../declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/sniff dojo/on dojo/Deferred".split(" "),
function(h,d,a,b,l,m,p,r){var e=function(){var a=document.getElementsByTagName("body")[0].style;e=void 0!==a.animationName?function(){return"animationend"}:void 0!==a.webkitAnimationName?function(){return"webkitAnimationEnd"}:function(){};return e()},f=h(null,{_oldNode:null,_targets:null,_deferred:null,start:function(c,d){this._oldNode=d;this._deferred=new r;if(!e())return this.finish(),this._deferred.promise;this._targets=c;p.once(c[0].node,e(),a.hitch(this,this.finish));for(var f=0;f<c.length;f++){var h=
c[f];b.add(h.node,h.classes);b.add(h.node,"Anim_Common")}return this._deferred.promise},finish:function(){if(this._targets){for(var a=0;a<this._targets.length;a++){var e=this._targets[a];b.remove(e.node,e.classes);b.remove(e.node,"Anim_Common")}this._targets=null}this._oldNode&&(l.destroy(this._oldNode),this._oldNode=null);this._deferred.resolve()}});return h(null,{progress:null,_items:null,_flySurfaceNode:null,constructor:function(a){this._flySurfaceNode=a;this._items=[]},start:function(b,e){var d=
new f;this._items.push(d);this.progress||(this.progress=new r);return d.start(b,e).then(a.hitch(this,this._onItemFinished,d))},_onItemFinished:function(a){a=d.indexOf(this._items,a);0<=a&&(this._items.splice(a,1),0===this._items.length&&this.progress&&(this.progress.resolve(),this.progress=null))},finish:function(){for(var a=this._items;0<a.length;)a[a.length-1].finish()},fly:function(a,d,f){var h=a.cloneNode(!0);f||(f=["top","left"]);if(!e())return h;a=a.getBoundingClientRect();var l=this._flySurfaceNode.getBoundingClientRect();
b.add(h,"Anim_FlyingObj");for(var k=0;k<f.length;k++){var g=f[k];h.style[g]=("right"===g||"bottom"===g?-1:1)*(a[g]-l[g])+"px"}this._flySurfaceNode.appendChild(h);this.start([{node:h,classes:[d]}],h);return h}})})},"esri/dijit/analysis/DissolveBoundaries":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojox/form/CheckedMultiSelect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/RadioButton dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils dojo/i18n!../../nls/jsapi dojo/text!./templates/DissolveBoundaries.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){d=d([k,g,q,w,v,G,F],{declaredClass:"esri.dijit.analysis.DissolveBoundaries",templateString:O,widgetsInTemplate:!0,inputLayer:null,dissolveFields:null,summaryFields:null,outputLayerName:null,i18n:null,toolName:"DissolveBoundaries",helpFileName:"DissolveBoundaries",resultParameter:"DissolvedLayer",constructor:function(a){this._pbConnects=[];this._statsRows=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);
b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.dissolveBoundaries)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");f.set(this._dissolveFieldsSelect.selectNode,"width","75%");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",
{save:a})},_handleAreasChange:function(){this._dissolveFieldsSelect.set("disabled",!0!==this._sameAttributeAreasCheck.get("checked"))},_handleBrowseItemsSelect:function(b){b&&b.selection&&L.addAnalysisReadyLayer({item:b.selection,layers:this.inputLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_handleShowCreditsClick:function(b){b.preventDefault();this._form.validate()&&(b={},b.InputLayer=m.toJson(L.constructAnalysisInputLyrObj(this.inputLayer)),
b.SummaryFields=m.toJson(this.get("summaryFields")),this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),!0===this._sameAttributeAreasCheck.get("checked")&&(b.DissolveFields=m.toJson(this.get("dissolveFields"))),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);
this._usageDialog.show()})))},_handleSaveBtnClick:function(){if(this._form.validate()){this._saveBtn.set("disabled",!0);var a={},b={},c;a.InputLayer=m.toJson(L.constructAnalysisInputLyrObj(this.inputLayer));a.SummaryFields=m.toJson(this.get("summaryFields"));this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));!0===this._sameAttributeAreasCheck.get("checked")&&(a.DissolveFields=m.toJson(this.get("dissolveFields")));this.showChooseExtent&&
this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.extent=this.map.extent._normalize(!0)),a.context=m.toJson(c));b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:e.substitute(this.i18n.itemTags,{layername:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=
this.get("folderId"));this.execute(b)}},_handleAttrSelectChange:function(b){var c;"0"!==b&&(b=this.get("statisticSelect"),"0"!==b.get("value")&&!b.get("isnewRowAdded")&&(c=b.get("removeTd"),f.set(c,"display","block"),c=b.get("referenceWidget"),a.hitch(c,c._createStatsRow()),b.set("isnewRowAdded",!0)))},_handleStatsValueUpdate:function(b,c,e){this.get("attributeSelect")&&(b=this.get("attributeSelect"),"0"!==b.get("value")&&"0"!==e&&!this.get("isnewRowAdded")&&(e=this.get("removeTd"),f.set(e,"display",
"block"),e=this.get("referenceWidget"),a.hitch(e,e._createStatsRow()),this.set("isnewRowAdded",!0)))},_save:function(){},_buildUI:function(){var b=!0;this._loadConnections();L.initHelpLinks(this.domNode,this.showHelp);this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),L.populateAnalysisLayers(this,"inputLayer","inputLayers"));L.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",
this.outputLayerName),b=!1);this.inputLayer&&this._updateAnalysisLayerUI(b);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;L.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?
"inline-block":"none");f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none")},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_updateAnalysisLayerUI:function(d){if(this.inputLayer){c.set(this._dissolveBoundariesDescription,"innerHTML",e.substitute(this.i18n.dissolveBoundariesDefine,{layername:this.inputLayer.name}));if(!this.outputLayerName||d)this.outputLayerName=e.substitute(this.i18n.outputLayerName,
{layername:this.inputLayer.name});d=this.inputLayer.fields;var f=[],g=!1;this._dissolveFieldsSelect.removeOption(this._dissolveFieldsSelect.getOptions());b.forEach(d,function(a,c){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"],a.type)&&(null!==this.dissolveFields&&(g=-1!==this.dissolveFields.indexOf(a.name)),f.push({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name,selected:g}))},this);this._dissolveFieldsSelect.addOption(f);
this._dissolveFieldsSelect.set("disabled",!0!==this._sameAttributeAreasCheck.get("checked"))}this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName);this._createStatsRow();b.forEach(this.summaryFields,function(b){b=b.split(" ");this._currentAttrSelect.set("value",b[0]);a.hitch(this._currentAttrSelect,this._handleAttrSelectChange,b[0])();this._currentStatsSelect.set("value",b[1]);a.hitch(this._currentStatsSelect,this._handleStatsValueUpdate,"value","",b[1])()},this)},_handleAnalysisLayerChange:function(a){"browse"===
a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._isAnalysisSelect=!1,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this._dissolveFields=null,this._removeStatsRows(),this._updateAnalysisLayerUI(!0))},_createStatsRow:function(){var b,c,e,d,f;b=n.create("tr",null,this._afterStatsRow,"before");e=n.create("td",{style:{width:"45%",maxWidth:"100px"}},b);c=n.create("td",
{style:{width:"55%",maxWidth:"104px"}},b);e=new D({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin025 attrSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},n.create("select",null,e));this.set("attributes",{selectWidget:e,inputLayer:this.inputLayer});c=new D({"class":"mediumInput statsSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},n.create("select",null,c));this.set("statistics",{selectWidget:c});e.set("statisticSelect",c);l.connect(e,"onChange",this._handleAttrSelectChange);
f=n.create("td",{"class":"shortTextInput removeTd",style:{display:"none",maxWidth:"12px"}},b);d=n.create("a",{title:this.i18n.removeAttrStats,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+h.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},f);l.connect(d,"onclick",a.hitch(this,this._removeStatsRow,b));this._statsRows.push(b);c.set("attributeSelect",e);c.set("removeTd",f);c.set("isnewRowAdded",!1);c.set("referenceWidget",this);c.watch("value",this._handleStatsValueUpdate);this._currentStatsSelect=
c;this._currentAttrSelect=e;return!0},_removeStatsRow:function(a){b.forEach(z.findWidgets(a),function(a){a.destroyRecursive()});n.destroy(a)},_removeStatsRows:function(){b.forEach(this._statsRows,this._removeStatsRow,this);this._statsRows=[]},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){J.isDefined(a)&&"esriGeometryPolygon"===a.geometryType&&(this.inputLayer=a)},_setInputLayersAttr:function(a){this.inputLayers=
b.filter(a,function(a){return"esriGeometryPolygon"===a.geometryType})},_setAttributesAttr:function(a){if(a.inputLayer){var c,e;c=a.inputLayer;e=a.selectWidget;a=c.fields;e.addOption({value:"0",label:this.i18n.attribute});b.forEach(a,function(a){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)&&a.name!==c.objectIdField&&e.addOption({value:a.name,label:J.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)}},_setStatisticsAttr:function(a){a=
a.selectWidget;a.addOption({value:"0",label:this.i18n.statistic});a.addOption({value:"SUM",label:this.i18n.sum});a.addOption({value:"MIN",label:this.i18n.minimum});a.addOption({value:"MAX",label:this.i18n.maximum});a.addOption({value:"MEAN",label:this.i18n.average});a.addOption({value:"STDDEV",label:this.i18n.standardDev})},_setDissolveFieldsAttr:function(a){this.dissolveFields=a},_getDissolveFieldsAttr:function(){var a=[];this._dissolveFieldsSelect.getOptions().forEach(function(b){!0===b.selected&&
"0"!==b.value&&a.push(b.value)});return a},_setSummaryFieldsAttr:function(a){this.summaryFields=a},_getSummaryFieldsAttr:function(){var a="",b=[],c,e;u(".statsSelect",this.domNode).forEach(function(d){c=z.byNode(d);e=c.get("attributeSelect");"0"!==e.get("value")&&"0"!==c.get("value")&&(a+=e.get("value")+" "+c.get("value")+";",b.push(e.get("value")+" "+c.get("value")))});return b},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},validateServiceName:function(a){return L.validateServiceName(a,
{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});p("extend-esri")&&a.setObject("dijit.analysis.DissolveBoundaries",d,K);return d})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(h,d,a,b,l){return h("dijit.form.FilteringSelect",[b,l],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||
!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,b,d,e){b&&b[this.searchAttr]!==this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],e):this.set("value","",e||void 0===e&&!this.focused,this.textbox.value,null))},_openResultList:function(a,b,d){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},
_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(b,h,l,e){this._onChangeActive||(h=null);if(void 0===e){if(null===b||""===b)if(b="",!d.isString(l)){this._setDisplayedValueAttr(l||"",h);return}var f=this;this._lastQuery=b;a(this.store.get(b),function(a){f._callbackSetLabel(a?[a]:[],void 0,void 0,h)})}else this.valueNode.value=b,this.inherited(arguments,[b,h,l,e])},_setItemAttr:function(a,b,d){this.inherited(arguments);this._lastDisplayedValue=
this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(b,h){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;h=!1}if(this.store){this.closeDropDown();var l=d.clone(this.query),e=this._getDisplayQueryString(b),f;this.store._oldAPI?f=e:(f=this._patternToRegExp(e),f.toString=function(){return e});this._lastQuery=l[this.searchAttr]=f;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",
b);var c=this,n={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};d.mixin(n,this.fetchProperties);this._fetchHandle=this.store.query(l,n);a(this._fetchHandle,function(a){c._fetchHandle=null;c._callbackSetLabel(a||[],l,n,h)},function(a){c._fetchHandle=null;c._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),
function(h,d,a,b,l,m,p){a.getObject("dgrid.selector",!0);return dgrid.selector=function(a,b){function f(a){return!s.allowSelect(s.row(a))}function c(b){return function(c){var e=c.rows,d=e.length;c="false";var f;for(f=0;f<d;f++){var g=s.cell(e[f],a.id).element;if(g&&(g=(g.contents||g).input)&&!g.disabled)g.checked=b,g.setAttribute("aria-checked",b)}if("checkbox"==k.type){e=s.selection;d=!1;for(f in e)if(e[f]!=s.allSelected){d=!0;break}k.indeterminate=d;k.checked=s.allSelected;d?c="mixed":s.allSelected&&
(c="true");k.setAttribute("aria-checked",c)}}}function n(a){if("click"==a.type||32==a.keyCode||!m("opera")&&13==a.keyCode||0===a.keyCode){var d=s.row(a);s._selectionTriggerEvent=a;if(d){if(s.allowSelect(d)){var f=s._lastSelected&&s.row(s._lastSelected);if("radio"==b){if(!f||f.id!=d.id)s.clearSelection(),s.select(d,null,!0),s._lastSelected=d.element}else d&&(a.shiftKey?c(!0)({rows:[d]}):f=null,f=a.shiftKey?f:null,s.select(f||d,d,f?void 0:null),s._lastSelected=d.element)}}else p(this,(s.allSelected?
"!":".")+"dgrid-select-all"),s[s.allSelected?"clearSelection":"selectAll"]();s._selectionTriggerEvent=null}}function u(){s._hasSelectorInputListener=!0;t.push(s.on(".dgrid-selector:click,.dgrid-selector:keydown",n));var b=s._handleSelect;s._handleSelect=function(c){this.cell(c).column!=a&&b.apply(this,arguments)};if("function"==typeof a.disabled){var e=s.allowSelect,d=a.disabled;s.allowSelect=function(b){var c=e.call(this,b);return d===f?c:c&&!d.call(a,b.data)}}a.disabled=f;t.push(s.on("dgrid-select",
c(!0)));t.push(s.on("dgrid-deselect",c(!1)))}var t=[],s,k;a||(a={});a.type&&(a.selectorType=a.type,h.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));a.selectorType=b=b||a.selectorType||"checkbox";a.sortable=!1;var g="function"==typeof b?b:function(c,d,f){var g=d.parentNode,k;s._hasSelectorInputListener||u();k=a.disabled;p(g&&g.contents?g:d,".dgrid-selector");d=d.input||(d.input=p(d,"input[type\x3d"+b+"]",{tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex,disabled:k&&("function"==
typeof k?k.call(a,f):k),checked:c}));d.setAttribute("aria-checked",!!c);return d};l.after(a,"init",function(){s=a.grid});l.after(a,"destroy",function(){d.forEach(t,function(a){a.remove()});s._hasSelectorInputListener=!1});a.renderCell=function(a,b,c,e,d){b=(b=a&&s.row(a))&&s.selection[b.id];g(b,c,a)};a.renderHeaderCell=function(c){var d="label"in a?a.label:a.field||"";"radio"==b||!s.allowSelectAll?(c.appendChild(document.createTextNode(d)),s._hasSelectorInputListener||u()):g(!1,c,{});k=c.lastChild};
return a}})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "),function(h,d,a,b,l,m){function p(a,b,d){return a&&b?a.getWidth()/b*(d||f)*e*c.screenDPI:0}function r(a,b,d,g,h){return a.expand(g*b/(((h?d:n.values[n[d]])||f)*e*c.screenDPI)/a.getWidth())}var e=39.37,f=6370997*Math.PI/180,c=b.defaults,n=m,u={getUnitValueForSR:function(a){return this.getUnitValue(a)||f},getUnitValue:function(a){var b,c,e;a&&("object"===typeof a?
(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?e=n.values[n[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e},getScale:function(a,b,c){var e,d,f;1<arguments.length&&l.isDefined(b)&&!b.declaredClass?(e=a,d=b,b=null,f=u.getUnitValue(c)):(e=b||a.extent,d=a.width,f=u.getUnitValue(e&&e.spatialReference));return p(e,d,f)},getExtentForScale:function(a,b,c){return r(c||a.extent,a.width,u.getUnitValue(a.spatialReference),
b,!0)}};d("extend-esri")&&(h.mixin(h.getObject("geometry",!0,a),u),a.geometry._getScale=p,a.geometry._getExtentForScale=r);return u})},"esri/dijit/geoenrichment/config":function(){define([],function(){return{portalUrl:location.protocol+"//arcgis.com",server:location.protocol+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:location.protocol+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},
"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(a){this.messages=[];d.mixin(this,a);a=this.messages;var b,h=a.length;for(b=0;b<h;b++)a[b]=new l(a[b])},jobId:"",jobStatus:""});d.mixin(h,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",
STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});a("extend-esri")&&d.setObject("tasks.JobInfo",h,b);return h})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),function(h,d,a,b,l,m,p,r,e,
f){h=h([f],{declaredClass:"esri.layers._StreamMode",constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=d.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;a.purgeOptions&&(a.purgeOptions.age&&"number"===typeof a.purgeOptions.age)&&(this._maxFeatureAge=1E3*Math.ceil(60*a.purgeOptions.age));this._drawFeatures=d.hitch(this,this._drawFeatures);
this._queryErrorHandler=d.hitch(this,this._queryErrorHandler)},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a?this._redrawAllTracks():console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d "+this.featureLayer.id))},drawFeature:function(a){var b=this.featureLayer,e=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));b._joinField&&this._getFeature(a.attributes[e])?
this._drawBuffer.updates.push({oid:a.attributes[e],updates:a}):this._drawBuffer.adds.push(a)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a&&(!a._relatedUrl&&!a._keepLatestUrl?(a._fireUpdateStart(),a.clear(),a._fireUpdateEnd()):(a._fireUpdateStart(),a._refreshing=!0,a.disconnect(),a.clear(),a._relatedQueried=!1,a._keepLatestQueried=!1,a.connect()))},_drawFeatures:function(a,b){this._purgeRequests();var e=this.featureLayer;e._create(a.features||[]);e._fireUpdateEnd(null,
b)},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var e=this.featureLayer,d=e.objectIdField;b&&a.forEach(b,function(a){a=a.attributes[d];e._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a)},this)},_addFeatures:function(b){var e=this.featureLayer,d=e._endTimeField,f=e._startTimeField,h,k,g,l=[],m=[],p=[];h=e._trackManager;k=e.objectIdField;if(h)for(g in b=h.addFeatures(b),b)b.hasOwnProperty(g)&&(l.push(g),b[g].adds&&
(m=m.concat(b[g].adds)),b[g].deletes&&(p=p.concat(b[g].deletes)));else m=b;a.forEach(m,function(a){var b=a.attributes[k],c;c=d&&a.attributes[d];!c&&this._maxFeatureAge&&(c=f&&a.attributes[f]?a.attributes[f]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);c&&(c=1E3*Math.ceil(c/1E3),this._featuresByTime[c]?this._featuresByTime[c].push(b):this._featuresByTime[c]=[b]);this._addFeatureIIf(b,a);this._incRefCount(b)},this);p.length&&this._removeFeatures(p);h&&h.refreshTracks(l)},_updateFeatures:function(b){var e=
this.featureLayer,d,f,h=[];d=e._trackManager;f=e._trackIdField;a.forEach(b,function(a){var b=a.updates;a=this._getFeature(a.oid);var c;if(a){b.geometry&&a.setGeometry(b.geometry);b=b.attributes||{};for(c in b)b.hasOwnProperty(c)&&(a.attributes[c]=b[c]);a.visible=this._checkFeatureTimeIntersects(a);d&&a.attributes[f]?h.push(a.attributes[f]):e._repaint(a,null,!0)}},this);h.length&&d.refreshTracks(h)},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,b;if(a&&(b=a.trimTracks())&&0<b.length)this._removeFeatures(b),
a.refreshTracks()},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var a=this._drawBuffer,b=a.adds.splice(0,a.adds.length),e=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a)return!1;a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(e);if((b=this._getExpiredFeatures())&&b.length)this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);a._purge();a._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var a=this._timeoutId,
b=this._drawBuffer,e=b.adds,b=b.updates;a&&clearTimeout(a);e.splice(0,e.length);b.splice(0,b.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,e=b.getMap(),e=e?e.timeExtent:null;return!e||!b.timeInfo||!b.timeInfo.startTimeField&&
!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],e.startTime,e.endTime).match.length},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchArchive:function(a){var b=this.featureLayer,d,f,h,k,g;b._fireUpdateStart();if(a&&this.map){d=new r(a);f=new p;a=this.map;h=b.getFilter()||{};k=h.where||"1\x3d1";g=h.geometry?e.fromJson(h.geometry):null;h=h.outFields?h.outFields.split(","):["*"];f.geometry=g;f.where=k;f.outFields=h;f.returnGeometry=!0;f.outSpatialReference=
new m(a.spatialReference.toJson());b._usePatch&&(a=this._getRequestId(b),this._cancelPendingRequest(null,a));var l=0,w=this,v=null,z=function(a){l++;d.execute(f).then(function(b){a(null,b)},function(b){a(b)})},x=function(a,c){a?2<=l||!b._relatedUrl?w._queryErrorHandler(Error("Could not get features from related feature service")):(v={relatedFeatureWarning:"Querying related feature service using the current filter failed. All related features are displayed, and the filter is appled to the stream service only"},
f.where="1\x3d1",z(x)):w._drawFeatures(c,v)};z(x)}else return this._fireUpdateEnd({error:"Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"}),!1},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)},_getExpiredFeatures:function(){var b,e,d,f=[],h=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return h;b=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=
e=1E3*Math.ceil(Date.now()/1E3);if(b&&b!==e)for(d=this._featuresByTime;b<=e;b+=1E3)d[b]&&(f=f.concat(d[b]),delete d[b]);a.forEach(f,function(a){(a=this._getFeature(a))&&h.push(a)},this);return h}});b("extend-esri")&&d.setObject("layers._StreamMode",h,l);return h})},"dgrid/util/mouse":function(){define(["dojo/_base/lang","dojo/on","dojo/dom","dojo/query"],function(h,d,a){function b(b,h){return function(l,e){return d(l,b+":"+h,function(b){if(!a.isDescendant(b.relatedTarget,this))return e.call(this,
b)})}}var l={enterRow:b(".dgrid-content .dgrid-row","mouseover"),enterCell:b(".dgrid-content .dgrid-cell","mouseover"),enterHeaderCell:b(".dgrid-header .dgrid-cell","mouseover"),leaveRow:b(".dgrid-content .dgrid-row","mouseout"),leaveCell:b(".dgrid-content .dgrid-cell","mouseout"),leaveHeaderCell:b(".dgrid-header .dgrid-cell","mouseout"),createDelegatingHandler:b};h.getObject("dgrid.util.mouse",!0);h.mixin(dgrid.util.mouse,l);return l})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(h,d,a,b,l,m,p,r,e,f){var c=h(f,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(a,b){this.infos=a;this.timeUnits=b||"day";a.sort(function(a,b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(a,b){var c=b.getLayer(),e=b.attributes,f=p.isDefined;a=r.fromJson(a.toJson());var g=c._map.timeExtent.endTime;if(!g)return a;var h=l.difference(new Date(e[c._startTimeField]),g,this.timeUnits);d.some(this.infos,function(b){if(h>=b.minAge&&h<=b.maxAge){var c=
b.color,e=b.size;b=b.alpha;c&&a.setColor(c);f(e)&&this._setSymbolSize(a,e);f(b)&&a.color&&(a.color.a=b);return!0}},this);return a},toJson:function(){var a={agerClassBreakInfos:[]},b,c,d;a.timeUnits=this._getRestUnits(this.timeUnits);for(b=0;b<this.infos.length;b+=1)c=this.infos[b],d={},d.oldestAge=Infinity===c.maxAge?null:c.maxAge,d.size=c.size,c.color&&(d.color=e.toJsonColor(c.color)),c.alpha&&(d.alpha=Math.round(255*c.alpha)),a.agerClassBreakInfos[b]=d;return a},_getRestUnits:function(a){var b=
"esriTimeUnitsDays";switch(a){case c.UNIT_SECONDS:b="esriTimeUnitsSeconds";break;case c.UNIT_MILLISECONDS:b="esriTimeUnitsMilliseconds";break;case c.UNIT_HOURS:b="esriTimeUnitsHours";break;case c.UNIT_MINUTES:b="esriTimeUnitsMinutes";break;case c.UNIT_MONTHS:b="esriTimeUnitsMonths";break;case c.UNIT_WEEKS:b="esriTimeUnitsWeeks";break;case c.UNIT_YEARS:b="esriTimeUnitsYears"}return b}});a.mixin(c,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});b("extend-esri")&&a.setObject("renderer.TimeClassBreaksAger",c,m);return c})},"esri/dijit/geoenrichment/CheckList":function(){define("../../declare dojo/dom-construct dojo/dom-class dojo/_base/lang dojo/query dojo/store/Memory dgrid/List dgrid/Selection dijit/layout/ContentPane".split(" "),function(h,d,a,b,l,m,p,r){function e(a,b){var e=d.create("div",{"class":"TrimWithEllipses"});b&&d.create("div",{"class":"dijit dijitInline dijitCheckBox VarCheck"},
e);d.create("span",{"class":"VarLabel",innerHTML:a},e);return e}h=h("esri.dijit.geoenrichment.CheckList",[p,r],{selectionMode:"toggle",store:null,selectedItems:null,useTouchScroll:!1,_setStore:function(a){this.store=a;this.refresh();this.renderArray(a.data)},_setItems:function(a){a=new m({data:a});this.set("store",a);this.refresh();this.renderArray(a.data)},buildRendering:function(){this.inherited(arguments);var a=b.hitch(this,this._onSelect);this.on("dgrid-select",a);this.on("dgrid-deselect",b.hitch(this,
this._onDeselect))},select:function(b){this.inherited(arguments);var c=this.row(b).element;if(c){var e=l(".dijitCheckBox",c)[0];e&&(a.contains(c,"dgrid-selected")?a.add(e,"dijitCheckBoxChecked"):a.remove(e,"dijitCheckBoxChecked"))}},renderRow:function(a,b){return e(a.description?a.description:a.alias,"single"!=this.selectionMode)},_setSelection:function(){this.selection=this.get("selection");this.selectedItems=[];if(this.selection&&this.store.data)for(var a=this.store.data,b=0;b<a.length;b++)this.selection[a[b].id]&&
this.selectedItems.push(a[b])},_onSelect:function(a){this._setSelection();this.onSelect(a)},_onDeselect:function(a){this._setSelection();this.onDeselect(a)},onDeselect:function(a){},onSelect:function(a){}});h.renderCheckBox=e;return h})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(h,d,a,b,l,m,p,r){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",
STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},f={color:[0,0,0,1],style:e.STYLE_SOLID,width:1,cap:e.CAP_BUTT,join:e.JOIN_MITER,miterLimit:10};
h=h(r,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(b,e,h,m,r,k){b?d.isString(b)?(this.style=b,e&&(this.color=e),void 0!==h&&(this.width=h),m&&(this.cap=m),r&&(this.join=r),void 0!==k&&(this.miterLimit=k)):(this.cap=p.valueOf(this._caps,b.cap),this.join=p.valueOf(this._joins,b.join),this.width=l.pt2px(b.width),
this.miterLimit=l.pt2px(b.miterLimit)):(d.mixin(this,f),this.color=new a(this.color),this.width=l.pt2px(this.width),this.miterLimit=l.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return d.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===e.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=l.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return p.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});d.mixin(h,e);h.defaultProps=f;b("extend-esri")&&(d.setObject("symbol.CartographicLineSymbol",h,m),m.symbol.defaultCartographicLineSymbol=f);return h})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v){var z=0;d=d([w,s,k],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=b.mixin({},v.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(b.hitch(this,this._handleComponentsSuccess),b.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var a=this._mediaInfos,b=a.length,e=this.domNode,d=this._prevMedia,g=this._nextMedia;if(1<b){var k=0,h=0;l.forEach(a,function(a){"image"===a.type?k++:-1!==a.type.indexOf("chart")&&h++});k&&(f.set(this._imageCount,"innerHTML",k),m.query(".summary .image",e).removeClass("hidden"));h&&(f.set(this._chartCount,"innerHTML",h),m.query(".summary .chart",e).removeClass("hidden"))}else m.query(".summary",
e).addClass("hidden"),c.add(d,"hidden"),c.add(g,"hidden");a=this._mediaPtr;0===a?c.add(d,"hidden"):c.remove(d,"hidden");a===b-1?c.add(g,"hidden"):c.remove(g,"hidden");this._destroyFrame()},_displayMedia:function(){var a=this._mediaInfos[this._mediaPtr],e=a.title,d=a.caption,g=m.query(".mediaSection .hzLine",this.domNode)[0];f.set(this._mediaTitle,"innerHTML",e);c[e?"remove":"add"](this._mediaTitle,"hidden");f.set(this._mediaCaption,"innerHTML",d);c[d?"remove":"add"](this._mediaCaption,"hidden");c[e&&
d?"remove":"add"](g,"hidden");this._rid=null;if("image"===a.type)this._showImage(a.value);else{var k=this,e=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],d=a.value.theme||this.chartTheme;b.isString(d)&&(d=d.replace(/\./gi,"/"),-1===d.indexOf("/")&&(d="dojox/charting/themes/"+d));d||(d="./Rainbow");e.push(d);try{var n=this._rid=z++;h(e,function(b,c,e){n===k._rid&&(k._rid=null,k._showChart(a.type,a.value,b,c,e))})}catch(l){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(a){return(a=
a&&b.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(b){c.add(this._mediaFrame,"image");var e=u.get(this._gallery,"height"),d;b.linkURL&&(d=n.create("a",{href:b.linkURL,target:this._preventNewTab(b.linkURL)?"":"_blank"},this._mediaFrame));n.create("img",{className:"esriPopupMediaImage",src:b.sourceURL},d||this._mediaFrame);var f=m.query(".esriPopupMediaImage",this._mediaFrame)[0],g=this,k;k=a.connect(f,"onload",function(){a.disconnect(k);k=null;g._imageLoaded(f,
e)})},_showChart:function(a,b,e,d,f){c.remove(this._mediaFrame,"image");e=this._chart=new e(n.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});f&&e.setTheme(f);switch(a){case "piechart":e.addPlot("default",{type:"Pie",labels:!1});e.addSeries("Series A",b.fields);break;case "linechart":e.addPlot("default",{type:"Markers"});e.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});e.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});l.forEach(b.fields,
function(a,b){a.x=b+1});e.addSeries("Series A",b.fields);break;case "columnchart":e.addPlot("default",{type:"Columns",gap:3});e.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});e.addSeries("Series A",b.fields);break;case "barchart":e.addPlot("default",{type:"Bars",gap:3}),e.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),e.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),e.addSeries("Series A",b.fields)}this._action=new d(e);e.render()},
_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);f.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),u.set(a,"marginTop",c+"px"))},_attListHandler:function(a,b){if(a===this._dfd){this._dfd=null;var c="";!(b instanceof Error)&&(b&&b.length)&&l.forEach(b,function(a){c+="\x3cli\x3e";c+="\x3ca href\x3d'"+q.addProxy(a.url)+"' target\x3d'_blank'\x3e"+
(a.name||"[No name]")+"\x3c/a\x3e";c+="\x3c/li\x3e"});f.set(this._attachmentsList,"innerHTML",c||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(a){if(a){var d=this.showTitle?a.title:"",g=a.description,k=a.fields,h=a.mediaInfos,n=this.domNode,q=this._nls,p=this,v=this.template,r=this.graphic;this._prevMedia.title=q.NLS_prevMedia;this._nextMedia.title=q.NLS_nextMedia;f.set(this._title,"innerHTML",d);d||c.add(this._title,"hidden");!a.hasDescription&&k&&(g="",l.forEach(k,
function(a){g+="\x3ctr valign\x3d'top'\x3e";g+="\x3ctd class\x3d'attrName'\x3e"+t.encode(a[0])+"\x3c/td\x3e";g+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+q.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";g+="\x3c/tr\x3e"}),g&&(g="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+g+"\x3c/table\x3e"));f.set(this._description,"innerHTML",g);g||c.add(this._description,"hidden");m.query("a",
this._description).forEach(function(a){p._preventNewTab(a.href)?"_blank"===a.target&&f.remove(a,"target"):f.set(a,"target","_blank")});d&&g?m.query(".mainSection .hzLine",n).removeClass("hidden"):d||g?m.query(".mainSection .hzLine",n).addClass("hidden"):m.query(".mainSection",n).addClass("hidden");if(d=this._dfd=v.getAttachments(r))d.addBoth(b.hitch(this,this._attListHandler,d)),f.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+q.NLS_searching+"...\x3c/li\x3e"),m.query(".attachmentsSection",n).removeClass("hidden");
h&&h.length&&(m.query(".mediaSection",n).removeClass("hidden"),e.setSelectable(this._mediaFrame,!1),this._mediaInfos=h,this._mediaPtr=0,this._updateUI(),this._displayMedia());a.editSummary&&(f.set(this._editSummary,"innerHTML",a.editSummary),h&&h.length&&c.remove(this._mediaBreak,"hidden"),c.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){console.log("PopupRenderer: error loading template",a)}});p("extend-esri")&&b.setObject("dijit._PopupRenderer",d,g);return d})},
"dojox/mvc/sync":function(){define(["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(h,d,a,b){function l(e,d,c,n,l,m,p,k,g,q){if(!c(g,k)&&!("*"==l&&0>a.indexOf(n.get("properties")||[p],p)||"*"==l&&p in(q||{}))){c="*"==l?p:l;if(b("mvc-bindings-log-api"))var w=r(n,c,m,p);try{g=e?e(g,d):g}catch(v){b("mvc-bindings-log-api")&&console.log("Copy from"+w.join(" to ")+" was not done as an error is thrown in the converter.");return}b("mvc-bindings-log-api")&&console.log(w.reverse().join(" is being copied from: ")+
" (Value: "+g+" from "+k+")");h.isFunction(n.set)?n.set(c,g):n[c]=g}}var m=h.getObject("dojox.mvc",!0);b.add("mvc-bindings-log-api",(d.mvc||{}).debugBindings);var p;if(b("mvc-bindings-log-api"))var r=function(a,b,c,d){return[[c.canConvertToLoggable||!c.declaredClass?c:c.declaredClass,d].join(":"),[a.canConvertToLoggable||!a.declaredClass?a:a.declaredClass,b].join(":")]};d={from:1,to:2,both:3};p=function(e,d,c,n,u){var t=(u||{}).converter,s,k,g;t&&(s={source:e,target:c},k=t.format&&h.hitch(s,t.format),
g=t.parse&&h.hitch(s,t.parse));var q=[],w=[],v=h.mixin({},e.constraints,c.constraints),t=(u||{}).bindDirection||m.both,z=(u||{}).equals||p.equals;if(b("mvc-bindings-log-api"))var x=r(e,d,c,n);if("*"==n){if("*"!=d)throw Error("Unmatched wildcard is specified between source and target.");u=c.get("properties");if(!u){u=[];for(var A in c)c.hasOwnProperty(A)&&"_watchCallbacks"!=A&&u.push(A)}w=c.get("excludes")}else u=[d];t&m.from&&(h.isFunction(e.set)&&h.isFunction(e.watch)?q.push(e.watch.apply(e,("*"!=
d?[d]:[]).concat([function(a,b,d){l(k,v,z,c,n,e,a,b,d,w)}]))):b("mvc-bindings-log-api")&&console.log(x.reverse().join(" is not a stateful property. Its change is not reflected to ")+"."),a.forEach(u,function(a){if("*"!=n||!(a in(w||{}))){var b=h.isFunction(e.get)?e.get(a):e[a];l(k,v,z,c,"*"==n?a:n,e,a,void 0,b)}}));t&m.to&&(t&m.from||a.forEach(u,function(a){if("*"!=n||!(a in(w||{}))){var b=h.isFunction(c.get)?c.get(n):c[n];l(g,v,z,e,a,c,"*"==n?a:n,void 0,b)}}),h.isFunction(c.set)&&h.isFunction(c.watch)?
q.push(c.watch.apply(c,("*"!=n?[n]:[]).concat([function(a,b,k){l(g,v,z,e,d,c,a,b,k,w)}]))):b("mvc-bindings-log-api")&&console.log(x.join(" is not a stateful property. Its change is not reflected to ")+"."));b("mvc-bindings-log-api")&&console.log(x.join(" is bound to: "));A={};A.unwatch=A.remove=function(){for(var a=null;a=q.pop();)a.unwatch();b("mvc-bindings-log-api")&&console.log(x.join(" is unbound from: "))};return A};h.mixin(m,d);return h.setObject("dojox.mvc.sync",h.mixin(p,{equals:function(a,
b){return a===b||"number"==typeof a&&isNaN(a)&&"number"==typeof b&&isNaN(b)||h.isFunction((a||{}).getTime)&&h.isFunction((b||{}).getTime)&&a.getTime()==b.getTime()||(h.isFunction((a||{}).equals)?a.equals(b):h.isFunction((b||{}).equals)?b.equals(a):!1)}},d))})},"esri/dijit/analysis/SummarizeNearby":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime dojo/i18n!../../nls/jsapi dojo/text!./templates/SummarizeNearby.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W){d=d([q,w,v,z,x,N,G],{declaredClass:"esri.dijit.analysis.SummarizeNearby",templateString:W,widgetsInTemplate:!0,sumNearbyLayer:null,summaryLayers:null,summaryFields:null,nearType:null,outputLayerName:null,summarizeMetric:!0,summaryLayer:null,groupByField:null,minorityMajority:!1,percentPoints:!1,distances:null,units:null,shapeUnits:null,sumShape:!0,enableTravelModes:!0,i18n:null,toolName:"SummarizeNearby",helpFileName:"SummarizeNearby",
resultParameter:"resultLayer",constructor:function(a){this._pbConnects=[];this._statsRows=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects;this._driveTimeClickHandles&&0<this._driveTimeClickHandles.length&&(b.forEach(this._driveTimeClickHandles,l.disconnect),this._driveTimeClickHandles=null)},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,R.bufferTool);a.mixin(this.i18n,
R.driveTimes);a.mixin(this.i18n,R.summarizeNearbyTool)},postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._breakValuesInput.set("validator",a.hitch(this,this.validateDistance));this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(b){b.preventDefault();if(this._form.validate()){b=
{};var c;c=this.summaryLayers[this._layersSelect.get("value")];b.summaryLayer=m.toJson(C.constructAnalysisInputLyrObj(c));b.nearType=this.get("nearType");b.sumNearbyLayer=m.toJson(C.constructAnalysisInputLyrObj(this.sumNearbyLayer));b.summaryFields=m.toJson(this.get("summaryFields"));b.distances=m.toJson(this.get("distances"));b.units=this._distanceUnitsSelect.get("value");this._trafficTimeWidget.get("checked")&&(b.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&
(b.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay")));this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));b.sumShape=this._sumMetricCheck.get("checked");if("esriGeometryPoint"!==c.geometryType||"esriGeometryMultipoint"!==c.geometryType)b.shapeUnits=this.get("shapeUnits");"0"!==this._groupBySelect.get("value")&&(b.groupByField=this._groupBySelect.get("value"));b.returnBoundaries=this.get("returnBoundaries");this.showChooseExtent&&
this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},_handleSaveBtnClick:function(){if(this._form.validate())if(!this._sumMetricCheck.get("checked")&&0===this.get("summaryFields").length)this._showMessages(this.i18n.statsRequiredMsg);else{this._saveBtn.set("disabled",!0);var a={},b={},c,e;c=this.summaryLayers[this._layersSelect.get("value")];
a.summaryLayer=m.toJson(C.constructAnalysisInputLyrObj(c));e=this._nearTypeSelect.getOptions(this._nearTypeSelect.get("value"));a.nearType=e.travelMode?m.toJson(e.travelMode):this._nearTypeSelect.get("value");a.sumNearbyLayer=m.toJson(C.constructAnalysisInputLyrObj(this.sumNearbyLayer));a.summaryFields=m.toJson(this.get("summaryFields"));a.distances=this.get("distances");a.units=this._distanceUnitsSelect.get("value");this._trafficTimeWidget.get("checked")&&(a.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),
"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(a.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay")));a.returnBoundaries=this.get("returnBoundaries");this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));a.sumShape=this._sumMetricCheck.get("checked");if("esriGeometryPoint"!==c.geometryType||"esriGeometryMultipoint"!==c.geometryType)a.shapeUnits=this.get("shapeUnits");"0"!==this._groupBySelect.get("value")&&
(a.groupByField=this._groupBySelect.get("value"),this.resultParameter=["resultLayer","groupBySummary"],a.minorityMajority=this.get("minorityMajority"),a.percentShape=this.get("percentPoints"));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(e={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(e.extent=this.map.extent._normalize(!0)),a.context=m.toJson(e));
b.jobParams=a;this._saveBtn.set("disabled",!1);b.itemParams={description:f.substitute(this.i18n.itemDescription,{sumNearbyLayerName:this.sumNearbyLayer.name,summaryLayerName:c.name}),tags:f.substitute(this.i18n.itemTags,{sumNearbyLayerName:this.sumNearbyLayer.name,summaryLayerName:c.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_initializeShapeUnits:function(a){this._prevGeometryType&&this._prevGeometryType===a||(this._shapeUnitsSelect.removeOption(this._shapeUnitsSelect.getOptions()),
c.set(this._shapeUnitsSelect.domNode,"display","esriGeometryPoint"===a||"esriGeometryMultipoint"===a?"none":""),"esriGeometryPolygon"===a?(this._shapeUnitsSelect.addOption([{value:"SquareMiles",label:this.i18n.sqMiles},{value:"SquareKilometers",label:this.i18n.sqKm},{value:"SquareMeters",label:this.i18n.sqMeters},{value:"Hectares",label:this.i18n.hectares},{value:"Acres",label:this.i18n.acres}]),"Kilometers"===this.units&&!this.shapeUnits?this.shapeUnits="SquareKilometers":"Kilometers"===this.get("shapeUnits")&&
this.set("shapeUnits","SquareKilometers")):"esriGeometryPolyline"===a&&(this._shapeUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Feet",label:this.i18n.feet},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters},{value:"Yards",label:this.i18n.yards}]),"Kilometers"===this.units&&!this.shapeUnits?this.shapeUnits="Kilometers":"SquareKilometers"===this.get("shapeUnits")&&this.set("shapeUnits","Kilometers")),this._shapeUnitsSelect.set("value",this.get("shapeUnits")),
this._prevGeometryType=a)},_handleLayerChange:function(a){if("browse"===a)this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show();else if(a=this.summaryLayers[a]){this.sumNearbyLayer&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:a.name,sumNearbyLayerName:this.sumNearbyLayer.name}),this._outputLayerInput.set("value",this.outputLayerName));
this._initializeShapeUnits(a.geometryType);"esriGeometryPolygon"===a.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoly),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPolygon"));if("esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType)n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoint),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPoint");"esriGeometryPolyline"===a.geometryType&&(n.set(this._sumMetricLabel,
"innerHTML",this.i18n.summarizeMetricLine),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsLine"));this.set("groupBySelect",this.groupByField);this._removeStatsRows();this._createStatsRow()}},_handleAttrSelectChange:function(b){var e;"0"!==b&&(b=this.get("statisticSelect"),"0"!==b.get("value")&&!b.get("isnewRowAdded")&&(e=b.get("removeTd"),c.set(e,"display","block"),e=b.get("referenceWidget"),a.hitch(e,e._createStatsRow()),e._sumMetricCheck.set("disabled",!1),b.set("isnewRowAdded",!0)))},
_handleStatsValueUpdate:function(b,e,d){this.get("attributeSelect")&&(b=this.get("attributeSelect"),"0"!==b.get("value")&&"0"!==d&&!this.get("isnewRowAdded")&&(d=this.get("removeTd"),c.set(d,"display","block"),d=this.get("referenceWidget"),a.hitch(d,d._createStatsRow()),d._sumMetricCheck.set("disabled",!1),this.set("isnewRowAdded",!0)))},_handleDistValueChange:function(a){this.set("outputLayerName")},_handleDistUnitsChange:function(a){this.set("outputLayerName");this.set("units",a)},_handleShapeUnitsChange:function(a){this.set("shapeUnits",
a)},_handleDistanceTypeChange:function(a){this.set("nearType",a);var b,e;e=this._nearTypeSelect.getOptions(this._nearTypeSelect.get("value"));F.isDefined(e)?(b="Time"===e.units,a="Time"===e.units&&"driving"===e.modei18nKey):(b=-1!==a.indexOf("Time"),a="DrivingTime"===a);c.set(this._useTrafficRow,"display",a?"":"none");this._trafficTimeWidget.set("disabled",!a);this._trafficTimeWidget.set("reset",!a);b?(this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Seconds",
label:this.i18n.seconds},{value:"Minutes",label:this.i18n.minutes,selected:"selected"},{value:"Hours",label:this.i18n.hours}]),this.set("units",this._distanceUnitsSelect.get("value"))):(this.get("units")&&this.set("units",this.get("units")),this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",
label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]),this._distanceUnitsSelect.set("value",this.units));this.set("outputLayerName")},_handleGroupBySelectChange:function(a){a="0"===a;s.toggle(this._minmajorityLabel,"esriAnalysisTextDisabled",a);s.toggle(this._percentPointsLabel,"esriAnalysisTextDisabled",a);this._percentPointsCheck.set("disabled",a);this._minmajorityCheck.set("disabled",a)},_save:function(){},_buildUI:function(){var e;C.initHelpLinks(this.domNode,this.showHelp);c.set(this._showCreditsLink,
"display",!0===this.showCredits?"block":"none");this.get("showSelectAnalysisLayer")&&(!this.get("sumNearbyLayer")&&this.get("sumNearbyLayers")&&this.set("sumNearbyLayer",this.sumNearbyLayers[0]),C.populateAnalysisLayers(this,"sumNearbyLayer","sumNearbyLayers"));this.distances?this._breakValuesInput.set("value",this.distances.toString().replace(/,/g," ")):(this.distances=[],this.distances.push(this._breakValuesInput.get("value")));C.populateTravelModes({selectWidget:this._nearTypeSelect,addStraightLine:!0,
widget:this,enableTravelModes:this.get("enableTravelModes")});this.sumNearbyLayer&&(n.set(this._aggregateToolDescription,"innerHTML",f.substitute(this.i18n.summarizeDefine,{sumNearbyLayerName:this.sumNearbyLayer.name})),"esriGeometryPoint"!==this.sumNearbyLayer.geometryType&&(this.set("enableTravelModes",!1),this._updateTravelModes(!1)));this.units&&this._distanceUnitsSelect.set("value",this.units);if(this.summaryLayers&&(b.forEach(this.summaryLayers,function(a,b){a!==this.sumNearbyLayer&&(this._layersSelect.addOption({value:b,
label:a.name}),this.summaryLayer&&this.summaryLayer===a&&this._layersSelect.set("value",b))},this),e=this.summaryLayers[this._layersSelect.get("value")])){!this.outputLayerName&&this.sumNearbyLayer&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:e.name,sumNearbyLayerName:this.sumNearbyLayer.name}));n.set(this._addStatsLabel,"innerHTML",f.substitute(this.i18n.addStats,{summaryLayerName:e.name}));this._initializeShapeUnits(e.geometryType);this.shapeUnits&&this._shapeUnitsSelect.set("value",
this.shapeUnits);"esriGeometryPolygon"===e.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoly),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPolygon"));if("esriGeometryPoint"===e.geometryType||"esriGeometryMultipoint"===e.geometryType)n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricPoint),n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsPoint");"esriGeometryPolyline"===e.geometryType&&(n.set(this._sumMetricLabel,"innerHTML",this.i18n.summarizeMetricLine),
n.set(this._addStatsHelpLink,"esriHelpTopic","StatisticsLine"))}C.addReadyToUseLayerOption(this,[this._analysisSelect,this._layersSelect]);this.outputLayerName&&this._outputLayerInput.set("value",this.outputLayerName);!this.sumShape&&this.summaryFields&&this._sumMetricCheck.set("checked",this.sumShape);this._createStatsRow();b.forEach(this.summaryFields,function(b){b=b.split(" ");this._currentAttrSelect.set("value",b[0]);a.hitch(this._currentAttrSelect,this._handleAttrSelectChange,b[0])();this._currentStatsSelect.set("value",
b[1]);a.hitch(this._currentStatsSelect,this._handleStatsValueUpdate,"value","",b[1])()},this);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;C.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===
this.showChooseExtent?"inline-block":"none");this.set("groupBySelect",this.groupByField);this.minorityMajority&&this._minmajorityCheck.set("checked",this.minorityMajority);this.percentPoints&&this._percentPointsCheck.set("checked",this.percentPoints);this._handleDistanceTypeChange("StraightLine");this._loadConnections()},validateDistance:function(){var c=this,e,d=[],f,g,h;this.set("distances");e=a.trim(this._breakValuesInput.get("value")).split(" ");"StraightLine"!==this._nearTypeSelect.get("value")&&
(h=C.getMaxInputByMode({type:this._nearTypeSelect.get("value").replace("-",""),units:this._distanceUnitsSelect.get("value")}));if(0===e.length)return!1;b.forEach(e,function(e){e=k.parse(e);if(isNaN(e)||e>h)return d.push(0),!1;f=k.format(e,{locale:"root"});F.isDefined(f)?F.isDefined(f)||(f=k.format(e,{locale:"en-us"})):f=k.format(e,{locale:"en"});F.isDefined(f)&&(g=a.trim(f).match(/\D/g));g&&b.forEach(g,function(a){"."===a||","===a?d.push(1):"-"===a&&"polygon"===c.inputType?d.push(1):d.push(0)})});
return-1!==b.indexOf(d,0)?(this._breakValuesInput.focus(),!1):!0},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1));this._driveTimeClickHandles=[];this._driveTimeClickHandles.push(l.connect(this._nearTypeSelect,"onChange",a.hitch(this,"_handleDistanceTypeChange")));this.watch("enableTravelModes",a.hitch(this,function(a,b,c){this._updateTravelModes(c)}))},_createStatsRow:function(){var b,c,e,d,f;d=this.summaryLayers[this._layersSelect.get("value")];
b=u.create("tr",null,this._afterStatsRow,"before");e=u.create("td",{style:{width:"45%",maxWidth:"100px"}},b);c=u.create("td",{style:{width:"55%",maxWidth:"104px"}},b);e=new y({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin05 attrSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},u.create("select",null,e));this.set("attributes",{selectWidget:e,summaryLayer:d});c=new y({"class":"mediumInput statsSelect",style:{tableLayout:"fixed",overflowX:"hidden"}},u.create("select",
null,c));this.set("statistics",{selectWidget:c});e.set("statisticSelect",c);l.connect(e,"onChange",this._handleAttrSelectChange);f=u.create("td",{"class":"shortTextInput removeTd",style:{display:"none",maxWidth:"12px"}},b);d=u.create("a",{title:this.i18n.removeAttrStats,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+h.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},f);l.connect(d,"onclick",a.hitch(this,this._handleRemoveStatsBtnClick,b));this._statsRows.push(b);c.set("attributeSelect",
e);c.set("removeTd",f);c.set("isnewRowAdded",!1);c.set("referenceWidget",this);c.watch("value",this._handleStatsValueUpdate);this._currentStatsSelect=c;this._currentAttrSelect=e;return!0},_handleRemoveStatsBtnClick:function(a){this._removeStatsRow(a);0===this.get("summaryFields").length&&(this._sumMetricCheck.set("disabled",!0),this._sumMetricCheck.set("checked",!0))},_removeStatsRows:function(){b.forEach(this._statsRows,this._removeStatsRow,this);this._statsRows=[]},_removeStatsRow:function(a){b.forEach(A.findWidgets(a),
function(a){a.destroyRecursive()});u.destroy(a)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.sumNearbyLayer=this.sumNearbyLayers[a],this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){b&&b.selection&&C.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?
this.sumNearbyLayers:this.summaryLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,this._updateAnalysisLayerUI,!0))},_updateAnalysisLayerUI:function(a){var c=this.summaryLayers[this._layersSelect.get("value")],e=this._layersSelect.get("value");a&&(this.get("sumNearbyLayer")&&c)&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{summaryLayerName:c.name,sumNearbyLayerName:this.sumNearbyLayer.name}),
this._outputLayerInput.set("value",this.outputLayerName));this.summaryLayers&&this.sumNearbyLayer&&(a=b.some(this._layersSelect.getOptions(),function(a){return"browse"===a.value},this),this._layersSelect.removeOption(this._layersSelect.getOptions()),b.forEach(this.summaryLayers,function(a,b){var c=!0;if(a.url&&this.sumNearbyLayer.url&&a.url!==this.sumNearbyLayer.url)c=!1;else if(this.sumNearbyLayer!==a&&(!a.analysisReady||!this.sumNearbyLayer.analysisReady))c=!1;c||(this._layersSelect.addOption({value:b,
label:a.name}),e===b&&this._layersSelect.set("value",b))},this),this.get("showReadyToUseLayers")&&a&&(this._layersSelect.addOption({type:"separator",value:""}),this._layersSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle})))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setSumNearbyLayersAttr:function(a){this.sumNearbyLayers=a},_setSumNearbyLayerAttr:function(a){this.sumNearbyLayer=a},_setSummaryLayersAttr:function(a){this.summaryLayers=
a},_setSummaryLayerAttr:function(a){this.summaryLayer=a},_setLayersAttr:function(a){this.summaryLayers=[]},_setAttributesAttr:function(a){if(a.summaryLayer){var c,e;c=a.summaryLayer;e=a.selectWidget;a=c.fields;e.addOption({value:"0",label:this.i18n.attribute});b.forEach(a,function(a){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)&&e.addOption({value:a.name,label:F.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)}},_setStatisticsAttr:function(a){a=
a.selectWidget;a.addOption({value:"0",label:this.i18n.statistic});a.addOption({value:"SUM",label:this.i18n.sum});a.addOption({value:"MIN",label:this.i18n.minimum});a.addOption({value:"MAX",label:this.i18n.maximum});a.addOption({value:"MEAN",label:this.i18n.average});a.addOption({value:"STDDEV",label:this.i18n.standardDev})},_setSummaryFieldsAttr:function(a){this.summaryFields=a},_getSummaryFieldsAttr:function(){var a="",b=[];t(".statsSelect",this.domNode).forEach(function(c){var e;c=A.byNode(c);e=
c.get("attributeSelect");"0"!==e.get("value")&&"0"!==c.get("value")&&(a+=e.get("value")+" "+c.get("value")+";",b.push(e.get("value")+" "+c.get("value")))});return b},_setGroupBySelectAttr:function(a){var c=this.summaryLayers[this._layersSelect.get("value")],e=F.isDefined(c)?c.fields:[];0<this._groupBySelect.getOptions().length&&this._groupBySelect.removeOption(this._groupBySelect.getOptions());this._groupBySelect.addOption({value:"0",label:this.i18n.attribute});b.forEach(e,function(a,e){-1!==b.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeString","esriFieldTypeDate"],a.type)&&a.name!==c.objectIdField&&this._groupBySelect.addOption({value:a.name,label:F.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this);a&&this._groupBySelect.set("value",a);this._handleGroupBySelectChange(this._groupBySelect.get("value"))},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setNearTypeAttr:function(a){this.nearType=a},_getNearTypeAttr:function(){return this.nearType},_setDistancesAttr:function(c){if(c)this.distances=
c;else if(this._breakValuesInput&&this._breakValuesInput.get("value")){c=a.trim(this._breakValuesInput.get("value")).split(" ");var e=[];b.forEach(c,function(a){e.push(k.parse(a))});this.distances=e}},_getDistancesAttr:function(){return this.distances},_setUnitsAttr:function(a){this.units=a},_getUnitsAttr:function(){return this.units},_setShapeUnitsAttr:function(a){this.shapeUnits=a},_getShapeUnitsAttr:function(){return this.shapeUnits},_getSumShapeAttr:function(){return this._sumMetricCheck.get("checked")},
_setSumShapeAttr:function(a){this.sumShape=a},_setMinorityMajorityAttr:function(a){this.minorityMajority=a},_getMinorityMajorityAttr:function(a){this._minmajorityCheck&&(this.minorityMajority=this._minmajorityCheck.get("checked"));return this.minorityMajority},_setPercentPointsAttr:function(a){this.percentPoints=a},_getPercentPointsAttr:function(a){this._percentPointsCheck&&(this.percentPoints=this._percentPointsCheck.get("checked"));return this.percentPoints},_setEnableTravelModesAttr:function(a){this._set("enableTravelModes",
a)},_getReturnBoundariesAttr:function(){this._returnBdrycCheck&&(this.returnBoundaries=this._returnBdrycCheck.get("checked"));return this.returnBoundaries},_setReturnBoundariesAttr:function(a){this.returnBoundaries=a},validateServiceName:function(a){return C.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))},_showMessages:function(b){n.set(this._bodyNode,"innerHTML",b);p.fadeIn({node:this._errorMessagePane,easing:g.quadIn,onEnd:a.hitch(this,
function(){c.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();p.fadeOut({node:this._errorMessagePane,easing:g.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:"none"})})}).play()},_updateTravelModes:function(a){var c=this._nearTypeSelect.getOptions();b.forEach(c,function(b){"StraightLine"!==b.value&&(b.disabled=!a)});this._nearTypeSelect.updateOption(c)}});r("extend-esri")&&a.setObject("dijit.analysis.SummarizeNearby",
d,J);return d})},"esri/dijit/analysis/CreditEstimator":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/_base/kernel dojo/has dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/dom-style dojo/string dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_OnDijitClickMixin dijit/_FocusMixin ../../kernel ../../lang dojo/i18n!../../nls/jsapi dojo/text!./templates/CreditEstimator.html".split(" "),function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,
v,z){h=d([t,s,k,g],{declaredClass:"esri.dijit.analysis.CreditEstimator",i18n:null,templateString:z,postMixInProperties:function(){this.inherited(arguments);this.i18n={};a.mixin(this.i18n,v.common);a.mixin(this.i18n,v.analysisMsgCodes);a.mixin(this.i18n,v.creditEstimator)},postCreate:function(){this.inherited(arguments)},_setContentAttr:function(a){var b="";a.code&&!a.messageCode&&(a.messageCode=a.code);a.messageCode?(b=w.isDefined(this.i18n[a.messageCode])?this.i18n[a.messageCode]:a.message,b=w.isDefined(a.params)?
n.substitute(b,a.params):b,f.set(this._messageDiv,"display","block"),f.set(this._messageDiv,"innerHTML",b),c.set(this._table,"display","none")):(c.set(this._table,"display","table"),f.set(this._messageDiv,"display","none"),f.set(this._messageDiv,"innerHTML",""),f.set(this._totalRecordsNode,"innerHTML",u.format(a.totalRecords,{locale:m.locale})),f.set(this._creditsReqNode,"innerHTML",u.format(a.cost,{locale:m.locale})))}});p("extend-esri")&&a.setObject("dijit.analysis.CreditEstimator",h,q);return h})},
"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(h,d,a){var b={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",
SPATIAL_REL_RELATION:"esriSpatialRelRelation"};d("extend-esri")&&h.setObject("tasks._SpatialRelationship",b,a);return b})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color".split(" "),function(h,d,a,b,l,m,p){var r=Math.PI;h=h(null,{declaredClass:"esri.renderer.Renderer",constructor:function(a){this._ipDataCache={};if(a&&!a.declaredClass){this.rotationInfo=a.rotationInfo;if(!this.rotationInfo){var b=a.rotationType,
c=a.rotationExpression;if(b||c)this.rotationInfo={type:b,expression:c}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(a.sizeInfo));this.setColorInfo(this._readColorInfo(a.colorInfo));this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));this.setVisualVariables(this._readVariables(a.visualVariables));this.setAuthoringInfo(a.authoringInfo)}this.getSymbol=d.hitch(this,this.getSymbol)},getSymbol:function(a){},_readSizeInfo:function(a){if(a){var b=a.minSize,c=a.maxSize;
b&&"number"===typeof b&&(a.minSize=l.pt2px(b));c&&"number"===typeof c&&(a.maxSize=l.pt2px(c))}return a},_readColorInfo:function(b){b&&(a.forEach(b.colors,function(a,c){d.isArray(a)&&(b.colors[c]=p.toDojoColor(a))}),a.forEach(b.stops,function(a,c){a.color&&d.isArray(a.color)&&(b.stops[c].color=p.toDojoColor(a.color))}));return b},_readOpacityInfo:function(b){var f;b&&(f=d.mixin({},b),f.transparencyValues&&(f.opacityValues=a.map(f.transparencyValues,function(a){return 1-a/100}),delete f.transparencyValues),
f.stops&&(f.stops=a.map(f.stops,function(a){a=d.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return f},_readVariables:function(b){b&&(b=a.map(b,function(a){"sizeInfo"===a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a},this));return b},setAuthoringInfo:function(a){this.authoringInfo=a},setRotationInfo:function(a){if(a=this.rotationInfo="string"===typeof a?
{field:a}:a){if(a.expression&&!d.isFunction(a.expression)&&!a.field){var b=a.expression.match(this.rotationRE);b&&b[1]&&(a.field=b[1])}a.rotationType=a.type}return this},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotationInfo").variable,h="arithmetic"===this._getRotationType(c),c=c.field,l=a.attributes,m=0;c&&(d.isFunction(c)?m=c.apply(this,arguments):l&&(m=l[c]||0),m=(m+(h?-90:0))*(h?-1:1));return m},_getRotationType:function(a){return a&&
("rotationInfo"===a.type?a.rotationType:a.type)},setVisualVariables:function(b){var d=this._ipDataCache;a.forEach(this.visualVariables,function(a,b){d.hasOwnProperty(b)&&(d[b]=null)},this);this.visualVariables=b;a.some(b,function(a){return!!a.target})&&b.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a.forEach(b,function(a,b){"colorInfo"===a.type?d[b]=this._processColorInfo(a):"opacityInfo"===a.type?d[b]=this._processOpacityInfo(a):"sizeInfo"===a.type&&(d[b]=this._processSizeInfo(a))},
this);return this},getVisualVariableValues:function(b){var d=this.visualVariables,c;d&&(c=a.map(d,function(a){var c;switch(a.type){case "sizeInfo":c=this.getSize(b,{sizeInfo:a});break;case "colorInfo":c=this.getColor(b,{colorInfo:a});break;case "opacityInfo":c=this.getOpacity(b,{opacityInfo:a});break;case "rotationInfo":c=this.getRotationAngle(b,{rotationInfo:a})}return{variable:a,value:c}},this));return c},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!(!this.getVisualVariablesForType("sizeInfo",
b)&&!this.getVisualVariablesForType("colorInfo",b)&&!this.getVisualVariablesForType("opacityInfo",b)&&!this.getVisualVariablesForType("rotationInfo",b))},getVisualVariablesForType:function(b,d){var c=this.visualVariables,h;!d&&this[b]?("rotationInfo"===b&&(this[b].rotationType=this[b].type),h=[this[b]]):c&&(h=a.filter(c,function(a){return a.type===b&&("string"===typeof d?a.target===d:!1===d?!a.target:!0)}))&&0===h.length&&(h=void 0);return h},setSizeInfo:function(a){this.sizeInfo=this.proportionalSymbolInfo=
a;this._ipDataCache.sizeInfo=this._processSizeInfo(a);return this},_processSizeInfo:function(a){return a&&{root:this._interpolateData(a),minSize:this._interpolateData(a.minSize),maxSize:this._interpolateData(a.maxSize)}},_getVarInfo:function(b,d){var c;b&&b.type===d?(c=a.indexOf(this.visualVariables,b),b=this.visualVariables[c]):(c=d,b=this[d]);return{variable:b,cacheKey:c}},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,
"sizeInfo"),d=c.variable,c=this._ipDataCache[c.cacheKey],h=null;if(d)var l=d.minSize,h=d.maxSize,l="object"===typeof l&&l?this._getSize(a,l,c&&c.minSize,b):l,h="object"===typeof h&&h?this._getSize(a,h,c&&c.maxSize,b):h,h=this._getSize(a,d,c&&c.root,b,[l,h]);return h},_getSize:function(a,b,c,h,l){var m=a.attributes,p=b.field,k=b.expression,g=b.stops,q=0,w="number"===typeof a,v=w?a:null;if(p||k){var z=h&&h.scale,x=l?l[0]:b.minSize,A=l?l[1]:b.maxSize,E=b.minDataValue,B=b.maxDataValue,D=b.valueUnit||
"unknown",y=b.valueRepresentation,I=b.scaleBy,H=b.normalizationField,M=m?parseFloat(m[H]):void 0,K=h&&h.shape;k?v="view.scale"===k.toLowerCase()?z:null:"number"!==typeof v&&(d.isFunction(p)?v=p.apply(this,arguments):m&&(v=m[p]));if(null==v||H&&!w&&(isNaN(M)||0===M))return null;!isNaN(M)&&!w&&(v/=M);if(g)A=this._lookupData(v,c),v=A[0],x=A[1],v===x?q=g[v].size:(v=g[v].size,g=g[x].size,q=v+(g-v)*A[2]);else if(null!=x&&null!=A&&null!=E&&null!=B)v<=E?q=x:v>=B?q=A:(g=(v-E)/(B-E),"area"===I&&K?(x=(v="circle"===
K)?r*Math.pow(x/2,2):x*x,A=v?r*Math.pow(A/2,2):A*A,g=x+g*(A-x),q=v?2*Math.sqrt(g/r):Math.sqrt(g)):q=x+g*(A-x));else if("unknown"===D)null!=x&&null!=E&&(x&&E?(g=v/E,q="circle"===K?2*Math.sqrt(g*Math.pow(x/2,2)):"square"===K||"diamond"===K||"image"===K?Math.sqrt(g*Math.pow(x,2)):g*x):q=v+(x||E),q=q<x?x:q,null!=A&&q>A&&(q=A));else{g=(h&&h.resolution?h.resolution:1)*this._meterIn[D];if("area"===y)q=Math.sqrt(v/r)/g,q*=2;else if(q=v/g,"radius"===y||"distance"===y)q*=2;null!=x&&q<x&&(q=x);null!=A&&q>A&&
(q=A)}}else q=g&&g[0]&&g[0].size,null==q&&(q=b.minSize);return q=isNaN(q)?0:q},getSizeRangeAtScale:function(a,b){var c,d=this._getVarInfo(a,"sizeInfo"),h=this._ipDataCache[d.cacheKey],l={scale:b};if((a=d.variable)&&b){var m=a.minSize,d=a.maxSize,m="object"===typeof m&&m?this._getSize({},m,h&&h.minSize,l):m,h="object"===typeof d&&d?this._getSize({},d,h&&h.maxSize,l):d;if(null!=m||null!=h)c={minSize:m,maxSize:h}}return c},setColorInfo:function(a){this.colorInfo=a;this._ipDataCache.colorInfo=this._processColorInfo(a);
return this},_processColorInfo:function(b){b&&(a.forEach(b.colors,function(a,c){d.isArray(a)&&(b.colors[c]=new p(a))}),a.forEach(b.stops,function(a,c){a.color&&d.isArray(a.color)&&(b.stops[c].color=new p(a.color))}));return this._interpolateData(b)},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"colorInfo");return this._getColorComponent(a,c.variable,this._ipDataCache[c.cacheKey])},setOpacityInfo:function(a){this.opacityInfo=a;this._ipDataCache.opacityInfo=this._processOpacityInfo(a);
return this},_processOpacityInfo:function(a){return this._interpolateData(a)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacityInfo");return this._getColorComponent(a,c.variable,this._ipDataCache[c.cacheKey],!0)},_getColorComponent:function(a,b,c,h,l){var m=a.attributes,p=b&&b.field,k="number"===typeof a,g=k?a:null,q;if(p){var r=b.normalizationField,v=m?parseFloat(m[r]):void 0;"number"!==typeof g&&(d.isFunction(p)?g=p.apply(this,arguments):m&&(g=m[p]));if(null!=g&&(!r||k||
!isNaN(v)&&0!==v))!isNaN(v)&&!k&&(g/=v),q=h?this._getOpacity(g,b,c):this._getColor(g,b,c)}else b&&(m=b.stops,h?(q=m&&m[0]&&m[0].opacity,null==q&&(q=b.opacityValues&&b.opacityValues[0])):q=m&&m[0]&&m[0].color||b.colors&&b.colors[0]);l&&(l.data=g,l.value=q);return l||q},_interpolateData:function(b){var d;if(b)if(b.colors||b.opacityValues){var c=(b.colors||b.opacityValues).length,h=b.minDataValue,l=(b.maxDataValue-h)/(c-1);d=[];for(b=0;b<c;b++)d[b]=h+b*l}else b.stops&&(d=a.map(b.stops,function(a){return a.value}));
return d},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):p.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]));
return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(b,d){var c;if(d){var h=0,l=d.length-1;a.some(d,function(a,c){if(b<a)return l=c,!0;h=c;return!1});c=[h,l,(b-d[h])/(d[l]-d[h])]}return c},_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.0010,"decimal-degrees":180/20015077},_writeSizeInfo:function(a){if(a){a=d.mixin({},a);var b=a.minSize,
c=a.maxSize;b&&(a.minSize="number"===typeof b?l.px2pt(b):d.clone(b));c&&(a.maxSize="number"===typeof c?l.px2pt(c):d.clone(c));if(b=a.legendOptions)if(a.legendOptions=d.mixin({},b),b=b.customValues)a.legendOptions.customValues=b.slice(0)}return a},_writeColorInfo:function(b){b&&(b=d.mixin({},b),b.colors&&(b.colors=a.map(b.colors,function(a){return p.toJsonColor(a)})),b.stops&&(b.stops=a.map(b.stops,function(a){a=d.mixin({},a);a.color&&(a.color=p.toJsonColor(a.color));return a})));return b},_writeOpacityInfo:function(b){var f;
b&&(f=d.mixin({},b),f.opacityValues&&(f.transparencyValues=a.map(f.opacityValues,function(a){return 100*(1-a)}),delete f.opacityValues),f.stops&&(f.stops=a.map(f.stops,function(a){a=d.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})));return f},toJson:function(){var b=this.visualVariables,f=d.clone(this.authoringInfo),c=this.getVisualVariablesForType("rotationInfo",!1),h=(c=c&&c[0])&&c.field,h=c&&(c.expression||h&&(d.isFunction(h)?h:"["+h+"]"));b&&(b=a.map(b,function(a){"sizeInfo"===
a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type?(a=this._writeOpacityInfo(a),a.type="transparencyInfo"):"rotationInfo"===a.type&&(a=d.mixin({},a));return a},this));f&&a.forEach(f.visualVariables,function(a){"opacityInfo"===a.type&&(a.type="transparencyInfo")});return{rotationType:h&&(this._getRotationType(c)||"geographic"),rotationExpression:h,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:b,authoringInfo:f}}});b("extend-esri")&&d.setObject("renderer.Renderer",h,m);return h})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.tasks.Date",constructor:function(b){b&&(b.format&&(this.format=b.format),this.date=a.parse(b.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",
toJson:function(){return{date:a.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});b("extend-esri")&&d.setObject("tasks.Date",h,l);return h})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(h,d,a,b){return h("dijit.form.NumberSpinner",[a,b.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(a,b){var d=this.constraints,h=isNaN(a),e=!isNaN(d.max),f=!isNaN(d.min);h&&0!=
b&&(a=0<b?f?d.min:e?d.max:0:e?this.constraints.max:f?d.min:0);var c=a+b;if(h||isNaN(c))return a;e&&c>d.max&&(c=d.max);f&&c<d.min&&(c=d.min);return c},_onKeyDown:function(a){if(!this.disabled&&!this.readOnly&&(a.keyCode==d.HOME||a.keyCode==d.END)&&!a.ctrlKey&&(!a.altKey&&!a.metaKey)&&"undefined"!=typeof this.get("value")){var b=this.constraints[a.keyCode==d.HOME?"min":"max"];"number"==typeof b&&this._setValueAttr(b,!1);a.stopPropagation();a.preventDefault()}}})})},"esri/dijit/geoenrichment/DataBrowser/VariableInfo":function(){define(["../../../declare",
"dojox/mvc/Templated","dijit/_WidgetBase","dojo/text!./templates/VariableInfo.html","dojo/i18n!../../../nls/jsapi"],function(h,d,a,b,l){l=l.geoenrichment.dijit.VariableInfo;return h("esri.dijit.geoenrichment.VariableInfo",[a,d],{nls:l,templateString:b,constructor:function(){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments)},_setVariableAttr:function(a){this.divDescription.innerHTML=a.description?a.description:a.alias;this.divID2.innerHTML=a.id2;this.divSource.innerHTML=
"";for(var b in a.filteringTags)if("Source"===a.filteringTags[b].id){this.divSource.innerHTML=a.filteringTags[b].value;break}this.divVintage.innerHTML=a.vintage}})})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(h,d,a,b){h=h([d],{declaredClass:"esri.Color"});h.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};h.toDojoColor=function(a){return a&&new d([a[0],a[1],a[2],a[3]/255])};var l,m="named blendColors fromRgb fromHex fromArray fromString".split(" ");
for(l=0;l<m.length;l++)h[m[l]]=d[m[l]];a("extend-esri")&&(b.Color=h);return h})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/xml/parser dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(h,d,a,b,l,m,p,r,e,f,c,n,u,t){var s=e.defaults.map.zoomDuration;h=h(u,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;var e=a.hitch;this._exportMapImageHandler=e(this,this._exportMapImageHandler);this._imgSrcFunc=e(this,this._imgSrcFunc);this._divAlphaImageFunc=e(this,this._divAlphaImageFunc);this._tileLoadHandler=e(this,this._tileLoadHandler);this._tileErrorHandler=e(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(a,c,e){this.inherited(arguments);this._map=a;var h=this._div=
b.create("div",null,c),n=r._css.names,m={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible",opacity:this.opacity},p=f("ie"),t=d.connect,s=a.__visibleDelta;8===p&&delete m.opacity;"css-transforms"===a.navigationMode?(m[n.transform]=r._css.translate(s.x,s.y),l.set(h,m),this._left=s.x,this._top=s.y):(m.left="0px",m.top="0px",l.set(h,m),this._left=this._top=0);l.set(h,m);this._onResizeHandler_connect=t(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=
t(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!a.loaded)var u=d.connect(a,"onLoad",this,function(){d.disconnect(u);u=null;this.evaluateSuspension()});return h},_unsetMap:function(a,c){b.destroy(this._div);this._map=this._div=null;var e=d.disconnect;e(this._onResizeHandler_connect);e(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();
this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(a,b,c){l.set(this._div,{width:b+"px",height:c+"px"});this._onExtentChangeHandler(a)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();n.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var b=this._map;this._toggleTime();
"css-transforms"===b.navigationMode&&(b=b.__visibleDelta,this._left=b.x,this._top=b.y,l.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},_enableDrawConnectors:function(){var a=d.connect,b=this._map;b&&(this._onPanHandler_connect=a(b,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=
a(b,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===b.navigationMode?this._onScaleHandler_connect=a(b,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=a(b,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var a=d.disconnect;a(this._onPanHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=
null},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=d.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(d.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):null)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._dragOrigin,e=this._map.__visibleDelta,
d=this._img;d&&("css-transforms"===this._map.navigationMode?(this._left=e.x+b.x,this._top=e.y+b.y,l.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top))):l.set(d,{left:c.x+b.x+"px",top:c.y+b.y+"px"}))},_onExtentChangeHandler:function(a,c,e){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var h=this._map,n=this._img,m=n&&n.style,t=this._dragOrigin;if(c&&!e&&n&&(c.x!==this._panDx||c.y!==this._panDy))"css-transforms"===h.navigationMode?(c=h.__visibleDelta,
this._left=c.x,this._top=c.y,l.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top))):l.set(n,{left:t.x+c.x+"px",top:t.y+c.y+"px"});n?(t.x=parseInt(m.left,10),t.y=parseInt(m.top,10)):t.x=t.y=0;"css-transforms"===h.navigationMode&&(e&&n)&&(l.set(n,r._css.names.transition,"none"),n._multiply=n._multiply?p.multiply(n._matrix,n._multiply):n._matrix);this._fireUpdateStart();if(e=this._img_loading)if(d.disconnect(e._onload_connect),d.disconnect(e._onerror_connect),d.disconnect(e._onabort_connect),
b.destroy(e),this._img_loading=null,e=this._jsonRequest){try{e.cancel()}catch(u){}this._jsonRequest=null}10<=this.version&&h.wrapAround180&&(a=a._normalize(!0));if(this.isPNG32)n=this._img_loading=b.create("div"),n.id=h.id+"_"+this.id+"_"+(new Date).getTime(),l.set(n,{position:"absolute",left:"0px",top:"0px",width:h.width+"px",height:h.height+"px"}),n=n.appendChild(b.create("div")),l.set(n,{opacity:0,width:h.width+"px",height:h.height+"px"}),this.getImageUrl(a,h.width,h.height,this._divAlphaImageFunc);
else{e=this._img_loading=b.create("img");c=r._css.names;var E=f("ie"),B={position:"absolute",width:h.width+"px",height:h.height+"px"};8===E&&(B.opacity=this.opacity);"css-transforms"===h.navigationMode?(B[c.transform]=r._css.translate(-this._left,-this._top),e._tdx=-this._left,e._tdy=-this._top,B[c.transition]=c.transformName+" "+s+"ms ease"):(B.left="0px",B.top="0px");e.id=h.id+"_"+this.id+"_"+(new Date).getTime();l.set(e,B);e._onload_connect=d.connect(e,"onload",this,"_onLoadHandler");e._onerror_connect=
d.connect(e,"onerror",this,"_onErrorHandler");e._onabort_connect=d.connect(e,"onabort",this,"_onErrorHandler");this._startRect={left:t.x,top:t.y,width:n?parseInt(m.width,10):h.width,height:n?parseInt(m.height,10):h.height,zoom:m&&m.zoom?parseFloat(m.zoom):1};this.getImageUrl(a,h.width,h.height,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},getImageUrl:function(a,b,c,e){},_imgSrcFunc:function(a){this._img_loading.src=a},_divAlphaImageFunc:function(a){l.set(this._img_loading,
"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(a){a=a.currentTarget;var c=d.disconnect,e=this._map;c(a._onload_connect);c(a._onerror_connect);c(a._onabort_connect);!e||e.__panning||e.__zooming?b.destroy(a):(m.removeChildren(this._div),this._img=a,this._startRect={left:0,top:0,width:e.width,height:e.height,zoom:1},this._div.appendChild(a),this.suspended||n.show(this._div),
a._onload_connect=a._onerror_connect=a._onabort_connect=this._img_loading=null,a=this._dragOrigin,a.x=a.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(a){a=a.currentTarget;var b=d.disconnect;l.set(a,"visibility","hidden");b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;a=Error("Unable to load image: "+a.src);this.onError(a);this._fireUpdateEnd(a)},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();
b||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(a,b){var c={},e=r._css.names,d=this._img;if(d){l.set(d,e.transition,b?"none":e.transformName+" "+s+"ms ease");d._matrix=a;a=d._multiply?p.multiply(a,d._multiply):a;if(d._tdx||d._tdy)a=p.multiply(a,{xx:1,xy:0,yx:0,yy:1,dx:d._tdx,dy:d._tdy});c[e.transform]=r._css.matrix(a);l.set(d,c)}},_onZoomHandler:function(a,b,c){a=this._startRect;var e=a.width*b,d=a.height*b,h=this._img,n=f("ie");
h&&(n&&8>n?l.set(h,{left:a.left-(e-a.width)*(c.x-a.left)/a.width+"px",top:a.top-(d-a.height)*(c.y-a.top)/a.height+"px",zoom:b*a.zoom}):l.set(h,{left:a.left-(e-a.width)*(c.x-a.left)/a.width+"px",top:a.top-(d-a.height)*(c.y-a.top)/a.height+"px",width:e+"px",height:d+"px"}))},_exportMapImage:function(a,b,d){var f=this._exportMapImageHandler;b.token=this._getToken();c({url:a,content:b,callbackParamName:"callback",load:function(a,b){f(a,b,d)},error:e.defaults.io.errorHandler})},_exportMapImageHandler:function(a,
b,c){a=new t(a);this.onMapImageExport(a);c&&c(a)},onMapImageExport:function(){},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=8===f("ie")?this._img:this._div;l.set(b,"opacity",a)}});f("extend-esri")&&a.setObject("layers.DynamicMapServiceLayer",h,r);return h})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),
function(h,d,a,b,l,m,p,r){d=d(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(a){this.bbox&&h.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var d=this.bbox||this.extent,d=d&&a&&d._normalize(!0);a=this.layerOption;var c=
d?d.spatialReference.wkid||b.toJson(d.spatialReference.toJson()):null,l=this.imageSpatialReference,d={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:d?d.xmin+","+d.ymin+","+d.xmax+","+d.ymax:null,bboxSR:c,layers:a?a+":"+this.layerIds.join(","):null,imageSR:l?l.wkid||b.toJson(l.toJson()):c};d.layerDefs=r._serializeLayerDefinitions(this.layerDefinitions);a=this.timeExtent;d.time=a?a.toJson().join(","):null;
d.layerTimeOptions=r._serializeTimeOptions(this.layerTimeOptions);return p.filter(d,function(a){if(null!==a)return!0})}});a.mixin(d,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});l("extend-esri")&&a.setObject("layers.ImageParameters",d,m);return d})},"esri/dijit/analysis/AnalysisBase":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/json dojo/Deferred dojo/promise/all dojo/when dojo/data/ItemFileWriteStore dojo/string dojo/Evented dojo/_base/kernel dojo/Stateful ../../kernel ../../lang ../../request ../../tasks/Geoprocessor dojo/i18n!../../nls/jsapi ./utils ../../IdentityManager".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z){d=d([s,u],{declaredClass:"esri.dijit.analysis.AnalysisBase",isOutputLayerItemUpdated:!1,analysisGpServer:null,toolName:null,portalUrl:null,jobParams:null,itemParams:null,gp:null,resultParameter:null,signInPromise:null,getResultLyrInfos:!1,_jobInfo:null,_popupInfo:null,_toolServiceUrl:null,_counter:null,constructor:function(b){this.isOutputLayerItemUpdated=!1;this._rids=[];this._counter=0;this._popupInfo=[];b.analysisGpServer?this._signIn(b.analysisGpServer):
b.portalUrl&&(this.portalUrl=b.portalUrl,this._signIn(b.portalUrl,!0));this.i18n={};a.mixin(this.i18n,v.common);a.mixin(this.i18n,v.analysisTools);a.mixin(this.i18n,v.analysisMsgCodes)},execute:function(b){this.jobParams=b.jobParams;this.itemParams=this.jobParams.OutputName?b.itemParams:null;this.signInPromise.then(a.hitch(this,this._checkUser))},_checkUser:function(){var b;if(b=k.id.findCredential(this.portalUrl).userId)b=this.portalUrl+"/sharing/rest/community/users/"+b,q({url:b,content:{f:"json"}}).then(a.hitch(this,
this._handleUserProfileResponse),a.hitch(this,function(a){this.emit("job-fail",{message:a.message+(a.details?a.details.toString():""),jobParams:this.jobParams})}))},_handleUserProfileResponse:function(a){!g.isDefined(a)||!g.isDefined(a.orgId)?this.emit("job-fail",{message:this.i18n.orgUsrMsg,jobParams:this.jobParams}):-1===b.indexOf(["account_admin","account_publisher","org_admin","org_publisher"],a.role)?this.emit("job-fail",{message:this.i18n.pubRoleMsg,messageCode:"AB_0001",jobParams:this.jobParams}):
g.isDefined(this.itemParams)?this._checkServiceName(a.orgId):(this._submitGpJob(),this.emit("start",this.jobParams))},_checkServiceName:function(b){var c;k.id.findCredential(this.portalUrl);b=this.portalUrl+"/sharing/rest/portals/"+b+"/isServiceNameAvailable";c=l.fromJson(this.jobParams.OutputName);this.isSingleTenant&&(g.isDefined(c.serviceProperties)&&g.isDefined(c.serviceProperties.name))&&(c.serviceProperties.name=c.serviceProperties.name.replace(/[\s~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g,"_"),
this.jobParams.OutputName=l.toJson(c));q({url:b,content:{name:c.serviceProperties.name,type:"Feature Service",f:"json"}}).then(a.hitch(this,function(a){a.available?(this._createService(),this.emit("start",this.jobParams)):this.emit("job-fail",{message:this.i18n.servNameExists,type:"warning",messageCode:"AB_0002",jobParams:this.jobParams})}),a.hitch(this,function(a){this.emit("job-fail",{message:a.message+(a.details?a.details.toString():""),jobParams:this.jobParams})}))},_createService:function(){var b,
c,e;b=k.id.findCredential(this.portalUrl).userId;c=l.fromJson(this.jobParams.OutputName);b&&(e=this.itemParams.folder,b=this.portalUrl+"/sharing/rest/content/users/"+b+(e&&"/"!==e?"/"+e:"")+"/createService",c={createParameters:l.toJson({currentVersion:10.2,serviceDescription:"",hasVersionedData:!1,supportsDisconnectedEditing:!1,hasStaticData:!0,maxRecordCount:2E3,supportedQueryFormats:"JSON",capabilities:"Query",description:"",copyrightText:"",allowGeometryUpdates:!1,syncEnabled:!1,editorTrackingInfo:{enableEditorTracking:!1,
enableOwnershipAccessControl:!1,allowOthersToUpdate:!0,allowOthersToDelete:!0},xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"},tables:[],name:c.serviceProperties.name}),outputType:"featureService",f:"json"},q({url:b,content:c},{usePost:!0}).then(a.hitch(this,this._submitGpJob),a.hitch(this,this._handleCreateServiceError)))},_handleCreateServiceError:function(a){this.emit("job-fail",{message:a.message+(a.details?a.details.toString():""),jobParams:this.jobParams})},
_getSelf:function(a){return q({url:a+"/sharing/rest/portals/self",content:{culture:t.locale,f:"json"},callbackParamName:"callback",timeout:0},{})},_submitGpJob:function(b){var c;this.itemParams&&(this.currentGpItemId=b.itemId,c=l.fromJson(this.jobParams.OutputName),c.serviceProperties&&(c.serviceProperties.serviceUrl=b.serviceurl),c.itemProperties={itemId:b.itemId},this.jobParams.OutputName=l.toJson(c));this.analysisGpServer?((!this._toolServiceUrl||!this.gp)&&this.set("toolServiceUrl",this.analysisGpServer+
"/"+this.toolName),this.gp.setUpdateDelay(3E3),this.gp.submitJob(this.jobParams,a.hitch(this,this._gpJobComplete),a.hitch(this,this._gpJobStatus),a.hitch(this,this._gpJobFailed)),this.emit("job-submit",this.jobParams)):this._getSelf(this.portalUrl).then(a.hitch(this,function(b){this.analysisGpServer=b.helperServices.analysis&&b.helperServices.analysis.url?b.helperServices.analysis.url:null;this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName);this.gp.setUpdateDelay(3E3);this.gp.submitJob(this.jobParams,
a.hitch(this,this._gpJobComplete),a.hitch(this,this._gpJobStatus),a.hitch(this,this._gpJobFailed));this.emit("job-submit",this.jobParams)}))},_updateItem:function(b){var c,e,d;if(c=k.id.findCredential(this.portalUrl).userId)return e=this.itemParams.folder,c=this.portalUrl+"/sharing/rest/content/users/"+c+(e&&"/"!==e?"/"+e:"")+"/items/"+this.currentGpItemId+"/update",b&&(d=b.item.properties),g.isDefined(d)||(d={}),g.isDefined(d.jobUrl)||(d.jobUrl=this._toolServiceUrl+"/jobs/"+this._jobInfo.jobId,d.jobType=
"GPServer",d.jobId=this._jobInfo.jobId,d.jobStatus="processing",this.itemParams.properties=d),b=a.mixin({f:"json"},this.itemParams),b.properties&&(b.properties=l.toJson(b.properties)),b=q({url:c,content:b},{usePost:!0}),b.then(a.hitch(this,this._handleItemUpdate),a.hitch(this,this._handleUpdateItemError)),b},_handleItemUpdate:function(a){this.isOutputLayerItemUpdated=!0},_handleItemDataUpdate:function(a){},_handleUpdateItemError:function(a){this.isOutputLayerItemUpdated=!0;this.emit("job-fail",{message:a.message+
(a.details?a.details.toString():""),jobParams:this.jobParams})},_handleErrorResponse:function(a){this.emit("job-fail",a)},_refreshItem:function(){var a,b;if(a=k.id.findCredential(this.portalUrl).userId)return b=this.itemParams.folder,a=this.portalUrl+"/sharing/rest/content/users/"+a+(b&&"/"!==b?"/"+b:"")+"/items/"+this.currentGpItemId+"/refresh",q({url:a,content:{f:"json"}},{usePost:!0})},_handleItemRefresh:function(a){},_readItem:function(){var b,c;if(b=k.id.findCredential(this.portalUrl).userId)return c=
this.itemParams.folder,b=this.portalUrl+"/sharing/rest/content/users/"+b+(c&&"/"!==c?"/"+c:"")+"/items/"+this.currentGpItemId,b=q({url:b,content:{f:"json"}}),b.then(a.hitch(this,this._updateItem))},_gpJobStatus:function(a){a.jobParams=this.jobParams;a.resultParameter=this.resultParameter;a.returnProcessInfo=this.jobParams.returnProcessInfo;a.getResultLyrInfos=this.getResultLyrInfos;a.currentGpItemId=this.currentGpItemId;a.itemParams=this.itemParams;"esriJobFailed"===a.jobStatus||"esriJobSucceeded"===
a.jobStatus?(a.messages&&(a.message=this._buildErrorMsg(a)),this._checkTimer&&(clearInterval(this._checkTimer),this._checkTimer=null,this._gpJobComplete(a)),"esriJobFailed"===a.jobStatus&&this._deleteItem(!1)):"esriJobCancelled"===a.jobStatus&&(this.itemParams?this._deleteItem(!0):this.emit("job-cancel",a));this.emit("job-status",a);this._jobInfo=a;this.itemParams&&!this.isOutputLayerItemUpdated&&this._readItem()},_updateRefreshItem:function(b){var c=[],d=b[0];c.push(this._refreshItem());c.push(this._readItem());
e(c).then(a.hitch(this,function(a){d.outputLayerName=l.fromJson(this.jobParams.OutputName).serviceProperties.name;d.value.itemId=this.currentGpItemId;d.analysisInfo={toolName:this.toolName,jobParams:this.jobParams};this.emit("job-result",d)}),a.hitch(this,this._handleDeleteItemError))},_gpJobComplete:function(c){var d;"esriJobSucceeded"===c.jobStatus&&(c.jobParams=this.jobParams,this.emit("job-success",c),e(this._getGpResultData(c)).then(a.hitch(this,function(e){e=b.filter(e,function(a){if(a.value&&
!a.value.empty)return a});0===e.length?(this.currentGpItemId&&this._deleteItem(!1),this.emit("job-fail",{message:this.i18n.emptyResultInfoMsg,type:"warning",jobParams:this.jobParams})):(g.isDefined(this.itemParams)&&(this.itemParams.properties&&this.itemParams.properties.jobStatus&&"processing"===this.itemParams.properties.jobStatus)&&(this.itemParams.properties.jobStatus="completed"),b.forEach(e,function(a){if(a.value.featureSet&&!a.value.url)a.value.featureSet.spatialReference=a.value.layerDefinition.spatialReference;
else if(a.value.url&&-1!==a.value.url.indexOf("/FeatureServer/")&&a.value.layerInfo&&a.value.layerInfo.popupInfo){var b=a.value.url.match(/[0-9]+$/g)[0];this._popupInfo[b]=a.value.layerInfo.popupInfo}},this),d=e[0],this.jobParams.returnProcessInfo?this.gp.getResultData(c.jobId,"ProcessInfo").then(a.hitch(this,function(a){var c=[];b.forEach(a.value,function(a){c.push(l.fromJson(a))},this);this.currentGpItemId?(this.itemParams.description=z.buildReport(c),this._updateRefreshItem(e)):(d.analysisReport=
z.buildReport(c),this.emit("job-result",d))})):this.currentGpItemId?this._updateRefreshItem(e):this.emit("job-result",d))})))},_gpJobFailed:function(b){a.clone(b).jobParams=this.jobParams;this._checkTimer&&(clearInterval(this._checkTimer),this._checkTimer=null);b.messages&&(b.message=this._buildErrorMsg(b));this.emit("job-fail",b)},_getGpResultData:function(a){var c=[],e=[];"string"===typeof this.resultParameter?e.push(this.resultParameter):this.resultParameter instanceof Array&&(e=this.resultParameter);
b.forEach(e,function(b,e){c.push(this.gp.getResultData(a.jobId,b))},this);return c},cancel:function(b){this.gp.cancelJob(b.jobId).then(a.hitch(this,function(a){"esriJobCancelled"===a.jobStatus&&(this.itemParams?this._deleteItem(!0):this.emit("job-cancel",a))}),function(a){})},checkJobStatus:function(b){this.signInPromise.then(a.hitch(this,function(){this.gp.setUpdateDelay(3E3);this._checkTimer=setInterval(a.hitch(this,this._checkStatus,b,a.hitch(this,this._gpJobStatus),a.hitch(this,this._gpJobFailed)),
3E3)}))},_checkStatus:function(a,b,c){this.gp.checkJobStatus(a,b,c)},_deleteItem:function(b){var c,e;if((c=k.id.findCredential(this.portalUrl).userId)&&this.itemParams)e=g.isDefined(this.itemParams.folder)?this.itemParams.folder:"",c=this.portalUrl+"/sharing/rest/content/users/"+c+(e&&"/"!==e?"/"+e:"")+"/items/"+this.currentGpItemId+"/delete",q({url:c,content:{f:"json"}},{usePost:!0}).then(a.hitch(this,this._handleItemDelete,b),a.hitch(this,this._handleDeleteItemError))},_handleItemDelete:function(a,
b){a&&this.emit("job-cancel",b)},_handleDeleteItemError:function(a){this.emit("job-fail",{message:a.message+(a.details?a.details.toString():""),jobParams:this.jobParams})},_initFolderStore:function(b,c){this._fportal=this.portalSelf?new b.Portal({url:this.portalUrl,self:this.portalSelf}):new b.Portal(this.portalUrl);this._fportal.signIn().then(a.hitch(this,function(b){this.portalUser=b;this.portalUser.getFolders().then(a.hitch(this,function(a){a=z.createFolderStore(a,this.portalUser.username);c.resolve(a)}))}))},
getFolderStore:function(){var c=new r,e,d,g,f;this.folderStore?c.resolve(this.folderStore):this.signInPromise.then(a.hitch(this,function(a){e=["../../arcgis/Portal"];d=this._counter++;g=this;this._rids&&this._rids.push(d);h(e,function(a){f=g._rids?b.indexOf(g._rids,d):-1;-1!==f&&(g._rids.splice(f,1),g._initFolderStore(a,c))})}));return c},_checkToolUrl:function(){var b=new r;this.analysisGpServer?((!this._toolServiceUrl||!this.gp)&&this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName),
b.resolve({success:!0})):this._getSelf(this.portalUrl).then(a.hitch(this,function(a){(this.analysisGpServer=a.helperServices.analysis&&a.helperServices.analysis.url?a.helperServices.analysis.url:null)&&this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName);b.resolve({success:!0})}));return b},getCreditsEstimate:function(b,c){var e,d,g,f,k;d=new r;this._checkToolUrl().then(a.hitch(this,function(h){this._toolServiceUrl?k=this._toolServiceUrl:(f=this.portalUrl&&-1!==this.portalUrl.indexOf("dev")?
"dev":this.portalUrl&&-1!==this.portalUrl.indexOf("qa")?"qa":"",k="http://analysis"+f+".arcgis.com/arcgis/rest/services/tasks/GPServer/"+this.toolName);e=k.replace("/"+b,"/exts/Estimate/"+b);g=a.mixin({f:"json"},c);q({url:e,content:g},{usePost:!0}).then(function(a){d.resolve(a)},function(a){d.resolve(a)})}));return d},_signIn:function(c,e){var d,f,l,n,m;this.signInPromise=new r;e?(d=["../../arcgis/Portal"],f=this._counter++,l=this,this._rids&&this._rids.push(f),h(d,a.hitch(this,function(e){n=l._rids?
b.indexOf(l._rids,f):-1;-1!==n&&(l._rids.splice(n,1),this._portal=this.portalSelf?new e.Portal({url:c,self:this.portalSelf}):new e.Portal(c),this._portal.signIn().then(a.hitch(this,function(b){this.portalUser=b;this._portal.helperServices&&this._portal.helperServices.analysis&&this._portal.helperServices.analysis.url?(this.analysisGpServer=this._portal.helperServices.analysis.url,q({url:this.analysisGpServer,content:{f:"json"},callbackParamName:"callback"}).then(a.hitch(this,function(a){m=k.id.findCredential(this.analysisGpServer);
this.signInPromise.resolve(m)}),a.hitch(this,function(a){this.signInPromise.reject(a)}))):this.signInPromise.resolve(b)}),a.hitch(this,this._handleSignInError)))}))):q({url:c,content:{f:"json"},callbackParamName:"callback"}).then(a.hitch(this,function(b){var e;b=k.id.findCredential(c);g.isDefined(b)?(e=k.id.findServerInfo(this._toolServiceUrl),g.isDefined(e)&&g.isDefined(e.owningSystemUrl)&&(this.portalUrl=e.owningSystemUrl),this.signInPromise.resolve(b)):k.id.getCredential(c).then(a.hitch(this,function(a){a=
k.id.findCredential(c);e=k.id.findServerInfo(this._toolServiceUrl);g.isDefined(e)&&g.isDefined(e.owningSystemUrl)&&(this.portalUrl=e.owningSystemUrl);this.signInPromise.resolve(a)}),a.hitch(this,this._handleSignInError))}),a.hitch(this,this._handleSignInError));return this.signInPromise},_handleSignInError:function(a){this.emit("job-fail",{message:this.i18n.analysisSignInErrorMsg,messageCode:"AB_0003"});this.signInPromise.reject(a)},_buildErrorMsg:function(a){var c="",e=[],d,f,e=b.filter(a.messages,
function(a){if(("esriJobMessageTypeError"===a.type||"esriJobMessageTypeWarning"===a.type)&&a.description&&-1!==a.description.indexOf("messageCode"))return a.description});0<e.length&&b.forEach(e,function(b){d=l.fromJson(b.description);f="";"esriJobMessageTypeWarning"===b.type&&(a.type="warning");d.messageCode?(f=g.isDefined(this.i18n[d.messageCode])?this.i18n[d.messageCode]:d.message,f=g.isDefined(d.params)?n.substitute(f,d.params):f,c+=f+"\x26nbsp;"):d.error&&d.error.messageCode&&(f=g.isDefined(this.i18n[d.error.messageCode])?
this.i18n[d.error.messageCode]:d.error.message,f=g.isDefined(d.error.params)?n.substitute(f,d.error.params):f,c+=f+"\x26nbsp;")},this);return c},_toolServiceUrlSetter:function(a){this._toolServiceUrl=a;this.gp=new w(a)},_setToolServiceUrlAttr:function(a){this._toolServiceUrl=a;this.gp=new w(a)}});m("extend-esri")&&a.setObject("dijit.analysis.AnalysisBase",d,k);return d})},"esri/dijit/geoenrichment/_Invoke":function(){define(["../../declare"],function(h){return h("esri.dijit.geoenrichment._Invoke",
null,{_invokeTimeoutIDs:null,invoke:function(d,a){if(this._invokeTimeoutIDs){if(this._invokeTimeoutIDs[d]){if(void 0===a)return;clearTimeout(this._invokeTimeoutIDs[d])}}else this._invokeTimeoutIDs={};var b=this;this._invokeTimeoutIDs[d]=setTimeout(function(){b._invokeTimeoutIDs[d]=0;b[d]()},a||0)},pendingInvoke:function(d){return!this._invokeTimeoutIDs?!1:this._invokeTimeoutIDs[d]},cancelInvoke:function(d){if(this._invokeTimeoutIDs){var a=this._invokeTimeoutIDs[d];a&&(clearTimeout(a),this._invokeTimeoutIDs[d]=
0)}}})})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(h,d,a,b,l,m,p,r,e,f,c,n,u){h=h(n,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},
constructor:function(a,b){this._handler=d.hitch(this,this._handler);this._relationshipQueryHandler=d.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=d.hitch(this,this._executeForIdsHandler);this._countHandler=d.hitch(this,this._countHandler);this._extentHandler=d.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],
e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,b,c,e,f){var h=f.assembly;a=this._encode(d.mixin({},this._url.query,{f:"json"},a.toJson(h&&h[0])));var n=this._handler,m=this._errorHandler;this.source&&(h={source:this.source.toJson()},
a.layer=l.toJson(h));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return r({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,e){n(a,e,b,c,f.dfd)},error:function(a){m(a,c,f.dfd)},callbackSuffix:e},this.requestOptions)},executeRelationshipQuery:function(a,c,f){a=this._encode(d.mixin({},this._url.query,{f:"json"},a.toJson()));var g=this._relationshipQueryHandler,h=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var l=new b(e._dfdCanceller);l._pendingDfd=
r({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,b){g(a,b,c,f,l)},error:function(a){h(a,f,l)}},this.requestOptions);return l},executeForIds:function(a,b,c,e){var f=e.assembly;a=this._encode(d.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(f&&f[0])));var h=this._executeForIdsHandler,n=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=l.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return r({url:this._url.path+
"/query",content:a,callbackParamName:"callback",load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){n(a,c,e.dfd)}},this.requestOptions)},executeForCount:function(a,b,c,e){var f=e.assembly;a=this._encode(d.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var h=this._countHandler,n=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=l.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return r({url:this._url.path+"/query",content:a,
callbackParamName:"callback",load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){n(a,c,e.dfd)}},this.requestOptions)},executeForExtent:function(a,b,c,e){var f=e.assembly;a=this._encode(d.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var h=this._extentHandler,n=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=l.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return r({url:this._url.path+"/query",content:a,callbackParamName:"callback",
load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){n(a,c,e.dfd)}},this.requestOptions)},_handler:function(a,b,c,e,d){try{var f=new u(a);this._successHandler([f],"onComplete",c,d)}catch(h){this._errorHandler(h,e,d)}},_relationshipQueryHandler:function(b,c,e,d,f){try{var h=b.geometryType,l=b.spatialReference,n={};a.forEach(b.relatedRecordGroups,function(a){var b={};b.geometryType=h;b.spatialReference=l;b.features=a.relatedRecords;b=new u(b);if(null!=a.objectId)n[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&
"relatedRecords"!==c&&(n[a[c]]=b)});this._successHandler([n],"onExecuteRelationshipQueryComplete",e,f)}catch(m){this._errorHandler(m,d,f)}},_executeForIdsHandler:function(a,b,c,e,d){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,d)}catch(f){this._errorHandler(f,e,d)}},_countHandler:function(a,b,c,e,d){try{var f,h=a.features,l=a.objectIds;if(l)f=l.length;else{if(h)throw Error("Unable to perform query. Please check your parameters.");f=a.count}this._successHandler([f],"onExecuteForCountComplete",
c,d)}catch(n){this._errorHandler(n,e,d)}},_extentHandler:function(a,b,c,e,d){try{a.extent&&(a.extent=new f(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",c,d)}catch(h){this._errorHandler(h,e,d)}}});c._createWrappers(h);m("extend-esri")&&d.setObject("tasks.QueryTask",h,p);return h})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/dom dojo/on ./util/misc put-selector/put".split(" "),function(h,d,a,b,l,m,p,r,
e){return a("dgrid.OnDemandList",[h,d],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:r.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var a=this;p(this.bodyNode,"scroll",r[this.pagingMethod](function(b){a._processScroll(b)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments);this._refreshTimeout&&clearTimeout(this._refreshTimeout)},
renderQuery:function(a,c){function d(a){e(v,"!");if(a)throw h._refreshDeferred&&(h._refreshDeferred.reject(a),delete h._refreshDeferred),a;}var h=this,m=c&&c.container||this.contentNode,p={query:a,count:0,options:c},k,g=this.preload,q,r={node:e(m,"div.dgrid-preload",{rowIndex:0}),count:0,query:a,next:p,options:c};r.node.style.height="0";p.node=k=e(m,"div.dgrid-preload");p.previous=r;k.rowIndex=this.minRowsPerPage;g?((p.next=g.next)&&k.offsetTop>=g.node.offsetTop?p.previous=g:(p.next=g,p.previous=
g.previous),p.previous.next=p,p.next.previous=p):this.preload=p;var v=e(k,"-div.dgrid-loading");e(v,"div.dgrid-below").innerHTML=this.loadingMessage;c=b.mixin(this.get("queryOptions"),c,{start:0,count:this.minRowsPerPage},"level"in a?{queryLevel:a.level}:null);this._trackError(function(){return q=a(c)});if("undefined"===typeof q)d();else return l.when(h.renderArray(q,k,c),function(a){return l.when("undefined"===typeof q.total?q.length:q.total,function(b){var d=a.length,g=k.parentNode,f=h.noDataNode;
e(v,"!");"queryLevel"in c||(h._total=b);0===b&&g&&(f&&(e(f,"!"),delete h.noDataNode),h.noDataNode=f=e("div.dgrid-no-data"),g.insertBefore(f,h._getFirstRowSibling(g)),f.innerHTML=h.noDataMessage);for(f=g=0;f<d;f++)g+=h._calcRowHeight(a[f]);d&&g&&(h.rowHeight=g/d);b-=d;p.count=b;k.rowIndex=d;b?k.style.height=Math.min(b*h.rowHeight,h.maxEmptySpace)+"px":(k.style.display="none",c.count++);h._previousScrollPosition&&(h.scrollTo(h._previousScrollPosition),delete h._previousScrollPosition);h._processScroll();
h._refreshDeferred&&(h._refreshDeferred.resolve(q),delete h._refreshDeferred);return a},d)},d),q},refresh:function(a){var b=this,e=a&&a.keepScrollPosition,d;"undefined"===typeof e&&(e=this.keepScrollPosition);e&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return e=this._refreshDeferred=new l,d=b.renderQuery(function(a){return b.store.query(b.query,a)}),"undefined"===typeof d&&e.reject(),e.then(function(a){b._refreshTimeout=setTimeout(function(){p.emit(b.domNode,
"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b,results:a});b._refreshTimeout=null},0);delete b._refreshDeferred;return a},function(a){delete b._refreshDeferred;throw a;})},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var b=a.nextSibling;return b&&!/\bdgrid-preload\b/.test(b.className)?b.offsetTop-a.offsetTop:a.offsetHeight},lastScrollTop:0,_processScroll:function(a){function c(a,b,c,g){var f=
m.farOffRemoval,k=a.node;if(b>2*f){for(var h,l=k[c],q=0,p=0,r=[];h=l;){var v=m._calcRowHeight(h);if(q+v+f>b||0>l.className.indexOf("dgrid-row")&&0>l.className.indexOf("dgrid-loading"))break;l=h[c];q+=v;p+=h.count||1;m.removeRow(h,!0);r.push(h)}a.count+=p;g?(k.rowIndex-=p,d(a)):k.style.height=k.offsetHeight+q+"px";var s=e("div",r);setTimeout(function(){e(s,"!")},1)}}function d(a,b){a.node.style.height=Math.min(a.count*m.rowHeight,b?Infinity:m.maxEmptySpace)+"px"}function h(a,b){do a=b?a.next:a.previous;
while(a&&!a.node.offsetWidth);return a}var m=this,p=m.bodyNode;a=a&&a.scrollTop||this.getScrollPosition().y;var p=p.offsetHeight+a,k,g,q=m.preload,r=m.lastScrollTop,v=m.bufferRows*m.rowHeight,z=v-m.rowHeight,x,A,E,B=!0;for(m.lastScrollTop=a;q&&!q.node.offsetWidth;)q=q.previous;for(;q&&q!=k;){k=m.preload;m.preload=q;g=q.node;var D=g.offsetTop;if(p+1+z<D)q=h(q,B=!1);else if(a-1-z>D+g.offsetHeight)q=h(q,B=!0);else{var y=((g.rowIndex?a-v:p)-D)/m.rowHeight,D=(p-a+2*v)/m.rowHeight,I=Math.max(Math.min((a-
r)*m.rowHeight,m.maxRowsPerPage/2),m.maxRowsPerPage/-2),D=D+Math.min(Math.abs(I),10);0==g.rowIndex&&(y-=D);y=Math.max(y,0);10>y&&(0<y&&D+y<m.maxRowsPerPage)&&(D+=Math.max(0,y),y=0);D=Math.min(Math.max(D,m.minRowsPerPage),m.maxRowsPerPage,q.count);if(0==D)q=h(q,B);else{var D=Math.ceil(D),y=Math.min(Math.floor(y),q.count-D),H=b.mixin(m.get("queryOptions"),q.options);q.count-=D;var M=g,K,J=m.queryRowsOverlap;if(I=(0<g.rowIndex||g.offsetTop>a)&&q){var F=q.previous;F&&(c(F,a-(F.node.offsetTop+F.node.offsetHeight),
"nextSibling"),0<y&&F.node==g.previousSibling?(y=Math.min(q.count,y),q.previous.count+=y,d(q.previous,!0),g.rowIndex+=y,J=0):D+=y,q.count-=y);H.start=g.rowIndex-J;H.count=Math.min(D+J,m.maxRowsPerPage);g.rowIndex=H.start+H.count}else q.next&&(c(q.next,q.next.node.offsetTop-p,"previousSibling",!0),M=g.nextSibling,M==q.next.node?(q.next.count+=q.count-y,q.next.node.rowIndex=y+D,d(q.next),q.count=y,J=0):K=!0),H.start=q.count,H.count=Math.min(D+J,m.maxRowsPerPage);K&&(M&&M.offsetWidth)&&(K=M.offsetTop);
d(q);"level"in q.query&&(H.queryLevel=q.query.level);if("queryLevel"in H||!(H.start>m._total||0>H.count)){g=e(M,"-div.dgrid-loading[style\x3dheight:"+D*m.rowHeight+"px]");e(g,"div.dgrid-"+(I?"below":"above")).innerHTML=m.loadingMessage;g.count=D;var G=q.query(H);if(void 0===m._trackError(function(){return G})){e(g,"!");return}(function(a,b,c,g){E=l.when(m.renderArray(g,a,H),function(f){A=g;M=a.nextSibling;e(a,"!");if(c&&M&&M.offsetWidth){var k=m.getScrollPosition();m.scrollTo({x:k.x,y:k.y+M.offsetTop-
c,preserveMomentum:!0})}l.when(g.total||g.length,function(a){"queryLevel"in H||(m._total=a);b&&(b.count=a-b.node.rowIndex,0===b.count&&H.count++,d(b))});m._processScroll();return f},function(b){e(a,"!");throw b;})}).call(this,g,I,K,G);q=q.previous}}}}if(E&&(x=this._refreshDeferred))delete this._refreshDeferred,l.when(E,function(){x.resolve(A)})},removeRow:function(a,b){if(a){var e=a.previousSibling,d=a.nextSibling,e=e&&(null!=e.observerIndex?e.observerIndex:e.previousObserverIndex),h=d&&(null!=d.observerIndex?
d.observerIndex:d.nextObserverIndex),d=a.observerIndex;a.observerIndex=void 0;b&&(a.nextObserverIndex=h,a.previousObserverIndex=e);if(this.cleanEmptyObservers&&(-1<d&&d!==e&&d!==h)&&(e=this.observers,h=e[d])){if(!b)for(var l=h.rows,k=0;k<l.length;k++)if(l[k]!=a&&m.isDescendant(l[k],this.domNode))return this.inherited(arguments);h.cancel();this._numObservers--;e[d]=0}}this.inherited(arguments)}})})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t){var s=h(r,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(a){m.isDefined(a)||(a={});a.attributeField=a.attributeField||"Magnitude";a.rotationInfo=a.rotationInfo||this._getRotationInfo(a);h.safeMixin(this,a);this.style=this.style||s.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:u.fromJson(this.singleArrowSymbol));this.renderer=
new e(this._getDefaultSymbol(),a.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(a){return this.renderer&&this.renderer.getSymbol(a)},setVisualVariables:function(a){a=b.filter(a,function(a){if("sizeInfo"===a.type)return m.isDefined(this._updateSizeInfo(a))},this);this.inherited(arguments);return this},setSizeInfo:function(a){this._updateSizeInfo(a);this.inherited(arguments);return this},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);
return this},setColorInfo:function(a){return this},_updateRenderer:function(a){return!m.isDefined(this.renderer)?Error("Invalid Renderer!"):a===s.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():a===s.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():a===s.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():a===s.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():a===s.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():a===s.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():
a===s.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():a===s.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():a===s.STYLE_SCALAR?this._createSimpleScalarRenderer():a===s.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer()},_updateSizeInfo:function(a){return a&&m.isDefined(a.minSize)&&m.isDefined(a.maxSize)&&m.isDefined(a.minDataValue)&&m.isDefined(a.maxDataValue)?(this.style===s.STYLE_WIND_BARBS&&(a.minSize=a.maxSize),a.field=a.field||"Magnitude",
a.type="sizeInfo",a):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new p([56,168,0]));var a=[0,1E-6,3.5,7,10.5,14];if(m.isDefined(this.minDataValue)&&m.isDefined(this.maxDataValue)){var b=(this.maxDataValue-this.minDataValue)/5,a=[],c,e;e=this.minDataValue;for(c=0;6>c;c++)a[c]=e,e+=b}this._addBreaks(a,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||
this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new p([214,47,39]));this._addBreaks([0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new p([214,47,39]));this._addBreaks([0,
1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(a,function(b,c){a[c]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new p([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],
[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(a,function(b,c){a[c]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new p([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var a=
[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(a,function(b,c){a[c]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new p([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new p([177,177,177]));this._addBreaks([0,0.5,1,1.5,2],[[78,
26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new p([177,177,177]));this._addBreaks([0,0.25,0.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new c({url:t.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var a=
[],b,e;for(b=0;150>=b;b+=5)a.push(b);e="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var d=new c({url:t.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=d;for(b=0;b<a.length-1;b++)0==b?this.renderer.addBreak({minValue:a[b],maxValue:a[b+1],symbol:d}):this.renderer.addBreak({minValue:a[b],maxValue:a[b+1],symbol:(new f).setPath(e[b]).setOutline((new n).setWidth(1.5)).setSize(20).setColor(new p([0,0,0,255]))})},_getDefaultSymbol:function(a){return(new f).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new n).setWidth(0)).setSize(20).setColor(a||
new p([0,92,230]))},_getRotationInfo:function(a){var b=a&&a.flowRepresentation||s.FLOW_FROM,c=a&&a.rotationField||"Direction",e=s.FLOW_FROM;return{field:function(a){a=a.attributes[c];return b===e?a:a+180},type:"geographic"}},_addBreaks:function(a,b){if(!m.isDefined(this.renderer))return Error("Invalid Renderer!");if(!a||!b||!a.length||!b.length||!(a.length>=b.length))return Error("AddBreaks: Input arguments break values and colors not valid");var c;for(c=0;c<b.length;c++)this.renderer.addBreak({minValue:a[c],
maxValue:a[c+1],symbol:this._getDefaultSymbol(new p(b[c]))})},toJson:function(){var a=d.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation});this.renderer&&(this.renderer.defaultSymbol&&this.style===s.STYLE_SINGLE_ARROW)&&(a.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return m.fixJson(a)}});d.mixin(s,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",
STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});a("extend-esri")&&d.setObject("renderer.VectorFieldRenderer",s,l);return s})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "),
function(h,d,a,b,l,m,p,r){h=h(null,{declaredClass:"esri.layers._GridLayout",constructor:function(a,b,c,d){this.origin=a;this.cellWidth=b.width;this.cellHeight=b.height;this.mapWidth=c.width;this.mapHeight=c.height;this.srInfo=d},setResolution:function(a){this._resolution=(a.xmax-a.xmin)/this.mapWidth;this.srInfo&&(a=Math.round(2*this.srInfo.valid[1]/this._resolution),a=Math.round(a/this.cellWidth),this._frameStats=[a,0,a-1])},getCellCoordinates:function(a){var b=this._resolution,c=this.origin;return{row:Math.floor((c.y-
a.y)/(this.cellHeight*b)),col:Math.floor((a.x-c.x)/(this.cellWidth*b))}},normalize:function(a){var b=this._frameStats;if(b){var c=b[0],d=b[1],b=b[2];a<d?(a%=c,a=a<d?a+c:a):a>b&&(a%=c)}return a},intersects:function(b,d){var c=this.srInfo;return c?a.some(d._getParts(c),function(a){return b.intersects(a.extent)}):b.intersects(d)},getCellExtent:function(a,b){var c=this._resolution,d=this.origin,h=this.cellWidth,l=this.cellHeight;return new p(b*h*c+d.x,d.y-(a+1)*l*c,(b+1)*h*c+d.x,d.y-a*l*c,new m(d.spatialReference.toJson()))},
getLatticeID:function(a){var b=this.getCellCoordinates({x:a.xmin,y:a.ymax}),c=this.getCellCoordinates({x:a.xmax,y:a.ymin});a=b.row;var d=c.row,b=this.normalize(b.col),c=this.normalize(c.col);return a+"_"+d+"_"+b+"_"+c},sorter:function(a,b){return a<b?-1:1},getCellsInExtent:function(a,b){var c=this.getCellCoordinates({x:a.xmin,y:a.ymax}),d=this.getCellCoordinates({x:a.xmax,y:a.ymin}),h=c.row,l=d.row,c=c.col,d=d.col,m=[],k,g,q,p=[],v=[],z,x,A,E=[];for(k=h;k<=l;k++)for(g=c;g<=d;g++)q=this.normalize(g),
a=this.getCellExtent(k,q),m.push({row:k,col:q,extent:a,resolution:this._resolution}),b&&(p.push(a.xmin,a.xmax),v.push(a.ymin,a.ymax));c=this.normalize(c);d=this.normalize(d);p.sort(this.sorter);v.sort(this.sorter);g=p.length;for(k=g-1;0<=k;k--)k<g-1&&p[k]===p[k+1]&&p.splice(k,1);g=v.length;for(k=g-1;0<=k;k--)k<g-1&&v[k]===v[k+1]&&v.splice(k,1);if(p.length&&v.length){q=p[0];z=p[p.length-1];x=v[0];A=v[v.length-1];g=p.length;for(k=0;k<g;k++)E.push([[p[k],A],[p[k],x]]);g=v.length;for(k=0;k<g;k++)E.push([[q,
v[k]],[z,v[k]]]);k=new r({paths:E,spatialReference:this.origin.spatialReference.toJson()});m.push({latticeID:h+"_"+l+"_"+c+"_"+d,lattice:k,resolution:this._resolution})}return{minRow:h,maxRow:l,minCol:c,maxCol:d,cells:m}}});b("extend-esri")&&d.setObject("layers._GridLayout",h,l);return h})},"esri/dijit/_RefreshMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/has ../kernel".split(" "),function(h,d,a,b,l,m){function p(a){"object"!==typeof a&&(a=Error(a));
a.grid=this;b.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}h=h(null,{_trackError:function(h){var e;"string"===typeof h&&(h=d.hitch(this,h));try{e=h()}catch(f){p.call(this,f)}return a.when(e,d.hitch(this,function(){b.emit(this.domNode,"refresh",{cancelable:!0,bubbles:!0})}),d.hitch(this,p))}});l("extend-esri")&&d.setObject("dijit._RefreshMixin",h,m);return h})},"esri/tasks/geoenrichment/StudyArea":function(){define(["../../declare","dojo/_base/lang",
"./StudyAreaOptions","./studyAreaOptionsFromJson","./GeographyLevel"],function(h,d,a,b,l){return h("esri.tasks.geoenrichment.StudyArea",null,{attributes:null,options:null,returnGeometry:!1,comparisonGeographyLevels:null,constructor:function(d){d&&(d.attributes&&(this.attributes=d.attributes),d.areaType?this.options=b(d):d.options instanceof a&&(this.options=d.options),d.returnGeometry&&(this.returnGeometry=!0),this.comparisonGeographyLevels=l.fromJsonArray(d.comparisonGeographyLevels||d.comparisonLevels));
this.comparisonGeographyLevels||(this.comparisonGeographyLevels=[])},toJson:function(){var a={};this.attributes&&(a.attributes=this.attributes);this.options&&d.mixin(a,this.options.toJson());this.returnGeometry&&(a.returnGeometry=!0);var b=l.toJsonArray(this.comparisonGeographyLevels);b&&(a.comparisonLevels=b);return a},getGeomType:function(){throw"Not implemented";}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(h){function d(b,d){var h=b.style,p;if(d in h)return!0;d=d.slice(0,
1).toUpperCase()+d.slice(1);for(p=a.length;p--;)if(a[p]+d in h)return a[p];return!1}var a=["ms","O","Moz","Webkit"];h.add("css-transitions",function(a,h,m){return d(m,"transitionProperty")});h.add("css-transforms",function(a,h,m){return d(m,"transform")});h.add("css-transforms3d",function(a,h,m){return d(m,"perspective")});h.add("transitionend",function(){var a=h("css-transitions");return!a?!1:!0===a?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[a]});
return h})},"esri/dijit/analysis/EnrichLayer":function(){define("require dojo/aspect dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dojo/number dojo/on dojo/Evented dojo/store/Observable dojo/dom-geometry dojo/store/Memory dojo/window dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/form/NumberTextBox dijit/layout/ContentPane dijit/Dialog dgrid/List ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime ../geoenrichment/config ../geoenrichment/DataBrowser ../../tasks/geoenrichment/GeoenrichmentTask ../../geometry/Extent ../../geometry/webMercatorUtils ../../geometry/Point dojo/i18n!../../nls/jsapi dojo/text!./templates/EnrichLayer.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$,ba,Y,ca,da,ea,fa){h=a([B,D,y,I,H,T,X],{declaredClass:"esri.dijit.analysis.EnrichLayer",templateString:fa,widgetsInTemplate:!0,inputLayer:null,outputLayerName:null,distance:null,enableTravelModes:!0,showTrafficWidget:!1,_isBufferSelectionEnabled:!0,analysisVariables:null,i18n:null,toolName:"EnrichLayer",helpFileName:"EnrichLayer",resultParameter:"enrichedLayer",constructor:function(a){this._pbConnects=
[];this._statsRows=[];this._isLineEnabled=!1;a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);l.forEach(this._pbConnects,m.disconnect);delete this._pbConnects;this._driveTimeClickHandle&&(m.disconnect(this._driveTimeClickHandle),this._driveTimeClickHandle=null)},postMixInProperties:function(){this.inherited(arguments);b.mixin(this.i18n,ea.bufferTool);b.mixin(this.i18n,ea.driveTimes);b.mixin(this.i18n,ea.enrichLayerTool)},postCreate:function(){this.inherited(arguments);
k.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",b.hitch(this,this.validateServiceName));this._buildUI();this.watch("analysisVariables",b.hitch(this,this._refreshGrid))},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(a){a.preventDefault();if(this._form.validate()&&this.validateSelectedGrid()){a={};var c,d,e;c=this.get("analysisVariables");e=[];d=[];l.forEach(c,function(a){-1!==a.indexOf(".*")?
d.push(a.split(".*")[0]):e.push(a)});a.inputLayer=p.toJson(U.constructAnalysisInputLyrObj(this.inputLayer));if(this._isBufferSelectionEnabled||this._isLineEnabled)a.bufferType=this.get("bufferType"),a.distance=this.get("distance"),a.units=this._distanceUnitsSelect.get("value");this.get("country")&&(a.country=this.get("country"));d&&0<d.length&&(a.dataCollections=p.toJson(d));e&&0<e.length&&(a.analysisVariables=p.toJson(e));this.get("showTrafficWidget")&&this._trafficTimeWidget.get("checked")&&(a.TimeOfDay=
this._trafficTimeWidget.get("timeOfDay"));this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,a).then(b.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},_handleSaveBtnClick:function(){if(this._form.validate()&&this.validateSelectedGrid()){var a=
{},b={},d,e,g;this._saveBtn.set("disabled",!0);d=this.get("analysisVariables");g=[];e=[];l.forEach(d,function(a){-1!==a.indexOf(".*")?e.push(a.split(".*")[0]):g.push(a)});a.inputLayer=p.toJson(U.constructAnalysisInputLyrObj(this.inputLayer));if(this._isBufferSelectionEnabled||this._isLineEnabled)d=this._bufferTypeSelect.getOptions(this._bufferTypeSelect.get("value")),a.bufferType=d.travelMode?p.toJson(d.travelMode):this._bufferTypeSelect.get("value"),a.distance=this.get("distance"),a.units=this._distanceUnitsSelect.get("value");
this.get("country")&&(a.country=this.get("country"));e&&0<e.length&&(a.dataCollections=e);g&&0<g.length&&(a.analysisVariables=g);this.get("showTrafficWidget")&&this._trafficTimeWidget.get("checked")&&(a.TimeOfDay=this._trafficTimeWidget.get("timeOfDay"));this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&
(d={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(d.extent=this.map.extent._normalize(!0)),a.context=p.toJson(d));b.jobParams=a;this._saveBtn.set("disabled",!1);b.itemParams={description:c.substitute(this.i18n.itemDescription,{inputLayerName:this.inputLayer.name}),tags:c.substitute(this.i18n.itemTags,{inputLayerName:this.inputLayer.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},
_handleDistUnitsChange:function(a){this.set("outputLayerName");U.updateModeConstraints({validateWidget:this._distanceInput,type:this._bufferTypeSelect.get("value"),units:this._distanceUnitsSelect.get("value")})},_handleDistanceTypeChange:function(a){var b,c;c=this._bufferTypeSelect.getOptions(this._bufferTypeSelect.get("value"));Q.isDefined(c)?(b="Time"===c.units,c="Time"===c.units&&"driving"===c.modei18nKey):(b=-1!==a.indexOf("Time"),c="DrivingTime"===a);this.set("bufferType",a);this.get("showTrafficWidget")&&
(n.set(this._useTrafficRow,"display",c?"":"none"),this._trafficTimeWidget.set("disabled",!c),this._trafficTimeWidget.set("reset",!c));b?(this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Seconds",label:this.i18n.seconds},{value:"Minutes",label:this.i18n.minutes,selected:"selected"},{value:"Hours",label:this.i18n.hours}])):(this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Miles",
label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]));this.set("outputLayerName");U.updateModeConstraints({validateWidget:this._distanceInput,type:a,units:this._distanceUnitsSelect.get("value")})},_save:function(){},_buildUI:function(){var a=!0;this.signInPromise.then(b.hitch(this,U.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));
this._addBtn.set("disabled",!0);n.set(this._dataDialog.titleNode,"display","none");n.set(this._dataDialog.titleBar,"display","none");n.set(this._dataDialog.containerNode,"padding","0");n.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");U.populateTravelModes({selectWidget:this._bufferTypeSelect,addStraightLine:!0,widget:this,enableTravelModes:this.get("enableTravelModes")});this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",
this.inputLayers[0]),U.populateAnalysisLayers(this,"inputLayer","inputLayers"),U.addReadyToUseLayerOption(this,[this._analysisSelect]));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),a=!1);this.inputLayer&&(this._getSourceCountry(),this._updateAnalysisLayerUI(a));this._loadConnections();(this._isBufferSelectionEnabled||this._isLineEnabled)&&this._handleDistanceTypeChange("StraightLine");n.set(this._useTrafficRow,"display",this.get("showTrafficWidget")?"":"none");this.outputLayerName&&
this._outputLayerInput.set("value",this.outputLayerName);n.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(b.hitch(this,function(a){this.folderStore=a;U.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));n.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":
"none");this.list=new S({renderRow:b.hitch(this,this._renderVariableRow)},this._selectedList)},startup:function(){this.list.startup();n.set(this._selectLabelDiv,"display","block");n.set(this._selectedList,"display","none")},_getSourceCountry:function(a){var c,d;this.inputLayer&&this.signInPromise.then(b.hitch(this,function(e){c=this.analysisGpServer&&-1!==this.analysisGpServer.indexOf("dev")?"dev":this.analysisGpServer&&-1!==this.analysisGpServer.indexOf("qa")?"qa":"";V.portalUrl=this.portalUrl;this._task||
(this.isSingleTenant?this.isSingleTenant&&(this.helperServices&&this.helperServices.geoenrichment)&&(V.server=this.helperServices.geoenrichment.url):V.server=location.protocol+"//geoenrich"+c+".arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",V.server&&(this._task=new ba(V.server),this._task.token=V.token));this._databrowser.pages.cat||this._databrowser.startup();Q.isDefined(this.inputLayer)&&(d=this._getPoint(this.inputLayer,a));d?this._task.getCountries(d).then(b.hitch(this,function(a){a instanceof
Array&&(this._databrowser.set("countryID",a[0]),this._databrowser.pages.cat.countrySelect.set("value",a[0]),this.set("country",a[0]),this._addBtn.set("disabled",!1))}),b.hitch(this,function(a){console.log(a);this._addBtn.set("disabled",!1)})):this._addBtn.set("disabled",!1)}))},_updateAnalysisLayerUI:function(a){var b,d;if(this.inputLayer){u.set(this._aggregateToolDescription,"innerHTML",c.substitute(this.i18n.enrichDefine,{inputLayerName:this.inputLayer.name}));"esriGeometryPolygon"===this.inputLayer.geometryType?
(this._isLineEnabled=this._isBufferSelectionEnabled=!1,this._updateTravelModes(!1)):"esriGeometryPolyline"===this.inputLayer.geometryType?(this._updateTravelModes(!1),this._isLineEnabled=!0,this._isBufferSelectionEnabled=!1):(this._updateTravelModes(!0),this._isBufferSelectionEnabled=!0,this._isLineEnabled=!1);d=!this._isBufferSelectionEnabled&&!this._isLineEnabled;if(b=this._bufferTypeSelect.getOptions("StraightLine"))d?(b.label=b.label.replace("esriStraightLineDistanceIcon","esriStraightLineDistanceDisabledIcon"),
b.label=b.label.replace("esriLeadingMargin4","esriLeadingMargin4 esriAnalysisTextDisabled"),b.disabled=!0):(b.label=b.label.replace("esriStraightLineDistanceDisabledIcon","esriStraightLineDistanceIcon"),b.label=b.label.replace("esriAnalysisTextDisabled",""),b.disabled=!1),this._bufferTypeSelect.updateOption(b);k.toggle(this._distanceInput,"disabled",d);this._distanceInput.set("disabled",d);k.toggle(this._distanceUnitsSelect,"disabled",d);this._distanceUnitsSelect.set("disabled",d);k.toggle(this._bufferTypeSelect,
"disabled",d);this._bufferTypeSelect.set("disabled",d);d||this._bufferTypeSelect.set("value","StraightLine");a&&(this.outputLayerName=c.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name}));this._outputLayerInput.set("value",this.outputLayerName)}},_renderVariableRow:function(a){var c=t.create("div",{"class":"ShoppingCartRowOuter"}),d=t.create("div",{"class":"ShoppingCartRow"},c);t.create("div",{"class":"TrimWithEllipses ShoppingCartRowLabel",innerHTML:a.alias},d);d=t.create("div",
{"class":"ShoppingCartRowCloser"},d);u.set(d,"idDesc",a.idDesc);w(d,"click",b.hitch(this,this._handledRemoveVarClick));return c},_handledRemoveVarClick:function(a){this._databrowser.shoppingCart.onClick(a);this._databrowser._onOK()},validateSelectedGrid:function(){var a;(a=this.get("analysisVariables")&&0!==this.get("analysisVariables").length)?n.set(this._analysisVariablesCtr,"borderColor","#EFEEEF"):(E.scrollIntoView(this._analysisVariablesCtr),n.set(this._analysisVariablesCtr,"borderColor","#f94"));
return a},validateDistance:function(){var a=this,c,d=[],e,g;this.set("distance");c=b.trim(this._distanceInput.get("value"));if(!c)return!1;g=q.parse(c);if(isNaN(g))return d.push(0),!1;c=q.format(g,{locale:"root"});Q.isDefined(c)?Q.isDefined(c)||(c=q.format(g,{locale:"en-us"})):c=q.format(g,{locale:"en"});Q.isDefined(c)&&(e=b.trim(c).match(/\D/g));e&&l.forEach(e,function(b){"."===b||","===b?d.push(1):"-"===b&&"polygon"===a.inputType?d.push(1):d.push(0)});return-1!==l.indexOf(d,0)?!1:!0},_loadConnections:function(){this.on("start",
b.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",b.hitch(this,"_onClose",!1));m.connect(this._bufferTypeSelect,"onChange",b.hitch(this,this._handleDistanceTypeChange));this._connect(this._databrowser,"onOK",b.hitch(this,this._handleDataBrowserOk));this._connect(this._databrowser,"onCancel",b.hitch(this,this._handleDataBrowserCancel));d.after(this._databrowser,"loadPage",b.hitch(this,this._setCalciteButtons));this.watch("enableTravelModes",b.hitch(this,function(a,b,c){this._updateTravelModes(c)}));
this.on("travelmodes-added",b.hitch(this,this._updateAnalysisLayerUI,!0));this.map.on("extent-change",b.hitch(this,function(){this._getSourceCountry(!0)}))},_handleBrowseItemsSelect:function(a){a&&a.selection&&U.addAnalysisReadyLayer({item:a.selection,layers:this.inputLayers,layersSelect:this._analysisSelect,browseDialog:this._browsedlg,widget:this}).always(b.hitch(this,function(){this._updateAnalysisLayerUI(!0);this._isAnalysisSelect=!1}))},_handleDataBrowserOk:function(){this.set("analysisVariables",
this._databrowser.selection);this._dataDialog.hide()},_handleDataBrowserCancel:function(){this._dataDialog.hide()},_handleShowDataDialogClick:function(a){this._dataDialog.show()},_setCalciteButtons:function(){s(".calcite .DataCollectionButton").forEach(function(a){k.add(a,"btn secondary")});s(".calcite .Wizard_Button").forEach(function(a,b){u.get(a,"innerHTML")===this._databrowser.okButton?k.add(a,"btn secondary"):k.add(a,"btn transparent")},this)},_refreshGrid:function(a,b,c){a=[];for(var d in this._databrowser.shoppingCart.content)this._databrowser.shoppingCart.content.hasOwnProperty(d)&&
a.push(this._databrowser.shoppingCart.content[d]);n.set(this._selectLabelDiv,"display",0===a.length?"block":"none");n.set(this._selectedList,"display",0===a.length?"none":"block");u.set(this.varCounter,"innerHTML",a.length.toString());this.list.refresh();this.list.renderArray(a)},_showMessages:function(a){u.set(this._bodyNode,"innerHTML",a);r.fadeIn({node:this._errorMessagePane,easing:g.quadIn,onEnd:b.hitch(this,function(){n.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(a){a&&
a.preventDefault();r.fadeOut({node:this._errorMessagePane,easing:g.quadOut,onEnd:b.hitch(this,function(){n.set(this._errorMessagePane,{display:"none"})})}).play()},_handleAnalysisLayerChange:function(a){if("browse"===a)this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show();else if(this.inputLayer=this.inputLayers[a])this._getSourceCountry(this.inputLayer.analysisReady),
this._updateAnalysisLayerUI(!0)},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setInputLayersAttr:function(a){this.inputLayers=a},_setAnalysisVariablesAttr:function(a){this._set("analysisVariables",a)},_getAnalysisVariablesAttr:function(){return this.analysisVariables},_setShowTrafficWidgetAttr:function(a){this.showTrafficWidget=
a},_getShowTrafficWidgetAttr:function(){return this.showTrafficWidget},_setBufferTypeAttr:function(a){this.bufferType=a},_getBufferTypeAttr:function(){return this.bufferType},_setDistanceAttr:function(a){a&&(this.distance=a)},_getDistanceAttr:function(){return this.distance=this._distanceInput.get("value")},_setCountryAttr:function(a){this.country=a},_getCountryAttr:function(){this._databrowser&&(this.country=this._databrowser.get("countryID"));return this.country},_setEnableTravelModesAttr:function(a){this._set("enableTravelModes",
a)},validateServiceName:function(a){return U.validateServiceName(a,{textInput:this._outputLayerInput})},_connect:function(a,b,c){this._pbConnects.push(m.connect(a,b,c))},_updateTravelModes:function(a){var b=this._bufferTypeSelect.getOptions();l.forEach(b,function(b){"StraightLine"!==b.value&&(b.disabled=!a)});this._bufferTypeSelect.updateOption(b)},_getPoint:function(a,b){var c;if(a.graphics&&0<a.graphics.length)return a.graphics[0].geometry;c=this.map.extent||b?(new Y(this.map.extent)).getCenter():
a.extent?(new Y(a.extent)).getCenter():a.initialExtent?(new Y(a.initialExtent)).getCenter():a.fullExtent?(new Y(a.fullExtent)).getCenter():null;return new da(ca.xyToLngLat(c.x,c.y))}});e("extend-esri")&&b.setObject("dijit.analysis.EnrichLayer",h,P);return h})},"esri/dijit/analysis/DeriveNewLocations":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./utils ./CreditEstimator ./ExpressionGrid dojo/i18n!../../nls/jsapi dojo/text!./templates/DeriveNewLocations.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O){h=d([s,k,g,q,w,F,J],{declaredClass:"esri.dijit.analysis.DeriveNewLocations",templateString:O,widgetsInTemplate:!0,i18n:null,toolName:"DeriveNewLocations",helpFileName:"DeriveNewLocations",resultParameter:"resultLayer",primaryActionButttonClass:"esriAnalysisSubmitButton",analysisLayer:null,inputLayers:[],constructor:function(a){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);
b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,C.deriveNewLocations);a.mixin(this.i18n,C.expressionGrid)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},
_handleSaveBtnClick:function(){if(this._form.validate()&&this.expressionGrid.validate()){this._saveBtn.set("disabled",!0);var a={},c={},d,g;g=this.expressionGrid.get("expressionMap");a.expressions=m.toJson(g.expressions);d=[];d=b.map(g.inputLayers,function(a){return m.toJson(G.constructAnalysisInputLyrObj(a))},this);a.inputLayers=d;this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(d={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(d.extent=this.map.extent._normalize(!0)),a.context=m.toJson(d));c.jobParams=a;a=this.i18n.itemDescription;a+="\x3cdiv\x3e\x3ci\x3e\x3cu\x3e"+this.i18n.expression+"\x3c/u\x3e "+g.expressionString+"\x3c/i\x3e\x3c/div\x3e";c.itemParams={description:a,tags:e.substitute(this.i18n.itemTags,{analysisLayerName:this.analysisLayer.name}),
snippet:this.i18n.itemSnippet};this.showSelectFolder&&(c.itemParams.folder=this.get("folderId"));this.execute(c)}},_handleShowCreditsClick:function(c){c.preventDefault();c={};var d,e;!this._form.validate()||!this.expressionGrid.validate()?(f.set(this._showCreditsLink,"color","grey"),f.set(this._showCreditsLink,"cursor","default")):(f.set(this._showCreditsLink,"color",""),f.set(this._showCreditsLink,"cursor",""),d=this.expressionGrid.get("expressionMap"),c.expressions=m.toJson(d.expressions),e=[],
e=b.map(d.inputLayers,function(a){return G.constructAnalysisInputLyrObj(a)},this),c.inputLayers=m.toJson(e),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(c.Context=m.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,c).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_save:function(){},_buildUI:function(){var b=!0;this.signInPromise.then(a.hitch(this,G.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));
this.get("showSelectAnalysisLayer")&&(!this.get("analysisLayer")&&this.get("analysisLayers")&&this.set("analysisLayer",this.analysisLayers[0]),G.populateAnalysisLayers(this,"analysisLayer","analysisLayers"));G.addReadyToUseLayerOption(this,[this._analysisSelect]);this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);this._updateAnalysisLayerUI(b);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,
function(a){this.folderStore=a;G.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections()},_updateAnalysisLayerUI:function(b){this.analysisLayer&&(b&&(this.outputLayerName=e.substitute(this.i18n.outputLayerName,
{analysisLayerName:this.analysisLayer.name})),this._outputLayerInput.set("value",this.outputLayerName));this.expressionGrid||(this.expressionGrid=new L({analysisLayer:this.analysisLayer,inputLayers:this.inputLayers,allowAllInputOperands:!0,primaryActionButttonClass:this.get("primaryActionButttonClass"),showReadyToUseLayers:this.get("showReadyToUseLayers"),owningWidget:this},n.create("div",{style:"width:100%;"},this._expressionGridTd)),this._updateHandle=this.expressionGrid.on("update-expressions",
a.hitch(this,this._handleUpdateExpressions)))},_handleUpdateExpressions:function(a){1<a.length?(f.set(this._showCreditsLink,"color",""),f.set(this._showCreditsLink,"cursor","")):(f.set(this._showCreditsLink,"color","grey"),f.set(this._showCreditsLink,"cursor","default"))},_handleAnalysisLayerChange:function(a){"browse"===a?this.showReadyToUseLayersDialog(!0):(this.analysisLayer=this.analysisLayers[a],this._updateAnalysisLayerUI(!0))},showReadyToUseLayersDialog:function(b){this.signInPromise.then(a.hitch(this,
function(){this._browsedlg&&(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=b,this._browsedlg.show())}))},_handleBrowseItemsSelect:function(b){b&&b.selection&&G.addAnalysisReadyLayer({item:b.selection,layers:this.inputLayers,layersSelect:this.layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(){this._isAnalysisSelect&&(this.analysisLayer=this.inputLayers[this.layersSelect.get("value")],
this.showSelectAnalysisLayer&&this._updateAnalysisLayerUI(!0))}))},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setInputLayersAttr:function(a){this.inputLayers=a},_getInputLayersAttr:function(){return this.inputLayers},
_setAnalysisLayerAttr:function(a){this.analysisLayer=a},_getAnalysisLayerAttr:function(){return this.analysisLayer},_setAnalysisLayersAttr:function(a){this.analysisLayers=a},validateServiceName:function(a){return G.validateServiceName(a,{textInput:this._outputLayerInput})},_setPrimaryActionButttonClassAttr:function(a){this.primaryActionButttonClass=a},_getPrimaryActionButttonClassAttr:function(){return this.primaryActionButttonClass},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});
p("extend-esri")&&a.setObject("dijit.analysis.DeriveNewLocations",h,M);return h})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/dom dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(h,d,a,b,l,m,p,r,e){function f(a,b){e(document.body,a,".dgrid-scrollbar-measure");var c=a["offset"+b]-a["client"+b];a.className="";document.body.removeChild(a);return c}function c(a){var b=
a?"."+a.replace(q,"."):"";this._class&&(b="!"+this._class.replace(q,"!")+b);e(this.domNode,b);this._class=a}function n(){return this._class}function u(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function t(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}r("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var s,k;l.add("dom-scrollbar-width",function(a,b,c){return f(c,"Width")});l.add("dom-scrollbar-height",
function(a,b,c){return f(c,"Height")});l.add("dom-rtl-scrollbar-left",function(a,b,c){a=e("div");e(document.body,c,".dgrid-scrollbar-measure[dir\x3drtl]");e(c,a);b=!!l("ie")||!!l("trident")||a.offsetLeft>=l("dom-scrollbar-width");c.className="";document.body.removeChild(c);e(a,"!");c.removeAttribute("dir");return b});var g=0,q=/ +/g,w=7>l("ie")&&!l("quirks")?function(){var a,b,c;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==
a))this.resize(),this._prevWinDims=[b,a]}:function(){this._started&&this.resize()};return d("dgrid.List",l("touch")?p:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:null,addUiClasses:!0,shouldObserveStore:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:
document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){var f=this.domNode=b||e("div"),k;a?(this.params=a,d.safeMixin(this,a),k=a["class"]||a.className||f.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=f.id=f.id||this.id||"dgrid_"+g++;null===this.useTouchScroll&&(this.useTouchScroll=!l("dom-scrollbar-width"));this.buildRendering();
k&&c.call(this,k);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,c=this.addUiClasses,d=this,g,f,k,h;h=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";e(a,"[role\x3dgrid].dgrid.dgrid-"+this.listType+(c?".ui-widget":""));g=this.headerNode=e(a,"div.dgrid-header.dgrid-header-row"+(c?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));
(l("quirks")||8>l("ie"))&&e(a,"div.dgrid-spacer");f=this.bodyNode=e(a,"div.dgrid-scroller");l("ff")&&(f.tabIndex=-1);this.headerScrollNode=e(a,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(c?".ui-widget-header":""));k=this.footerNode=e("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));e(a,k);h&&(a.className+=" dgrid-rtl"+(l("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));b(f,"scroll",function(c){d.showHeader&&(g.scrollLeft=c.scrollLeft||f.scrollLeft);c.stopPropagation();
b.emit(a,"scroll",{scrollTarget:f})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=e(this.bodyNode,"div.dgrid-content"+(c?".ui-widget-content":""));this._listeners.push(this._resizeHandle=b(window,"resize",m.throttleDelayed(w,this)))},postCreate:l("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},
resize:function(){var a=this.bodyNode,b=this.headerNode,c=this.footerNode,d=b.offsetHeight,e=this.showFooter?c.offsetHeight:0,g=l("quirks")||7>l("ie");this.headerScrollNode.style.height=a.style.marginTop=d+"px";a.style.marginBottom=e+"px";g&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-e,0)+"px",e&&(c.style.bottom="1px",setTimeout(function(){c.style.bottom=""},0)));s||(s=l("dom-scrollbar-width"),k=l("dom-scrollbar-height"),l("ie")&&(s++,k++),m.addCssRule(".dgrid-scrollbar-width",
"width: "+s+"px"),m.addCssRule(".dgrid-scrollbar-height","height: "+k+"px"),17!=s&&!g&&(m.addCssRule(".dgrid-header-row","right: "+s+"px"),m.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+s+"px")));g&&(b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,b){var c=m.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,c){var d=b(this.domNode,a,c);l("dom-addeventlistener")||this._listeners.push(d);return d},
cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this._started=!1;this.cleanup();e(this.domNode,"!");this.useTouchScroll&&this.inherited(arguments)},refresh:function(){this.cleanup();
this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d,g){if(b){var f=this.insertRow(a,b,c,d,g);e(f,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){e(f,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration);return f}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+" ").indexOf("dgrid-row ")&&e(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+
"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!=b)}},renderArray:function(b,c,d){function e(){var a=arguments;if(-1<p)for(var c=0;c<a.length;c++){var f=a[c],k=n[f?0:n.length-1];if(k=k&&g(k)){var l=k[f?"previousSibling":"nextSibling"];l&&(l=h.row(l));l&&l.element!=k&&(f=f?"unshift":"push",b[f](l.data),n[f](l.element),d.count++)}}}function g(b){return!a.isDescendant(b,h.domNode)&&document.getElementById(b.id)?h.row(b.id.slice(h.id.length+5)).element:
b}function f(a){s=h.insertRow(a,t,null,l++,d);s.observerIndex=p;return s}function k(a){w=a.slice(0);(q=c?c.parentNode:h.contentNode)&&q.parentNode&&(q!==h.contentNode||a.length)?(q.insertBefore(t,c||null),(s=a[a.length-1])&&h.adjustRowIndices(s)):m[p]&&h.cleanEmptyObservers&&"undefined"!==typeof p&&(m[p].cancel(),m[p]=0,h._numObservers--);n=a;r&&(r.rows=n)}d=d||{};var h=this,l=d.start||0,m=this.observers,n,q,p;c||(this._lastCollection=b);if(b.observe&&this.shouldObserveStore){h._numObservers++;var r=
b.observe(function(a,f,k){var l,m,r;-1<f&&n[f]&&(l=n.splice(f,1)[0],l.parentNode==q&&((m=l.nextSibling)&&f!=k&&m.rowIndex--,h.removeRow(l)),d.count--,h._processScroll&&h._processScroll());if(-1<k){if(n.length)if(0===k)r=(r=n[k])&&g(r);else{if(r=n[k-1])r=g(r),r=(r.connected||r).nextSibling}else r=h._getFirstRowSibling&&h._getFirstRowSibling(q);l&&(r&&l.id===r.id)&&(r=(r.connected||r).nextSibling);r&&!r.parentNode&&(r=document.getElementById(r.id));l=c&&c.parentNode||r&&r.parentNode||h.contentNode;
if(l=h.newRow(a,l,r,d.start+k,d))if(l.observerIndex=p,n.splice(k,0,l),!m||k<f)m=l.previousSibling,m=!m||m.rowIndex+1==l.rowIndex||0==l.rowIndex?l:m;d.count++}0===f?e(1,1):f===b.length-(-1===k?0:1)&&e(0,0);f!=k&&m&&h.adjustRowIndices(m);h._onNotification(n,a,f,k)},!0);p=m.push(r)-1}var t=document.createDocumentFragment(),s,w;if(b.map){if(n=b.map(f,console.error),n.then)return b.then(function(a){b=a;return n.then(function(a){k(a);e(1,1,0,0);return w})})}else{n=[];for(var u=0,O=b.length;u<O;u++)n[u]=
f(b[u])}k(n);e(1,1,0,0);return w},_onNotification:function(a,b,c,d){},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,d,e){var g=e.parentId,g=this.id+"-row-"+(g?g+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),f=document.getElementById(g),k=f&&f.previousSibling;f&&(f===c&&(c=(c.connected||c).nextSibling),this.removeRow(f));f=this.renderRow(a,e);f.className=(f.className||"")+" dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even")+(this.addUiClasses?
" ui-state-default":"");this._rowIdToObject[f.id=g]=a;b.insertBefore(f,c||null);k&&this.adjustRowIndices(k);f.rowIndex=d;return f},renderRow:function(a,b){return e("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||e(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=
this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,g;g=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(c+" ")){g=e;b+=0>b?1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,!e||e===this.bodyNode||
e===this.headerNode)break;while(b);return g},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:l("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):t.call(this,a)}:t,getScrollPosition:l("touch")?function(){return this.useTouchScroll?this.inherited(arguments):u.call(this)}:u,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+
a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:n,_setClass:c,_getClassName:n,_setClassName:c,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();this._lastCollection&&(a.length&&
("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var e=c[a],g=d[a];void 0===e&&(e="");void 0===g&&(g="");return e==g?0:e>g==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){h.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;e(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();
a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){h.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;e(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(a){d.mixin(this,
a)},toJson:function(){return l.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});a("extend-esri")&&d.setObject("layers.LayerInfo",h,b);return h})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(h,d,a,b,l,m){b=h("dojo.dnd.move.constrainedMoveable",m,{constraints:function(){},within:!1,
constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;this.within&&(a=d.getMarginSize(a.node),b.r-=a.w,b.b-=a.h)},onMove:function(a,b){var d=this.constraintBox,f=a.node.style;this.onMoving(a,b);b.l=b.l<d.l?d.l:d.r<b.l?d.r:b.l;b.t=b.t<d.t?d.t:d.b<b.t?d.b:b.t;f.left=b.l+"px";f.top=b.t+"px";this.onMoved(a,b)}});l=h("dojo.dnd.move.boxConstrainedMoveable",b,{box:{},
constructor:function(a,b){var d=b&&b.box;this.constraints=function(){return d}}});h=h("dojo.dnd.move.parentConstrainedMoveable",b,{area:"content",constructor:function(b,h){var e=h&&h.area;this.constraints=function(){var b=this.node.parentNode,c=a.getComputedStyle(b),h=d.getMarginBox(b,c);if("margin"==e)return h;var l=d.getMarginExtents(b,c);h.l+=l.l;h.t+=l.t;h.w-=l.w;h.h-=l.h;if("border"==e)return h;l=d.getBorderExtents(b,c);h.l+=l.l;h.t+=l.t;h.w-=l.w;h.h-=l.h;if("padding"==e)return h;l=d.getPadExtents(b,
c);h.l+=l.l;h.t+=l.t;h.w-=l.w;h.h-=l.h;return h}}});return{constrainedMoveable:b,boxConstrainedMoveable:l,parentConstrainedMoveable:h}})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),function(h,d,a,b,l,
m,p,r,e,f,c,n,u,t,s){h=h([u],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(b,c){this.pointSymbol=c&&c.pointSymbol;this.polylineSymbol=c&&c.polylineSymbol;this.polygonSymbol=c&&c.polygonSymbol;this._outSR=c&&(c.outSpatialReference||c.outSR)||new e({wkid:4326});this._options=a.mixin({},c)},parse:function(){console.error("parse function has not been implemented")},getFeatureLayers:function(){var a=[];this._fLayers&&(a=a.concat(this._fLayers));return a},onRefresh:function(){},
onOpacityChange:function(){},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(b){var c=this;this._fireUpdateStart();b=this.parse(b);b.addCallback(function(a){c._io=null;c._initLayer(a)});b.addErrback(function(b){c._io=null;b=a.mixin(Error(),b);b.message="Unable to load resource: "+c.url+" "+(b.message||"");c._fireUpdateEnd(b);c.onError(b)})},_initLayer:function(c){this.loaded&&this._removeInternalLayers();this.name=c.name;this.description=
c.description;this.snippet=c.snippet;this.defaultVisibility=void 0!==c.visibility?this.visible=!!c.visibility:this.visible=!0;this.featureInfos=c.featureInfos;this.fullExtent=this.initialExtent=new f(c.lookAtExtent);this.copyright=c.author||c.copyright;var d;if((c=a.getObject("featureCollection.layers",!1,c))&&0<c.length)this._fLayers=[],b.forEach(c,function(b,c){var e=a.getObject("featureSet.features",!1,b);e&&0<e.length&&(d=a.mixin({outFields:["*"],infoTemplate:b.popupInfo?new s(b.popupInfo):null,
editable:!1},this._options),d.id&&(d.id=d.id+"_"+c),b.layerDefinition.capabilities="Query,Data",e=new t(b,d),e.geometryType&&(this["_"+e.geometryType]=e),this._fLayers.push(e))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(c=new n(this.pointSymbol),this._esriGeometryPoint.setRenderer(c)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),
this.polylineSymbol&&(c=new n(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(c)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(c=new n(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(c)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();var d=a.spatialReference,e=this._outSR,f;if(d.wkid)f=d._isWebMercator()&&
e._isWebMercator()||d.wkid===e.wkid;else if(d.wkt)f=d.wkt===e.wkt;else{console.log("_setMap - map has invalid spatial reference");return}if(!f)if(d._isWebMercator()&&4326===e.wkid)this._converter=c.geographicToWebMercator;else if(e._isWebMercator()&&4326===d.wkid)this._converter=c.webMercatorToGeographic;else{console.log("_setMap - unsupported workflow. Spatial reference of the map and layer do not match, and the conversion cannot be done on the client.");return}(d=this._fLayers)&&0<d.length&&b.forEach(d,
function(b){if(this._converter){var c=b.graphics,d,e,g=c?c.length:0;for(d=0;d<g;d++)(e=c[d].geometry)&&c[d].setGeometry(this._converter(e))}a.addLayer(b)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var a=this._map;a&&b.forEach(this.getFeatureLayers(),a.removeLayer,a)},setScaleRange:function(a,c){this.inherited(arguments);b.forEach(this.getFeatureLayers(),function(b){b.setScaleRange(a,c)});this._options.minScale=this.minScale;this._options.maxScale=
this.maxScale},setOpacity:function(a){this.opacity!=a&&(b.forEach(this.getFeatureLayers(),function(b){b.setOpacity(a)}),this.opacity=this._options.opacity=a,this.onOpacityChange(a))},onVisibilityChange:function(a){this._fireUpdateStart();b.forEach(this.getFeatureLayers(),function(b){b.setVisibility(a)});this._fireUpdateEnd()},_setMap:function(a,b){this.inherited(arguments);this._map=a;var c=this._div=l.create("div",null,b);m.set(c,"position","absolute");this._addInternalLayers();this.evaluateSuspension();
return c},_unsetMap:function(a,b){this._io&&this._io.cancel();d.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var c=this._div;c&&(b.removeChild(c),l.destroy(c));this._div=null;this.inherited(arguments)}});p("extend-esri")&&a.setObject("layers._ServiceGeneratedFeatureCollection",h,r);return h})},"esri/units":function(){define(["dojo/has","./kernel"],function(h,d){var a={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",
DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",
SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};h("extend-esri")&&(d.Units=a);return a})},"esri/dijit/analysis/InterpolatePoints":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/Dialog ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../toolbars/draw ../PopupTemplate ../../layers/FeatureLayer ../../graphic ./utils ./CreditEstimator ../../symbols/PictureMarkerSymbol dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!../../nls/jsapi dojo/text!./templates/InterpolatePoints.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z,V,$){h=d([g,q,w,v,z,L,N],{declaredClass:"esri.dijit.analysis.InterpolatePoints",templateString:$,widgetsInTemplate:!0,inputLayer:null,field:null,interpolateOption:1,classificationType:"GeometricalInterval",numClasses:10,maxClasses:32,minClasses:3,boundingPolygonLayer:null,predictAtPointLayer:null,outputPredictionError:!1,outputLayerName:null,classBreaks:null,i18n:null,map:null,toolName:"InterpolatePoints",
helpFileName:"InterpolatePoints",resultParameter:"resultLayer",constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,V.findHotSpotsTool);a.mixin(this.i18n,V.interpolatePointsTool);this.set("drawLayerName",this.i18n.blayerName);this.set("drawPointLayerName",this.i18n.pointlayerName)},
postCreate:function(){this.inherited(arguments);s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._classBreaksInput.set("validator",a.hitch(this,this.validateClassBreaks));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._featureLayer&&(this.map.removeLayer(this._featureLayer),b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),
this.boundingPolygonLayers.splice(b,1))},this)),this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.predictAtPointLayers,function(a,b){a===this._pointfeatureLayer&&(this._predictPointSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.predictAtPointLayers.splice(b,1))},this)));this._handleBoundingBtnChange(!1);this._handlePredictPointChange(!1);this.emit("close",{save:!a})},clear:function(){this._featureLayer&&(this.map.removeLayer(this._featureLayer),
b.forEach(this.boundingPolygonLayers,function(a,b){a===this._featureLayer&&(this._boundingAreaSelect.removeOption({value:b+1,label:this._featureLayer.name}),this.boundingPolygonLayers.splice(b,1))},this));this._pointfeatureLayer&&(this.map.removeLayer(this._pointfeatureLayer),b.forEach(this.predictAtPointLayers,function(a,b){a===this._pointfeatureLayer&&(this._predictPointSelect.removeOption({value:b+1,label:this._pointfeatureLayer.name}),this.predictAtPointLayers.splice(b,1))},this));this._handleBoundingBtnChange(!1);
this._handlePredictPointChange(!1)},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer"))),b.field=this.get("field"),b.interpolateOption=this.get("interpolateOption"),b.classificationType=this.get("classificationType"),"Manual"!==this.classificationType?b.numClasses=this.get("numClasses"):b.classBreaks=this.get("classBreaks"),this.get("boundingPolygonLayer")&&(b.boundingPolygonLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.boundingPolygonLayer))),
this.get("predictAtPointLayer")&&(b.predictAtPointLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.predictAtPointLayer))),b.outputPredictionError=this.get("outputPredictionError"),this.returnFeatureCollection||(b.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=p.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",
a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){if(this._form.validate()){this._saveBtn.set("disabled",!0);a={};var b={},c;a.inputLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.get("inputLayer")));a.field=this.get("field");a.interpolateOption=this.get("interpolateOption");a.classificationType=this.get("classificationType");"Manual"!==this.classificationType?a.numClasses=this.get("numClasses"):a.classBreaks=this.get("classBreaks");this.get("boundingPolygonLayer")&&(a.boundingPolygonLayer=
p.toJson(Q.constructAnalysisInputLyrObj(this.boundingPolygonLayer)));this.get("predictAtPointLayer")&&(a.predictAtPointLayer=p.toJson(Q.constructAnalysisInputLyrObj(this.predictAtPointLayer)));a.outputPredictionError=this.get("outputPredictionError");this.predictAtPointLayer&&this.get("outputPredictionError")?this.resultParameter=["predictedPointLayer","resultLayer","predictionError"]:this.predictAtPointLayer&&!this.get("outputPredictionError")?this.resultParameter=["predictedPointLayer","resultLayer"]:
!this.predictAtPointLayer&&this.get("outputPredictionError")&&(this.resultParameter=["resultLayer","predictionError"]);this.returnFeatureCollection||(a.OutputName=p.toJson({serviceProperties:{name:this.get("outputLayerName")}}));this.showChooseExtent&&!this.get("DisableExtent")&&this._useExtentCheck.get("checked")&&(a.context=p.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(c={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(c.extent=this.map.extent._normalize(!0)),a.context=p.toJson(c));a.returnFeatureCollection=this.returnFeatureCollection;b.jobParams=a;b.itemParams={description:this.i18n.itemDescription,tags:f.substitute(this.i18n.itemTags,{layername:this.inputLayer.name,fieldname:!a.field?"":a.field}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_save:function(){},_buildUI:function(){var d;d=!0;this._loadConnections();this.signInPromise.then(a.hitch(this,
Q.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));this.get("showSelectAnalysisLayer")&&(!this.get("inputLayer")&&this.get("inputLayers")&&this.set("inputLayer",this.inputLayers[0]),Q.populateAnalysisLayers(this,"inputLayer","inputLayers"));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),d=!1);this.inputLayer&&this._updateAnalysisLayerUI(d);this.classificationType&&this._classifySelect.set("value",this.classificationType);this.outputPredictionError&&
this._outoutPredictionsErrCheck.set("checked",this.outputPredictionError);if(this.boundingPolygonLayers){this._boundingAreaSelect.addOption({value:"-1",label:this.i18n.defaultBoundingOption,selected:!0});var e=!1;b.forEach(this.boundingPolygonLayers,function(a,b){"esriGeometryPolygon"===a.geometryType&&(e=this.get("boundingPolygonLayer")&&this.get("boundingPolygonLayer").name===a.name,this._boundingAreaSelect.addOption({value:b+1,label:a.name,selected:e}))},this)}Q.addReadyToUseLayerOption(this,[this._analysisSelect,
this._boundingAreaSelect,this._predictPointSelect]);this.classBreaks&&this._classBreaksInput.set("value",this.classBreaks.join().replace(/,/g," "));this.maxClasses&&(d=this._numClassesInput.get("constraints"),d.max=this.maxClasses,this._numClassesInput.set("constraints",d));this.minClasses&&(d=this._numClassesInput.get("constraints"),d.min=this.minClasses,this._numClassesInput.set("constraints",d));c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&
this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;Q.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none")},_updateAnalysisLayerUI:function(a){this.inputLayer&&(n.set(this._interpolateToolDescription,
"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.inputLayer.name})),a&&(this.outputLayerName=f.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name})),this._outputLayerInput.set("value",this.outputLayerName),this.set("fields",this.inputLayer),this.predictAtPointLayers&&(a=b.some(this._predictPointSelect.getOptions(),function(a){return"browse"===a.value},this),this._predictPointSelect.removeOption(this._predictPointSelect.getOptions()),this._predictPointSelect.addOption({value:"-1",
label:this.i18n.choosePointLayer,selected:!0}),b.forEach(this.predictAtPointLayers,function(a,b){var c=!0;if(a.url&&this.inputLayer.url&&a.url!==this.inputLayer.url)c=!1;else if(this.inputLayer!==a&&(!a.analysisReady||!this.inputLayer.analysisReady))c=!1;"esriGeometryPoint"===a.geometryType&&!c&&(c=this.get("predictAtPointLayer")&&this.get("predictAtPointLayer").name===a.name,this._predictPointSelect.addOption({value:b+1,label:a.name,selected:c}))},this),this.get("showReadyToUseLayers")&&a&&(this._predictPointSelect.addOption({type:"separator",
value:""}),this._predictPointSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle}))))},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._selectedwidget=0,this._browsedlg.show()):(this.inputLayer=this.inputLayers[a],this._updateAnalysisLayerUI(!0))},_handleBrowseItemsSelect:function(b){var c={};b&&b.selection&&
G.isDefined(this._selectedwidget)&&(0===this._selectedwidget?(c.layers=this.inputLayers,c.layersSelect=this._analysisSelect):1===this._selectedwidget?(c.layers=this.boundingPolygonLayers,c.layersSelect=this._boundingAreaSelect,c.posIncrement=1):2===this._selectedwidget&&(c.layers=this.predictAtPointLayers,c.layersSelect=this._predictPointSelect,c.posIncrement=1),c.item=b.selection,c.browseDialog=this._browsedlg,c.widget=this,Q.addAnalysisReadyLayer(c).always(a.hitch(this,function(){0===this._selectedwidget&&
this._handleAnalysisLayerChange(this._analysisSelect.get("value"))})))},_handleMethodChange:function(a){"NN"===a?(s.add(this._optionsDiv,"disabled"),s.contains(this._optionsDiv,"optionsOpen")&&(s.remove(this._optionsDiv,"optionsOpen"),s.add(this._optionsDiv,"optionsClose"))):(s.contains(this._optionsDiv,"disabled")&&s.remove(this._optionsDiv,"disabled"),"KG"===a?(c.set(this._barrierLabelRow,"display","none"),c.set(this._barrierSelectRow,"display","none"),c.set(this._speedLabelRow,"display",""),c.set(this._speedSliderRow,
"display","")):"LP"===a&&(c.set(this._barrierLabelRow,"display",""),c.set(this._barrierSelectRow,"display",""),c.set(this._speedLabelRow,"display","none"),c.set(this._speedSliderRow,"display","none")))},_handleOptimizeSliderChange:function(a){console.log(a,this._optimizeSlider.get("value"));this.set("interpolateOption",this._optimizeSlider.get("value"))},_handleFieldChange:function(a){},_handleOptionsBtnClick:function(){s.contains(this._optionsDiv,"disabled")||(s.contains(this._optionsDiv,"optionsClose")?
(s.remove(this._optionsDiv,"optionsClose"),s.add(this._optionsDiv,"optionsOpen")):s.contains(this._optionsDiv,"optionsOpen")&&(s.remove(this._optionsDiv,"optionsOpen"),s.add(this._optionsDiv,"optionsClose")))},_handleBoundingSelectChange:function(a){"browse"===a&&(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"polygon"'),this._selectedwidget=1,this._browsedlg.show())},_handleClick:function(a){},
_handlePredictPointSelectChange:function(a){"browse"===a&&(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._selectedwidget=2,this._browsedlg.show())},_handleBoundingBtnChange:function(a){a?(this.emit("drawtool-activate",{}),this._featureLayer||this._createBoundingPolyFeatColl(),this._predictPointDrawBtn.set("checked",!1),this._toolbar.activate(R.POLYGON)):(this._toolbar.deactivate(),
this._predictPointDrawBtn.get("checked")||this.emit("drawtool-deactivate",{}))},_handlePredictPointChange:function(a){a?(this.emit("drawtool-activate",{}),this._pointfeatureLayer||this._createPointFeatColl(),this._pointtoolbar.activate(R.POINT),this._bndgPolyDrawBtn.set("checked",!1)):(this._pointtoolbar.deactivate(),this._bndgPolyDrawBtn.get("checked")||this.emit("drawtool-deactivate",{}))},_handleClassifySelectChange:function(a){c.set(this._classifyOtherOptionLabelRow,"display","Manual"===a?"none":
"block");c.set(this._classifyOtherOptionInputRow,"display","Manual"===a?"none":"block");c.set(this._manualOptionInputRow,"display","Manual"===a?"block":"none");c.set(this._manualOptionLabelRow,"display","Manual"===a?"block":"none")},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!1));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!0))},_createBoundingPolyFeatColl:function(){var b=Q.createPolygonFeatureCollection(this.drawLayerName);this._featureLayer=new S(b,{id:this.drawLayerName});
this.map.addLayer(this._featureLayer);l.connect(this._featureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addFeatures:function(a){var c=[],d={},e=new C(C.STYLE_NULL,new O(O.STYLE_SOLID,new m([0,0,0]),4));a=new P(a,e);this.map.graphics.add(a);d.description="blayer desc";d.title="blayer";a.setAttributes(d);c.push(a);this._featureLayer.applyEdits(c,null,null);if(0===this.boundingPolygonLayers.length||this.boundingPolygonLayers[this.boundingPolygonLayers.length-
1]!==this._featureLayer)c=this.boundingPolygonLayers.push(this._featureLayer),d=this._boundingAreaSelect.getOptions(),this._boundingAreaSelect.removeOption(d),d=b.map(d,function(a){a.selected=!1;return a}),d.push({value:c,label:this._featureLayer.name,selected:!0}),this._boundingAreaSelect.addOption(d)},_createPointFeatColl:function(){var b=Q.createPointFeatureCollection(this.drawPointLayerName);this._pointfeatureLayer=new S(b,{id:this.drawPointLayerName});this.map.addLayer(this._pointfeatureLayer);
l.connect(this._pointfeatureLayer,"onClick",a.hitch(this,function(a){this.map.infoWindow.setFeatures([a.graphic])}))},_addPointFeatures:function(a){var c=[],d={},e=(new X({height:24,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"})).setOffset(0,12);a=new P(a,e);this.map.graphics.add(a);d.description="blayer desc";d.title="blayer";a.setAttributes(d);c.push(a);this._pointfeatureLayer.applyEdits(c,null,null);if(0===this.predictAtPointLayers.length||
this.predictAtPointLayers[this.predictAtPointLayers.length-1]!==this._pointfeatureLayer)c=this.predictAtPointLayers.push(this._pointfeatureLayer),d=this._predictPointSelect.getOptions(),this._predictPointSelect.removeOption(d),d=b.map(d,function(a){a.selected=!1;return a}),this._predictPointSelect.addOption({value:c,label:this._pointfeatureLayer.name,selected:!0}),this._predictPointSelect.addOption(d)},validateServiceName:function(a){return Q.validateServiceName(a,{textInput:this._outputLayerInput})},
validateClassBreaks:function(){var c,d=[],e=[],g,f;c=a.trim(this._classBreaksInput.get("value")).split(" ");if("Manual"!==this.get("classificationType"))return!0;if(!c&&"Manual"===this.get("classificationType")||2>c.length||c.length>this.maxClasses)return!1;b.some(c,function(h,l){h=k.parse(h);if(isNaN(h))return d.push(0),!1;if(e[c[l]])return e[c[l]]=!1,d.push(0),!1;e[c[l]]=!0;g=k.format(h,{locale:"root"});G.isDefined(g)?G.isDefined(g)||(g=k.format(h,{locale:"en-us"})):g=k.format(h,{locale:"en"});
G.isDefined(g)&&(f=a.trim(g).match(/\D/g));f&&0<f.length&&f&&b.forEach(f,function(a,b){"."===a||","===a||"-"===a&&0===b?d.push(1):d.push(0)})});return-1!==b.indexOf(d,0)?!1:!0},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setInputLayerAttr:function(a){this.inputLayer=a},_getInputLayerAttr:function(){return this.inputLayer},_setInputLayersAttr:function(a){this.inputLayers=a},_setFieldsAttr:function(a){var c=a.fields,
d,e;this._fieldSelect&&this._fieldSelect.removeOption(this._fieldSelect.getOptions());b.forEach(c,function(c,g){c.name!==a.objectIdField&&-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],c.type)&&(d={value:c.name,label:G.isDefined(c.alias)&&""!==c.alias?c.alias:c.name},this.field&&d.value===this.field&&(d.selected="selected",e=c.name),this._fieldSelect.addOption(d))},this);e&&this._fieldSelect.set("value",e)},_setFieldAttr:function(a){this.field=
a},_getFieldAttr:function(){this._fieldSelect&&(this.field=this._fieldSelect.get("value"));return this.field},_setInterpolateOptionAttr:function(a){this.interpolateOption=a},_getInterpolateOptionAttr:function(){this._optimizeSlider&&(this.interpolateOption=Math.floor(this._optimizeSlider.get("value")));return this.interpolateOption},_setClassificationTypeAttr:function(a){this.classificationType=a},_getClassificationTypeAttr:function(){this._classifySelect&&(this.classificationType=this._classifySelect.get("value"));
return this.classificationType},_getNumClassesAttr:function(){this._numClassesInput&&(this.numClasses=this._numClassesInput.get("value"));return this.numClasses},_setNumClassesAttr:function(a){this.numClasses=a},_setMaxClassesAttr:function(a){this.maxClasses=a},_getMaxClassesAttr:function(){return this.maxClasses},_setMinClassesAttr:function(a){this.minClasses=a},_getMinClassesAttr:function(){return this.minClasses},_getClassBreaksAttr:function(){if(this._classBreaksInput){var c=a.trim(this._classBreaksInput.get("value")).split(" "),
d=[];b.forEach(c,function(a){d.push(k.parse(a))});this.classBreaks=d}return this.classBreaks},_setClassBreaksAttr:function(a){a&&(this.classBreaks=a)},_getBoundingPolygonLayerAttr:function(){this._boundingAreaSelect&&(this.boundingPolygonLayer=null,"-1"!==this._boundingAreaSelect.get("value")&&(this.boundingPolygonLayer=this.boundingPolygonLayers[this._boundingAreaSelect.get("value")-1]));return this.boundingPolygonLayer},_setBoundingPolygonLayerAttr:function(a){this.boundingPolygonLayer=a},_setBoundingPolygonLayersAttr:function(a){this.boundingPolygonLayers=
a},_getPredictAtPointLayerAttr:function(){this._predictPointSelect&&(this.predictAtPointLayer=null,"-1"!==this._predictPointSelect.get("value")&&(this.predictAtPointLayer=this.predictAtPointLayers[this._predictPointSelect.get("value")-1]));return this.predictAtPointLayer},_setPredictAtPointLayerAttr:function(a){this.predictAtPointLayer=a},_setPredictAtPointLayersAttr:function(a){this.predictAtPointLayers=a},_getOutputPredictionErrorAttr:function(){this._outoutPredictionsErrCheck&&(this.outputPredictionError=
this._outoutPredictionsErrCheck.get("checked"));return this.outputPredictionError},_setOutputPredictionErrorAttr:function(a){this.outputPredictionError=a},_getOutputLayerNameAttr:function(){this._outputLayerInput&&(this.outputLayerName=this._outputLayerInput.get("value"));return this.outputLayerName},_setOutputLayerNameAttr:function(a){this.outputLayerName=a},_setMapAttr:function(b){this.map=b;this._toolbar=new R(this.map);l.connect(this._toolbar,"onDrawEnd",a.hitch(this,this._addFeatures));this._pointtoolbar=
new R(this.map);l.connect(this._pointtoolbar,"onDrawEnd",a.hitch(this,this._addPointFeatures))},_getMapAttr:function(){return this.map},_setDrawLayerNameAttr:function(a){this.drawLayerName=a},_getDrawLayerNameAttr:function(){return this._featureLayer.name},_setDrawPointLayerNameAttr:function(a){this.drawPointLayerName=a},_getDrawPointLayerNameAttr:function(){return this._pointfeatureLayer.name},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_getDrawLayerAttr:function(){var a=
[];this._featureLayer&&a.push(this._featureLayer);this._pointfeatureLayer&&a.push(this._pointfeatureLayer);return a},_setDisableExtentAttr:function(a){this._useExtentCheck.set("checked",!a);this._useExtentCheck.set("disabled",a)},_getDisableExtentAttr:function(){this._useExtentCheck.get("disabled")},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))}});r("extend-esri")&&a.setObject("dijit.analysis.InterpolatePoints",h,F);return h})},"esri/declare":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./extend"],function(h,d,a){return function(b,l,m){var p=d.isString(b);p?m.declaredClass=b:(m=l,l=b);l=h(l,m);p&&a(b,l);return l}})},"esri/dijit/geoenrichment/DataBrowser/DataCategoriesPage":function(){define("../../../declare dojo/string dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dojo/has dojo/i18n!../../../nls/jsapi dojo/text!./templates/DataCategoriesPage.html ../../../tasks/geoenrichment/GeoenrichmentTask ../config ../_WizardPage ../Pagination ../AnimationHelper dojo/store/Memory dijit/layout/ContentPane dijit/form/FilteringSelect ./SearchTextBox".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g){f=f.geoenrichment.dijit.DataCategoriesPage;return h([t],{templateString:c,nls:f,baseClass:"DataCategoriesPage",items:null,countryID:null,countryBox:!0,dataCollections:{},rowsPerPage:8,_task:null,_list:null,_pageCount:0,_pageSize:0,currentPage:0,shoppingCart:null,selection:null,flyAnim:null,scrollAnim:null,constructor:function(){this._task=new n(u.server);this._task.token=u.token;this.scrollAnim=new k;this._ltr=p.isBodyLtr()},buildRendering:function(){this.inherited(arguments);
this.pagination.createItemContainer=this._createItemContainer;this.pagination.updateItemContainer=this._updateItemContainer;b.after(this.layoutGrid,"resize",a.hitch(this.pagination,this.pagination.resize))},startup:function(){this.inherited(arguments);this.countryBox?(this.countrySelect.set("labelAttr","label"),this.countrySelect.set("searchAttr","label"),this.countrySelect.store.idProperty="value",this.countrySelect.set("item",{value:"_",label:f.loading},null,f.loading),this.countrySelect.set("disabled",
!0),this.showProgress(this._task.getAvailableCountries(),"_onCountriesResponse")):(m.destroy(this.countryDiv),this._loadDataCollections())},_createItemContainer:function(){var a=m.create("div",{"class":"DataCategoriesPage_Item"});m.create("span",null,a);return a},_updateItemContainer:function(a,b){a.childNodes[0].innerHTML=b.name;a.className="DataCategoriesPage_Item DataBrowser_Clickable DataCategoriesPage_Item_"+b.id.replace(/ /g,"_");a.data=b},_onItemClick:function(a){if(this.flyAnim){if(!this._ltr){var b=
p.position(a);a.style.right=""+(window.innerWidth-b.x-b.w)+"px"}b=this.flyAnim.fly(a,"Breadcrumb_SelectCategory");b.innerHTML="";l.remove(b,"DataBrowser_Clickable");this._ltr||(a.style.right="auto")}this.onSelect(a.data)},_coerceCurrentPage:function(a){0>a?a=0:a>=this._pageCount&&(a=this._pageCount-1);return a},_back:function(){this.set("currentPage",this.currentPage-1)},_forward:function(){this.set("currentPage",this.currentPage+1)},_onCountriesResponse:function(a){this.countrySelect.set("disabled",
!1);for(var b=[{value:"_",label:f.global}],c=0;c<a.length;c++)b.push({value:a[c].id,label:a[c].name});a=new g({data:b,idProperty:"value"});this.countrySelect.set("store",a);this.countrySelect.set("value",this.countryID||"_")},_onCountryChanged:function(){var a=this.countrySelect.get("value");"_"==a&&(a=null);this._set("countryID",a);this._loadDataCollections()},_setCountryIDAttr:function(a){this.countryID!=a&&(this._set("countryID",a),this._started&&this._loadDataCollections())},_loadDataCollections:function(){this.cancelProgress("_onDataCollectionsResponse");
this.showProgress(this._task.getDataCollections(this.countryID,null,"id alias type description popularity fieldCategory vintage filteringTags".split(" ")),"_onDataCollectionsResponse")},_onDataCollectionsResponse:function(a){this.dataCollections||(this.dataCollections={});this.dataCollections[this.countryID]=a?a:{};for(var b={},c=[],d=this.selection,e,g=0;g<a.length;g++){var f=a[g];f.fieldCategories={};if(f.metadata.filters)for(e=0;e<f.metadata.filters.length;e++)f.metadata.filters[e].id=f.metadata.filters[e].id.replace("Diposable",
"Disposable");if(f.metadata.categories){if(f.variables)for(var k=0;k<f.variables.length;k++){f.variables[k].id2=f.id+"."+f.variables[k].id;f.variables[k].hidden=0;f.variables[k].idDesc=f.variables[k].id+"."+f.variables[k].description;for(e=0;e<f.variables[k].filteringTags;e++)f.variables[k].filteringTags[e].value=f.variables[k].filteringTags[e].value.replase("$","");if(d&&d.length)for(e=0;e<d.length;e++)if(d[e]===f.variables[k].id2){c.push(f.variables[k]);break}}for(e=0;e<f.metadata.categories.length;e++){var h=
f.metadata.categories[e],k=h.id.toLowerCase();b[k]?b[k].dataCollections.push(f):b[k]={id:k,name:h.alias,dataCollections:[f],displayOrder:h.displayOrder}}}}this.shoppingCart.setVariables(c);a=[];for(h in b)b.hasOwnProperty(h)&&(b[h].dataCollections.sort(function(a,b){return b.metadata.title<a.metadata.title?1:-1}),a.push(b[h]));a.sort(function(a,b){return b.displayOrder-a.displayOrder});this.set("items",a)},_setItemsAttr:function(a){this._set("items",a);this.pagination.set("items",a);this._started&&
this.resize()},onSelect:function(a){},_search:function(){if(this.txbSearch.get("value")){for(var a=this.txbSearch.get("value"),b=this.get("items"),c=[],e,g,k=0;k<b.length;k++)for(var h=0;h<b[k].dataCollections.length;h++){g=b[k].dataCollections[h];e={id:g.id,metadata:g.metadata,keywords:g.keywords,variables:[]};for(var l=0;l<g.variables.length;l++)this._match(g.variables[l],a)&&e.variables.push(g.variables[l]);0<e.variables.length&&c.push(e)}0<c.length?(this._set("selectedCollections",c),this.onSearch("'"+
a+"'")):this.txbSearch.showTooltip(d.substitute(f.noResults,{seachKey:a}))}},_match:function(a,b){return a.alias&&-1!==a.alias.toLowerCase().indexOf(b.toLowerCase())||a.description&&-1!==a.description.toLowerCase().indexOf(b.toLowerCase())||a.fieldCategory&&-1!==a.fieldCategory.toLowerCase().indexOf(b.toLowerCase())},onSearch:function(){}})})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u){return l("dijit.form._FormSelectWidget",u,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(e.isArray(a))return h.map(a,"return this.getOptions(item);",this);e.isString(a)&&(a={value:a});e.isObject(a)&&(h.some(b,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){h.forEach(e.isArray(a)?a:[a],function(a){a&&e.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(e.isArray(a)?
a:[a]);h.forEach(a,function(a){a&&(this.options=h.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){h.forEach(e.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,c){r.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,b,c)},_deprecatedSetStore:function(f,l,k){var g=this.store;k=k||{};if(g!==f){for(var m;m=this._notifyConnections.pop();)m.remove();f.get||(e.mixin(f,{_oldAPI:!0,get:function(a){var b=new d;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new d(function(){f.abort&&f.abort()});c.total=new d;var f=this.fetch(e.mixin({query:a,onBegin:function(a){c.total.resolve(a)},
onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new n(c)}}),f.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[a.after(f,"onNew",e.hitch(this,"_onNewItem"),!0),a.after(f,"onDelete",e.hitch(this,"_onDeleteItem"),!0),a.after(f,"onSet",e.hitch(this,"_onSetItem"),!0)]));this._set("store",f)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);k.query&&this._set("query",k.query);k.queryOptions&&this._set("queryOptions",k.queryOptions);f&&f.query&&(this._loadingStore=!0,this.onLoadDeferred=new d,this._queryRes=f.query(this.query,this.queryOptions),c(this._queryRes,e.hitch(this,function(a){if(this.sortByLabel&&!k.sort&&a.length)if(f.getValue)a.sort(b.createSortFunction([{attribute:f.getLabelAttributes(a[0])[0]}],f));else{var c=this.labelAttr;a.sort(function(a,b){return a[c]>b[c]?1:b[c]>
a[c]?-1:0})}k.onFetch&&(a=k.onFetch.call(this,a,k));h.forEach(a,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(e.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:l);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(a):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return g},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=e.isArray(a)?h.map(a,function(a){return e.isObject(a)?a:{value:a}}):e.isObject(a)?[a]:[{value:a}];a=h.filter(this.getOptions(a),function(a){return a&&a.value});var c=this.getOptions()||[];if(!this.multiple&&(!a[0]||!a[0].value)&&c.length)a[0]=c[0];h.forEach(c,
function(b){b.selected=h.some(a,function(a){return a.value===b.value})});c=h.map(a,function(a){return a.value});if(!("undefined"==typeof c||"undefined"==typeof c[0])){var d=h.map(a,function(a){return a.label});this._setDisplay(this.multiple?d:d[0]);this.inherited(arguments,[this.multiple?c:c[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=h.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},
_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(h.forEach(this._getChildren(),function(a){a.destroyRecursive()}),h.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;h.forEach(this._getChildren(),function(c){var d=h.some(a,function(a){return c.option&&
a===c.option.value});d&&!b.multiple&&(b.focusedChild=c);p.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=h.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?h.map(h.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?f("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+r._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);a.after(this,"onChange",e.hitch(this,"_updateSelection"));var b=this.store;if(b&&(b.getIdentity||b.getFeatures()["dojo.data.api.Identity"]))this.store=null,this._deprecatedSetStore(b,this._oValue,
{query:this.query,queryOptions:this.queryOptions});this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(h,d,a,b,l){h=h([l],{declaredClass:"esri.toolbars._Toolbar",constructor:function(a){this.map=a},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",
box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(a,b,d,e){var f=this.map;a&&(this._mapNavState={isDoubleClickZoom:f.isDoubleClickZoom,isClickRecenter:f.isClickRecenter,isPan:f.isPan,isRubberBandZoom:f.isRubberBandZoom,isKeyboardNavigation:f.isKeyboardNavigation,isScrollWheelZoom:f.isScrollWheelZoom},f.disableDoubleClickZoom(),f.disableClickRecenter(),f.disablePan(),f.disableRubberBandZoom(),f.disableKeyboardNavigation());b&&f.hideZoomSlider();d&&f.hidePanArrows();
e&&f.graphics.disableMouseEvents()},_activateMapTools:function(a,b,d,e){var f=this.map,c=this._mapNavState;a&&c&&(c.isDoubleClickZoom&&f.enableDoubleClickZoom(),c.isClickRecenter&&f.enableClickRecenter(),c.isPan&&f.enablePan(),c.isRubberBandZoom&&f.enableRubberBandZoom(),c.isKeyboardNavigation&&f.enableKeyboardNavigation(),c.isScrollWheelZoom&&f.enableScrollWheelZoom());b&&f.showZoomSlider();d&&f.showPanArrows();e&&f.graphics.enableMouseEvents()}});a("extend-esri")&&d.setObject("toolbars._Toolbar",
h,b);return h})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(h,d,a,b,l){h=h(null,{declaredClass:"esri.InfoTemplate",constructor:function(a,b){a&&d.isObject(a)&&!d.isFunction(a)?d.mixin(this,a):(this.title=a||"${*}",this.content=b||"${*}")},setTitle:function(a){this.title=a;return this},setContent:function(a){this.content=a;return this},toJson:function(){return l.fixJson({title:this.title,content:this.content})}});a("extend-esri")&&
(b.InfoTemplate=h);return h})},"dojox/mvc/at":function(){define(["dojo/_base/kernel","dojo/_base/lang","./sync","./_atBindingExtension"],function(h,d,a){h.experimental("dojox.mvc");h=function(b,d){return{atsignature:"dojox.mvc.at",target:b,targetProp:d,bindDirection:a.both,direction:function(a){this.bindDirection=a;return this},transform:function(a){this.converter=a;return this},equals:function(a){this.equalsCallback=a;return this}}};h.from=a.from;h.to=a.to;h.both=a.both;return d.setObject("dojox.mvc.at",
h)})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(h,d,a,b,l,m,p,r){h=h([m,p],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(a,b){d.mixin(this,b);this.initialize(a,b)},getTitle:function(a){var b;this.info&&(b=this.titleHasRelatedFields?"":this._getPopupValues(a,!0).title);return b||""},getContent:function(a){return this.info?
(new r({template:this,graphic:a,chartTheme:this.chartTheme},b.create("div"))).domNode:""}});a("extend-esri")&&d.setObject("dijit.PopupTemplate",h,l);return h})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(h,d,a,b,l){h=h(l,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(a,b,d,e){this.observationRenderer=a;this.latestObservationRenderer=b;this.trackRenderer=d;this.observationAger=e},getSymbol:function(a){var b=
a.getLayer(),d=this.getObservationRenderer(a),e=d&&d.getSymbol(a),f=this.observationAger;b.timeInfo&&(b._map.timeExtent&&d===this.observationRenderer&&f&&e)&&(e=f.getAgedSymbol(e,a));return e},getObservationRenderer:function(a){return 0===a.getLayer()._getKind(a)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var a={type:"temporal"};a.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(a.latestObservationRenderer=
this.latestObservationRenderer.toJson());this.trackRenderer&&(a.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(a.observationAger=this.observationAger.toJson());return a}});a("extend-esri")&&d.setObject("renderer.TemporalRenderer",h,b);return h})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(h,d,a,b,l,m){h=h(null,{declaredClass:"esri.symbol.Font",constructor:function(h,l,e,f,c){h?d.isObject(h)?
d.mixin(this,h):(this.size=h,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==l&&(this.style=l),void 0!==e&&(this.variant=e),void 0!==f&&(this.weight=f),void 0!==c&&(this.family=c)):d.mixin(this,b.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&(this.size&&d.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=b.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(a){this.size=this._convert2PxSize(a);return this},
_convert2PxSize:function(a){var h;parseFloat(a)==a?h=a:d.isString(a)&&(-1<a.indexOf("pt")?h=b.pt2px(parseFloat(a)):-1<a.indexOf("px")?h=parseFloat(a):-1<a.indexOf("em")?h=b.pt2px(12*parseFloat(a)):-1<a.indexOf("%")&&(h=b.pt2px(0.12*parseFloat(a))));return h},setStyle:function(a){this.style=a;return this},setVariant:function(a){this.variant=a;return this},setWeight:function(a){this.weight=a;return this},setFamily:function(a){this.family=a;return this},setDecoration:function(a){this.decoration=a;return this},
toJson:function(){return m.fixJson({size:b.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}});d.mixin(h,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});a("extend-esri")&&d.setObject("symbol.Font",h,l);return h})},"esri/dijit/analysis/ExpressionGrid":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/store/Memory dojo/store/Observable dojo/Evented dojo/_base/event dojo/window dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/ToggleButton dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/Dialog dijit/InlineEditBox dgrid/OnDemandGrid dgrid/Keyboard dgrid/Selection dgrid/selector dgrid/extensions/DijitRegistry dgrid/util/mouse ./tree put-selector/put ../../kernel ../../lang ./ExpressionForm dojo/i18n!../../nls/jsapi dojo/text!./templates/ExpressionGrid.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S,P,Q,T,X,aa,U,Z){var V;V=d([P,L,O,C,W]);h=d([v,z,x,A,E,g],{declaredClass:"esri.dijit.analysis.ExpressionGrid",templateString:Z,widgetsInTemplate:!0,indentWidth:10,refreshOptions:{keepScrollPosition:!0},allowAllInputOperands:!1,_selectedIds:[],constructor:function(a){a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
this.i18n={};a.mixin(this.i18n,U.common);a.mixin(this.i18n,U.analysisTools);a.mixin(this.i18n,U.analysisMsgCodes);a.mixin(this.i18n,U.expressionGrid)},postCreate:function(){this.inherited(arguments);var c;this.expressionStore=k(new s({idProperty:"id",allExpressionText:"",data:[{id:0,operator:"",expressionText:""}],getChildren:function(a){return this.query({parent:a.id})},getAllChildren:function(a){var c,d;c=this.getChildren(a);0<c.total&&b.forEach(c,function(a){d=this.getAllChildren(a);0<d.total&&
b.forEach(d,function(a){c[c.total]=a;c.total+=1},this)},this);return c},getExpressions:function(a,c){var d,e,f,g,k;d=this.getChildren(a);0<d.total?(f=[],g={},g.operator=a.operator,g.layer=a.layer,a.where?g.where=a.where:(g.selectingLayer=a.selectingLayer,g.spatialRel=a.spatialRel,a.distance&&(g.distance=a.distance,g.units=a.units)),-1===this.allExpressionText.indexOf(a.text)&&(this.allExpressionText+=a.operator+" ( "+a.text+" "),f.push(g),b.forEach(d,function(a,b){e=this.getExpressions(a,b===d.total-
1?!0:!1);k=this.getChildren(a);0<k.total&&(a._isAdd||(this.allExpressionText+=")"),a._isAdd=!0);f.push(e)},this)):(f={},f.operator=a.operator,f.layer=a.layer,a.where?f.where=a.where:(f.selectingLayer=a.selectingLayer,f.spatialRel=a.spatialRel,a.distance&&(f.distance=a.distance,f.units=a.units)),-1===this.allExpressionText.indexOf(a.text)&&(this.allExpressionText+=a.operator+" "+a.text+" ",c&&!0===c&&(this.allExpressionText+=")")));return f},getLabel:function(a){return a.text},mayHaveChildren:function(a){return 1!==
a.id}}));c={operator:P({label:"",renderCell:a.hitch(this,this._renderExpOperatorCell),shouldExpand:function(){return!0},sortable:!1,indentWidth:10,renderExpando:function(a,b,c,d){a=Q("div.dgrid-expando-icon[style\x3dwidth:0;height:0;]");a.innerHTML=" ";return a}})};this.expressiongrid=new V({store:this.expressionStore,query:{expressionText:""},selectionMode:"extended",columns:c,showHeader:!1,allowSelectAll:!0,allowSelect:function(a){return a&&a.data&&0===a.data.id?!1:!0}},this._gridDiv);this.expressiongrid.on("dgrid-select",
a.hitch(this,this._handleExpressiongridSelect));this.expressiongrid.startup();this.expressiongrid.keepScrollPosition=!0;this.allowAllInputOperands?this._expressionForm.set("firstOperands",this.inputLayers):this._expressionForm.set("firstOperands",[this.analysisLayer]);this._expressionForm.set("selectedFirstOperand",this.analysisLayer);this._expressionForm.set("inputOperands",this.inputLayers);this._expressionForm.set("showReadyToUseLayers",this.get("showReadyToUseLayers"));this._expressionForm.set("showReadyLayersForFirst",
this.allowAllInputOperands);this._expressionForm.set("owningWidget",this.get("owningWidget"));this._expressionForm.init();this._expressionForm.on("add-expression",a.hitch(this,this._handleExpressionFormAdd));this._expressionForm.on("cancel-expression",a.hitch(this,this._handleExpressionFormCancel))},_handleExpressiongridSelect:function(a){var c,d;if((this._selectedObj=a.grid.selection)&&this._selectedIds&&0<this._selectedIds.length){d=!0;a=this._selectedIds.toString();for(c in this._selectedObj)this._selectedObj.hasOwnProperty(c)&&
(c=parseInt(c,10),d=-1!==a.indexOf(c));if(d)return}this._selectedIds=[];this._selectedRows=[];for(c in this._selectedObj)this._selectedObj.hasOwnProperty(c)&&(c=parseInt(c,10),!0===this._selectedObj[c]&&0!==c&&(this._selectedIds.push(c),this._selectedRows.push(this.expressiongrid.cell(c).row),a=this.expressiongrid.cell(c).row.data,a=this.expressionStore.getAllChildren(a),0<a.total&&b.forEach(a,function(a){this._selectedIds.push(a.id);this._selectedRows.push(this.expressiongrid.cell(a.id).row);this.expressiongrid.select(a.id)},
this)),!0===this._selectedObj[c]&&0===c&&(this._groupBtn.set("disabled",!0),this._ungroupBtn.set("disabled",!0),this._removeBtn.set("disabled",!0),this._editBtn.set("disabled",!0),this._addBtn.set("disabled",!1),this._viewBtn.set("disabled",!0)));0<this._selectedIds.length&&(c=1===this._selectedIds.length,this._groupBtn.set("disabled",c||3>=this.expressionStore.data.length),this._ungroupBtn.set("disabled",c||3>=this.expressionStore.data.length),this._removeBtn.set("disabled",!1),this._editBtn.set("disabled",
!c),this._addBtn.set("disabled",!c),this._viewBtn.set("disabled",!1))},_renderExpOperatorCell:function(b,d,e,g){if(b.expressionText){if(b.expressionText){var k,h,l,m;m=0;h=this._gridPane.isRTL?"marginRight":"marginLeft";k=n.create("table",{"class":"esriExpressionTable"},e);1<g.level?(l=g.level*g.level*this.indentWidth+8+"px",f.set(k,h,l)):f.set(k,h,"5px");k=n.create("tr",{},k);h=this.expressionStore.getAllChildren(b);0<g.level&&0<h.total&&(m=1===g.level?2*this.indentWidth*g.level+24:2*this.indentWidth*
g.level+this.indentWidth);g=n.create("td",{"class":"expressionTd"},k);f.set(g,"width","32px");h=n.create("td",{"class":"expressionTd"},k);f.set(h,"width",m+"px");h=n.create("div",{},h);f.set(h,"width",m+"px");d?n.create("div",{innerHTML:this.i18n[d],name:b.operator,id:b.id,"class":"esriAnalysisOperatorButton",onclick:a.hitch(this,function(a){q.stop(a);a=a.target;var b,d;b=this.expressionStore.get(a.id);this.expressiongrid.clearSelection();this._selectedRows=[];this._selectedIds=[];d=c.get(a,"name");
a.innerHTML="and"===d?this.i18n.or:this.i18n.and;c.set(a,"name","and"===d?"or":"and");b.operator="and"===d?"or":"and";this.expressionStore.put(b);this.expressiongrid.refresh(this.refreshOptions)})},g,"first"):n.create("div",{style:"width:32px;"},g);d=n.create("td",{"class":"esriAnalysisExpression expressionTd"},k);n.create("label",{"class":"",title:this.expressionStore.getLabel(b),innerHTML:b.expressionText},d)}}else 1===this.expressionStore.data.length?n.create("label",{innerHTML:this.i18n.addExprDescription,
style:{fontStyle:"italic",textAlign:"center",display:"inline-block",width:"105%",fontWeight:"lighter"}},e):f.set(e,"display","none");return e},_clear:function(){this._selectedIds=[];this.expressiongrid.clearSelection();this.expressiongrid.refresh(this.refreshOptions);this._groupBtn.set("disabled",!0);this._ungroupBtn.set("disabled",!0);this._removeBtn.set("disabled",!0);this._editBtn.set("disabled",!0);this._addBtn.set("disabled",!1);this._viewBtn.set("disabled",1===this.expressionStore.data.length?
!0:!1);1===this.expressionStore.data.length&&(this.allowAllInputOperands?this._expressionForm.set("firstOperands",this.inputLayers):this._expressionForm.set("firstOperands",[this.analysisLayer]),this._expressionForm.set("selectedFirstOperand",this.analysisLayer),this._expressionForm.set("inputOperands",this.inputLayers))},_handleAddButtonClick:function(a){this._expDialog.set("title",this.i18n.addExpr);this._expressionForm.set("action","add");this._expressionForm.clear();this._expDialog.show()},_handleEditButtonClick:function(a){q.stop(a);
this._expDialog.set("title",this.i18n.editExpr);if(this._selectedIds&&0===this._selectedIds.length)return!1;a=this.expressionStore.get(this._selectedIds[0]);this._expressionForm.set("action","edit");this._expressionForm.clear();this._expressionForm.set("expression",a);this._expDialog.show()},_handleRemoveButtonClick:function(a){q.stop(a);if(this._selectedIds&&0===this._selectedIds.length)return!1;b.forEach(this._selectedIds,function(a){this.expressionStore.remove(a)},this);this._clear();this.emit("update-expressions",
this.expressionStore.query())},_handleGroupButtonClick:function(a){var c,d;if(this._selectedIds&&0===this._selectedIds.length)return!1;a=b.map(this._selectedIds,function(a){return parseInt(a,10)});c=this._arrayMin(a);b.forEach(this._selectedRows,function(a,b){d=this.expressiongrid.cell(this._selectedRows[b].id);1<this._selectedRows[b].id&&this._selectedRows[b].id!==c&&(0===d.row.data.parent&&this.expressionStore.mayHaveChildren(this.expressionStore.get(c))&&(d.row.data.parent=c),this.expressionStore.put(d.row.data));
this.expressiongrid.refresh(this.refreshOptions)},this);this._clear()},_handleUngroupButtonClick:function(a){var c,d;if(this._selectedIds&&0===this._selectedIds.length)return!1;a=b.map(this._selectedIds,function(a){return parseInt(a,10)});c=this._arrayMin(a);b.forEach(this._selectedRows,function(a,b){d=this.expressiongrid.cell(this._selectedRows[b].id);1<this._selectedRows[b].id&&this._selectedRows[b].id!==c&&(d.row.data.parent===c&&(d.row.data.parent=0),this.expressionStore.put(d.row.data));this.expressiongrid.refresh(this.refreshOptions)},
this);this._clear()},_handleExpressionFormAdd:function(b){var c={},d;"add"===b.action?(c={id:this.expressionStore.data.length,operator:1===this.expressionStore.data.length?"":"and"},0===this._selectedIds.length?c.parent=0:1===this._selectedIds.length&&(d=parseInt(this._selectedIds[0],10),c.parent=this.expressionStore.mayHaveChildren(this.expressionStore.get(d))?d:0)):(c=this.expressionStore.get(parseInt(this._selectedIds[0],10)),c.where&&b.expression.spatialRel&&delete c.where,c.spatialRel&&b.expression.where&&
(delete c.spatialRel,delete c.selectingLayer,c.distance&&(delete c.distance,delete c.units)));a.mixin(c,b.expression);c.expressionText=b.displayText;c.text=b.text;this.expressionStore.put(c);this.expressiongrid.refresh(this.refreshOptions);this._expDialog.hide();this.allowAllInputOperands||this._updateFirstOperands(b.expression);this._clear();this.validate();this.emit("update-expressions",this.expressionStore.query())},_handleExpressionFormCancel:function(){this._expDialog.hide();this._clear()},_handleViewButtonClick:function(a){this._viewBtn.set("label",
a?this.i18n.viewGrid:this.i18n.viewText);this._viewBtn.set("iconClass",a?"esriAnalysisGridIcon":"esriAnalysisTextIcon");a&&(this._groupBtn.set("disabled",a),this._ungroupBtn.set("disabled",a),this._removeBtn.set("disabled",a),this._editBtn.set("disabled",a),this._addBtn.set("disabled",a));this.get("expressions");f.set(this._textDiv,"display",a?"":"none");f.set(this._gridDiv,"display",a?"none":"");c.set(this._textDiv,"innerHTML",a?this.expressionStore.allExpressionText:"");a||this._clear()},_updateFirstOperands:function(a){a=
this.get("selectedLayers");this._expressionForm.set("firstOperands",a)},_getInputLayerById:function(a){b.forEach(this.inputLayers,function(b){if(b.id===a)return b},this)},_arrayMin:function(a){return Math.min.apply(Math,a)},_setInputLayersAttr:function(a){this.inputLayers=a},_getInputLayersAttr:function(){return this.inputLayers},_setAnalysisLayerAttr:function(a){this.analysisLayer=a},_getAnalysisLayerAttr:function(){return this.analysisLayer},_setSelectedLayersAttr:function(a){this.selectedLayers=
a},_getSelectedLayersAttr:function(){var a=[],c=[];b.forEach(this.expressionStore.data,function(d,e){X.isDefined(d.layer)&&-1===b.indexOf(a,d.layer)&&(a.push(d.layer),c.push(this.inputLayers[d.layer]));X.isDefined(d.selectingLayer)&&-1===b.indexOf(a,d.selectingLayer)&&(a.push(d.selectingLayer),c.push(this.inputLayers[d.selectingLayer]))},this);this.selectedLayers=c;this.set("selectedLayerIds",a);return this.selectedLayers},_setSelectedLayerIdsAttr:function(a){this.selectedLayerIds=a},_getSelectedLayerIdsAttr:function(){return this.selectedLayerIds},
_getSelectedLayersMapAttr:function(){var a={};a.inputLayers=this.get("inputLayers");a.selectedLayers=this.get("selectedLayers");a.selectedLayerIds=this.get("selectedLayerIds");return a},_getExpressionsAttr:function(){var a=[],c,d;this.expressionStore.allExpressionText="";b.forEach(this.expressionStore.data,function(a,b){a._isAdd=!1});b.forEach(this.expressionStore.data,function(b,e){0!==e&&(d={},d.operator=b.operator,d.layer=b.layer,b.where?d.where=b.where:(d.selectingLayer=b.selectingLayer,d.spatialRel=
b.spatialRel,b.distance&&(d.distance=b.distance,d.units=b.units)),this._findElementInMultiArray(a,d)||(c=this.expressionStore.getExpressions(b),a.push(c)))},this);return a},_getExpressionMapAttr:function(){var a,b;a=this.get("selectedLayersMap");b=this.get("expressions");console.log(this.expressionStore.allExpressionText);b=this._updateExpressions(b,a);return{expressions:b,inputLayers:a.selectedLayers,expressionString:this.expressionStore.allExpressionText}},_setShowReadyToUseLayersAttr:function(a){this._set("showReadyToUseLayers",
a)},_setOwningWidgetAttr:function(a){this._set("owningWidget",a)},_updateExpressions:function(a,c){b.forEach(a,function(a,d){a instanceof Array||a.length?this._updateExpressions(a,c):(X.isDefined(a.layer)&&-1!==b.indexOf(c.selectedLayerIds,a.layer)&&(a.layer=b.indexOf(c.selectedLayerIds,a.layer)),X.isDefined(a.selectingLayer)&&-1!==b.indexOf(c.selectedLayerIds,a.selectingLayer)&&(a.selectingLayer=b.indexOf(c.selectedLayerIds,a.selectingLayer)))},this);return a},_findElementInMultiArray:function(a,
c){var d=!1;b.forEach(a,function(a,b){if(r.stringify(c)===r.stringify(a))return d=!0;if(a instanceof Array||a.length)d=this._findElementInMultiArray(a,c)},this);return d},_setPrimaryActionButttonClassAttr:function(a){this.primaryActionButttonClass=a},_getCssClassesAttr:function(){return this.primaryActionButttonClass},validate:function(){var a;(a=1!==this.expressionStore.data.length)?f.set(this.expressiongrid.domNode,"borderColor","#bba"):(w.scrollIntoView(this.expressiongrid.domNode),this.expressiongrid.focus(),
f.set(this.expressiongrid.domNode,"borderColor","#f94"));return a}});p("extend-esri")&&a.setObject("dijit.analysis.ExpressionGrid",h,T);return h})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(h,d,a,b,l,m,p,r,e){var f=d.getObject("dojox.gfx",!0),c=f._base={};f._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+
" ").indexOf(" "+b+" ")};f._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};f._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};c._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c,d;b("ie")&&(d=l.doc.documentElement.style.fontSize||
"",d||(l.doc.documentElement.style.fontSize="100%"));var e=r.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},l.body());for(c in a)e.style.fontSize=c,a[c]=16*Math.round(12*e.offsetHeight/16)/12/1E3;b("ie")&&(l.doc.documentElement.style.fontSize=d);l.body().removeChild(e);return a};var n=null;c._getCachedFontMeasurements=function(a){if(a||!n)n=c._getFontMeasurements();
return n};var u=null,t={};c._getTextBox=function(a,b,c){var d,f,h=arguments.length,m;u||(u=r.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},l.body()));d=u;d.className="";f=d.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<h&&b)for(m in b)m in t||(f[m]=b[m]);2<h&&c&&(d.className=c);d.innerHTML=a;d.getBoundingClientRect?(f=d.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=e.getMarginBox(d);
d.innerHTML="";return f};c._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?0.75:1);return e};c._computeTextBoundingBox=function(a){if(!f._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var d=a.getFont()||f.defaultFont;a=a.getTextWidth();d=f.normalizedLength(d.size);b=c._computeTextLocation(b,a,d,!0);return{x:b.x,y:b.y,width:a,height:d}};c._isRendered=function(a){for(a=
a.parent;a&&a.getParent;)a=a.parent;return null!==a};var s=0;c._getUniqueId=function(){var a;do a=h._scopeName+"xUnique"+ ++s;while(p.byId(a));return a};c._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};d.mixin(f,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",
cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=f["default"+b];return new c}}(),normalizeColor:function(b){return b instanceof a?b:new a(b)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return d.delegate(a);var e={};for(c in a)c in e||(e[c]=d.clone(c in b?b[c]:a[c]));return e},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
f.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return f._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*f.px_in_pt()},px2pt:function(a){return a/f.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=f.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*f.mm_in_pt*b;case "cm":return c*f.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?f[a]:a;b&&(m.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){f[a]=b[a]}),"string"==typeof a?f.renderer=a:m.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return f.renderer=f[a]&&f[a].Surface===f.Surface?a:null}))}});return f})},"esri/dijit/analysis/FindNearest":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/NumberTextBox ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime dojo/i18n!../../nls/jsapi dojo/text!./templates/FindNearest.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W){h=d([k,g,q,w,v,N,G],{declaredClass:"esri.dijit.analysis.FindNearest",templateString:W,widgetsInTemplate:!0,analysisLayer:null,nearLayers:null,summaryFields:null,outputLayerName:null,nearLayer:null,searchCutoff:100,searchCutoffUnits:"Miles",measurementType:"StraightLine",maxCount:1,returnFeatureCollection:!1,enableTravelModes:!0,i18n:null,toolName:"FindNearest",helpFileName:"FindNearest",resultParameter:["nearestLayer",
"connectingLinesLayer"],_timeObj:null,constructor:function(a){this._pbConnects=[];this._statsRows=[];this._timeObj={hours:1,minutes:0,seconds:0};a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects;this._driveTimeClickHandles&&0<this._driveTimeClickHandles.length&&(b.forEach(this._driveTimeClickHandles,l.disconnect),this._driveTimeClickHandles=null)},postMixInProperties:function(){this.inherited(arguments);
a.mixin(this.i18n,R.bufferTool);a.mixin(this.i18n,R.driveTimes);a.mixin(this.i18n,R.FindNearestTool)},postCreate:function(){this.inherited(arguments);t.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._hoursInput.set("validator",a.hitch(this,this.validateTime,"hours"));this._minutesInput.set("validator",a.hitch(this,this.validateTime,"minutes"));this._secondsInput.set("validator",a.hitch(this,this.validateTime,"seconds"));
this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(b){b.preventDefault();if(this._form.validate()){b={};var c;c=this.nearLayers[this._layersSelect.get("value")];b.nearLayer=m.toJson(C.constructAnalysisInputLyrObj(c));b.measurementType=this.get("measurementType");b.analysisLayer=m.toJson(C.constructAnalysisInputLyrObj(this.analysisLayer));!0===this._searchCutoffInput.get("value")?(b.searchCutoff=
this.get("searchCutoff"),-1!==this.get("measurementType").indexOf("Time")?b.searchCutoffUnits="Minutes":b.searchCutoffUnits=this.get("searchCutoffUnits")):b.searchCutoff=null;!0===this._limitSearchRangeCheck.get("value")?b.maxCount=this.get("maxCount"):b.maxCount=null;this._trafficTimeWidget.get("checked")&&(b.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(b.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay")));
this.returnFeatureCollection||(b.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()}))}},_handleSaveBtnClick:function(){if(this._form.validate()){this._saveBtn.set("disabled",!0);var a={},b={},c,d;c=this.nearLayers[this._layersSelect.get("value")];
a.nearLayer=m.toJson(C.constructAnalysisInputLyrObj(c));d=this._measureMethodSelect.getOptions(this._measureMethodSelect.get("value"));a.measurementType=d.travelMode?m.toJson(d.travelMode):this._measureMethodSelect.get("value");a.analysisLayer=m.toJson(C.constructAnalysisInputLyrObj(this.analysisLayer));this._limitSearchRangeCheck.get("checked")?(a.searchCutoff=this.get("searchCutoff"),-1===this.get("measurementType").indexOf("Time")&&(a.searchCutoffUnits=this.get("searchCutoffUnits"))):a.searchCutoff=
null;this._findNearestCheck.get("checked")?a.maxCount=this.get("maxCount"):a.maxCount=null;this._trafficTimeWidget.get("checked")&&(a.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(a.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay")));this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}}));this.showChooseExtent&&this._useExtentCheck.get("checked")&&
(a.context=m.toJson({extent:this.map.extent._normalize(!0)}));this.returnFeatureCollection&&(d={outSR:this.map.spatialReference},this.showChooseExtent&&this._useExtentCheck.get("checked")&&(d.extent=this.map.extent._normalize(!0)),a.context=m.toJson(d));b.jobParams=a;this._saveBtn.set("disabled",!1);b.itemParams={description:e.substitute(this.i18n.itemDescription,{sumNearbyLayerName:this.analysisLayer.name,summaryLayerName:c.name}),tags:e.substitute(this.i18n.itemTags,{sumNearbyLayerName:this.analysisLayer.name,
summaryLayerName:c.name}),snippet:this.i18n.itemSnippet};this.showSelectFolder&&(b.itemParams.folder=this.get("folderId"));this.execute(b)}},_handleLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show()):(a=this.nearLayers[a],F.isDefined(a)&&this.analysisLayer&&(this.outputLayerName=e.substitute(this.i18n.outputLayerName,{layer:a.name,
sumNearbyLayerName:this.analysisLayer.name})),this._outputLayerInput.set("value",this.outputLayerName))},_handleLimitSearchCheckChange:function(a){-1!==this.get("measurementType").indexOf("Time")?(this._hoursInput.set("disabled",!a),this._minutesInput.set("disabled",!a),this._secondsInput.set("disabled",!a)):(this._distanceUnitsSelect.set("disabled",!a),this._searchCutoffInput.set("disabled",!a))},_handleFindNearestCheckChange:function(a){this._maxCountInput.set("disabled",!a)},_handleTimeUnitsChange:function(a){},
_handleDistValueChange:function(a){this.set("outputLayerName")},_handleDistUnitsChange:function(a){this.set("outputLayerName");this.set("searchCutoffUnits",a)},_handleDistanceTypeChange:function(a){var b,c;c=this._measureMethodSelect.getOptions(this._measureMethodSelect.get("value"));F.isDefined(c)?(b="Time"===c.units,c="Time"===c.units&&"driving"===c.modei18nKey):(b=-1!==a.indexOf("Time"),c="DrivingTime"===a);this.set("measurementType",a);f.set(this._useTrafficRow,"display",c?"":"none");f.set(this._distanceLimitRow,
"display",c?"none":"");f.set(this._timeLimitRow,"display",c?"":"none");this._trafficTimeWidget.set("disabled",!c);this._trafficTimeWidget.set("reset",!c);b?(this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Seconds",label:this.i18n.seconds},{value:"Minutes",label:this.i18n.minutes,selected:"selected"},{value:"Hours",label:this.i18n.hours}])):(this.get("searchCutoffUnits")&&this.set("searchCutoffUnits",this.get("searchCutoffUnits")),
this._distanceUnitsSelect.removeOption(this._distanceUnitsSelect.getOptions()),this._distanceUnitsSelect.addOption([{value:"Miles",label:this.i18n.miles},{value:"Yards",label:this.i18n.yards},{value:"Feet",label:this.i18n.feet},{type:"separator"},{value:"Kilometers",label:this.i18n.kilometers},{value:"Meters",label:this.i18n.meters}]),"StraightLine"===a&&this._distanceUnitsSelect.addOption([{type:"separator"},{value:"NauticalMiles",label:this.i18n.nautMiles}]),this._distanceUnitsSelect.set("value",
this.searchCutoffUnits));this.set("outputLayerName")},_save:function(){},_buildUI:function(){var b;f.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");C.initHelpLinks(this.domNode,this.showHelp);C.populateTravelModes({selectWidget:this._measureMethodSelect,addStraightLine:!0,widget:this,enableTravelModes:this.get("enableTravelModes")});C.initHelpLinks(this.domNode,this.showHelp);this.get("showSelectAnalysisLayer")&&(!this.get("analysisLayer")&&this.get("analysisLayers")&&this.set("analysisLayer",
this.analysisLayers[0]),C.populateAnalysisLayers(this,"analysisLayer","analysisLayers"));this.outputLayerName&&(this.outputLayerInput.set("value",this.outputLayerName),b=!1);this.analysisLayer&&this._updateAnalysisLayerUI(b);C.addReadyToUseLayerOption(this,[this._analysisSelect,this._layersSelect]);f.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;C.setupFoldersUI({folderStore:this.folderStore,
folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:""})}));f.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");this.measurementType&&-1===this.measurementType.indexOf("Time")?(this.searchCutoffUnits&&this._distanceUnitsSelect.set("value",this.searchCutoffUnits),this.searchCutoff&&this._searchCutoffInput.set("value",this.searchCutoff)):this.measurementType&&-1!==this.measurementType.indexOf("Time")&&
this._timeObj!==this.searchCutoff&&(this._hoursInput.set("value",parseInt(this.searchCutoff.hours,10)),this._minutesInput.set("value",parseInt(this.searchCutoff.minutes,10)),this._secondsInput.set("value",parseInt(this.searchCutoff.seconds,10)),this._timeObj.hours=parseInt(this.searchCutoff.hours,10),this._timeObj.minutes=parseInt(this.searchCutoff.minutes,10),this._timeObj.seconds=parseInt(this.searchCutoff.seconds,10));this._handleDistanceTypeChange(this.measurementType);this.maxCount&&this._maxCountInput.set("value",
this.maxCount);this._loadConnections()},_updateAnalysisLayerUI:function(a){var d;this.analysisLayer&&(c.set(this._aggregateToolDescription,"innerHTML",e.substitute(this.i18n.summarizeDefine,{sumNearbyLayerName:this.analysisLayer.name})),"esriGeometryPoint"!==this.analysisLayer.geometryType&&(this.set("enableTravelModes",!1),this._updateTravelModes(!1)));this.nearLayers&&(d=b.some(this._layersSelect.getOptions(),function(a){return"browse"===a.value},this),this._layersSelect.removeOption(this._layersSelect.getOptions()),
b.forEach(this.nearLayers,function(b,c){if(b!==this.analysisLayer&&(this._layersSelect.addOption({value:c,label:b.name}),b.analysisReady&&(this.analysisLayer.analysisReady&&b.url===this.analysisLayer.url)&&this._layersSelect.removeOption({value:c,label:b.name}),!this.outputLayerName||a))this.outputLayerName=e.substitute(this.i18n.outputLayerName,{layer:b.name,sumNearbyLayerName:this.analysisLayer.name})},this),this.get("showReadyToUseLayers")&&d&&(this._layersSelect.addOption({type:"separator",value:""}),
this._layersSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle})));this._outputLayerInput.set("value",this.outputLayerName);this.nearLayer&&this._layersSelect.set("value",this.nearLayer)},_handleAnalysisLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show()):(this.analysisLayer=this.analysisLayers[a],this._updateAnalysisLayerUI(!0))},
_handleBrowseItemsSelect:function(b){b&&b.selection&&C.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?this.analysisLayers:this.nearLayers,layersSelect:this._isAnalysisSelect?this._analysisSelect:this._layersSelect,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(a){this._isAnalysisSelect&&this._handleAnalysisLayerChange(this._analysisSelect.get("value"))}))},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",!0));this._connect(this._closeBtn,
"onclick",a.hitch(this,"_onClose",!1));this._connect(this._measureMethodSelect,"onChange",a.hitch(this,"_handleDistanceTypeChange"));this.watch("enableTravelModes",a.hitch(this,function(a,b,c){this._updateTravelModes(c)}))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_setAnalysisLayerAttr:function(a){this.analysisLayer=a},_getAnalysisLayerAttr:function(a){return this.analysisLayer},_setAnalysisLayersAttr:function(a){this.analysisLayers=
a},_setNearLayersAttr:function(a){this.nearLayers=a},_setLayersAttr:function(a){this.nearLayers=[]},_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},_setSearchCutoffUnitsAttr:function(a){this.searchCutoffUnits=a},_getSearchCutoffUnitsAttr:function(){return this.searchCutoffUnits},_setMeasurementTypeAttr:function(a){this.measurementType=a},_getMeasurementTypeAttr:function(){return this.measurementType},_getSearchCutoffAttr:function(){this.measurementType&&"DrivingTime"===this.measurementType?
this._timeObj&&(this.searchCutoff=60*this._timeObj.hours+this._timeObj.minutes+this._timeObj.seconds/60):this.searchCutoff=this._searchCutoffInput.get("value");return this.searchCutoff},_setSearchCutoffAttr:function(a){a&&(this.searchCutoff=a)},_getMaxCountAttr:function(){return this.maxCount=this._maxCountInput.get("value")},_setMaxCountAttr:function(a){this.maxCount=a},_setEnableTravelModesAttr:function(a){this._set("enableTravelModes",a)},validateTime:function(a,b){var c=!0,d;d=parseInt(b,10);
"hours"===a?this._timeObj.hours=d:"minutes"===a?this._timeObj.minutes=d:"seconds"===a&&(this._timeObj.seconds=d);0===this._timeObj.hours&&(0===this._timeObj.minutes&&0===this._timeObj.seconds)&&(c=!1);return c},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))},_updateTravelModes:function(a){var c=this._measureMethodSelect.getOptions();b.forEach(c,function(b){"StraightLine"!==b.value&&(b.disabled=!a)});this._measureMethodSelect.updateOption(c)},validateServiceName:function(a){return C.validateServiceName(a,
{textInput:this._outputLayerInput})}});p("extend-esri")&&a.setObject("dijit.analysis.FindNearest",h,J);return h})},"esri/dijit/analysis/PluginAnalysisLayers":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/has ../../kernel".split(" "),function(h,d,a,b,l,m){var p=h(null,{constructor:function(a){d.mixin(this,a)},fetchData:function(){this._portal=this.parent._portal;var b;return this._fetchGroups().then(d.hitch(this,function(d){b=a.map(d||[],function(a){if(a)return'group:"'+
a.id+'"'}).join(" OR ");return this._fetchGroupItems(b)}))},_fetchGroup:function(a,b){this._groups=this._groups||[];return this._groups[a]||this._portal.queryGroups(b,!0).then(d.hitch(this,function(b){0<b.total&&b.results&&(this._groups[a]=b.results);return this._groups[a]||[]}))},_fetchGroupItems:function(a,b){var d='(type:"Map Service" OR type:"Feature Service") typekeywords:"Analysis Ready" ('+a+")"+(b?" "+b:"");this._portal.user.demographics||(d+=' -typekeywords:"Requires Credits"');return this.parent._fetchItems(d)},
_fetchGroups:function(){return this._fetchEsriAnalysisLayers()},_fetchEsriAnalysisLayers:function(){var a;this._portal&&this._portal.livingAtlasGroupQuery&&(a=this._portal.livingAtlasGroupQuery.replace('title:"Featured Maps And Apps"','title:"Living Atlas Analysis Layers"'));return this._fetchGroup("esriAnalysisLayers",{q:a,num:100,start:0}).then(d.hitch(this,function(a){return a}))}});d.mixin(p,{add:function(a,b){if(!a.plugIn){var d=b||{};d.parent=a;a.plugIn=new p(d)}},remove:function(a){a.plugIn&&
(a.plugIn.destroy(),delete a.plugIn)}});l("extend-esri")&&d.setObject("dijit.analysis.PluginAnalysisLayers",p,m);return p})},"esri/dijit/SingleFilter":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/number dojo/dom dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/_base/event dojo/Evented dojo/data/ItemFileWriteStore dojo/date/locale dojo/parser dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/TextBox dijit/form/FilteringSelect dijit/form/RadioButton dijit/form/DateTextBox dijit/form/NumberTextBox ../kernel ../lang ../tasks/GenerateRendererTask ../tasks/UniqueValueDefinition ../tasks/GenerateRendererParameters ../layers/FeatureLayer ../layers/GeoRSSLayer dojo/i18n!../nls/jsapi dojo/text!./templates/SingleFilter.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W,S){h=d([x,A,E,B,D,q],{declaredClass:"esri.dijit.SingleFilter",widgetsInTemplate:!0,templateString:S,valueHandlers:[],onFieldChangeEnabled:!0,onOperatorChangeEnabled:!0,onPromptChangeHandler:null,onHintChangeHandler:null,fieldDomains:{},fieldsStore:null,fieldsInfo:{stringFieldsCount:0,numberFieldsCount:0,dateFieldsCount:0},stringOperatorStore:null,dateOperatorStore:null,numberOperatorStore:null,uniqueValuesStore:null,
isEnableInteractiveFilter:!0,uniqueValuesResults:{},partsObj:null,dayInMS:86399E3,allowAllDateTypes:!1,postMixInProperties:function(){this.inherited(arguments);this.i18n={};this.i18n=a.mixin(this.i18n,W.filterDlg)},parseExpressionTemplate:function(){var a=function(a,g){c.byId(g).className="attributeValueContainer";"field_dropdown"===a?c.byId(g).innerHTML=b:"operator_dropdown"===a?c.byId(g).innerHTML=d:"values_input"===a?c.byId(g).innerHTML=e+f:console.error("problem with expressionTemplate from localization file")},
b='\x3cselect id\x3d"'+this.id+'.fieldsList" class\x3d"attributeField" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"true"\x3e\x3c/select\x3e',d='\x3cselect id\x3d"'+this.id+'.operatorList" class\x3d"operator" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\x3c/select\x3e',e='\x3cdiv id\x3d"'+this.id+'.attributeValueContainer"\x3e\x3c/div\x3e',f='\x3cdiv class\x3d"attributeValueOptions"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e  \x3ctbody\x3e    \x3ctr\x3e      \x3ctd nowrap\x3d"nowrap"\x3e        \x3cinput id\x3d"'+
this.id+'.radioValue" class\x3d"radioValue attributeValueRadio" checked\x3d"checked" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.valueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.valueTooltip+'"\x3e'+this.i18n.value+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioFields" class\x3d"radioFields attributeValueRadio" name\x3d"'+
this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.fieldTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.fieldTooltip+'"\x3e'+this.i18n.field+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd id\x3d"'+this.id+'.radioUniqueColumn" nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioUnique" class\x3d"radioUnique attributeValueRadio" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+
this.i18n.uniqueValueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.uniqueValueTooltip+'"\x3e'+this.i18n.uniqueValues+"        \x3c/label\x3e      \x3c/td\x3e    \x3c/tr\x3e  \x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",g=this.i18n.expressionTemplate,h=g.indexOf("${"),k=g.substring(0,h).trim();c.byId(this.id+".column1").innerHTML=k.length?"\x3cdiv class\x3d'attributeText'\x3e"+k+"\x3c/div\x3e":"";var k=g.indexOf("}",h+1),l=g.substring(h+2,k);a(l,this.id+".column2");h=g.indexOf("${",
h+1);k=g.substring(k+1,h).trim();c.byId(this.id+".column3").innerHTML=k.length?"\x3cdiv class\x3d'attributeText'\x3e"+k+"\x3c/div\x3e":"";k=g.indexOf("}",h+1);l=g.substring(h+2,k);a(l,this.id+".column4");h=g.indexOf("${",h+1);k=g.substring(k+1,h).trim();c.byId(this.id+".column5").innerHTML=k.length?"\x3cdiv class\x3d'attributeText'\x3e"+k+"\x3c/div\x3e":"";k=g.indexOf("}",h+1);l=g.substring(h+2,k);a(l,this.id+".column6");k=g.substring(k+1,g.length).trim();c.byId(this.id+".column7").innerHTML=k.length?
"\x3cdiv class\x3d'attributeText'\x3e"+k+"\x3c/div\x3e":""},postCreate:function(){this.inherited(arguments);this.parseExpressionTemplate();this.createOperatorStores();this.createFieldsStore(this.fields);this.readCodedValues();z.parse(c.byId(this.id+".exprTable")).then(a.hitch(this,function(a){l.connect(this.getFieldsList(),"onChange",this,"onChangeField");l.connect(this.getOperatorList(),"onChange",this,"onChangeOperator");l.connect(y.byId(this.id+".radioValue"),"onClick",this,"showValueInput");l.connect(y.byId(this.id+
".radioFields"),"onClick",this,"showFields");l.connect(y.byId(this.id+".radioUnique"),"onClick",this,"showUniqueList");this.version&&10.1>this.version&&n.set(c.byId(this.id+".radioUniqueColumn"),"display","none");l.connect(c.byId(this.id+".deleteExpression"),"onclick",this,"onClickDeleteExpression");l.connect(this.interactiveCheck,"onclick",this,"onInteractiveClick");l.connect(this.interactiveArrow,"onclick",this,"onClickShowHideInteractive");this.enableInteractiveHandlers();this.isEnableInteractiveFilter||
n.set(this._interactiveFilterRow,"display","none")}))},constructor:function(a,b){this.id=a.id||"";this.owner=a.owner;this.version=a.version;this.part=a.part;this.fields=a.fields;this.mapLayer=a.mapLayer;!1===a.enableEvents&&(this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!1)},init:function(a){a.part||(this.clearAttributeValueDijits(),this.mapLayer=a.mapLayer,this.version=a.version,this.fields=a.fields,this.createOperatorStores(),this.createFieldsStore(this.fields),this.readCodedValues(),this.fillFieldsList(this.fieldsStore),
this.onChangeField());a.part&&(this.part=a.part,this.buildEditUIField(this.part,this))},destroy:function(){this.clearAttributeValueDijits();b.forEach(y.findWidgets(c.byId(this.id)),function(a){a.destroyRecursive()});this.inherited(arguments)},toJson:function(){var a=null;this.isInteractiveChecked()&&(a={prompt:this.promptText.attr("value"),hint:this.hintText.attr("value")});return{fieldObj:this.getField(),operator:this.getOperator(),valueObj:this.getValue(),interactiveObj:a}},buildFriendlyTextExpr:function(a){var b=
this.i18n.expressionTemplate,c=function(a,c,d){return e.substitute(b,{field_dropdown:a,operator_dropdown:c,values_input:d})};if(!1===a.valueObj.isValid)return"\x26lt;expression is missing value\x26gt;";var d="";if("string"===a.fieldObj.shortType)a.operator===this.i18n.stringOperatorIsBlank||a.operator===this.i18n.stringOperatorIsNotBlank?d=c(a.fieldObj.label,a.operator,""):"field"===a.valueObj.type?d=c(a.fieldObj.label,a.operator,a.valueObj.label):(d=this.getDecodedValue(a.interactiveObj?a.interactiveObj.value:
a.valueObj.value,a.fieldObj.name),d=c(a.fieldObj.label,a.operator,"'"+d+"'"));else if("number"===a.fieldObj.shortType)if(a.operator===this.i18n.numberOperatorIsBetween||a.operator===this.i18n.numberOperatorIsNotBetween)d=a.interactiveObj?a.interactiveObj.value2:a.valueObj.value2,d=c(a.fieldObj.label,a.operator,f.format(a.interactiveObj?a.interactiveObj.value1:a.valueObj.value1,{pattern:"#####0.##########"})+" "+this.i18n.andBetweenValues+" "+f.format(d,{pattern:"#####0.##########"}));else if(a.operator===
this.i18n.numberOperatorIsBlank||a.operator===this.i18n.numberOperatorIsNotBlank)d=c(a.fieldObj.label,a.operator,"");else if("field"===a.valueObj.type)d=c(a.fieldObj.label,a.operator,a.valueObj.label);else var d=a.interactiveObj?a.interactiveObj.value:a.valueObj.value,g=this.getDecodedValue(d,a.fieldObj.name),d=c(a.fieldObj.label,a.operator,d!==g?"'"+g+"'":f.format(d,{pattern:"#####0.##########"}));else G.isDefined(a.valueObj.value)&&("field"!==a.valueObj.type&&"string"===typeof a.valueObj.value)&&
(a.valueObj.value=new Date(a.valueObj.value)),d=a.operator===this.i18n.dateOperatorIsBetween||a.operator===this.i18n.dateOperatorIsNotBetween?c(a.fieldObj.label,a.operator,(a.interactiveObj?this.formatFriendlyDate(a.interactiveObj.value1):this.formatFriendlyDate(a.valueObj.value1))+" "+this.i18n.andBetweenValues+" "+(a.interactiveObj?this.formatFriendlyDate(a.interactiveObj.value2):this.formatFriendlyDate(this.addDay(a.valueObj.value2)))):a.operator===this.i18n.dateOperatorIsBlank||a.operator===this.i18n.dateOperatorIsNotBlank?
c(a.fieldObj.label,a.operator,""):"field"===a.valueObj.type?c(a.fieldObj.label,a.operator,a.valueObj.label):c(a.fieldObj.label,a.operator,a.interactiveObj?this.formatFriendlyDate(a.interactiveObj.value):this.formatFriendlyDate(a.valueObj.value));return d},builtSingleFilterString:function(a,b){if(G.isDefined(a.valueObj.isValid)&&!a.valueObj.isValid)return{whereClause:null};var c=a.valueObj.value,d=a.valueObj.value1,e=a.valueObj.value2,f=!1;if(a.interactiveObj){if(!a.interactiveObj.prompt||!a.interactiveObj.hint)return{whereClause:null};
G.isDefined(b)&&(f=!0,G.isDefined(a.valueObj.value)&&(c="{"+b+"}"),G.isDefined(a.valueObj.value1)&&(d="{"+b+"}"),G.isDefined(a.valueObj.value2)&&(e="{"+(b+1)+"}"))}var g="";if("string"===a.fieldObj.shortType)switch(d="",c&&"field"!==a.valueObj.type&&this.isHostedService(this.mapLayer.url)&&this.containsNonLatinCharacter(c)&&(d="N"),a.operator){case this.i18n.stringOperatorIs:g="field"===a.valueObj.type?a.fieldObj.name+" \x3d "+c:a.fieldObj.name+" \x3d "+d+"'"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorIsNot:g=
"field"===a.valueObj.type?a.fieldObj.name+" \x3c\x3e "+c:a.fieldObj.name+" \x3c\x3e "+d+"'"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorStartsWith:g=a.fieldObj.name+" LIKE "+d+"'"+c.replace(/\'/g,"''")+"%'";break;case this.i18n.stringOperatorEndsWith:g=a.fieldObj.name+" LIKE "+d+"'%"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorContains:g=a.fieldObj.name+" LIKE "+d+"'%"+c.replace(/\'/g,"''")+"%'";break;case this.i18n.stringOperatorDoesNotContain:g=a.fieldObj.name+
" NOT LIKE "+d+"'%"+c.replace(/\'/g,"''")+"%'";break;case this.i18n.stringOperatorIsBlank:g=a.fieldObj.name+" IS NULL";break;case this.i18n.stringOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}else if("number"===a.fieldObj.shortType)switch(a.operator){case this.i18n.numberOperatorIs:g=a.fieldObj.name+" \x3d "+c;break;case this.i18n.numberOperatorIsNot:g=a.fieldObj.name+" \x3c\x3e "+c;break;case this.i18n.numberOperatorIsAtLeast:g=a.fieldObj.name+" \x3e\x3d "+c;break;case this.i18n.numberOperatorIsLessThan:g=
a.fieldObj.name+" \x3c "+c;break;case this.i18n.numberOperatorIsAtMost:g=a.fieldObj.name+" \x3c\x3d "+c;break;case this.i18n.numberOperatorIsGreaterThan:g=a.fieldObj.name+" \x3e "+c;break;case this.i18n.numberOperatorIsBetween:g=a.fieldObj.name+" BETWEEN "+d+" AND "+e;break;case this.i18n.numberOperatorIsNotBetween:g=a.fieldObj.name+" NOT BETWEEN "+d+" AND "+e;break;case this.i18n.numberOperatorIsBlank:g=a.fieldObj.name+" IS NULL";break;case this.i18n.numberOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}else switch(G.isDefined(c)&&
("field"!==a.valueObj.type&&"string"===typeof c)&&(c=this.parseFriendlyDate(c)),a.operator){case this.i18n.dateOperatorIsOn:g="field"===a.valueObj.type?a.fieldObj.name+" \x3d "+c:f?a.fieldObj.name+" BETWEEN '{"+b+"}' AND '{"+(b+1)+"}'":a.fieldObj.name+" BETWEEN '"+this.formatDate(c)+"' AND '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsNotOn:g="field"===a.valueObj.type?a.fieldObj.name+" \x3c\x3e "+c:f?a.fieldObj.name+" NOT BETWEEN '{"+b+"}' AND '{"+(b+1)+"}'":a.fieldObj.name+
" NOT BETWEEN '"+this.formatDate(c)+"' AND '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsBefore:g="field"===a.valueObj.type?a.fieldObj.name+" \x3c "+c:a.fieldObj.name+" \x3c '"+this.formatDate(c)+"'";break;case this.i18n.dateOperatorIsAfter:g="field"===a.valueObj.type?a.fieldObj.name+" \x3e "+c:a.fieldObj.name+" \x3e '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsBetween:g=f?a.fieldObj.name+" BETWEEN '"+d+"' AND '"+e+"'":a.fieldObj.name+" BETWEEN '"+
this.formatDate(d)+"' AND '"+this.formatDate(this.addDay(e))+"'";break;case this.i18n.dateOperatorIsNotBetween:g=f?a.fieldObj.name+" NOT BETWEEN '"+d+"' AND '"+e+"'":a.fieldObj.name+" NOT BETWEEN '"+this.formatDate(d)+"' AND '"+this.formatDate(this.addDay(e))+"'";break;case this.i18n.dateOperatorIsBlank:g=a.fieldObj.name+" IS NULL";break;case this.i18n.dateOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}return{whereClause:g}},showDeleteIcon:function(){n.set(c.byId(this.id+".deleteExpression"),
"display","block")},hideDeleteIcon:function(){n.set(c.byId(this.id+".deleteExpression"),"display","none")},createFieldsStore:function(c){if(c&&c.length){c=a.clone(c);c=c.sort(function(a,b){a.label=a.alias||a.name;b.label=b.alias||b.name;return a.label<b.label?-1:a.label>b.label?1:0});var d=this.isHostedService(this.mapLayer.url),e=10.2<=this.version;c=b.filter(c,function(a,b){return"esriFieldTypeString"===a.type||"esriFieldTypeDouble"===a.type||"esriFieldTypeSingle"===a.type||"esriFieldTypeInteger"===
a.type||"esriFieldTypeSmallInteger"===a.type||"esriFieldTypeDate"===a.type&&(this.allowAllDateTypes||d||e)?!0:!1},this);c=b.map(c,function(a,b){var c;switch(a.type){case "esriFieldTypeString":c="string";this.fieldsInfo.stringFieldsCount++;break;case "esriFieldTypeDate":c="date";this.fieldsInfo.dateFieldsCount++;break;default:c="number",this.fieldsInfo.numberFieldsCount++}return{id:b,label:a.label,shortType:c,alias:a.alias,editable:a.editable,name:a.name,nullable:a.nullable,type:a.type}},this);c.length&&
(this.fieldsStore=new w({data:{identifier:"id",label:"label",items:c}}))}},createOperatorStores:function(){var a=[];a.push({name:this.i18n.stringOperatorIs,name_:this.i18n.stringOperatorIs,id:0});a.push({name:this.i18n.stringOperatorIsNot,name_:this.i18n.stringOperatorIsNot,id:1});a.push({name:this.i18n.stringOperatorStartsWith,name_:this.i18n.stringOperatorStartsWith,id:2});a.push({name:this.i18n.stringOperatorEndsWith,name_:this.i18n.stringOperatorEndsWith,id:3});a.push({name:this.i18n.stringOperatorContains,
name_:this.i18n.stringOperatorContains,id:4});a.push({name:this.i18n.stringOperatorDoesNotContain,name_:this.i18n.stringOperatorDoesNotContain,id:5});a.push({name:this.i18n.stringOperatorIsBlank,name_:this.i18n.stringOperatorIsBlank,id:6});a.push({name:this.i18n.stringOperatorIsNotBlank,name_:this.i18n.stringOperatorIsNotBlank,id:7});this.stringOperatorStore=new w({data:{label:"name",identifier:"id",items:a}});a=[];a.push({name:this.i18n.dateOperatorIsOn,id:0});a.push({name:this.i18n.dateOperatorIsNotOn,
id:1});a.push({name:this.i18n.dateOperatorIsBefore,id:2});a.push({name:this.i18n.dateOperatorIsAfter,id:3});a.push({name:this.i18n.dateOperatorIsBetween,id:6});a.push({name:this.i18n.dateOperatorIsNotBetween,id:7});a.push({name:this.i18n.dateOperatorIsBlank,id:8});a.push({name:this.i18n.dateOperatorIsNotBlank,id:9});this.dateOperatorStore=new w({data:{label:"name",identifier:"id",items:a}});a=[];a.push({name:this.i18n.numberOperatorIs,name_:this.i18n.numberOperatorIs,id:0});a.push({name:this.i18n.numberOperatorIsNot,
name_:this.i18n.numberOperatorIsNot,id:1});a.push({name:this.i18n.numberOperatorIsAtLeast,name_:this.i18n.numberOperatorIsAtLeast,id:2});a.push({name:this.i18n.numberOperatorIsLessThan,name_:this.i18n.numberOperatorIsLessThan,id:3});a.push({name:this.i18n.numberOperatorIsAtMost,name_:this.i18n.numberOperatorIsAtMost,id:4});a.push({name:this.i18n.numberOperatorIsGreaterThan,name_:this.i18n.numberOperatorIsGreaterThan,id:5});a.push({name:this.i18n.numberOperatorIsBetween,name_:this.i18n.numberOperatorIsBetween,
id:6});a.push({name:this.i18n.numberOperatorIsNotBetween,name_:this.i18n.numberOperatorIsNotBetween,id:7});a.push({name:this.i18n.numberOperatorIsBlank,name_:this.i18n.numberOperatorIsBlank,id:8});a.push({name:this.i18n.numberOperatorIsNotBlank,name_:this.i18n.numberOperatorIsNotBlank,id:9});this.numberOperatorStore=new w({data:{label:"name",identifier:"id",items:a}})},readCodedValues:function(){b.forEach(this.mapLayer.fields,function(a){a.domain&&a.domain.codedValues&&(this.fieldDomains[a.name]=
a.domain.codedValues)},this)},getDecodedValue:function(a,b){var c=this.getCodedValues(b),d,e;if(c)for(d=0;d<c.length;d+=1)if(e=c[d],e.code===a)return e.name;return a},getCodedValues:function(a){return this.fieldDomains[a]},getFieldsList:function(){return y.byId(this.id+".fieldsList")},getOperatorList:function(){return y.byId(this.id+".operatorList")},getValueFieldsList:function(){return y.byId(this.id+".valueFields")},getAttrValContNode:function(){return c.byId(this.id+".attributeValueContainer")},
getField:function(){var a=this.getFieldsList();return{name:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),shortType:a.store.getValue(a.item,"shortType"),type:a.store.getValue(a.item,"type")}},getOperator:function(){var a=this.getOperatorList();return!a.item?"":a.store.getValue(a.item,"name")},getValue:function(){return{}},isInteractiveChecked:function(){return this.interactiveCheck.checked},setInteractiveSection:function(a,b,c){this.disableInteractiveHandlers();this.interactiveCheck.checked=
a;this.promptText.attr("value",b);this.hintText.attr("value",c);n.set(this.interactiveSpace,"display","block");this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;";this.enableInteractiveHandlers()},enableInteractiveHandlers:function(){this.onPromptChangeHandler=l.connect(this.promptText,"onChange",this,"onChangeInteractive");this.onHintchangeHandler=l.connect(this.hintText,"onChange",this,"onChangeInteractive")},disableInteractiveHandlers:function(){l.disconnect(this.onPromptChangeHandler);l.disconnect(this.onHintChangeHandler)},
fillFieldsList:function(a){var b=this.getFieldsList();b.set("labelAttr","label");b.set("searchAttr","label");b.set("store",a);b.set("value",0)},fillOperatorList:function(b,c,d){var e=this.getOperatorList();e.set("labelAttr","name");e.set("searchAttr","name");e.set("query",d?d:{});e.set("store",b);if(c){var f=!1;for(d=0;20>d&&!(b.fetchItemByIdentity({identity:d,onItem:a.hitch(this,function(a){a&&a.name[0]===c&&(e.set("value",a.id[0]),f=!0)})}),f);d++);}else e.set("value",0)},createValueString:function(a){var b=
this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(b);if(a){var b=new H({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},t.create("div",{},b)),c=this.buildCodedValuesStore(a);b.set("store",c);b.set("value",0)}else b=new I({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0},t.create("div",{},b));this.valueHandlers.push(l.connect(b,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var b=
y.byId(this.id+".value"),c=!0;a?b.item?b=b.item.code[0]:(b="",c=!1):c=b=b.get("value");return{value:b,isValid:c}}},createValueDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(a);a=new K({id:this.id+".value","class":"attributeValue",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},t.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(l.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=y.byId(this.id+
".value").get("value");return{value:a,isValid:G.isDefined(a)}}},createValueNumber:function(a){var b=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(b);if(a){var b=new H({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},t.create("div",{},b)),c=this.buildCodedValuesStore(a);b.set("store",c);b.set("value",0)}else b=new J({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},
t.create("div",{},b));this.valueHandlers.push(l.connect(b,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var b=y.byId(this.id+".value"),c=!0;a?b.item?b=b.item.code[0]:(b="",c=!1):(b=b.get("value"),c=G.isDefined(b)&&!isNaN(b));return{value:b,isValid:c}}},createValueBetweenDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(a);var b=new K({id:this.id+".value1","class":"attributeValue1",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},
t.create("div",{},a));t.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new K({id:this.id+".value2","class":"attributeValue2",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},t.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(l.connect(b,"onChange",this,"onValueChange"));this.valueHandlers.push(l.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=y.byId(this.id+".value1").get("value"),b=y.byId(this.id+
".value2").get("value");return{value1:a,value2:b,isValid:G.isDefined(a)&&G.isDefined(b)}}},createValueBetweenNumber:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(a);var b=new J({id:this.id+".value1","class":"attributeValue1",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},t.create("div",{},a));t.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new J({id:this.id+".value2","class":"attributeValue2",
required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},t.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(l.connect(b,"onChange",this,"onValueChange"));this.valueHandlers.push(l.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=y.byId(this.id+".value1").get("value"),b=y.byId(this.id+".value2").get("value");return{value1:a,value2:b,isValid:G.isDefined(a)&&G.isDefined(b)&&!isNaN(a)&&!isNaN(b)&&a<=b}}},createValueInTheLastDate:function(){},
createValueIsBlank:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(a);a.innerHTML="\x3cinput id\x3d'"+this.id+".value' class\x3d'attributeValue' type\x3d'text' disabled\x3d'true'/\x3e";this.checkDefaultOption();this.getValue=function(){return{value:null,isValid:!0}}},createValueFields:function(b,c,d){var e=this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(e);var f=new H({id:this.id+".valueFields","class":"attributeValue",maxHeight:150,labelAttr:"label",
searchAttr:"label",store:b,query:c},t.create("div",{},e));if(d)for(var g=!1,e=0;100>e&&!(b.fetchItemByIdentity({identity:e,onItem:a.hitch(this,function(a){a&&(a.shortType[0]===c.shortType&&a.name[0]!==d)&&(f.set("value",a.id),g=!0)})}),g);e++);this.valueHandlers.push(l.connect(f,"onChange",this,"onValueChange"));this.getValue=function(){var a=y.byId(this.id+".valueFields");return{value:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),type:"field",isValid:!0}}},createValueUnique:function(a){var b=
this.getAttrValContNode();this.clearAttributeValueDijits();t.empty(b);a=new H({id:this.id+".valueUnique","class":"attributeValue",maxHeight:150,store:a},t.create("div",{},b));a.set("value",0);this.valueHandlers.push(l.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=y.byId(this.id+".valueUnique");return{value:a.store.getValue(a.item,"value"),isValid:!0}}},setValue:function(a,b){if(b)for(var c=0;c<b.length;c++){if(a===b[c].code){y.byId(this.id+".value").set("value",c);break}}else"date"===
this.part.fieldObj.shortType?y.byId(this.id+".value").set("value",new Date(a)):("number"===this.part.fieldObj.shortType&&(a=Number(a)),y.byId(this.id+".value").set("value",a))},setValue1:function(a){"date"===this.part.fieldObj.shortType?a=new Date(a):"number"===this.part.fieldObj.shortType&&(a=Number(a));y.byId(this.id+".value1").set("value",a)},setValue2:function(a){"date"===this.part.fieldObj.shortType?a=new Date(a):"number"===this.part.fieldObj.shortType&&(a=Number(a));y.byId(this.id+".value2").set("value",
a)},setValueFieldById:function(a){this.getValueFieldsList().set("value",a)},enableOnFieldChange:function(){this.onFieldChangeEnabled=!0},enableOnOperatorChange:function(){this.onOperatorChangeEnabled=!0},onChangeField:function(a){this.onFieldChangeEnabled&&this._onChangeField(this.getFieldsList(),this)},onChangeOperator:function(a){this.onOperatorChangeEnabled&&this._onChangeOperator(this.getOperatorList(),this)},onClickDeleteExpression:function(a){this._deleteExpression(this)},_onChangeField:function(a,
b,c){var d=b.getOperatorList();switch(this.fieldsStore.getValue(a.item,"type")){case "esriFieldTypeString":var e=null;a=this.fieldsStore.getValue(a.item,"name");this.getCodedValues(a)&&(e=this.i18n.stringOperatorStartsWith,e+="|"+this.i18n.stringOperatorEndsWith,e+="|"+this.i18n.stringOperatorContains,e+="|"+this.i18n.stringOperatorDoesNotContain,e={name_:RegExp("^(?!("+e+")$)")});d.attr("value")===this.i18n.stringOperatorIs?(b.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,
e),this.onChangeOperator(d,b,c)):b.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,e);b.createValueString(this.getCodedValues(a));break;case "esriFieldTypeDate":b.fillOperatorList(this.dateOperatorStore,this.i18n.dateOperatorIsOn);b.createValueDate();break;default:e=null,a=this.fieldsStore.getValue(a.item,"name"),this.getCodedValues(a)&&(e=this.i18n.numberOperatorIsBetween,e+="|"+this.i18n.numberOperatorIsNotBetween,e+="|"+this.i18n.numberOperatorIsAtLeast,e+="|"+this.i18n.numberOperatorIsLessThan,
e+="|"+this.i18n.numberOperatorIsAtMost,e+="|"+this.i18n.numberOperatorIsGreaterThan,e={name_:RegExp("^(?!("+e+")$)")}),d.attr("value")===this.i18n.numberOperatorIs?(b.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,e),this.onChangeOperator(d,b,c)):b.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,e),b.createValueNumber(this.getCodedValues(a))}"date"===this.fieldsStore.getValue(b.getFieldsList().item,"shortType")?b.disableInteractiveCheck():b.enableInteractiveCheck();
l.publish("filter-expression-change",this)},_onChangeOperator:function(a,b,c){a=a.item?a.item.name[0]:a.value;c=this.fieldsStore.getValue(b.getFieldsList().item,"shortType");var d=this.fieldsStore.getValue(b.getFieldsList().item,"name");b.enableOptions();if(("date"===c||"number"===c)&&(a===this.i18n.dateOperatorIsBetween||a===this.i18n.numberOperatorIsBetween||a===this.i18n.dateOperatorIsNotBetween||a===this.i18n.numberOperatorIsNotBetween))"date"===c?b.createValueBetweenDate():b.createValueBetweenNumber();
else if("date"===c&&(a===this.i18n.dateOperatorInTheLast||a===this.i18n.dateOperatorNotInTheLast))b.createValueInTheLastDate();else if(a===this.i18n.stringOperatorIsBlank||a===this.i18n.dateOperatorIsBlank||a===this.i18n.numberOperatorIsBlank||a===this.i18n.stringOperatorIsNotBlank||a===this.i18n.dateOperatorIsNotBlank||a===this.i18n.numberOperatorIsNotBlank)b.createValueIsBlank(),b.disableOptions();else switch(c){case "string":b.createValueString(this.getCodedValues(d));break;case "date":b.createValueDate();
break;default:b.createValueNumber(this.getCodedValues(d))}l.publish("filter-expression-change",this)},onInteractiveClick:function(a){this.isInteractiveChecked()?(n.set(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(n.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;");l.publish("filter-expression-change",this)},onClickShowHideInteractive:function(a){this.interactiveCheck.disabled||("none"===n.set(this.interactiveSpace,
"display")?(n.set(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(n.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;"))},onChangeInteractive:function(){l.publish("filter-expression-change",this)},showValueInput:function(a){this._showValueInput(y.byNode(a.target),this)},showFields:function(a){this._showFields(y.byNode(a.target),this)},showUniqueList:function(a){this._showUniqueList(y.byNode(a.target),this)},
onValueChange:function(){this.onValueChangeHandler&&clearTimeout(this.onValueChangeHandler);this.onValueChangeHandler=setTimeout(a.hitch(this,function(){this.onValueChangeHandler=null;l.publish("filter-expression-change",this)}),800)},_showValueInput:function(a,b,c){b.onChangeOperator(a,b,c);b.enableInteractiveCheck()},_showFields:function(a,b,c){c=b.getFieldsList().item;a=this.fieldsStore.getValue(c,"shortType");c=this.fieldsStore.getValue(c,"name");b.createValueFields(this.fieldsStore,{shortType:a,
name:RegExp("^(?!"+c+"$)")},c);b.disableInteractiveCheck()},_showUniqueList:function(c,d,e){this.uniqueValuesStore&&delete this.uniqueValuesStore;e=this.fieldsStore.getValue(d.getFieldsList().item,"name");if(10.1<=this.version){var f=null;this.mapLayer.queryServiceUrl?f=this.mapLayer.queryServiceUrl:this.mapLayer.itemLayers&&b.forEach(this.mapLayer.itemLayers,function(a){a.id===this.layerInfo.id&&a.layerUrl&&(f=a.layerUrl)},this);f||(f=this.mapLayer.url);if(this.uniqueValuesResults[this.mapLayer.id+
"_"+e])this.onGenerateRendererResults(d,c,this.uniqueValuesResults[this.mapLayer.id+"_"+e]);else this.generateRendererUniqueValues(e,f,a.hitch(this,"onGenerateRendererResults",d,c),a.hitch(this,function(){this.showValueInput(c,d)}))}else c&&this.showValueInput(c,d)},onGenerateRendererResults:function(a,c,d){var e=this.fieldsStore.getValue(a.getFieldsList().item,"name"),g=this.fieldsStore.getValue(a.getFieldsList().item,"shortType"),h=this.fieldsStore.getValue(a.getFieldsList().item,"type");this.uniqueValuesResults[this.mapLayer.id+
"_"+e]=d;var k=null;b.forEach(this.mapLayer.fields,function(a){a.name===e&&a.domain&&(k=a.domain)});d=b.filter(d,function(a,b){return"string"===g?"\x3cNull\x3e"!==a&&""!==a.trim():"\x3cNull\x3e"!==a&&""!==a});d.length?("date"===g?(d=b.map(d,function(a){return new Date(a)}),d=d.sort(function(a,b){var c=a.getTime(),d=b.getTime();return c<d?-1:c>d?1:0}),d=b.map(d,function(a){return this.formatFriendlyDate(a)},this)):"number"===g?(d=b.map(d,function(a){return"esriFieldTypeDouble"===h||"esriFieldTypeSingle"===
h?parseFloat(a):parseInt(a,10)}),d=d.sort(function(a,b){return a<b?-1:a>b?1:0})):d=d.sort(function(a,b){return a<b?-1:a>b?1:0}),c=b.map(d,function(a,b){var c=a;"string"===g&&(c=""===a?"\x3c"+this.i18n.emptyString+"\x3e":a);if(k&&k.codedValues){for(var d=0;d<k.codedValues.length;d++){var e=k.codedValues[d];if(a===e.code)return{id:b,name:e.name||c,value:a}}return{id:b,name:""+c,value:a}}if("esriFieldTypeDouble"===h||"esriFieldTypeSingle"===h)c=f.format(a,{pattern:"#####0.##########"});return{id:b,name:""+
c,value:a}},this),this.uniqueValuesStore=new w({data:{label:"name",identifier:"id",items:c}}),a.createValueUnique(this.uniqueValuesStore)):this.showValueInput(c,a)},generateRendererUniqueValues:function(c,d,e,f){c instanceof Array&&(c=c.toString());var g=new L;g.attributeField=c;c=new C;c.classificationDefinition=g;this.mapLayer instanceof R?d=new N(this.mapLayer):this.mapLayer instanceof O&&!this.mapLayer.url?d=new N(this.mapLayer):this.hasDynamicLayers(this.mapLayer)?(g=this.mapLayer.layerDefinitions&&
this.mapLayer.layerDefinitions[this.mapLayer.id]?this.mapLayer.layerDefinitions[this.mapLayer.id]:null,c.where=g?g:null,d=new N(this.mapLayer.url+"/dynamicLayer",{source:this.layerInfo.source})):(g=this.mapLayer.getDefinitionExpression(),c.where=g?g:null,d=new N(d));F.config.defaults.io.timeout=1E4;d.execute(c,function(a){F.config.defaults.io.timeout=6E4;a=b.map(a.infos,function(a){return a.value});e(a)},a.hitch(this,function(a){F.config.defaults.io.timeout=6E4;f()}))},hasDynamicLayers:function(a){return a&&
a.supportsDynamicLayers?!0:!1},formatDate:function(a){return v.format(a,{datePattern:"yyyy-MM-dd",selector:"date"})+" "+v.format(a,{selector:"time",timePattern:"HH:mm:ss"})},formatFriendlyDate:function(a){return v.format(a,{formatLength:"short",selector:"date"})},parseFriendlyDate:function(a){return v.parse(a,{formatLength:"short",selector:"date"})},parseDate:function(a){var b=v.parse(a,{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"});b||(b=v.parse(a.replace(" ",", "),{datePattern:"yyyy-MM-dd",
timePattern:"HH:mm:ss"}))||(b=v.parse(a.replace(" "," - "),{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"}));return b},addDay:function(a){return new Date(a.getTime()+this.dayInMS)},subtractDay:function(a){return new Date(a.getTime()-this.dayInMS)},containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1},buildCodedValuesStore:function(a){a=b.map(a,function(a,b){return{name:a.name,code:a.code,id:b}});return new w({data:{label:"name",identifier:"id",
items:a}})},clearAttributeValueDijits:function(){this.valueHandlers&&0!==this.valueHandlers.length&&(b.forEach(this.valueHandlers,a.hitch(this,function(a){l.disconnect(a)})),this.valueHandlers=[],y.byId(this.id+".value")?y.byId(this.id+".value").destroy():c.byId(this.id+".value")&&this.getAttrValContNode().removeChild(c.byId(this.id+".value")),y.byId(this.id+".value1")?y.byId(this.id+".value1").destroy():c.byId(this.id+".value1")&&this.getAttrValContNode().removeChild(c.byId(this.id+".value1")),y.byId(this.id+
".value2")?y.byId(this.id+".value2").destroy():c.byId(this.id+".value2")&&this.getAttrValContNode().removeChild(c.byId(this.id+".value2")),y.byId(this.id+".valueFields")&&y.byId(this.id+".valueFields").destroy(),y.byId(this.id+".valueUnique")&&y.byId(this.id+".valueUnique").destroy())},checkDefaultOption:function(){s(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){y.byNode(a).set("checked",-1<a.className.indexOf("radioValue"))})},disableOptions:function(){s(".attributeValueOptions .attributeValueRadio",
this.domNode).forEach(function(a){y.byNode(a).set("disabled",!0)})},enableOptions:function(){s(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){y.byNode(a).set("disabled",!1)})},checkFieldOption:function(){y.byId(this.id+".radioFields").set("checked",!0)},disableFieldOption:function(){y.byId(this.id+".radioFields").set("disabled",!0)},disableUniqueOption:function(){y.byId(this.id+".radioUnique").set("disabled",!0)},enableInteractiveCheck:function(){this.interactiveCheck.disabled=
!1},disableInteractiveCheck:function(){this.interactiveCheck.checked=!1;this.interactiveCheck.disabled=!0},isHostedService:function(a){if(!a)return!1;var b=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return b&&a},buildEditUIField:function(b,c,d){this.getFieldItemByName({name:b.fieldObj.name},a.hitch(this,function(a){c.getFieldsList().set("value",a.id[0]);this.buildEditUIOperator(b,c,d)}),a.hitch(this,function(){c.getFieldsList().set("value",
0);this.buildEditUIOperator(b,c,d)}))},buildEditUIOperator:function(b,c,d){switch(b.fieldObj.shortType){case "string":c.fillOperatorList(this.stringOperatorStore,b.operator);break;case "date":c.fillOperatorList(this.dateOperatorStore,b.operator);break;default:c.fillOperatorList(this.numberOperatorStore,b.operator)}this.getOperatorItemByName(c.getOperatorList().store,{name:b.operator},a.hitch(this,function(a){c.getOperatorList().set("value",a.id[0]);this.buildEditUIValue(b,c,d)}),a.hitch(this,function(){c.getOperatorList().set("value",
0);this.buildEditUIValue(b,c,d)}))},buildEditUIValue:function(b,c,d){d=b.operator;this.onChangeOperator(c.getOperatorList(),c);c.enableOptions();d===this.i18n.stringOperatorIsBlank||d===this.i18n.dateOperatorIsBlank||d===this.i18n.numberOperatorIsBlank||d===this.i18n.stringOperatorIsNotBlank||d===this.i18n.dateOperatorIsNotBlank||d===this.i18n.numberOperatorIsNotBlank?(c.createValueIsBlank(),c.disableOptions()):"field"===b.valueObj.type?(c.createValueFields(this.fieldsStore,{shortType:b.fieldObj.shortType,
name:RegExp("^(?!"+b.fieldObj.name+"$)")}),c.checkFieldOption(),this.getFieldItemByName({name:b.valueObj.value},a.hitch(this,function(a){c.setValueFieldById(a.id[0])}),a.hitch(this,function(){c.setValueFieldById(0)}))):G.isDefined(b.valueObj.value1)?(c.setValue1(b.valueObj.value1),c.setValue2(b.valueObj.value2)):c.setValue(b.valueObj.value,this.getCodedValues(b.fieldObj.name))},getFieldItemByName:function(b,c,d){this.fieldsStore.fetch({query:b,onComplete:a.hitch(this,function(a){a&&a.length?c(a[0]):
d()})})},getOperatorItemByName:function(b,c,d,e){b.fetch({query:c,onComplete:a.hitch(this,function(a){a&&a.length?d(a[0]):e()})})}});p("extend-esri")&&a.setObject("esri.dijit.SingleFilter",h,F);return h})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(h,d){h.add("esri-svg",function(){return-1!==d.renderer.toLowerCase().indexOf("svg")});return h})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g){var q={fromJson:function(a){var b;switch(a.type||""){case "simple":b=new r(a);break;case "uniqueValue":b=new e(a);break;case "classBreaks":b=new f(a);break;case "vectorField":b=new c(a);break;case "scaleDependent":b=this._scaleDependentFromJson(a);break;case "dotDensity":b=this._dotDensityFromJson(a);break;case "temporal":b=this._temporalFromJson(a);break;case "heatmap":b=this._heatmapFromJson(a)}return b},_scaleDependentFromJson:function(a){var b={},c=
a.minScale;b.rendererInfos=h.map(a.rendererInfos,function(a){var b=a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&this.fromJson(a.renderer)};c=b;return a},this);return new u(b)},_dotDensityFromJson:function(a){a.backgroundColor&&d.isArray(a.backgroundColor)&&(a.backgroundColor=m.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=b.pt2px(a.dotSize));a.fields&&h.forEach(a.fields,function(a){a&&d.isArray(a.color)&&(a.color=m.toDojoColor(a.color))});a.legendOptions&&(a.legendOptions.backgroundColor&&
d.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=m.toDojoColor(a.legendOptions.backgroundColor)),a.legendOptions.outline&&(a.legendOptions.outline=p.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=p.fromJson(a.outline));return new n(a)},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);
return new k(b,c,d,a)},_agerFromJson:function(a){var b;a=a||{};a.colorRange||a.sizeRange||a.alphaRange?b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b},_timeRampFromJson:function(a){var b,c,d;a.colorRange&&1<a.colorRange.length&&(b=[m.toDojoColor(a.colorRange[0]),m.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(c=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(d=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new s(b,
c,d)},_timeClassBreaksFromJson:function(a){var b=a.agerClassBreakInfos,c,d,e=[],f;c=t.UNIT_DAYS;switch(a.timeUnits){case "esriTimeUnitsSeconds":c=t.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":c=t.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":c=t.UNIT_HOURS;break;case "esriTimeUnitsMinutes":c=t.UNIT_MINUTES;break;case "esriTimeUnitsMonths":c=t.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":c=t.UNIT_WEEKS;break;case "esriTimeUnitsYears":c=t.UNIT_YEARS}for(f=0;f<b.length;f+=1)a=b[f],d={minAge:0,
maxAge:a.oldestAge||Infinity},a.color&&(d.color=m.toDojoColor(a.color)),a.alpha&&(d.alpha=a.alpha/255),d.size=a.size,e[f]=d;return new t(e,c)},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&h.forEach(b,function(a){a.color=m.toDojoColor(a.color)});return new g(a)}};a("extend-esri")&&d.mixin(d.getObject("renderer",!0,l),q);return q})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s){var k=h([r],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(c,d){this._attrs={};if(c&&b.isString(c))this._url=u.urlToObject(this.url=c);else if(this.url=this._url=null,(d=d||c)&&(d.layerDefinition||d.query))d=null;this.spatialReference=new t(4326);this.initialExtent=new s(-180,-90,180,90,new t(4326));this._map=this._div=null;
this.normalization=!0;d&&(d.id&&(this.id=d.id),!1===d.visible&&(this.visible=!1),f.isDefined(d.opacity)&&(this.opacity=d.opacity),f.isDefined(d.minScale)&&this.setMinScale(d.minScale),f.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,f.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=b.hitch(this,
this._errorHandler);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var e=this._setMap;this._setMap=function(b){var c=e.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!b.loaded)var d=a.connect(b,"onLoad",this,function(){a.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,
showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(b,c,d,e){this._map=b;this._lyrZEHandle=a.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var f=a.connect(b,"onLoad",this,function(){a.disconnect(f);f=null;this._processMapScale()})},_unsetMap:function(b,c){a.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},
_findCredential:function(){this.credential=e.id&&this._url&&e.id.findCredential(this._url.path)},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(a,b){var c=f.isDefined(a),d=f.isDefined(b);
this.loaded||(this._hasMin=this._hasMin||c,this._hasMax=this._hasMax||d);var e=this.minScale,h=this.maxScale;this.minScale=(c?a:this.minScale)||0;this.maxScale=(d?b:this.maxScale)||0;if(e!==this.minScale||h!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&
!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,d=this.getNode(),e;if(a){this._resumedOnce=!0;if(b&&d){var f=d.getAttribute("class")||"";RegExp("(^|\\s)"+
b+"(\\s|$)","i").test(f)||d.setAttribute("class",f+((f?" ":"")+b))}if(c&&d)for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?k.prototype._isMapAtVisibleScale.apply(this,
arguments):!1},_isMapAtVisibleScale:function(a,b){if(!a&&(!this._map||!this._map.loaded))return!1;var c=this._map;a=a||c.getScale();var d=this.minScale,e=this.maxScale,f=!d,h=!e,k;b&&(k=c.width>c.height?c.width:c.height);f||(a<=d?f=!0:b&&(f=Math.abs(d-a)/d<1/k));h||(a>=e?h=!0:b&&(h=Math.abs(e-a)/e<1/k));return f&&h},getAttributionData:function(){var a=this.attributionDataUrl,b=new l(n._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=c({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),
b._pendingDfd.then(function(a){b.callback(a)},function(a){b.errback(a)})):(a=Error("Layer does not have attribution data"),a.log=d.isDebug,b.errback(a));return b},getResourceInfo:function(){var a=this.resourceInfo;return b.isString(a)?m.fromJson(a):b.clone(a)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>p("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:
this._attrs[a]=b);return this},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==
a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",a?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});p("extend-esri")&&b.setObject("layers.Layer",k,e);return k})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(h,d,a,b,l,m,p,r,e){h=h(null,{declaredClass:"esri.Graphic",constructor:function(a,b,d,h){a&&!a.declaredClass?(this.geometry=a.geometry?r.fromJson(a.geometry):null,this.symbol=a.symbol?e.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new p(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=d,this.infoTemplate=h)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=
[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,d,e=a.length,h=[];for(d=0;d<e;d++)(b=a[d]&&a[d].getNode())&&b.nodeType&&h.push(b);return h},getLayer:function(){return this._layer},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer)a._updateExtent(this),
a._draw(this,!0);return this},setSymbol:function(a,b){var d=this._graphicsLayer,e=this._shape;this.symbol=a;d&&(b&&e&&d._removeShape(this),d._draw(this,!0));return this},setAttributes:function(a){this.attributes=a;return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&
a.title;if(d.isFunction(b))b=b.call(a,this);else if(d.isString(b))var e=(a=this.getLayer())&&a._getDateOpts,b=m.substitute(this.attributes,b,{first:!0,dateFormat:e&&e.call(a)});return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(d.isFunction(b))b=b.call(a,this);else if(d.isString(b))var e=(a=this.getLayer())&&a._getDateOpts,b=m.substitute(this.attributes,b,{dateFormat:e&&e.call(a)});return b},attr:function(a,b){var d=this.getNodes(),e,h=d.length;for(e=0;e<h;e++)null==b?
d[e].removeAttribute(a):d[e].setAttribute(a,b);return this},show:function(){this.visible=this._visible=!0;var a,b,d;if(this.getShapes().length){a=this.getNodes();d=a.length;this.attr("data-hidden");for(b=0;b<d;b++)l.show(a[b])}else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,b,d;if(a)if("canvas-2d"===a.surfaceType)a._removeShape(this);else if(a=this.getNodes(),d=a.length){this.attr("data-hidden","");for(b=
0;b<d;b++)l.hide(a[b])}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=d.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a}});h.prototype.getShape=h.prototype.getDojoShape;a("extend-esri")&&(b.Graphic=h);return h})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(h,d,a,b,l,m,p){h=h(p,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(a){this.setRendererInfos(a&&a.rendererInfos||[])},setRendererInfos:function(a){this.rendererInfos=a;this._setRangeType();return this},getSymbol:function(a){var b=this.getRendererInfo(a);return b&&b.renderer&&b.renderer.getSymbol(a)},getRendererInfo:function(a){a=a.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(a.getZoom()):this.getRendererInfoByScale(a.getScale())},
getRendererInfoByZoom:function(a){var b,d=this.rendererInfos,c,h=0;do b=d[h],a>=b.minZoom&&a<=b.maxZoom&&(c=b),h++;while(!c&&h<d.length);return c},getRendererInfoByScale:function(a){var b,d=this.rendererInfos,c,h=0,l,m,p,k;do b=d[h],l=b.minScale,m=b.maxScale,p=!l,k=!m,!p&&a<=l&&(p=!0),!k&&a>=m&&(k=!0),p&&k&&(c=b),h++;while(!c&&h<d.length);return c},addRendererInfo:function(a){var b,d=0,c,h=this.rendererInfos,l=a.hasOwnProperty("minZoom")?"minZoom":"minScale",m=h.length;do{c=h[d];if(m===d||a[l]<c[l])h.splice(d,
0,a),this._setRangeType(),b=!0;d++}while(!b&&d<m);return this},_setRangeType:function(){var a=this.rendererInfos;if(a=a&&a[0])this.rangeType=a.hasOwnProperty("minZoom")?"zoom":a.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var b=this.rendererInfos||[],e=b[0]&&b[0].minScale,b=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<e?e:0,rendererInfos:d.map(b,function(a){return m.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&
a.renderer.toJson()})})});return m.fixJson(b)}});b("extend-esri")&&a.setObject("renderer.ScaleDependentRenderer",h,l);return h})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "),function(h,d,a,b,l,m,p){h=h([p],{declaredClass:"esri.layers._SnapshotMode",constructor:function(a){this.featureLayer=a;this.pagination=a.queryPagination;this._featureMap={};this._drawFeatures=d.hitch(this,this._drawFeatures);
this._queryErrorHandler=d.hitch(this,this._queryErrorHandler)},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},propertyChangeHandler:function(a){this._init&&(a?this.featureLayer._collection?console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d "+this.featureLayer.id):this._fetchAll():this._applyTimeFilter())},
drawFeature:function(a){var b=a.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(b,a);this._incRefCount(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a._collection?(a._fireUpdateStart(),a._refresh(!0),a._fireUpdateEnd()):this._fetchAll()},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchAll:function(){var a=this.featureLayer;!a._collection&&!a.suspended&&(a._fireUpdateStart(),this._clearIIf(),
this._sendRequest())},_sendRequest:function(a){var b=this.map,d=this.featureLayer,c=d.getDefinitionExpression(),h=new m;h.outFields=d.getOutFields();h.where=c||"1\x3d1";h.returnGeometry=!0;h.outSpatialReference=new l(b.spatialReference.toJson());h.timeExtent=d.getTimeDefinition();h.maxAllowableOffset=d._maxOffset;h.quantizationParameters=d._quantizationParameters;d._ts&&(h._ts=(new Date).getTime());h.orderByFields=d.supportsAdvancedQueries?d.getOrderByFields():null;h.multipatchOption=d.multipatchOption;
this.pagination&&(this._start=h.start=null==a?0:a,h.num=d.maxRecordCount);var p;d._usePatch&&(p=this._getRequestId(d),this._cancelPendingRequest(null,p));d._task.execute(h,this._drawFeatures,this._queryErrorHandler,p)},_drawFeatures:function(a){this._purgeRequests();var b=a.features,d=this.featureLayer,c=d.objectIdField,h,l=b.length,m=a.exceededTransferLimit&&!d._collection,p=d._selectedFeatures,k=d.mode===d.constructor.MODE_AUTO,g,q,w;for(h=0;h<l;h++)q=b[h],w=q.attributes[c],g=this._addFeatureIIf(w,
q),this._incRefCount(w),k&&(g!==q&&p[w])&&(g.setGeometry(q.geometry),g.setAttributes(q.attributes));this._applyTimeFilter(!0);if(!this.pagination||!m)d._fireUpdateEnd(null,a.exceededTransferLimit?{queryLimitExceeded:!0}:null);m&&(this.pagination&&this._sendRequest(this._start+d.maxRecordCount),d.onQueryLimitExceeded())},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)}});a("extend-esri")&&d.setObject("layers._SnapshotMode",h,b);return h})},
"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(h,d,a,b,l,m,p,r){var e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};h=h(r,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(f,c,h){f?d.isString(f)?(this.url=f,c&&(this.width=c),h&&(this.height=h)):(this.width=b.pt2px(f.width),this.height=b.pt2px(f.height),c=f.imageData,
!(9>a("ie"))&&c&&(h=this.url,this.url="data:"+(f.contentType||"image")+";base64,"+c,this.imageData=h)):(d.mixin(this,e),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",
x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,c=this.imageData;if(0===a.indexOf("data:"))var e=a,a=c,c=e.indexOf(";base64,")+8,c=e.substr(c);if(d.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=p.getAbsoluteUrl(a);var e=b.px2pt(this.width),e=isNaN(e)?void 0:e,h=b.px2pt(this.height),h=isNaN(h)?void 0:h,a=m.fixJson(d.mixin(this.inherited("toJson",
arguments),{type:"esriPMS",url:a,imageData:c,contentType:this.contentType,width:e,height:h}));delete a.color;delete a.size;a.imageData||delete a.imageData;return a}});h.defaultProps=e;a("extend-esri")&&(d.setObject("symbol.PictureMarkerSymbol",h,l),l.symbol.defaultPictureMarkerSymbol=e);return h})},"esri/tasks/geoenrichment/DriveBuffer":function(){define(["../../declare","./StudyAreaOptions","./DriveUnits"],function(h,d,a){return h("esri.tasks.geoenrichment.DriveBuffer",[d],{radii:null,units:null,
constructor:function(b){b&&(b.bufferRadii?this.radii=b.bufferRadii:b.radius?this.radii=[b.radius]:b.radii&&(this.radii=b.radii),this.units=b.bufferUnits||b.units);this.radii||(this.radii=[5]);this.units||(this.units=a.MINUTES)},toJson:function(){return{areaType:"DriveTimeBuffer",bufferUnits:this.units,bufferRadii:this.radii}}})})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,d,a,b){h=h(null,{declaredClass:"esri.tasks.StatisticDefinition",
toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});a("extend-esri")&&d.setObject("tasks.StatisticDefinition",h,b);return h})},"esri/dijit/analysis/HelpWindow":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/_base/kernel dojo/aspect dojo/has dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/dom-style dojo/query dojo/window dojo/dom-geometry dijit/_Widget dijit/TooltipDialog dijit/popup ../../kernel ../../lang ../../request ../_EventedWidget dojo/i18n!../../nls/jsapi".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E){a=a([g],{declaredClass:"esri.dijit.analysis.HelpWindow",i18n:null,onlineHelpMap:null,showLearnMore:!1,"class":"esriAnalyisHelpWindow",postMixInProperties:function(){this.inherited(arguments);this.i18n={};b.mixin(this.i18n,E.common);b.mixin(this.i18n,E.analysisHelp)},postCreate:function(){this.inherited(arguments);var a=["ar","he"],c,d;this.onlineHelpMap={};for(c=0;c<a.length;c+=1)d=a[c],p.locale&&-1!==p.locale.indexOf(d)&&(-1!==p.locale.indexOf("-")?
-1!==p.locale.indexOf(d+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);a=h.toUrl("./help/helpmap.json");x({url:a}).then(b.hitch(this,function(a){this.onlineHelpMap=a.map}))},_getAbsoluteUrl:function(a){if(/^https?\:/i.test(a))return a;if(/^\/\//i.test(a))return window.location.protocol+a;if(/^\//i.test(a))return window.location.protocol+"//"+window.location.host+a},_computeSize:function(a){var b={w:400,h:200};e("esri-mobile")?b={w:"90%",h:"90%"}:-1!==a.indexOf("Category")?(b.w=400,b.h=320):
-1!==a.indexOf("Tool")?(b.w=400,b.h=320):-1!==a.indexOf("toolDescription")&&(b.w=400,b.h=520);return b},_setHelpTopicAttr:function(a){this.tooltipHelpDlg&&(w.close(this.tooltipHelpDlg),this.tooltipHelpDlg.destroy(),this.tooltipHelpDlg=null);var c,e,g,f,k="";this.showLearnMore=!1;e=this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("dev")?"dev":this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("qa")?"uat":"";k=this.isPortal?"-PortalOnly":"-OnlineOnly";c=b.clone(p.locale);"nb"===
c&&(c="no");g=h.toUrl("esri/dijit/analysis/help/"+this.helpFileName+".html");z.isDefined(this.onlineHelpMap[this.helpFileName])&&z.isDefined(this.onlineHelpMap[this.helpFileName][a])&&(this.showLearnMore=!0,f="http://doc"+e+".arcgis.com/en/arcgis-online/use-maps/"+this.onlineHelpMap[this.helpFileName][a]);-1!==d.indexOf("ar cs da de es el et fi fr it ja ko lt lv ru nl no pl pt-br pt-pt ro sv th tr vi zh-cn zh-hk zh-tw".split(" "),c)&&(-1!==c.indexOf("-")&&(g=c.split("-"),c=g[0]+"-"+g[1].toUpperCase()),
g=h.toUrl("esri/dijit/analysis/help/"+c+"/"+this.helpFileName+".html"));-1!==d.indexOf("ar de es fr it ja ko ru nl pl pt-br pt-pt ro zh-cn zh-hk zh-tw".split(" "),c)&&this.showLearnMore&&(f="http://doc"+e+".arcgis.com/"+c+"/arcgis-online/use-maps/"+this.onlineHelpMap[this.helpFileName][a]);this._size=e=this._computeSize(a);this.tooltipHelpDlg=new q({preload:!0,content:"\x3cdiv class\x3d'' style\x3d'position:relative'\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3cdiv class\x3d'esriFloatTrailing' style\x3d'padding:0;'\x3e\x3ca href\x3d'#' class\x3d'esriAnalysisCloseIcon' title\x3d'"+
this.i18n.close+"'\x3e\x3c/a\x3e\x3c/div\x3e\x3ciframe frameborder\x3d'0'  id\x3d'"+a+"' src\x3d'"+g+"#"+a+k+"' width\x3d'"+e.w+"' height\x3d'"+e.h+"' marginheight\x3d'0' marginwidth\x3d'0'\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList"+(this.showLearnMore?"'\x3e":" hidden'\x3e")+"\x3ca class\x3d'action zoomTo' href\x3d'"+(this.showLearnMore?f:"#")+"' target\x3d'_help'\x3e"+this.i18n.learnMore+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
"class":"esriHelpPopup esriHelpPopupWrapper esriAnalyisHelpWindow"});this.tooltipHelpDlg.startup()},show:function(a,c){this.helpFileName=c.helpFileName;this._analysisGpServer=c.analysisGpServer;this.isPortal=c.isPortal;this.set("helpTopic",c.helpId);var d=r.after(w,"open",b.hitch(this,function(){t(".esriAnalysisCloseIcon",this.tooltipHelpDlg.domNode).on("click",b.hitch(this,this.close));d.remove()})),e=a.pageX,g=s.getBox(),f,h,l;l=!1;c.helpParentNode&&(f=c.helpParentNode);f&&(h=k.position(f));h&&
g.w-a.pageX<h.w?(l=!0,e=h.x-this._size.w-10,this._isRightToLeft&&(e-=10)):this._isRightToLeft&&e-40<this._size.w&&(e=h.w+this._size.w+80);w.open({popup:this.tooltipHelpDlg,x:!0===this._isRightToLeft||l?e-40:e+40,y:a.screenY-a.pageY+10,onCancel:b.hitch(this,function(){this.close()}),onExecute:function(){this.close()}});this.tooltipHelpDlg.domNode.parentNode&&u.set(this.tooltipHelpDlg.domNode.parentNode,"overflowY","hidden")},close:function(a,b){w.close(this.tooltipHelpDlg)}});e("extend-esri")&&b.setObject("dijit.analysis.HelpWindow",
a,v);return a})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(h,d,a,b,l,m,p,r,e){var f={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:b.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},c={start:"left",middle:"center",end:"right"},n={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",
baseline:"alphabetic",bottom:"text-after-edge"},t=document.createElement("canvas");h=h(r,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(a,c,g){d.mixin(this,f);this.font=new e(this.font);this.color=new p(this.color);a&&(d.isObject(a)?(d.mixin(this,a),this.color&&m.isDefined(this.color[0])&&(this.color=p.toDojoColor(this.color)),this.type="textsymbol",this.font=new e(this.font),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&
(this.angle*=-1),this.haloSize&&(this.haloSize=b.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=p.toDojoColor(this.haloColor))):(this.text=a,c&&(this.font=c),g&&(this.color=g)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){this.font=a;return this},setSize:function(a){this.font.size=a;return this},setAngle:function(a){this.angle=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setHaloColor:function(a){this.haloColor=a;return this},setHaloSize:function(a){this.haloSize=
a;return this},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&c[a.toLowerCase()]||"center");return this},setHorizontalAlignment:function(a){this.horizontalAlignment=a;return this},getSVGAlign:function(){var a=this.horizontalAlignment;return a=a&&n[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){this.verticalAlignment=a;return this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&u[a.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===
this.verticalAlignment?"super":null},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new e);this.font.setDecoration(a);return this},setRotated:function(a){this.rotated=a;return this},setKerning:function(a){this.kerning=a;return this},setText:function(a){this.text=a;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var a=t&&t.getContext&&t.getContext("2d");if(a){var c=this.font;a.font=(c.style?c.style:b.defaultFont.style)+" "+
(c.weight?c.weight:b.defaultFont.weight)+" "+(c.size?c.size:b.defaultFont.size)+"px "+(c.family?c.family:b.defaultFont.family);return a.measureText(this.text).width}var a=this.getHeight(),c=0,d,e;for(d=0;d<this.text.length;d++)e=this.text.charAt(d),c=e==e.toUpperCase()?c+0.7*a:c+0.5*a;return c},getHeight:function(){return b.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a=this.font,b;a&&(b={},a.size&&(b.size=a.size),a.style&&(b.style=a.style),a.variant&&(b.variant=a.variant),
a.decoration&&(b.decoration=a.decoration),a.weight&&(b.weight=a.weight),a.family&&(b.family=a.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||a&&a.decoration,rotated:this.rotated,kerning:this.kerning},font:b,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=b.px2pt(this.xoffset),c=b.px2pt(this.yoffset),e=b.px2pt(this.haloSize),a=isNaN(a)?void 0:a,c=isNaN(c)?void 0:c,e=isNaN(e)?void 0:e;return m.fixJson(d.mixin(this.inherited("toJson",
arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:e,haloColor:this.haloColor&&p.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:c,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});d.mixin(h,{ALIGN_START:"start",
ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});h.defaultProps=f;a("extend-esri")&&(d.setObject("symbol.TextSymbol",h,l),l.symbol.defaultTextSymbol=f);return h})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(h,d,a,b,l,m){var p=function(b){b=b||{};var d=a.getLocalization("dojo.cldr",
"number",a.normalizeLocale(b.locale)),c=b.pattern?b.pattern:d[(b.type||"decimal")+"Format"];b="number"==typeof b.places?b.places:"string"===typeof b.places&&0<b.places.length?b.places.replace(/.*,/,""):-1!=c.indexOf(".")?c.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:d.decimal,places:b}},r=h("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(d.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,
editOptions:{pattern:"#.######"},_formatter:l.format,_regExpGenerator:l.regexp,_decimalInfo:p(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(a){var b="number"==typeof a.places?a.places:0;b&&b++;"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-b));"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-b));this.inherited(arguments,[a]);this.focusNode&&(this.focusNode.value&&!isNaN(this.value))&&this.set("value",this.value);this._decimalInfo=
p(a)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var a=this.get("value");"number"==typeof a&&!isNaN(a)&&(a=this.format(a,this.constraints),void 0!==a&&(this.textbox.value=a));this.inherited(arguments)}},format:function(a,b){var c=String(a);if("number"!=typeof a)return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(b=d.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:l.parse,
parse:function(a,b){var c=this._parser(a,d.mixin({},b,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&(this.focused&&isNaN(c))&&(c=this._parser(a,b));return c},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==a||"string"==typeof a&&""==a)return NaN;"number"==typeof a&&(!isNaN(a)&&0!=a)&&(a=l.round(a,this._decimalInfo.places));return this.inherited(arguments,[a])},serialize:function(a,b){return"number"!=
typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=d.hitch(d.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){if(void 0!==a&&void 0===c)if(c=String(a),"number"==typeof a)if(isNaN(a))c="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else a?a=void 0:(c="",a=NaN);this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);
if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+l._realNumberRegexp(d.delegate(this.constraints))+"$").test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!isNaN(b)&&this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?
!0:this.inherited(arguments):!1},_isValidSubset:function(){var a="number"==typeof this.constraints.min,d="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!a&&!d)return this.inherited(arguments);var h=c|0,l=0>c,m=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),p=(this.maxLength||20)-this.textbox.value.length,k=m?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",h=m?h+"."+k:h+"",p=b.rep("9",p),m=c;l?m=Number(h+p):c=Number(h+p);return!(a&&c<this.constraints.min||
d&&m>this.constraints.max)}});h=h("dijit.form.NumberTextBox",[m,r],{baseClass:"dijitTextBox dijitNumberTextBox"});h.Mixin=r;return h})},"put-selector/put":function(){(function(h){var d,a=/[-+,> ]/;h([],d=function(b,h){function m(c){function d(){g&&(k&&g!=k)&&(k==c&&(h||(h=a.test(z)&&b.createDocumentFragment()))?h:k).insertBefore(g,s||null)}for(var h,l,s,k,g,q=arguments,w=q[0],v=0;v<q.length;v++){var z=q[v];if("object"==typeof z){l=!1;if(z instanceof Array){g=b.createDocumentFragment();for(var x=0;x<
z.length;x++)g.appendChild(m(z[x]));z=g}if(z.nodeType)g=z,d(),k=z,s=0;else for(x in z)g[x]=z[x]}else if(l)l=!1,g.appendChild(b.createTextNode(z));else{1>v&&(c=null);l=!0;if(w=z.replace(p,function(a,h,l,p,t,u){h&&(d(),"-"==h||"+"==h?(k=(s=g||k).parentNode,g=null,"+"==h&&(s=s.nextSibling)):("\x3c"==h?k=g=(g||k).parentNode:(","==h?k=c:g&&(k=g),g=null),s=0),g&&(k=g));if((a=!l&&p)||!g&&(l||t))"$"==a?(a=q[++v],k.appendChild(b.createTextNode(a))):(a=a||m.defaultTag,(h=f&&q[v+1]&&q[v+1].name)&&(a="\x3c"+
a+' name\x3d"'+h+'"\x3e'),g=e&&~(r=a.indexOf("|"))?b.createElementNS(e[a.slice(0,r)],a.slice(r+1)):b.createElement(a));if(l)if("$"==p&&(p=q[++v]),"#"==l)g.id=p;else if(h=(a=g.className)&&(" "+a+" ").replace(" "+p+" "," "),"."==l)g.className=a?(h+p).substring(1):p;else if("!"==z){var w;f?m("div",g,"\x3c").innerHTML="":(w=g.parentNode)&&w.removeChild(g)}else h=h.substring(1,h.length-1),h!=a&&(g.className=h);t&&("$"==u&&(u=q[++v]),"style"==t?g.style.cssText=u:(l="!"==t.charAt(0)?(t=t.substring(1))&&
"removeAttribute":"setAttribute",u=""===u?t:u,e&&~(r=t.indexOf("|"))?g[l+"NS"](e[t.slice(0,r)],t.slice(r+1),u):g[l](t,u)));return""}))throw new SyntaxError("Unexpected char "+w+" in "+z);d();k=w=g||k}}c&&h&&c.appendChild(h);return w}a=h||a;var p=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w\u00A0-\uFFFF%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,r,e=!1;b=b||document;var f="object"==typeof b.createElement;m.addNamespace=function(a,d){b.createElementNS?(e||(e={}))[a]=d:b.namespaces.add(a,d)};m.defaultTag=
"div";m.forDocument=d;return m})})(function(h,d,a){a=a||d;"function"===typeof define?define([],function(){return a()}):"undefined"==typeof window?require("./node-html")(module,a):put=a()})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s){var k=d("dijit.CalendarLite",[u,t],{templateString:s,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);
b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=m.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),
a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);var b=this._patchDate(b),c=b.getDay(),d=this.dateModule.getDaysInMonth(b),e=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),f=new this.dateClassObj,k=a.getFirstDayOfWeek(this.lang);k>c&&(k-=7);if(!this.summary){var l=this.dateLocaleModule.getNames("months",
"wide","standAlone",this.lang,b);this.gridNode.setAttribute("summary",l[b.getMonth()])}this._date2cell={};h.forEach(this.dateCells,function(a,h){var l=h+k,m=new this.dateClassObj(b),n="dijitCalendar",p=0;l<c?(l=e-c+l+1,p=-1,n+="Previous"):l>=c+d?(l=l-c-d+1,p=1,n+="Next"):(l=l-c+1,n+="Current");p&&(m=this.dateModule.add(m,"month",p));m.setDate(l);this.dateModule.compare(m,f,"date")||(n="dijitCalendarCurrentDate "+n);this.isDisabledDate(m,this.lang)?(n="dijitCalendarDisabledDate "+n,a.setAttribute("aria-disabled",
"true")):(n="dijitCalendarEnabledDate "+n,a.removeAttribute("aria-disabled"),a.setAttribute("aria-selected","false"));(p=this.getClassForDate(m,this.lang))&&(n=p+" "+n);a.className=n+"Month dijitCalendarDateTemplate";n=m.valueOf();this._date2cell[n]=a;a.dijitDateValue=n;this._setText(this.dateLabels[h],m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=
a.getFullYear()-1,c=new this.dateClassObj;h.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?e.getObject(a.datePackage,!1):b;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?e.getObject(a.datePackage+".locale",!1):l},_createMonthWidget:function(){return k._MonthWidget({id:this.id+
"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,c=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=a.getFirstDayOfWeek(this.lang);this.dayCellsHtml=n.substitute([b,b,b,b,b,b,b].join(""),{d:""},function(){return c[d++%7]});b=n.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);
p.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=e.hitch(this,function(a,b,c){this[a].dojoClick=!0;return f(this[a],"click",e.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),
a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var d=this.currentFocus,e=this._getNodeByDate(d);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(d,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);d=this._getNodeByDate(a);d.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&d.focus();e&&e!=d&&(c("webkit")?e.setAttribute("tabIndex","-1"):
e.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!r.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,c){r.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",
a?"true":"false")}h.forEach(this._selectedCells||[],e.partial(b,!1));this._selectedCells=h.filter(h.map(a,this._getNodeByDate,this),function(a){return a});h.forEach(this._selectedCells,e.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});k._MonthWidget=d("dijit.CalendarLite._MonthWidget",u,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),d=6==c("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+h.map(b,
function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=d+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return k})},"esri/tasks/GenerateRendererTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/number dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ../urlUtils ../renderers/jsonUtils ./StatisticDefinition ./Task ./QueryTask ./query dojo/has!extend-esri?./GenerateRendererParameters dojo/has!extend-esri?./ClassificationDefinition dojo/has!extend-esri?./ClassBreaksDefinition dojo/has!extend-esri?./UniqueValueDefinition dojo/has!extend-esri?./ColorRamp dojo/has!extend-esri?./AlgorithmicColorRamp dojo/has!extend-esri?./MultipartColorRamp".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g){d=d(s,{declaredClass:"esri.tasks.GenerateRendererTask",_eventMap:{complete:["renderer"]},constructor:function(b,c){a.isObject(b)&&("esri.layers.FeatureLayer"===b.declaredClass||"esri.layers.CSVLayer"===b.declaredClass)?b.url&&a.isString(b.url)&&"esri.layers.CSVLayer"!==b.declaredClass?(this.url=b.url,this._url=n.urlToObject(this.url),this._url.path+="/generateRenderer"):this._features=b.graphics:(this.url=b,this._url.path+="/generateRenderer");this._handler=
a.hitch(this,this._handler);this.source=c&&c.source;this.gdbVersion=c&&c.gdbVersion;this.checkValueRange=c&&c.checkValueRange;this.registerConnectEvents()},_handler:function(b,c,d,e,f){try{var h;"esri.renderer.ClassBreaksRenderer"===b.declaredClass||"esri.renderer.UniqueValueRenderer"===b.declaredClass?h=b:(h=u.fromJson(b),"classBreaks"===b.type&&h.setMaxInclusive(!0));if(this.checkValueRange){var l=new k(this.url),m=new g,n=new t;n.statisticType="min";n.onStatisticField=this._field;var p=new t;p.statisticType=
"max";p.onStatisticField=this._field;m.outStatistics=[n,p];l.execute(m).then(a.hitch(this,function(a){a=a.features[0].attributes;for(var b in a)if(0===b.toLowerCase().indexOf("min"))var c=a[b];else var e=a[b];h=this._processRenderer(h,this._prefix,this._unitLabel,this._formatLabel,this._precision,c,e);this._successHandler([h],"onComplete",d,f)}))}else h=this._processRenderer(h,this._prefix,this._unitLabel,this._formatLabel,this._precision),this._successHandler([h],"onComplete",d,f)}catch(r){this._errorHandler(r,
e,f)}},_processRenderer:function(a,c,d,e,f,g,h){"esri.renderer.ClassBreaksRenderer"===a.declaredClass?b.forEach(a.infos,function(b,k){0===k&&(void 0!==g&&null!==g)&&(b.minValue=g);k===a.infos.length-1&&(void 0!==h&&null!==h)&&(b.classMaxValue=b.maxValue=h);f&&(b.classMaxValue=b.maxValue=Math.round(b.maxValue/f)*f,b.minValue=Math.round(b.minValue/f)*f);e&&(b.label=l.format(b.minValue)+" - "+l.format(b.maxValue));c&&(b.label=c+" "+b.label);d&&(b.label=b.label+" "+d)}):b.forEach(a.infos,function(b,f){0===
f&&(void 0!==g&&null!==g)&&(b.value=g);f===a.infos.length-1&&(void 0!==h&&null!==h)&&(b.value=h);e&&(b.label=l.format(b.value));c&&(b.label=c+" "+b.label);d&&(b.label=b.label+" "+d)});return a},execute:function(b,d,e){var g,k=this._handler,l=this._errorHandler;this._precision=b.precision;this._prefix=b.prefix;this._unitLabel=b.unitLabel;this._formatLabel=b.formatLabel;if(this._features=b.features||this._features){g=new p;var n=this._features;h(["./generateRenderer"],function(a){var c;"esri.tasks.ClassBreaksDefinition"===
b.classificationDefinition.declaredClass?c=a.createClassBreaksRenderer({features:n,definition:b.classificationDefinition}):"esri.tasks.UniqueValueDefinition"===b.classificationDefinition.declaredClass&&(c=a.createUniqueValueRenderer({features:n,definition:b.classificationDefinition}));c?k(c,null,d,e,g):l(null,e,g)})}else{var r=a.mixin(b.toJson(),{f:"json"});this._field="esri.tasks.ClassBreaksDefinition"===b.classificationDefinition.declaredClass?b.classificationDefinition.classificationField:b.classificationDefinition.attributeField;
if(this.source){var s={source:this.source.toJson()};r.layer=m.toJson(s)}this.gdbVersion&&(r.gdbVersion=this.gdbVersion);g=new p(c._dfdCanceller);g._pendingDfd=f({url:this._url.path,content:r,callbackParamName:"callback",load:function(a,b){k(a,b,d,e,g)},error:function(a){l(a,e,g)}})}return g},onComplete:function(){}});r("extend-esri")&&a.setObject("tasks.GenerateRendererTask",d,e);return d})},"esri/dijit/analysis/ConnectOriginsToDestinations":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/fx dojo/has dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/fx/easing dojo/number dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/TextBox dijit/form/ValidationTextBox dijit/layout/ContentPane dijit/form/FilteringSelect ../../kernel ../../lang ./AnalysisBase ./_AnalysisOptions ./CreditEstimator ./utils ./TrafficTime dojo/i18n!../../nls/jsapi dojo/text!./templates/ConnectOriginsToDestinations.html".split(" "),
function(h,d,a,b,l,m,p,r,e,f,c,n,u,t,s,k,g,q,w,v,z,x,A,E,B,D,y,I,H,M,K,J,F,G,N,L,C,O,R,W){h=d([q,w,v,z,x,N,G],{declaredClass:"esri.dijit.analysis.ConnectOriginsToDestinations",templateString:W,widgetsInTemplate:!0,originsLayer:null,destinationsLayer:null,measurementType:"DrivingTime",outputLayerName:null,distanceDefaultUnits:"Miles",originsLayerRouteIDField:null,destinationsLayerRouteIDField:null,enableTravelModes:!0,i18n:null,toolName:"ConnectOriginsToDestinations",helpFileName:"ConnectOriginsToDestinations",
resultParameter:["routesLayer","unassignedOriginsLayer","unassignedDestinationsLayer"],constructor:function(a,b){this._pbConnects=[];a.containerNode&&(this.container=a.containerNode)},destroy:function(){this.inherited(arguments);b.forEach(this._pbConnects,l.disconnect);delete this._pbConnects},postMixInProperties:function(){this.inherited(arguments);a.mixin(this.i18n,R.common);a.mixin(this.i18n,R.bufferTool);a.mixin(this.i18n,R.driveTimes);a.mixin(this.i18n,R.routeOriginDestinationPairsTool)},postCreate:function(){this.inherited(arguments);
s.add(this._form.domNode,"esriSimpleForm");this._outputLayerInput.set("validator",a.hitch(this,this.validateServiceName));this._buildUI()},startup:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_handleShowCreditsClick:function(b){b.preventDefault();b={};this._form.validate()&&(b.originsLayer=m.toJson(C.constructAnalysisInputLyrObj(this.originsLayer)),b.destinationsLayer=m.toJson(C.constructAnalysisInputLyrObj(this.get("destinationsLayer"))),
b.measurementType=this.get("measurementType"),"none"!==c.get(this._routeIdRow,"display")&&(b.originsLayerRouteIDField=this.get("originsLayerRouteIDField"),b.destinationsLayerRouteIDField=this.get("destinationsLayerRouteIDField")),this._trafficTimeWidget.get("checked")&&(b.timeOfDay=this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(b.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay"))),this.returnFeatureCollection||(b.OutputName=
m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(b.context=m.toJson({extent:this.map.extent._normalize(!0)})),this.getCreditsEstimate(this.toolName,b).then(a.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_handleSaveBtnClick:function(a){a={};var b={},d;this._form.validate()&&(this._saveBtn.set("disabled",!0),a.originsLayer=m.toJson(C.constructAnalysisInputLyrObj(this.originsLayer)),
a.destinationsLayer=m.toJson(C.constructAnalysisInputLyrObj(this.get("destinationsLayer"))),d=this._measureMethodSelect.getOptions(this._measureMethodSelect.get("value")),a.measurementType=d.travelMode?m.toJson(d.travelMode):this._measureMethodSelect.get("value"),"none"!==c.get(this._routeIdRow,"display")&&(a.originsLayerRouteIDField=this.get("originsLayerRouteIDField"),a.destinationsLayerRouteIDField=this.get("destinationsLayerRouteIDField")),this._trafficTimeWidget.get("checked")&&(a.timeOfDay=
this._trafficTimeWidget.get("timeOfDay"),"UTC"===this._trafficTimeWidget.get("timeZoneForTimeOfDay")&&(a.timeZoneForTimeOfDay=this._trafficTimeWidget.get("timeZoneForTimeOfDay"))),this.returnFeatureCollection||(a.OutputName=m.toJson({serviceProperties:{name:this._outputLayerInput.get("value")}})),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.context=m.toJson({extent:this.map.extent._normalize(!0)})),this.returnFeatureCollection&&(d={outSR:this.map.spatialReference},this.showChooseExtent&&
this._useExtentCheck.get("checked")&&(d.extent=this.map.extent._normalize(!0)),a.context=m.toJson(d)),b.jobParams=a,b.itemParams={description:f.substitute(this.i18n.itemDescription,{layername:this.originsLayer.name,distance_field:a.Distances||a.Field,units:a.Units}),tags:f.substitute(this.i18n.itemTags,{layername:this.originsLayer.name,destnlayername:this.destinationsLayer.name}),snippet:this.i18n.itemSnippet},this.showSelectFolder&&(b.itemParams.folder=this.get("folderId")),this.execute(b))},_save:function(){},
_buildUI:function(){var b=!0;c.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");C.initHelpLinks(this.domNode,this.showHelp);c.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(a.hitch(this,function(a){this.folderStore=a;C.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:
""})}));c.set(this._chooseExtentDiv,"display",!0===this.showChooseExtent?"inline-block":"none");C.populateTravelModes({selectWidget:this._measureMethodSelect,addStraightLine:!0,widget:this,enableTravelModes:this.get("enableTravelModes"),selectDefaultMode:!0});var d=this.on("travelmodes-added",a.hitch(this,function(){this._handleMeasurementTypeChange(this._measureMethodSelect.get("value"));d.remove();d=null}));this.get("showSelectAnalysisLayer")&&(!this.get("originsLayer")&&this.get("originsLayers")&&
this.set("originsLayer",this.originsLayers[0]),C.populateAnalysisLayers(this,"originsLayer","originsLayers"));this.outputLayerName&&(this._outputLayerInput.set("value",this.outputLayerName),b=!1);this.originsLayer&&this._updateAnalysisLayerUI(b);C.addReadyToUseLayerOption(this,[this._analysisSelect,this._destPointLyrSelect]);this._loadConnections()},_updateAnalysisLayerUI:function(a){var d;this.originsLayer&&n.set(this._tripCalToolDescription,"innerHTML",f.substitute(this.i18n.toolDefine,{layername:this.originsLayer.name}));
this.featureLayers&&(this.set("featureLayers",this.featureLayers),d=b.some(this._destPointLyrSelect.getOptions(),function(a){return"browse"===a.value},this),this._destPointLyrSelect.removeOption(this._destPointLyrSelect.getOptions()),b.forEach(this.featureLayers,function(a,b){this._destPointLyrSelect.addOption({value:b+1,label:a.name});this.destinationsLayer&&this.destinationsLayer===a&&this._destPointLyrSelect.set("value",this.destinationsLayer)},this),this.get("showReadyToUseLayers")&&d&&(this._destPointLyrSelect.addOption({type:"separator",
value:""}),this._destPointLyrSelect.addOption({value:"browse",label:this.i18n.browseAnalysisTitle})));this.destinationsLayer||(this._destPointLyrSelect.set("value",1),this.set("destinationsLayer",this.featureLayers[0]));this.originsLayer&&this.originsLayer.graphics&&1>=this.originsLayer.graphics.length||this.destinationsLayer&&this.destinationsLayer.graphics&&1>=this.destinationsLayer.graphics.length?c.set(this._routeIdRow,"display","none"):c.set(this._routeIdRow,"display","table");if(this.originsLayer&&
this.originsLayer.graphics&&1<this.originsLayer.graphics.length||this.originsLayer.analysisReady)d=this.originsLayer.fields,this._originRouteIdSelect.removeOption(this._originRouteIdSelect.getOptions()),b.forEach(d,function(a,c){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeString","esriFieldTypeDate"],a.type)&&this._originRouteIdSelect.addOption({value:a.name,label:F.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this),this.originsLayerRouteIDField&&
this._orginRouteIdSelect.set("value",this.originsLayerRouteIDField);a&&(this._destPointLyrSelect.get("value")&&"browse"!==this._destPointLyrSelect.get("value"))&&this.set("outputLayerName",f.substitute(this.i18n.outputLayerName,{layername:this.originsLayer.name,destnlayername:this.featureLayers[this._destPointLyrSelect.get("value")-1].name}))},_handleAnalysisLayerChange:function(a){var c,d;"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",
this._analysisquery+' AND tags:"point"'),this._isAnalysisSelect=!0,this._browsedlg.show()):(a=this.originsLayers[a],c=this.featureLayers.slice(),(d=b.some(c,function(a){return a===this.originsLayer},this))||c.push(this.originsLayer),this.originsLayer=a,this.set("featureLayers",c),this.outputLayerName=this.originsLayerRouteIDField=this.destinationsLayer=null,this._updateAnalysisLayerUI(!0))},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+
"/"+this.toolName))},_setOriginsLayerAttr:function(a){F.isDefined(a)&&"esriGeometryPoint"===a.geometryType&&(this.originsLayer=a)},_getOriginsLayerAttr:function(){return this.originsLayer},_setOriginsLayersAttr:function(a){this.originsLayers=a},_setFeatureLayersAttr:function(a){this.featureLayers=b.filter(a,function(a){if(!(F.isDefined(this.originsLayer)&&a===this.originsLayer)&&a&&a.geometryType&&"esriGeometryPoint"===a.geometryType)return!0},this)},_getFeatureLayersAttr:function(a){return this.featureLayers},
_setDisableRunAnalysisAttr:function(a){this._saveBtn.set("disabled",a)},validateServiceName:function(a){return C.validateServiceName(a,{textInput:this._outputLayerInput})},_setMeasurementTypeAttr:function(a){this.measurementType=a},_getMeasurementTypeAttr:function(){return this.measurementType},_setDistanceDefaultUnitsAttr:function(a){this.distanceDefaultUnits=a},_getDistanceDefaultUnitsAttr:function(){return this.distanceDefaultUnits},_setDestinationsLayerAttr:function(a){this.destinationsLayer=
a},_getDestinationsLayerAttr:function(){this._destPointLyrSelect&&(this.destinationsLayer=this.featureLayers[this._destPointLyrSelect.get("value")-1]);return this.destinationsLayer},_setOriginsLayerRouteIDFieldAttr:function(a){this.originsLayerRouteIDField=a},_getOriginsLayerRouteIDFieldAttr:function(){this._originRouteIdSelect&&this._isRouteIdAvailable()&&(this.originsLayerRouteIDField=this._originRouteIdSelect.get("value"));return this.originsLayerRouteIDField},_setDestinationsLayerRouteIDFieldAttr:function(a){this.destinationsLayerRouteIDField=
a},_getDestinationsLayerRouteIDFieldAttr:function(){this._destnRouteIdSelect&&this._isRouteIdAvailable&&(this.destinationsLayerRouteIDField=this._destnRouteIdSelect.get("value"));return this.destinationsLayerRouteIDField},_setOutputLayerNameAttr:function(a){this.outputLayerName=a;this._outputLayerInput&&this._outputLayerInput.set("value",this.outputLayerName)},_setEnableTravelModesAttr:function(a){this._set("enableTravelModes",a)},_loadConnections:function(){this.on("start",a.hitch(this,"_onClose",
!0));this._connect(this._closeBtn,"onclick",a.hitch(this,"_onClose",!1));l.connect(this._measureMethodSelect,"onChange",a.hitch(this,this._handleMeasurementTypeChange));this.watch("enableTravelModes",a.hitch(this,function(a,b,c){this._updateTravelModes(c)}))},_connect:function(a,b,c){this._pbConnects.push(l.connect(a,b,c))},_handleBrowseItemsSelect:function(b){b&&b.selection&&C.addAnalysisReadyLayer({item:b.selection,layers:this._isAnalysisSelect?this.originsLayers:this.featureLayers,layersSelect:this._isAnalysisSelect?
this._analysisSelect:this._destPointLyrSelect,posIncrement:this._isAnalysisSelect?0:1,browseDialog:this._browsedlg,widget:this}).always(a.hitch(this,function(a){this._isAnalysisSelect&&this._handleAnalysisLayerChange(this._analysisSelect.get("value"))}))},_handleDestnRouteIdChange:function(a){!this._autoSelRtId&&F.isDefined(this._originRouteIdSelect.getOptions(a))&&(this._autoSelRtId=!0,this._originRouteIdSelect.set("value",a))},_handleOriginRouteIdChange:function(a){!this._autoSelRtId&&F.isDefined(this._destnRouteIdSelect.getOptions(a))&&
(this._autoSelRtId=!0,this._destnRouteIdSelect.set("value",a))},_handleMeasurementTypeChange:function(a){var b;b=this._measureMethodSelect.getOptions(this._measureMethodSelect.get("value"));b=F.isDefined(b)?"Time"===b.units&&"driving"===b.modei18nKey:"DrivingTime"===a;this.set("measurementType",a);c.set(this._useTrafficLabelRow,"display",b?"":"none");this._trafficTimeWidget.set("disabled",!b);this._trafficTimeWidget.set("reset",!b)},_handleDestinationLayerChange:function(a){var d;"browse"===a?(this._analysisquery||
(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery+' AND tags:"point"'),this._isAnalysisSelect=!1,this._browsedlg.show()):(this._autoSelRtId&&(this._autoSelRtId=!1),this._destnRouteIdSelect.removeOption(this._destnRouteIdSelect.getOptions()),this.originsLayer&&(this.originsLayer.graphics&&1<this.originsLayer.graphics.length&&1<this.featureLayers[a-1].graphics.length||this.originsLayer.analysisReady)?this.featureLayers[a-1].graphics&&
this.originsLayer.graphics&&this.featureLayers[a-1].graphics.length!==this.originsLayer.graphics.length?(this._showMessages(this.i18n.inValidNumberRecordsMsg),this.set("disableRunAnalysis",!0),c.set(this._routeIdRow,"display","none")):(this._handleCloseMsg(),c.set(this._routeIdRow,"display","table"),this.set("disableRunAnalysis",!1),d=this.featureLayers[a-1].fields,b.forEach(d,function(a,c){-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeString",
"esriFieldTypeDate"],a.type)&&this._destnRouteIdSelect.addOption({value:a.name,label:F.isDefined(a.alias)&&""!==a.alias?a.alias:a.name})},this)):(c.set(this._routeIdRow,"display","none"),this.set("disableRunAnalysis",!1),this._handleCloseMsg()),this.originsLayer&&this.featureLayers[a-1]&&this._outputLayerInput.set("value",f.substitute(this.i18n.outputLayerName,{layername:this.originsLayer.name,destnlayername:this.featureLayers[a-1].name})))},_isRouteIdAvailable:function(){var a=!1;if(this.originsLayer.graphics&&
1<this.originsLayer.graphics.length&&1<this.featureLayers[this._destPointLyrSelect.get("value")-1].graphics.length)this.originsLayer.graphics&&this.originsLayer.graphics.length===this.featureLayers[this._destPointLyrSelect.get("value")-1].graphics.length&&(a=!0);else if(this.originsLayer.analysisReady||this.featureLayers[this._destPointLyrSelect.get("value")-1])a=!0;return a},_showMessages:function(b){n.set(this._bodyNode,"innerHTML",b);p.fadeIn({node:this._errorMessagePane,easing:k.quadIn,onEnd:a.hitch(this,
function(){c.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(b){b&&b.preventDefault();p.fadeOut({node:this._errorMessagePane,easing:k.quadOut,onEnd:a.hitch(this,function(){c.set(this._errorMessagePane,{display:"none"})})}).play()},_updateTravelModes:function(a){var c=this._measureMethodSelect.getOptions();b.forEach(c,function(b){"StraightLine"!==b.value&&(b.disabled=!a)});this._measureMethodSelect.updateOption(c)}});r("extend-esri")&&a.setObject("dijit.analysis.ConnectOriginsToDestinations",
h,J);return h})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(h,d,a,b,l,m,p,r,e,f){h=h(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var d=this._params={},e=this._url.query?this._url.query.token:null;e&&(d.token=
e)},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){p({url:this._url.path,content:d.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(b,d){try{this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();this.description=b.description;this.copyright=b.copyrightText;this.spatialReference=b.spatialReference&&
new r(b.spatialReference);this.initialExtent=b.initialExtent&&new e(b.initialExtent);this.fullExtent=b.fullExtent&&new e(b.fullExtent);this.units=b.units;this.maxRecordCount=b.maxRecordCount;this.maxImageHeight=b.maxImageHeight;this.maxImageWidth=b.maxImageWidth;this.supportsDynamicLayers=b.supportsDynamicLayers;var h=this.layerInfos=[],l=b.layers,p=this._defaultVisibleLayers=[];a.forEach(l,function(a,b){h[b]=new f(a);a.defaultVisibility&&p.push(a.id)});this.visibleLayers||(this.visibleLayers=p);
this.version=b.currentVersion;this.version||(this.version="capabilities"in b||"tables"in b?10:"supportedImageFormatTypes"in b?9.31:9.3);this.capabilities=b.capabilities;m.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale);m.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale)}catch(k){this._errorHandler(k)}}});b("extend-esri")&&d.setObject("layers.ArcGISMapServiceLayer",h,l);return h})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(h,d,a,b,l,m,p,r,e,f){return h("dijit.form._Spinner",r,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:e,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(a,b,d){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),b*d),!1),f.selectInputText(this.textbox,this.textbox.value.length))},
_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,e){var f=this.smallDelta;b==this.textbox&&(b=e.keyCode,f=b==d.PAGE_UP||b==d.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==d.UP_ARROW||b==d.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==a?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,f)},_wheelTimer:null,_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?
-1*a.detail:b;if(0!==a){var d=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(d,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(d)},50)}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",
this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,l.wheel,a.hitch(this,"_mouseWheeled")),p.addListener(this.upArrowNode,this.textbox,{keyCode:d.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,
this.textbox,{keyCode:d.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.upArrowNode,this.textbox,{keyCode:d.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,this.textbox,{keyCode:d.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",
this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(h,d,a,b,l,m,p,r,e){var f={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},c={style:f.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,
xoffset:0,yoffset:0};h=h(r,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(b,h,m,r){b?d.isString(b)?(this.style=b,h&&(this.size=h),m&&(this.outline=m),r&&(this.color=r)):(this.style=p.valueOf(this._styles,this.style),b.outline&&(this.outline=new e(b.outline))):(d.mixin(this,c),this.size=l.pt2px(this.size),this.outline=
new e(this.outline),this.color=new a(this.color));this.style||(this.style=f.STYLE_CIRCLE)},setStyle:function(a){this.style=a;return this},setPath:function(a){this.path=a;this.setStyle(f.STYLE_PATH);return this},setOutline:function(a){this.outline=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(a,b,c){this._targetWidth=a;this._targetHeight=b;this._spikeSize=c},getShapeDescriptors:function(){var a,b,d,e=this.style,
h=(this.size||l.pt2px(c.size))/2,g=0-h,m=0+h,p=0-h,r=0+h;switch(e){case f.STYLE_CIRCLE:a={type:"circle",cx:0,cy:0,r:h};b=this.getFill();if(d=this.getStroke())d.style=d.style||"Solid";break;case f.STYLE_CROSS:a={type:"path",path:"M "+g+",0 L "+m+",0 M 0,"+p+" L 0,"+r+" E"};b=null;d=this.getStroke();break;case f.STYLE_DIAMOND:a={type:"path",path:"M "+g+",0 L 0,"+p+" L "+m+",0 L 0,"+r+" L "+g+",0 E"};b=this.getFill();d=this.getStroke();break;case f.STYLE_SQUARE:a={type:"path",path:"M "+g+","+r+" L "+
g+","+p+" L "+m+","+p+" L "+m+","+r+" L "+g+","+r+" E"};b=this.getFill();d=this.getStroke();break;case f.STYLE_X:a={type:"path",path:"M "+g+","+r+" L "+m+","+p+" M "+g+","+p+" L "+m+","+r+" E"};b=null;d=this.getStroke();break;case f.STYLE_PATH:a={type:"path",path:this.path||""},b=this.getFill(),d=this.getStroke()}return{defaultShape:a,fill:b,stroke:d}},toJson:function(){var a=d.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),b=this.outline;b&&(a.outline=b.toJson());
a.path=this.path;return p.fixJson(a)}});d.mixin(h,f);h.defaultProps=c;b("extend-esri")&&(d.setObject("symbol.SimpleMarkerSymbol",h,m),m.symbol.defaultSimpleMarkerSymbol=c);return h})},"url:esri/dijit/analysis/templates/Analysis.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n   \x3cdiv data-dojo-type\x3d"dojox/widget/TitleGroup" class\x3d"analysisCategoryCtr" doLayout\x3d"false" style\x3d"height:600px;width:100%" data-dojo-attach-point\x3d"_leftAccordion"\x3e\r\n      \x3c!--\x3cdiv data-dojo-type\x3d"dijit/TitlePane"  title\x3d"dummy" style\x3d"height:240px;display:none;" data-dojo-attach-point\x3d"_dummyPane"\x3e\r\n      \x3c/div\x3e--\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane"  data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.summarizeData}"  data-esriHelpTopic\x3d"SummarizeDataCategory" data-dojo-attach-point\x3d"_summarizeTools"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.findLocations}"  data-esriHelpTopic\x3d"FindLocationsCategory" data-dojo-attach-point\x3d"_locationTools"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.dataEnrichment}" data-esriHelpTopic\x3d"EnrichLocationsCategory" data-dojo-attach-point\x3d"_geoenrichTools" \x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.analyzePatterns}" data-esriHelpTopic\x3d"AnalyzePatternsCategory" data-dojo-attach-point\x3d"_analyzePatTools"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.useProximity}" data-esriHelpTopic\x3d"UseProximityCategory" data-dojo-attach-point\x3d"_proximityTools"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false,toggleable:true" title\x3d"${i18n.manageData}"  data-esriHelpTopic\x3d"ManageDataCategory" data-dojo-attach-point\x3d"_managedataTools" \x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\x3c!-- end AccordionContainer --\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/templates/SingleFilter.html":'\x3cdiv class\x3d"esriSingleFilterForm singleFilter" id\x3d"${id}.singleFilter"\x3e\r\n  \x3cdiv\x3e\r\n    \x3ctable id\x3d"${id}.exprTable" class\x3d"rowTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column1"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column2"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column3"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column4"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column5"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column6"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column7"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3ca id\x3d"${id}.deleteExpression" href\x3d"JavaScript:void(0);" style\x3d"margin:0 5px;display:none;" class\x3d"esriAGOFilterRemoveIcon" title\x3d"${i18n.deleteExpression}"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_interactiveFilterRow"\x3e\r\n          \x3ctd colspan\x3d"8"\x3e\r\n            \x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"interactiveFilter"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3cinput dojoAttachPoint\x3d"interactiveCheck" type\x3d"checkbox" class\x3d"promptCheckBox" title\x3d"${i18n.promptMsg}"/\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3clabel class\x3d"labels" for\x3d"promptCheckBox"\x3e\r\n                              \x26nbsp;\x26nbsp;${i18n.askForValues}\r\n                            \x3c/label\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cspan dojoAttachPoint\x3d"interactiveArrow" style\x3d"color:#cbcbcb;cursor:pointer;" class\x3d"showHidePromptDiv"\x3e\x26nbsp;\x26#9660;\x3c/span\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr dojoAttachPoint\x3d"interactiveSpace" style\x3d"display:none"\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.prompt}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"promptText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.hint}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"hintText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"promptDiv" style\x3d"display:none;padding:10px 0px;"\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtPrompt"\x3e\r\n      ${i18n.prompt}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtPrompt" type\x3d"text"/\x3e\r\n    \x3cbr/\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtHint"\x3e\r\n      ${i18n.hint}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtHint" type\x3d"text" /\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/DataBrowser/templates/DataVariablesPage.html":'\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 0"\x3e\r\n    \x3cdiv class\x3d"BreadcrumbHeight"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"DataVariablesPage_VarCount"\x3e\x3cspan data-dojo-attach-point\x3d"spnVarTitle"\x3e\x3c/span\x3e ${nls.vars} (\x3cspan data-dojo-attach-point\x3d"spnVarsQuant"\x3e\x3c/span\x3e)\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 1"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"divTree" class\x3d"DataVariablesPage_Tree"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 2"\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:esri/dijit/geoenrichment/templates/Pagination.html":'\x3cdiv class\x3d"Pagination"\x3e\r\n    \x3cdiv class\x3d"Pagination_PageAndArrows"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"backNode"\r\n            class\x3d"Pagination_Triangle Pagination_TriangleBack"\r\n            style\x3d"display: none;"\r\n            data-dojo-attach-event\x3d"click: _back"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"Pagination_Items"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"itemsNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"forwardNode"\r\n            class\x3d"Pagination_Triangle Pagination_TriangleForward"\r\n            style\x3d"display: none;"\r\n            data-dojo-attach-event\x3d"click: _forward"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"bulletsNode" class\x3d"Pagination_Bullets"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:esri/dijit/analysis/templates/TraceDownstream.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"traceDownstreamIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.traceDownstream}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_interpolateToolDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3ctable style\x3d"width:100%;"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:80%"\x3e  \r\n                \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:20%"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton"  data-dojo-attach-point\x3d"_analysisPointDrawBtn"  class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleInputDrawPointChange"\x3e\x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.traceOptionsLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.splitTraceLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"SplitDistance"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n            \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"intermediateChanges:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_splitTraceInput" style\x3d"width:100%;"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n            \x3cselect class\x3d"longInput esriAnalysisSelect esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_splitTraceUnitsSelect"\x3e\r\n            \x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.maxTraceLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"MaxDistance"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n            \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"intermediateChanges:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_maxTraceInput" style\x3d"width:100%;"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n            \x3cselect class\x3d"longInput esriAnalysisSelect esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_maxTraceUnitsSelect"\x3e\r\n            \x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.clipOutputToLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"ClipArea"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"width:35%;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_boundingAreaSelect" data-dojo-attach-event\x3d"onChange:_handleBoundingSelectChange"\x3e\x3c/select\x3e                      \r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:9%;"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"_bndgPolyDrawBtn" class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon polygonIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleBoundingBtnChange"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputTrace"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:55%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/geoenrichment/DataBrowser/templates/ShoppingCart.html":'\x3cdiv class\x3d"ShoppingCart"\x3e\r\n    \x3ctable border\x3d"0" cellpadding\x3d"0" celspacing\x3d"0" class\x3d"Label" data-dojo-attach-event\x3d"mouseenter: _showList, click:_toggleList"\x3e\r\n        \x3ctr\x3e\r\n            \x3ctd class\x3d"ShoppingCart_CounterTD"\x3e\r\n                \x3cdiv class\x3d"ShoppingCart_CounterDivLeftBorder"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"divCounter" class\x3d"ShoppingCart_CounterDiv"\x3e\x3c/div\x3e\x3cdiv class\x3d"ShoppingCart_CounterDivRightBorder"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"ShoppingCart_LabelTd"\x3e\r\n                \x3cdiv\x3e${nls.selectedVars}\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n                \x3cdiv class\x3d"ShoppingCartOpener"\x3e\x26#x25bc;\x3c/div\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n        \r\n    \x3cdiv data-dojo-attach-point\x3d"divOuter" class\x3d"ShoppingCart_OuterDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"divList" class\x3d"ShoppingCart_DivList"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"divEmpty" class\x3d"ShoppingCart_DivEmpty"\x3e\r\n            \x3cdiv\x3e${nls.noVariables}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/layout/templates/AccordionButton.html":"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onTitleClick' class\x3d'dijitAccordionTitle' role\x3d\"presentation\"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d'titleNode,focusNode' data-dojo-attach-event\x3d'onkeydown:_onTitleKeyDown'\r\n\t\t\tclass\x3d'dijitAccordionTitleFocus' role\x3d\"tab\" aria-expanded\x3d\"false\"\r\n\t\t\x3e\x3cspan class\x3d'dijitInline dijitAccordionArrow' role\x3d\"presentation\"\x3e\x3c/span\r\n\t\t\x3e\x3cspan class\x3d'arrowTextUp' role\x3d\"presentation\"\x3e+\x3c/span\r\n\t\t\x3e\x3cspan class\x3d'arrowTextDown' role\x3d\"presentation\"\x3e-\x3c/span\r\n\t\t\x3e\x3cspan role\x3d\"presentation\" class\x3d\"dijitInline dijitIcon\" data-dojo-attach-point\x3d\"iconNode\"\x3e\x3c/span\x3e\r\n\t\t\x3cspan role\x3d\"presentation\" data-dojo-attach-point\x3d'titleTextNode, textDirNode' class\x3d'dijitAccordionText'\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n",
"url:esri/dijit/analysis/templates/MergeLayers.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_mergeLayersToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd\x3e\x3cdiv class\x3d"mergeLayersIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.mergeLayers}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_mergeLayersTable" style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n           \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n             \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_mergeLayersDescription" \x3e${i18n.mergeLayersDefine}\x3c/td\x3e\r\n           \x3c/tr\x3e\r\n           \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n           \x3c/tr\x3e\r\n           \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseMergeLayer}\x3c/label\x3e\r\n            \x3c/td\x3e  \r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MergeLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e    \r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n                \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_mergeLayersSelect" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e     \r\n          \x3ctr\x3e\r\n            \x3ctd width\x3d"99%" colspan\x3d"2" style\x3d"white-space:nowrap;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.mergeFieldsLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MergingAttributes"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e          \r\n          \x3c/tr\x3e  \r\n          \x3ctr data-dojo-attach-point\x3d"_afterMergeFieldsRow"\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e          \r\n \t      \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"esriOutputText esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n              \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e         \r\n      \x3c/tbody\x3e         \r\n     \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_mergesToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv \x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv"class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing esriAnalysisCloseIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n      \x3c/a\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/DissolveBoundaries.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_dissolveBoundariesToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd\x3e\x3cdiv class\x3d"dissolveBoundariesIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.dissolveBoundaries}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e               \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_dissolveBoundariesTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_dissolveBoundariesDescription"\x3e${i18n.dissolveBoundariesDefine}\x3c/td\x3e           \r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e           \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e    \r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseDissolveLabel}\x3c/label\x3e\t\t\t\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" width\x3d"1%"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"DissolveFields"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n          \t\x3clabel class\x3d"esriLeadingMargin1"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_overlappingAreasCheck" data-dojo-props\x3d"checked:true"\x3e\x3c/div\x3e\r\n               ${i18n.overlappingAreasLabel}\r\n            \x3c/label\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n          \t\x3clabel class\x3d"esriLeadingMargin1"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_sameAttributeAreasCheck" data-dojo-props\x3d"checked:false" data-dojo-attach-event\x3d"onChange:_handleAreasChange"\x3e\x3c/div\x3e\r\n               ${i18n.sameAttributeAreasLabel}\r\n            \x3c/label\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e  \r\n             \x3cselect class\x3d"esriLeadingMargin1  longInput"  multiple\x3d"true" data-dojo-type\x3d"dojox/form/CheckedMultiSelect" data-dojo-attach-point\x3d"_dissolveFieldsSelect"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e        \t\r\n        \x3c/tr\x3e    \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.summarizeLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"SummaryFields"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_afterStatsRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e             \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e                \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n      \x3c/tbody\x3e         \r\n     \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\x3cthead\x3e\r\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t${!dayCellsHtml}\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/thead\x3e\r\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t${!dateRowsHtml}\r\n\t\x3c/tbody\x3e\r\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\r\n\t\t\x3ctr\x3e\r\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/td\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/tfoot\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/CreateBuffers.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_bufferToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"buffersIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.createBuffers}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_bufferTable"\x3e\r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd colspan\x3d"2" class\x3d"sectionHeader esriLeadingMargin1" data-dojo-attach-point\x3d"_bufferToolDescription" \x3e\r\n            \x3cdiv\x3e${i18n.bufferDefine}\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n         \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n           \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n           \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n         \x3c/td\x3e\r\n         \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n           \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n         \x3c/td\x3e  \r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"longTextInput" style\x3d"padding-top:5px;"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_polylabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.sizeLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"BufferSize"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3ctable\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Distance" \x3e\r\n                    \x3cdiv class\x3d"bufferIcon bufferDistanceIcon"\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.distance}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                  \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Attribute"\x3e\r\n                    \x3cdiv class\x3d"bufferIcon bufferAttributeIcon"\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.field}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n         \x3ctd colspan\x3d"2"\x3e\r\n         \x3ctable style\x3d"width:99%;"\x3e\r\n          \x3ctr\x3e\r\n          \x3ctd style\x3d"width:45%;"\x3e\r\n            \x3cinput type\x3d"text" class\x3d"esriLeadingMargin1" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"intermediateChanges:true,value:\'1\',required:true,missingMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_bufferDist" style\x3d"width:95%;"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_bufferDistAttribute" data-dojo-type\x3d"dijit/form/Select" style\x3d"display:none; width:95%;table-layout:fixed;"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:55%;"\x3e \r\n            \x3c!-- Default, Centimeters, DecimalDegrees, Feet, Inches, Kilometers, Meters, Miles, Millimeters, NauticalMiles, Points, Yards --\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 mediumInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_bufferUnits" style\x3d"width:90%;table-layout:fixed;"\x3e\r\n              \x3coption value\x3d"Miles"\x3e${i18n.miles}\x3c/option\x3e\r\n              \x3coption value\x3d"Yards"\x3e${i18n.yards}\x3c/option\x3e\r\n              \x3coption value\x3d"Feet"\x3e${i18n.feet}\x3c/option\x3e\r\n              \x3coption type\x3d"separator"\x3e\x3c/option\x3e\r\n              \x3coption value\x3d"Kilometers"\x3e${i18n.kilometers}\x3c/option\x3e\r\n              \x3coption value\x3d"Meters"\x3e${i18n.meters}\x3c/option\x3e\r\n              \x3coption value\x3d"NauticalMiles"\x3e${i18n.nautMiles}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_sizeHelpRow"\x3e\r\n            \x3ctd class\x3d"shortTextInput" colspan\x3d"2" align\x3d"center" data-dojo-attach-point\x3d"_sizeHelp"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1 esriSmallLabel"\x3e${i18n.sizeHelp}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n         \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr data-dojo-attach-point\x3d"_optionsRow"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding:5px 0px;"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin2 optionsClose" data-dojo-attach-point\x3d"_optionsDiv"\x3e\r\n              \x3cdiv class\x3d"dijitTreeExpando" data-dojo-attach-event\x3d"onclick:_handleOptionsBtnClick"\x3e\x3clabel class\x3d"esriLeadingMargin2 noWrapLabel"\x3e${i18n.optionsLabel}\x3c/label\x3e\x3c/div\x3e\r\n              \x3ca style\x3d"position:relative; top:-16px; left:1px; "href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_bufferOptionsHelpLink" esriHelpTopic\x3d"OptionNolayer"\x3e\x3c/a\x3e\r\n              \x3ctable class\x3d"esriFormTable optionsTable"\x3e\r\n                \x3ctbody\x3e\r\n\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"2" align\x3d""\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading esriLeadingMargin2"\x3e${i18n.typeLabel}\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e \r\n\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3ctable\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                          \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Overlap"\x3e\r\n                            \x3cdiv class\x3d"bufferIcon bufferOverlapIcon"\x3e\x3c/div\x3e\r\n                            \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.overlap}\x3c/label\x3e\x3c/div\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                          \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Dissolve"\x3e\r\n                            \x3cdiv class\x3d"bufferIcon bufferDissolveIcon"\x3e\x3c/div\x3e\r\n                            \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.dissolve}\x3c/label\x3e\x3c/div\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"2" align\x3d""\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d"polygonTypes" style\x3d"display:none;"\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd colspan\x3d"2" align\x3d""\x3e\r\n                          \x3cdiv class\x3d"esriFloatLeading esriLeadingMargin2"\x3e${i18n.areaofInputPoly}\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                          \x3ctable\x3e\r\n                            \x3ctr\x3e\r\n                              \x3ctd\x3e\r\n                                \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Include"\x3e\r\n                                  \x3cdiv class\x3d"bufferIcon bufferIncludeIcon"\x3e\x3c/div\x3e\r\n                                  \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.include}\x3c/label\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                              \x3c/td\x3e\r\n                              \x3ctd\x3e\r\n                                \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Exclude"\x3e\r\n                                  \x3cdiv class\x3d"bufferIcon bufferExcludeIcon"\x3e\x3c/div\x3e\r\n                                  \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.exclude}\x3c/label\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                              \x3c/td\x3e\r\n                            \x3c/tr\x3e\r\n                          \x3c/table\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n\r\n\r\n\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"2"\x3e\r\n                    \x3cdiv\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d"sideTypes" style\x3d"display:none;"\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd align\x3d"center" colspan\x3d"3"\x3e\r\n                          \x3cdiv class\x3d"esriFloatLeading esriLeadingMargin2"\x3e${i18n.sideType}\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Around"\x3e\r\n                              \x3cdiv class\x3d"bufferIcon bufferAroundIcon"\x3e\x3c/div\x3e\r\n                              \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.around}\x3c/label\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Left" \x3e\r\n                              \x3cdiv class\x3d"bufferIcon bufferLeftIcon"\x3e\x3c/div\x3e\r\n                              \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.left}\x3c/label\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Right"\x3e\r\n                              \x3cdiv class\x3d"bufferIcon bufferRightIcon"\x3e\x3c/div\x3e\r\n                              \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.right}\x3c/label\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                     \x3c/table\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                     \x3ctable data-dojo-attach-point\x3d"endTypes" style\x3d"display:none;"\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd align\x3d"center" colspan\x3d"2"\x3e\r\n                          \x3cdiv class\x3d"esriFloatLeading esriLeadingMargin2"\x3e${i18n.endType}\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Round" \x3e\r\n                              \x3cdiv class\x3d"bufferIcon bufferRoundIcon"\x3e\x3c/div\x3e\r\n                              \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.round}\x3c/label\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Flat"\x3e\r\n                              \x3cdiv class\x3d"bufferIcon bufferFlatIcon"\x3e\x3c/div\x3e\r\n                              \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.flat}\x3c/label\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"2" align\x3d"center"\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d"ringTypes" style\x3d"display:none;"\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd colspan\x3d2 align\x3d"center"\x3e\r\n                          \x3cdiv class\x3d"esriFloatLeading esriLeadingMargin2"\x3e${i18n.multipleDistance}\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv\x3e\r\n                            \x3ctable\x3e\r\n                            \x3ctr\x3e\r\n                            \x3ctd\x3e\r\n                              \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_Rings"\x3e\r\n                                \x3cdiv class\x3d"bufferIcon bufferRingsIcon"\x3e\x3c/div\x3e\r\n                                \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.rings}\x3c/label\x3e\x3c/div\x3e\r\n                              \x3c/div\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd\x3e\r\n                              \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Disks"\x3e\r\n                                \x3cdiv class\x3d"bufferIcon bufferDisksIcon"\x3e\x3c/div\x3e\r\n                                \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel"\x3e${i18n.disks}\x3c/label\x3e\x3c/div\x3e\r\n                              \x3c/div\x3e\r\n                            \x3c/td\x3e\r\n                            \x3c/tr\x3e\r\n                            \x3c/table\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e  \r\n                      \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n    \r\n\r\n\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \r\n        \x3ctr\x3e\r\n          \x3ctd  class\x3d"longTextInput" style\x3d"padding:5px 0px;"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_polylabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.resultLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"BufferLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"required:true,trim:true" data-dojo-attach-point\x3d"outputLayerInput"  value\x3d""\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n       \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_bufferToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/geoenrichment/DataBrowser/templates/Breadcrumb.html":'\x3cdiv class\x3d"Breadcrumb BreadcrumbHeight"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"connect1" class\x3d"Breadcrumb_Line Breadcrumb_Connect1" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"angConnect1" class\x3d"Breadcrumb_Line Breadcrumb_AngularConnect1" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"connect1andHalf" class\x3d"Breadcrumb_Line Breadcrumb_1andHalf" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"connect2" class\x3d"Breadcrumb_Line Breadcrumb_Connect2" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"angConnect2" class\x3d"Breadcrumb_Line Breadcrumb_AngularConnect2" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"Breadcrumb_Categories"\x3e\r\n        \x3cdiv class\x3d"Breadcrumb_CategoriesIcon" data-dojo-attach-event\x3d"click: _onCategoriesClick"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dcIcon" data-dojo-attach-event\x3d"click: _onDCsClick" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"varsNode" class\x3d"Breadcrumb_Variales DataCollectionButton TrimWithEllipses" style\x3d"display: none;"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"varsLabel"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/analysis/templates/FindHotSpots.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"findHotSpotsIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.findHotSpots}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_hotspotsTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_hotspotsToolDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"analysisLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e           \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_polylabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseAttributeLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"analysisField"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n         \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e \r\n          \x3cselect class\x3d"esriLeadingMargin1 longTextInput"  style\x3d"margin-top:10px;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysFieldSelect" data-dojo-attach-event\x3d"onChange:_handleFieldChange"\x3e\r\n          \x3c/select\x3e         \r\n         \x3c/td\x3e \r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_optionsRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"optionsTd"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin2 optionsOpen" style\x3d"border:none;" data-dojo-attach-point\x3d"_optionsDiv"\x3e\r\n              \x3ctable class\x3d"esriFormTable optionsTable" style\x3d"border:  none;"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                        \x3clabel\x3e${i18n.provideAggLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e                    \r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"aggregationPolygonLayer"\x3e\x3c/a\x3e \r\n                    \x3c/td\x3e \r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:68%;"\x3e\r\n                        \x3cselect  class\x3d"longInput esriLongLabel"  data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_aggAreaSelect" data-dojo-attach-event\x3d"onChange:_handleAggAreaSelectChange"\x3e\x3c/select\x3e\r\n                    \x3c/td\x3e   \r\n                  \x3c/tr\x3e   \r\n                  \x3ctr data-dojo-attach-point\x3d"_boundingAreaLabelRow"\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                        \x3clabel\x3e${i18n.defineBoundingLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                       \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"boundingPolygonLayer"\x3e\x3c/a\x3e \r\n                    \x3c/td\x3e                     \r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_boundingAreaSelectRow"\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:40%;"\x3e\r\n                      \x3cselect class\x3d"longInput esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_boundingAreaSelect" data-dojo-attach-event\x3d"onChange:_handleBoundingSelectChange"\x3e\x3c/select\x3e                      \r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:15%"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon polygonIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-point\x3d"_boundingDrawBtn" data-dojo-attach-event\x3d"onChange:_handleBoundingBtnClick"\x3e\x3c/div\x3e                      \r\n                    \x3c/td\x3e \r\n                  \x3c/tr\x3e      \r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_polylabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.divideByLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"dividedByField"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e         \r\n        \x3ctr\x3e\r\n         \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e \r\n          \x3cselect class\x3d"esriLeadingMargin1 longTextInput"  style\x3d"margin-top:10px;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_divideFieldSelect" data-dojo-attach-event\x3d"onChange:_handleDividedByFieldChange"\x3e\r\n           \x3c/select\x3e         \r\n         \x3c/td\x3e \r\n        \x3c/tr\x3e  \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"hotSpotsResultLayer"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d"${i18n.hotspots}"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e                \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e                                              \r\n      \x3c/tbody\x3e         \r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/ExpressionForm.html":'\x3cdiv class\x3d"esriAnalysis esriExpressionForm"\x3e\r\n  \x3cdiv class\x3d"esriFormError esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c!--\x3cdiv class\x3d"clear" style\x3d"height:1em;"\x3e\x3c/div\x3e--\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" class\x3d"esriSimpleForm" data-dojo-attach-point\x3d"_expressionForm"\x3e\r\n    \x3ctable class\x3d"esriFormTable" style\x3d"border: 1px solid #929497;background-color: #F7F8F8 !important;"\x3e \r\n      \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_firstRow" \x3e\r\n          \x3ctd style\x3d"width:75%"\x3e\r\n            \x3cselect class\x3d"" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;table-layout:fixed;" data-dojo-attach-event\x3d"onChange:_handleFirstOperandChange" data-dojo-attach-point\x3d"_firstOperandSelect"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:25%"\x3e\r\n            \x3cselect class\x3d"" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleOperatorChange" style\x3d"width:100%;table-layout:fixed;" data-dojo-attach-point\x3d"_operatorSelect"\x3e\r\n              \x3coption value\x3d"where"\x3e${i18n.where}\x3c/option\x3e\r\n              \x3coption value\x3d"intersects"\x3e${i18n.intersects}\x3c/option\x3e\r\n              \x3coption value\x3d"notIntersects"\x3e${i18n.notIntersects}\x3c/option\x3e\r\n              \x3coption value\x3d"withinDistance"\x3e${i18n.withinDistance}\x3c/option\x3e\r\n              \x3coption value\x3d"notWithinDistance"\x3e${i18n.notWithinDistance}\x3c/option\x3e\r\n              \x3coption value\x3d"contains"\x3e${i18n.contains}\x3c/option\x3e\r\n              \x3coption value\x3d"notContains"\x3e${i18n.notContains}\x3c/option\x3e\r\n              \x3coption value\x3d"within"\x3e${i18n.within}\x3c/option\x3e\r\n              \x3coption value\x3d"notWithin"\x3e${i18n.notWithin}\x3c/option\x3e\r\n              \x3c!--\x3coption value\x3d"contains"\x3e${i18n.contains}\x3c/option\x3e\r\n              \x3coption value\x3d"notContains"\x3e${i18n.notContains}\x3c/option\x3e--\x3e\r\n              \x3c!--\x3coption value\x3d"within"\x3e${i18n.within}\x3c/option\x3e\r\n              \x3coption value\x3d"notWithin"\x3e${i18n.notWithin}\x3c/option\x3e--\x3e\r\n              \x3c!--\x3coption value\x3d"identical"\x3e${i18n.identical}\x3c/option\x3e\r\n              \x3coption value\x3d"notIdentical"\x3e${i18n.notIdentical}\x3c/option\x3e\r\n              \x3coption value\x3d"touches"\x3e${i18n.touches}\x3c/option\x3e\r\n              \x3coption value\x3d"notTouches"\x3e${i18n.notTouches}\x3c/option\x3e--\x3e\r\n              \x3c!--\x3coption value\x3d"crossesOutline"\x3e${i18n.crossesOutline}\x3c/option\x3e\r\n              \x3coption value\x3d"notCrossesOutline"\x3e${i18n.notCrossesOutline}\x3c/option\x3e--\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_secondRow" style\x3d"display:none;"\x3e\r\n          \x3ctd data-dojo-attach-point\x3d"_secondOperandTd" colspan\x3d"2"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_secondExpressionDiv" style\x3d"display:none; padding-bottom:0.25em;"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleDistanceInputChange" data-dojo-props\x3d"intermediateChanges:true" data-dojo-attach-point\x3d"_distanceInput" style\x3d"width:20%;"\x3e\x3c/input\x3e\r\n              \x3cselect data-dojo-type\x3d"dijit/form/Select"  data-dojo-attach-point\x3d"_distanceUnitsSelect"  style\x3d"width:20%;table-layout:fixed;"\x3e\r\n                \x3coption value\x3d"Miles"\x3e${i18n.miles}\x3c/option\x3e\r\n                \x3coption value\x3d"Yards"\x3e${i18n.yards}\x3c/option\x3e\r\n                \x3coption value\x3d"Feet"\x3e${i18n.feet}\x3c/option\x3e\r\n                \x3coption type\x3d"separator"\x3e\x3c/option\x3e\r\n                \x3coption value\x3d"Kilometers"\x3e${i18n.kilometers}\x3c/option\x3e\r\n                \x3coption value\x3d"Meters"\x3e${i18n.meters}\x3c/option\x3e\r\n                \x3coption value\x3d"NauticalMiles"\x3e${i18n.nautMiles}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n              \x3clabel\x3e from \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cselect class\x3d"" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:75%;table-layout:fixed;" data-dojo-attach-point\x3d"_secondOperandSelect" data-dojo-attach-event\x3d"onChange:_handleSecondOperandChange"\x3e\r\n            \x3c/select\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_attrFilterDiv" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing closeIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n        \x3cimg src\x3d\'images/close.gif\' border\x3d\'0\'/\x3e \r\n      \x3c/a\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e    \r\n    \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\r\n    \x3cdiv  class\x3d"esriFloatTrailing" style\x3d"padding: 10px 5px;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/form/Button"  class\x3d"${_addBtnClass}" data-dojo-attach-point\x3d"_addBtn" data-dojo-attach-event\x3d"onClick:_handleAddButtonClick"\x3e\r\n        ${i18n.add}\r\n      \x3c/div\x3e\r\n       \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriLeadingMargin05" data-dojo-attach-point\x3d"_closeBtn" data-dojo-attach-event\x3d"onClick:_handleCloseButtonClick"\x3e\r\n        ${i18n.close}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \r\n  \x3c/div\x3e\r\n\x3c/div\x3e  \r\n',
"url:esri/dijit/geoenrichment/templates/_WizardPage.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/Grid" data-dojo-attach-point\x3d"layoutGrid"  class\x3d"Grid"\x3e\r\n        ${content}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:esri/dijit/analysis/templates/SummarizeNearby.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"sumNearbyIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.summarizeNearby}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e               \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_aggregateToolDescription" \x3e${i18n.summarizeDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"sumNearbyLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e  \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseSummarizeLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"Summarize"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"longInput esriLeadingMargin1 esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_layersSelect" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.findNearLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"BufferOption"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_nearTypeSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n            \x3c/td\x3e            \r\n          \x3c/tr\x3e           \r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding-right:0;padding-bottom:0;width:20%;"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"onChange:_handleDistValueChange" data-dojo-props\x3d"intermediateChanges:true,value:\'5\',required:true,missingMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_breakValuesInput" class\x3d"esriLeadingMargin1"  style\x3d"width:75%;"\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-left:0.25em;padding-bottom:0;width:60%;"\x3e\r\n              \x3cselect class\x3d"mediumInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-attach-point\x3d"_distanceUnitsSelect" style\x3d"width:80%;table-layout:fixed;"\x3e\r\n              \x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n              \x3cdiv class\x3d"esriLeadingMargin1"\x3e\r\n                \x3clabel class\x3d"esriSmallLabel"\x3e${i18n.measureHelp}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_useTrafficRow"\x3e\r\n            \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n              \x3cdiv style\x3d"width:100%;" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1 esriSelectLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_returnBdrycCheck" data-dojo-props\x3d"checked:true"\x3e\x3c/div\x3e\r\n               ${i18n.returnBdrycCheckLabel}\r\n              \x3c/label\x3e             \r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"" data-dojo-attach-point\x3d"_addStatsLabel"\x3e${i18n.addStats}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" data-dojo-attach-point\x3d"_addStatsHelpLink" esriHelpTopic\x3d"StatisticsNoLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e                                                                                \r\n         \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1 esriSelectLabel"\x3e\r\n                \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_sumMetricCheck" data-dojo-props\x3d"checked:true, disabled:true"\x3e\x3c/div\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_sumMetricLabel"\x3e\x3c/span\x3e\r\n              \x3c/label\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3" style\x3d"padding-top: 0"\x3e\r\n              \x3cselect class\x3d"longInput esriLongLabel esriLeadingMargin1" data-dojo-type\x3d"dijit.form.Select"  data-dojo-props\x3d"style:{width:\'65%\', tableLayout: \'fixed\', overflowX:\'hidden\'}" data-dojo-attach-event\x3d"onChange:_handleShapeUnitsChange" data-dojo-attach-point\x3d"_shapeUnitsSelect"\x3e\x3c/select\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e         \r\n         \x3c!--\x3ctr\x3e\r\n           \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"longTextInput"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_addStatesCheck" data-dojo-attach-event\x3d"onChange:_handleStatsCheckChange" data-dojo-props\x3d"checked:\'true\'"\x3e\x3c/div\x3e\r\n                ${i18n.addStatsLabel}                \r\n              \x3c/label\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"KeepBoundaryNoPoints"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e           \r\n          \x3c/tr\x3e--\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_afterStatsRow"\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel" data-dojo-attach-point\x3d"_groupByLabel"\x3e${i18n.groupByLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"GroupBy"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput" data-dojo-type\x3d"dijit.form.Select"  data-dojo-attach-point\x3d"_groupBySelect" data-dojo-attach-event\x3d"onChange:_handleGroupBySelectChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_minmajorityLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_minmajorityCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addMinMajorityLable}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MinorityMajority"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_percentPointsLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_percentPointsCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addPercentageLabel}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"PercentShape"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fiveLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText"  data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e                                      \r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing closeIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n        \x3cimg src\x3d\'images/close.gif\' border\x3d\'0\'/\x3e \r\n      \x3c/a\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e        \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/CreateWatersheds.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"createWatershedIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.createWatershed}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_interpolateToolDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3ctable style\x3d"width:100%;"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:80%"\x3e  \r\n                \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:20%"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton"  data-dojo-attach-point\x3d"_analysisPointDrawBtn"  class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleInputDrawPointChange"\x3e\x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.searchDistanceLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"SearchDistance"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cinput type\x3d"text" class\x3d"esriLeadingMargin1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"intermediateChanges:true,required:false,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_searchDistanceInput" style\x3d"width:90%;"\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"width:60%;"\x3e\r\n            \x3cselect class\x3d"mediumInput esriMediumlabel esriAnalysisSelect esriLeadingMargin1" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_distanceUnitsSelect" style\x3d"width:65%;table-layout:fixed;"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputLayer"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:55%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/OverlayLayers.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_overlaylayersToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"overlayLayersIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.overlayLayers}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_overlaylayersTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_overlaylayersToolDescription"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_polylabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseOverlayLayer}\x3c/label\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1  longInput esriAnalysisSelect esriLongLabel"  style\x3d"width:125%;margin-top:10px;table-layout:fixed;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_overlayFeaturesSelect" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" width\x3d"1%"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"OverlayLayer"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd width\x3d"99%" colspan\x3d"2" style\x3d"white-space:nowrap;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseOverlayMethod}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OverlayType"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e          \r\n        \x3c/tr\x3e  \r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"width:33%" align\x3d\'center\'\x3e\r\n            \x3cdiv class\x3d"esriContainerSelector" data-dojo-props\x3d"groupName:\'overlayType\',checked:true" data-dojo-type\x3d"esri/dijit/analysis/AnalysisToggleButton" data-dojo-attach-point\x3d"_intersectBtnCtr" style\x3d"width:100%" data-dojo-attach-event\x3d"onClick:_handleIntersectBtnCtrClick" \x3e\r\n              \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/GroupToggleButton" class\x3d"" data-dojo-attach-event\x3d"onClick:_handleIntersectBtnClick" data-dojo-attach-point\x3d"_intersectBtn" data-dojo-props\x3d"groupName:\'overlayType\',showLabel:false,iconClass:\'intersectLayersIcon\',checked:true, style:\'width:36px;height:36px;\',label:\'intersect\'"\x3e\x3c/div\x3e\r\n              \x3cdiv\x3e\x3clabel\x3e${i18n.intersect}\x3c/label\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:33%" align\x3d\'center\'\x3e  \r\n            \x3cdiv class\x3d"esriContainerSelector" data-dojo-props\x3d"groupName:\'overlayType\'"  data-dojo-type\x3d"esri/dijit/analysis/AnalysisToggleButton" data-dojo-attach-point\x3d"_unionBtnCtr" style\x3d"width:100%" data-dojo-attach-event\x3d"onClick:_handleUnionBtnCtrClick"\x3e          \r\n            \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/GroupToggleButton" class\x3d"" data-dojo-attach-event\x3d"onClick:_handleUnionBtnClick" data-dojo-attach-point\x3d"_unionBtn" data-dojo-props\x3d"groupName:\'overlayType\',showLabel:false,iconClass:\'unionLayersIcon\' ,   style:\'width:36px;height:36px;\',label:\'union\'"\x3e\x3c/div\x3e\r\n              \x3cdiv\x3e\x3clabel\x3e${i18n.union}\x3c/label\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:33%" align\x3d\'center\'\x3e\r\n            \x3cdiv class\x3d"esriContainerSelector" data-dojo-props\x3d"groupName:\'overlayType\'"  data-dojo-type\x3d"esri/dijit/analysis/AnalysisToggleButton" style\x3d"width:100%" data-dojo-attach-point\x3d"_eraseBtnCtr" data-dojo-attach-event\x3d"onClick:_handleEraseBtnCtrClick"\x3e\r\n              \x3cdiv  data-dojo-type\x3d"esri/dijit/analysis/GroupToggleButton" class\x3d"" data-dojo-attach-event\x3d"onClick:_handleEraseBtnClick" data-dojo-attach-point\x3d"_eraseBtn" data-dojo-props\x3d"groupName:\'overlayType\',showLabel:false,iconClass:\'eraseLayersIcon\',   style:\'width:36px;height:36px;\',label:\'erase\'"\x3e\x3c/div\x3e\r\n              \x3cdiv\x3e\x3clabel\x3e${i18n.erase}\x3c/label\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable data-dojo-attach-point\x3d"_outputTypeTable"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctd\x3e\r\n                  \x3clabel class\x3d"esriLeadingMargin2" data-dojo-attach-point\x3d"_outputTypeLabel"\x3e${i18n.outputLabel}\x3c/label\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n                  \x3cselect class\x3d"esriLeadingMargin1 mediumInput esriAnalysisSelect"  style\x3d"table-layout:fixed;width:150px;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_outputTypeSelect"\x3e\r\n                    \x3coption value\x3d"Point"\x3e ${i18n.points}\x3c/option\x3e\r\n                    \x3coption value\x3d"Line"\x3e${i18n.lines}\x3c/option\x3e\r\n                    \x3coption value\x3d"Input"\x3e${i18n.areas}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputLayer"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"esriOutputText esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e                \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n      \x3c/tbody\x3e         \r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_overlaylayersToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e     \r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n  \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n    \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing esriAnalysisCloseIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n    \x3c/a\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/FindExistingLocations.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"findLocationsIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.findExistingLocations}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayers"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_findExpLabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.findExpLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"Expression"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding:1px" data-dojo-attach-point\x3d"_expressionGridTd"\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OuputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" dojotype\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick" style\x3d"color:grey;cursor:default;"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n  \x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/ExpressionGrid.html":'\x3cdiv class\x3d"esriAnalysisExpressionGrid"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" style\x3d"padding:1px;width:100%;height:200px;"  data-dojo-attach-point\x3d"_gridPane"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_gridDiv" style\x3d"height:90%"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_textDiv" style\x3d"border:1px #EFEEEF solid;display:none;height:90%"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.layout.ContentPane" style\x3d"padding:1px;width:100%;"\x3e\r\n    \x3ctable style\x3d"width:100%;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"width:20%;"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriTertiaryActionBtn calcite green tiny" data-dojo-attach-point\x3d"_addBtn" data-dojo-attach-event\x3d"onClick:_handleAddButtonClick" class\x3d""\x3e\r\n              ${i18n.addExpr}\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"esriFloatTrailing"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin025"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.edit}\',iconClass:\'esriAnalysisEditIcon\',showLabel: false, disabled:true" data-dojo-attach-point\x3d"_editBtn" data-dojo-attach-event\x3d"onClick:_handleEditButtonClick"\x3e\x3c/div\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.remove}\',iconClass:\'esriAnalysisRemoveIcon\',showLabel: false, disabled:true" data-dojo-attach-point\x3d"_removeBtn" data-dojo-attach-event\x3d"onClick:_handleRemoveButtonClick"\x3e\x3c/div\x3e     \r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.groupLabel}\',iconClass:\'esriAnalysisGroupIcon\',showLabel: false, disabled:true" data-dojo-attach-point\x3d"_groupBtn" data-dojo-attach-event\x3d"onClick:_handleGroupButtonClick"\x3e\x3c/div\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.ungroupLabel}\',iconClass:\'esriAnalysisUngroupIcon\',showLabel: false, disabled:true" data-dojo-attach-point\x3d"_ungroupBtn" data-dojo-attach-event\x3d"onClick:_handleUngroupButtonClick"\x3e\x3c/div\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.viewText}\',iconClass:\'esriAnalysisTextIcon\',showLabel: false, checked: false, disabled:true" data-dojo-attach-point\x3d"_viewBtn" data-dojo-attach-event\x3d"onChange:_handleViewButtonClick"\x3e\x3c/div\x3e           \r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.expression}" data-dojo-props\x3d"closable:false" data-dojo-attach-point\x3d"_expDialog" style\x3d"width:65em;"\x3e\r\n    \x3c!--\x3cdiv data-dojo-attach-point\x3d"_testdiv"\x3etesting\x3c/div\x3e--\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_expressionForm" data-dojo-type\x3d"esri/dijit/analysis/ExpressionForm" data-dojo-props\x3d"primaryActionButttonClass:\'${primaryActionButttonClass}\'"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e   \r\n\x3c/div\x3e',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:esri/dijit/analysis/templates/EnrichLayer.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"geoenrichLayerIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.enrichLayer}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_aggregateToolDescription" \x3e${i18n.enrichDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3c!--\x3clabel class\x3d""\x3e${i18n.chooseDataCollectionLabel}\x3c/label\x3e--\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"DataCollection"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3c!--\x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e--\x3e          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cdiv style\x3d"width:95%;height:200px;border:1px #EFEEEF solid;" data-dojo-attach-point\x3d"_analysisVariablesCtr" class\x3d"ShoppingCart"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_selectedList" style\x3d"overflow-y:auto;height:100%;"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_selectLabelDiv" class\x3d"selectLabel"\x3e${i18n.clickDataVar}\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd \x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriTertiaryActionBtn" data-dojo-attach-point\x3d"_addBtn" data-dojo-attach-event\x3d"onClick:_handleShowDataDialogClick"\x3e\r\n              ${i18n.selectDataVar}\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3ctable class\x3d"esriFormTable"\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd class\x3d"ShoppingCart_CounterTD" style\x3d"padding-right:0"\x3e\r\n                    \x3cdiv class\x3d"ShoppingCart_CounterDivLeftBorder"\x3e\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"varCounter" class\x3d"ShoppingCart_CounterDiv"\x3e0\x3c/div\x3e\r\n                    \x3cdiv class\x3d"ShoppingCart_CounterDivRightBorder"\x3e\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd class\x3d"ShoppingCart_LabelTd" style\x3d"white-space:nowrap;"\x3e\r\n                      \x3cdiv\x3e${i18n.selectedVars}\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.defAreasLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"BufferOption"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_bufferTypeSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding-right:0;padding-bottom:0;width:20%;"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-props\x3d"intermediateChanges:true,value:1,required:true,missingMessage:\'${i18n.distanceMsg}\',constraints:{min:0}" data-dojo-attach-point\x3d"_distanceInput" class\x3d"esriLeadingMargin1"  style\x3d"width:75%;"\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-left:0.25em;padding-bottom:0;width:60%;"\x3e\r\n              \x3cselect class\x3d"mediumInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-attach-point\x3d"_distanceUnitsSelect" style\x3d"width:80%;table-layout:fixed;"\x3e\r\n                \x3coption value\x3d"Seconds"\x3e${i18n.seconds}\x3c/option\x3e\r\n                \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${i18n.minutes}\x3c/option\x3e\r\n                \x3coption value\x3d"Hours"\x3e${i18n.hours}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_useTrafficRow"\x3e\r\n            \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n              \x3cdiv style\x3d"width:100%;" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText"  data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e                                      \r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"" data-dojo-attach-point\x3d"_dataDialog" data-dojo-props\x3d"closable:false"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/DataBrowser"  class\x3d"calcite esriAnalysisEnrichDataBrowser" data-dojo-props\x3d"backButton:null" data-dojo-attach-point\x3d"_databrowser" style\x3d"width:60em;height:40em;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/geoenrichment/DataBrowser/templates/VariableInfo.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Header"\x3e${nls.name}\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Value" data-dojo-attach-point\x3d"divDescription"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Spacer"\x3e\x26nbsp;\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Header"\x3e${nls.variable}\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Value" data-dojo-attach-point\x3d"divID2"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Spacer"\x3e\x26nbsp;\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Header"\x3e${nls.source}\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Value" data-dojo-attach-point\x3d"divSource"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Spacer"\x3e\x26nbsp;\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Header"\x3e${nls.vintage}\x3c/div\x3e\r\n    \x3cdiv class\x3d"VariableInfo_Value" data-dojo-attach-point\x3d"divVintage"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/analysis/templates/DeriveNewLocations.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"findNewLocationsIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.deriveNewLocations}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"analysisLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_findExpLabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.findExpLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"Expression"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding:1px" data-dojo-attach-point\x3d"_expressionGridTd"\x3e\r\n            \x3c/td\x3e    \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" dojotype\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" style\x3d"margin-top:10px;" class\x3d"esriLeadingMargin2 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n  \x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/FindNearest.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"findClosestFacilityIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.findNearest}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                  \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                  \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                \x3c/div\x3e              \r\n              \x3c/div\x3e                 \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_aggregateToolDescription" \x3e${i18n.summarizeDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"analysisLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.findLocationsIn}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"NearbyLocationsLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"longInput esriLeadingMargin1 esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_layersSelect" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.measureLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"MeasurementMethod"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_measureMethodSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e            \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_useTrafficRow"\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n              \x3cdiv style\x3d"width:100%;" class\x3d"esriFloatLeading esriTrailingMargin3" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_addStatsHelpLink" esriHelpTopic\x3d"Cutoffs"\x3e\x3c/a\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel" data-dojo-attach-point\x3d"_forLocationLabel"\x3e${i18n.forEachLocationLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3" class\x3d"esriLeadingMargin1" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ctable style\x3d"width:100%"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:1%;"\x3e\r\n                  \x3cdiv class\x3d"esriLeadingMargin1" id\x3d"${id}.findNearestCheck" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_findNearestCheck" data-dojo-attach-event\x3d"onChange:_handleFindNearestCheckChange" data-dojo-props\x3d"checked:\'true\'"\x3e\x3c/div\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd class\x3d"longTextInput"\x3e\r\n                  \x3clabel for\x3d"${id}.findNearestCheck" data-dojo-attach-point\x3d"_findNearestLabel"\x3e${i18n.findNearestLabel}\x3c/label\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e  \r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25;padding-top:0.25;"\x3e\r\n             \x3cinput data-dojo-type\x3d"dijit/form/NumberSpinner"  class\x3d "esriMediumlabel esriLeadingMargin2"  data-dojo-attach-point\x3d"_maxCountInput" data-dojo-props\x3d"style: \'width:25%\',smallDelta:1,constraints: { min:1, max:100, places:0 }"/\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25;padding-top:0.25;"\x3e\r\n             \x3ctable style\x3d"width:100%"\x3e\r\n               \x3ctr\x3e\r\n                 \x3ctd style\x3d"width:1%;"\x3e\r\n                   \x3cdiv class\x3d"esriLeadingMargin1" id\x3d"${id}.limitSearchRangeCheck" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_limitSearchRangeCheck" data-dojo-attach-event\x3d"onChange:_handleLimitSearchCheckChange" data-dojo-props\x3d"checked:\'true\'"\x3e\x3c/div\x3e\r\n                 \x3c/td\x3e\r\n                 \x3ctd class\x3d"longTextInput"\x3e\r\n                   \x3clabel for\x3d"${id}.limitSearchRangeCheck" data-dojo-attach-point\x3d"_limitSearchRangeLabel"\x3e${i18n.limitSearchRangeCheck}\x3c/label\x3e\r\n                 \x3c/td\x3e\r\n               \x3c/tr\x3e\r\n             \x3c/table\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n         \x3ctr data-dojo-attach-point\x3d"_distanceLimitRow"\x3e\r\n            \x3ctd style\x3d"padding-right:0;padding-top:0;width:30%;"\x3e\r\n              \x3cinput type\x3d"text" class\x3d"esriLeadingMargin2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleDistValueChange" data-dojo-props\x3d"value:100,intermediateChanges:true,required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_searchCutoffInput" class\x3d"esriLeadingMargin1"  style\x3d"width:60%;"\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-left:0.25em;padding-top:0;width:60%;"\x3e\r\n              \x3cselect class\x3d"mediumInput esriMediumlabel esriAnalysisSelect esriLeadingMargin1" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-attach-point\x3d"_distanceUnitsSelect" style\x3d"width:65%;table-layout:fixed;"\x3e\r\n              \x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_timeLimitRow" style\x3d"display:none;"\x3e\r\n            \x3ctd style\x3d"padding-top:0;width:24%;"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin2 esriTrailingMargin025"\x3e\r\n                \x3cinput type\x3d"text" class\x3d"" style\x3d"width:40%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleTimeUnitsChange" data-dojo-props\x3d"intermediateChanges:true,value:\'1\',required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_hoursInput"\x3e\x3c/input\x3e\r\n                ${i18n.hoursSmall}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"padding-top:0;width:24%;"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1 esriTrailingMargin025"\x3e\r\n                \x3cinput type\x3d"text" class\x3d"" style\x3d"width:40%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleTimeUnitsChange" data-dojo-props\x3d"intermediateChanges:true,value:\'0\',required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_minutesInput"\x3e\x3c/input\x3e\r\n                ${i18n.minutesSmall}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"padding-top:0;width:24%;"\x3e\r\n              \x3clabel class\x3d"esriTrailingMargin025"\x3e\r\n                \x3cinput type\x3d"text" class\x3d"" style\x3d"width:40%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleTimeUnitsChange" data-dojo-props\x3d"intermediateChanges:true,value:\'0\',required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_secondsInput"\x3e\x3c/input\x3e\r\n                ${i18n.secondsSmall}\x3c/label\x3e\r\n            \x3c/td\x3e                        \r\n          \x3c/tr\x3e\r\n                  \r\n          \x3c!--\x3ctr data-dojo-attach-point\x3d"_useTrafficLabelRow"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom: 0"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom: 0"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"UseTypicalTraffic"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e          \r\n          \x3ctr data-dojo-attach-point\x3d"_useTrafficRow"\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n              \x3cdiv style\x3d"width:100%;" class\x3d"esriFloatLeading esriTrailingMargin3" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e--\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel" data-dojo-attach-point\x3d"_outputNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputNearestLocationsLayer"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText"  data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e \r\n          \x3c!--\x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText"  data-dojo-props\x3d"required:true" data-dojo-attach-point\x3d"_outputLayerInput2" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e--\x3e           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e                                      \r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/ExtractData.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_extractDataToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\x3cdiv class\x3d"extractDataIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd\x3e${i18n.extractData}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_extractDataTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.layersToExtract}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"InputLayers"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0.25em 0.5em 0.5em 0.5em"\x3e\r\n            \x3ctable style\x3d"width:100%;table-layout:fixed;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cselect multiple\x3d"true"  class\x3d"esriLeadingMargin1" style\x3d"width:100%;margin-top:10px;" data-dojo-props\x3d"required:true" data-dojo-type\x3d"dojox/form/CheckedMultiSelect" data-dojo-attach-point\x3d"_inputLayersSelect"\x3e\x3c/select\x3e        \r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"white-space:nowrap;padding:0.5em 0.5em 0.25em 0.5em"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.studyArea}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"AreaOfInterest"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e          \r\n        \x3c/tr\x3e  \r\n        \x3ctr\x3e\r\n          \x3ctd colpan\x3d"2" style\x3d"padding:0.5em 0.5em 0.25em 0.5em;width:90%;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleExtentSelectChange" data-dojo-attach-point\x3d"_extentSelect"\x3e\x3c/select\x3e                      \r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding:0.5em 0.5em 0.25em 0.5em;width:3%;"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriboundingButton esriLeadingMargin05 esriActionButton" data-dojo-attach-point\x3d"_drawExtentBtn" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon polygonIcon\',style:\'width:16px;\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onClick:_handleExtentBtnClick"\x3e\x3c/button\x3e\r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e      \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0.25em 0.5em 0.25em 0.5em;"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin2" style\x3d"width:100%;"\x3e\r\n              \x3clabel class\x3d"esriSelectLabel"\x3e\r\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"\'class\':\'esriSelectLabel\',checked:true" name\x3d"clip" value\x3d"fgdb"/\x3e\r\n                ${i18n.selectFtrs}\r\n              \x3c/label\x3e\r\n              \x3cbr/\x3e\r\n              \x3clabel class\x3d"esriSelectLabel"\x3e\r\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_clipRadioBtn" data-dojo-props\x3d"\'class\':\'esriSelectLabel\'" name\x3d"clip" value\x3d"shp"/\x3e \r\n                ${i18n.clipFtrs}\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e               \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputDataFormat}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputFormat"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0.25em 0.5em 0.5em 0.5em;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput"  style\x3d"table-layout:fixed;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_dataFormatSelect"\x3e\r\n              \x3coption value\x3d"CSV"\x3e${i18n.csvPoints}\x3c/option\x3e\r\n              \x3coption value\x3d"FILEGEODATABASE"\x3e ${i18n.filegdb}\x3c/option\x3e\r\n              \x3c!--\x3coption value\x3d"LAYERPACKAGE"\x3e${i18n.lyrpkg}\x3c/option\x3e--\x3e\r\n              \x3coption value\x3d"KML"\x3e${i18n.kml}\x3c/option\x3e\r\n              \x3coption value\x3d"SHAPEFILE"\x3e${i18n.shpFile}\x3c/option\x3e                \r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputFileName}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e             \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,missingMessage:\'${i18n.outputnameMissingMsg}\'"class\x3d"esriLeadingMargin1 esriOutputText" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e                \r\n        \x3c/tr\x3e \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n      \x3c/tbody\x3e         \r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n  \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n    \x3ca href\x3d"#" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg" class\x3d"esriFloatTrailing esriAnalysisInfoPaneCloseIcon"\x3e\x3c/a\x3e\r\n    \x3c/a\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/CreateDriveTimeAreas.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"driveIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.createDriveTimeAreas}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                 \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_driveTimesTable"\x3e\r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_driveTimeDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.measureLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"MeasurementMethod"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_drivingModeSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c!--\x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0.25em;width:50%"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin4 bufferSelector selected" data-dojo-attach-point\x3d"_drivingTime" \x3e\r\n              \x3cdiv class\x3d"bufferIcon esriDrivingTimeIcon"\x3e\x3c/div\x3e\r\n              \x3cdiv\x3e\x3clabel class\x3d"esriFloatLeading esriSelectLabel"\x3e${i18n.drivingTime}\x3c/label\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"padding:0.25em;width:50%"\x3e\r\n            \x3cdiv class\x3d"bufferSelector" data-dojo-attach-point\x3d"_drivingDistance"\x3e\r\n              \x3cdiv class\x3d"bufferIcon esriDrivingDistanceIcon"\x3e\x3c/div\x3e\r\n              \x3cdiv\x3e\x3clabel class\x3d"esriFloatLeading esriTrailingMargin2 esriSelectLabel"\x3e${i18n.drivingDistance}\x3c/label\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e--\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding-right:0;padding-bottom:0;width:50%;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"onChange:_handleDistValueChange" data-dojo-props\x3d"intermediateChanges:true,value:\'5\',required:true,missingMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_breakValuesInput" class\x3d"esriLeadingMargin1"  style\x3d"width:75%;"\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-left:0.25em;padding-bottom:0;width:50%;"\x3e\r\n            \x3cselect class\x3d"mediumInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-attach-point\x3d"_distanceUnitsSelect" style\x3d"width:80%;table-layout:fixed;"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin3"\x3e\r\n              \x3clabel class\x3d"esriSmallLabel"\x3e${i18n.measureHelp}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_useTrafficLabelRow"\x3e\r\n          \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n            \x3cdiv style\x3d"width;100%" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_arealabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.areaLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"DissolveType"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding-top:0;padding-bottom:0;" colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;padding:0.25em;"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"padding-top:0;"\x3e\r\n                  \x3cdiv style\x3d"width:36px" class\x3d"bufferSelector selected" data-dojo-attach-point\x3d"_Overlap"\x3e\r\n                    \x3cdiv class\x3d"bufferIcon bufferOverlapIcon" style\x3d"margin:5px 10px"\x3e\x3c/div\x3e\r\n                    \x3cdiv style\x3d"width:100%"\x3e\x3clabel class\x3d"esriLeadingMargin025  esriSelectLabel"\x3e${i18n.overlap}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"padding-top:0;"\x3e\r\n                  \x3cdiv style\x3d"width:36px" class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Dissolve"\x3e\r\n                  \x3cdiv class\x3d"bufferIcon bufferDissolveIcon" style\x3d"margin:5px 10px"\x3e\x3c/div\x3e\r\n                  \x3cdiv style\x3d"width:100%"\x3e\x3clabel class\x3d"esriLeadingMargin025  esriSelectLabel"\x3e${i18n.dissolve}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"padding-top:0;"\x3e\r\n                 \x3cdiv style\x3d"width:36px" class\x3d"bufferSelector" data-dojo-attach-point\x3d"_Split"\x3e\r\n                   \x3cdiv class\x3d"bufferIcon esriAnalysisSplitIcon" style\x3d"margin:5px 10px"\x3e\x3c/div\x3e\r\n                   \x3cdiv style\x3d"width:100%"\x3e\x3clabel class\x3d"esriLeadingMargin1  esriSelectLabel"\x3e${i18n.split}\x3c/label\x3e\x3c/div\x3e\r\n                 \x3c/div\x3e\r\n                \x3c/td\x3e        \r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelThree" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_resultlabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.resultLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"OutputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText" data-dojo-props\x3d"required:true,trim:true" data-dojo-attach-event\x3d"_handleResultLyrInputChange" data-dojo-attach-point\x3d"outputLayerInput"  value\x3d""\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e      \r\n       \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/geoenrichment/DataBrowser/templates/DataCollectionsPage.html":'\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 0"\x3e\r\n    \x3cdiv class\x3d"BreadcrumbHeight"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"DataCollectionsPage_Panel DataCollectionsPage_PanelTop"\x3e\r\n        \x3cdiv class\x3d"DataCollectionsPage_Header" data-dojo-attach-point\x3d"categoryName"\x3e\x3c/div\x3e\r\n        \x3cinput type\x3d"text"\r\n               data-dojo-type\x3d"esri/dijit/geoenrichment/DataBrowser/SearchTextBox"\r\n               data-dojo-attach-point\x3d"txbSearch"\r\n               data-dojo-props\x3d"prompt:\'${nls.search}\'"\r\n               data-dojo-attach-event\x3d"onSearch: _search"\r\n               class\x3d"DataCollectionsPage_Search" /\x3e\r\n        \x3cdiv class\x3d"DataCollectionsPage_Header"\x3e\r\n            ${nls.mapPopVar}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"divVariables" class\x3d"DataCollectionsPage_PopularVariables"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"DataCollectionsPage_Header"\x3e\r\n            ${nls.keepBrowse}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 1" class\x3d"DataCollectionsPage_DataCollectionContainer" data-dojo-attach-point\x3d"pane"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/Pagination" data-dojo-attach-point\x3d"pagination"  data-dojo-attach-event\x3d"onSelect: _onSelectCollection"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 2"\x3e\r\n    \x3cdiv class\x3d"DataCollectionsPage_Panel DataCollectionsPage_PanelBottom"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"spnShowAll" class\x3d"DataCollectionsPage_ShowAll" data-dojo-attach-event\x3d"onClick: _showAll"\x3e${nls.showAll}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'\x3cdiv class\x3d"dijitReset ${baseClass}"\r\n\t\x3e\x3cinput class\x3d"${baseClass}Box" data-dojo-type\x3d"dijit.form.CheckBox" data-dojo-attach-point\x3d"checkBox" \r\n\t\tdata-dojo-attach-event\x3d"_onClick:_changeBox" type\x3d"${_type.type}" data-dojo-props\x3d\'disabled:${disabled}, readOnly:${readOnly}\' baseClass\x3d"${_type.baseClass}"\r\n\t/\x3e\x3cdiv class\x3d"dijitInline ${baseClass}Label" data-dojo-attach-point\x3d"labelNode" data-dojo-attach-event\x3d"onclick:_onClick"\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/TrafficTime.html":'\x3ctable style\x3d"width:100%" class\x3d"esriFormTable"\x3e\r\n  \x3ctbody\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd class\x3d"shortTextInput" colspan\x3d"3" style\x3d"padding-bottom:0;"\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin1"\x3e\r\n          \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_useTrafficCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:_handleUseTrafficCheckChange" data-dojo-props\x3d"checked:false" style\x3d"margin-bottom:0.25em;"\x3e\r\n            \x3c/input\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin025"\x3e${i18n.trafficLabel}\x3c/label\x3e\r\n         \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"3"\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin2"\x3e\r\n          \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"trafficSelect" data-dojo-attach-event\x3d"onChange:_handleLifeTrafficRadioChange"  data-dojo-props\x3d"checked:true" data-dojo-attach-point\x3d"_liveTrafficRadioBtn"\x3e\x3c/input\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_liveTraficLabel"\x3e${i18n.liveTrafficLabel}\x3c/label\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"3"\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin2 longInput" value\x3d"0" data-dojo-props\x3d"intermediateChanges:true,showButtons:false,minimum:0, maximum:12,discreteValues:49" data-dojo-attach-point\x3d"_liveTimeSlider" data-dojo-attach-event\x3d"onChange:_handleLiveTimeSliderChange" type\x3d"range" data-dojo-type\x3d"dijit/form/HorizontalSlider"\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/form/HorizontalRule"  style\x3d"width:86%" data-dojo-props\x3d"container: \'topDecoration\',count: 13,style: \'height: 0.55em;\'"\x3e\x3c/div\x3e\r\n           \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels"  data-dojo-attach-point\x3d"_liveTimeRuleLabels" data-dojo-props\x3d"container: \'bottomDecoration\', count:5" style\x3d"margin-top:5px;height: 1em;"\x3e\r\n              \x3cli\x3e${i18n.nowLabel}\x3c/li\x3e\r\n              \x3cli\x3e+3\x3c/li\x3e\r\n              \x3cli\x3e+6\x3c/li\x3e\r\n              \x3cli\x3e+9\x3c/li\x3e\r\n              \x3cli\x3e+12 ${i18n.hoursSmall}\x3c/li\x3e\r\n            \x3c/ol\x3e  \r\n        \x3c/div\x3e\r\n         \x3c!-- create rules and labels below horizontal slider --\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e    \r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"3"\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin2"\x3e\r\n          \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"trafficSelect" data-dojo-attach-point\x3d"_typicalTrafficRadioBtn"\x3e\x3c/input\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_typicalTraficLabel"\x3e${i18n.typicalTraffCdtnLabel}\x3c/label\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr data-dojo-attach-point\x3d"_driveTimeRow"\x3e\r\n      \x3ctd colspan\x3d"3" style\x3d"padding-top:0;padding-bottom:0"\x3e\r\n        \x3cselect class\x3d"esriLeadingMargin2 mediumInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_trafficDay" style\x3d"width:46%;table-layout:fixed;"\x3e\r\n          \x3coption value\x3d"1/1/1990"\x3e${i18n.monday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/2/1990"\x3e${i18n.tuesday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/3/1990"\x3e${i18n.wednesday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/4/1990"\x3e${i18n.thursday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/5/1990"\x3e${i18n.friday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/6/1990"\x3e${i18n.saturday}\x3c/option\x3e\r\n          \x3coption value\x3d"1/7/1990"\x3e${i18n.sunday}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n        \x3cinput  type\x3d"text" data-dojo-type\x3d"dijit/form/TimeTextBox" data-dojo-props\x3d"value:\'T12:00:00\', required:true,intermediateChanges:true,constraints:{formatLength:\'short\',selector:\'time\'}"  data-dojo-attach-point\x3d"_trafficTime" style\x3d"height:24px;width:37%;margin-top:0;"\x3e\r\n        \x3c/input\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n        \x3ca class\x3d"esriLeadingMargin3 esriSmallFont" href\x3d"http://www.arcgis.com/home/item.html?id\x3db7a893e8e1e04311bd925ea25cb8d7c7" target\x3d"_available"\x3e${i18n.seeAvailability}\x3c/a\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n  \x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:esri/dijit/analysis/templates/ConnectOriginsToDestinations.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"connectODIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.connectOriginsToDestinations}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                 \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_driveTimesTable"\x3e\r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_tripCalToolDescription"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"originsLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOne" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelOneText" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.labelOne}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"destinationsLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cselect class\x3d"longInput esriLeadingMargin1 esriLongLabel"  style\x3d"height:90%;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDestinationLayerChange" data-dojo-attach-point\x3d"_destPointLyrSelect"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%" data-dojo-attach-point\x3d"_routeIdRow"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd colspan\x3d"3"\x3e\r\n                    \x3clabel class\x3d"esriLeadingMargin1"\x3e${i18n.pairPoints}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.originTripId}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cselect class\x3d"esriLeadingMargin2 mediumInput esriMediumLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_originRouteIdSelect" data-dojo-attach-event\x3d"onChange:_handleOriginRouteIdChange"\x3e\r\n                      \x3c!--\x3coption value\x3d"-1" selected\x3d"selected"\x3eSelect OrigId\x3c/option\x3e--\x3e\r\n                    \x3c/select\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.destnTripId}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cselect class\x3d"esriLeadingMargin2 mediumInput esriMediumLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_destnRouteIdSelect" data-dojo-attach-event\x3d"onChange:_handleDestnRouteIdChange"\x3e\r\n                      \x3c!--\x3coption value\x3d"-1" selected\x3d"selected"\x3eSelect DestID\x3c/option\x3e--\x3e\r\n                    \x3c/select\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n            \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n              \x3c!--\x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing esriAnalysisCloseIcon" title\x3d\'${i18n.close}\'  data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n              \x3c/a\x3e--\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e             \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.measureLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"measurementType"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_measureMethodSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_useTrafficLabelRow"\x3e\r\n          \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n            \x3cdiv style\x3d"width;100%" data-dojo-type\x3d"esri/dijit/analysis/TrafficTime" data-dojo-attach-point\x3d"_trafficTimeWidget"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelThree" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_resultlabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.resultLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"outputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"shortTextInput" colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput"  value\x3d""\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e      \r\n       \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" style\x3d"margin-top:10px;" class\x3d"esriLeadingMargin2 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/PlanRoutes.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"planRoutesIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.planRoutes}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                 \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_driveTimesTable"\x3e\r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_toolDescription"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"stopsLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.travelModeLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"travelMode"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0.25em;" colspan\x3d"3"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_travelModeSelect" class\x3d"esriLeadingMargin1 longInput esriLongLabel esriAnalysisDriveMode"\x3e\r\n          \x3c/td\x3e          \r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.startRoutesLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"startLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\x3c/td\x3e\r\n          \x3ctd style\x3d"width:95%"\x3e\r\n            \x3cselect class\x3d"longInput esriLongLabel"  style\x3d"width:100%;" data-dojo-props\x3d"required:true" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleStartLayerChange"  data-dojo-attach-point\x3d"_startLayerSelect"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:3%"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriActionButton" data-dojo-attach-point\x3d"_startPointDrawBtn"  data-dojo-attach-event\x3d"onChange:_handleStartDrawBtnChange" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',style:\'width:16px;\',label:\'${i18n.drawLabel}\'"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_startRouteIdRow"\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top: 0.25em;"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin1"\x3e${i18n.routeId}\x3c/label\x3e\r\n             \x3cselect class\x3d"longTextInput esriLeadingMargin1"  style\x3d"margin-top:0.25em;width:80%;table-layout:fixed;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_startRouteIdSelect"\x3e\r\n              \x3coption selected\x3d"selected"\x3e${i18n.selectRouteId}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin1"\x3e${i18n.specifyStartTime}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25em;"\x3e\r\n            \x3cinput class\x3d"esriLeadingMargin1 mediumInput esriAnalysisSelect" value\x3d"now" data-dojo-props\x3d"required:true" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-point\x3d"_startDay" style\x3d"width:46%;table-layout:fixed;"\x3e\r\n            \x3c/input\x3e\r\n            \x3cinput  type\x3d"text" data-dojo-type\x3d"dijit/form/TimeTextBox" value\x3d"now" data-dojo-props\x3d"required:true,intermediateChanges:true,constraints:{formatLength:\'short\',selector:\'time\'}"  data-dojo-attach-point\x3d"_startTime" style\x3d"width:37%;margin-top:0;"\x3e\r\n            \x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e        \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.endRoutesLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"endLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n             \x3ctable style\x3d"width:100%" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3ctr\x3e\r\n                 \x3ctd style\x3d"width:1%;"\x3e\r\n                   \x3cdiv class\x3d"esriLeadingMargin1" id\x3d"${id}.returnStartCheck" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-event\x3d"onChange:_handleReturnStartCheckChange"  data-dojo-attach-point\x3d"_returnStartCheck"\x3e\x3c/div\x3e\r\n                 \x3c/td\x3e\r\n                 \x3ctd class\x3d"longTextInput"\x3e\r\n                   \x3clabel for\x3d"${id}.returnStartCheck" data-dojo-attach-point\x3d"_returnStartCheckLabel"\x3e${i18n.returnToStart}\x3c/label\x3e\r\n                 \x3c/td\x3e\r\n               \x3c/tr\x3e\r\n             \x3c/table\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding-bottom:0.25em;padding-top:0.25em;"\x3e\x3c/td\x3e\r\n          \x3ctd style\x3d"width:95%;padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n            \x3cselect class\x3d"longInput esriLongLabel"  style\x3d"width:100%;" data-dojo-props\x3d"required:true" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleEndLayerChange" data-dojo-attach-point\x3d"_endLayerSelect"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:3%;padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriActionButton" data-dojo-attach-point\x3d"_endPointDrawBtn" data-dojo-attach-event\x3d"onChange:_handleEndDrawBtnChange" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',style:\'width:16px;\',label:\'${i18n.drawLabel}\'"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e \r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_endRouteIdRow"\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top: 0.25em;"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin1"\x3e${i18n.routeId}\x3c/label\x3e\r\n             \x3cselect class\x3d"longTextInput esriLeadingMargin1"  style\x3d"margin-top:0.25em;width:80%;table-layout:fixed;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_endRouteIdSelect"\x3e\r\n               \x3coption selected\x3d"selected"\x3e${i18n.selectRouteId}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n             \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.numRoutes}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"routeCount"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e        \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1"\x3e\r\n              \x3cinput type\x3d"text" class\x3d"" style\x3d"width:30%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-attach-event\x3d"onChange:_handleRoutesInputChange" data-dojo-props\x3d"intermediateChanges:true,smallDelta:1, constraints:{min:1,max:100,places:0},required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_routesInput"\x3e\x3c/input\x3e\r\n              ${i18n.vehicles}\x3c/label\x3e            \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fiveLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.maxPtsRoute}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"maxStopsPerRoute"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25em;padding-top:0.25em;"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1"\x3e\r\n              \x3cinput type\x3d"text" class\x3d"" style\x3d"width:30%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true,smallDelta:1, constraints:{min:1,max:200,places:0}, required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_maxPtsRouteInput"\x3e\x3c/input\x3e\r\n              ${i18n.stops}\x3c/label\x3e            \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin15"\x3e\r\n              \x3clabel class\x3d"esriSmallLabel" data-dojo-attach-point\x3d"_numStopsLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_stopsByExtentRow"\x3e\r\n          \x3ctd style\x3d"padding:0" colspan\x3d"3"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin15"\x3e\r\n              \x3clabel class\x3d"esriSmallLabel" data-dojo-attach-point\x3d"_numStopsExtentLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" class\x3d"longInput"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.sixLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.timeSpentLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"serviceTimeAtStops"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3ctable style\x3d"width:100%"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"esriLeadingMargin1 esriTrailingMargin025"\x3e\r\n                      \x3cinput type\x3d"text" class\x3d"" style\x3d"width:55%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true,value:0, smallDelta:1, constraints:{min:0,max:1440,places:0}, required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_servStopMinutesInput"\x3e\x3c/input\x3e\r\n                      ${i18n.minutesSmall}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"esriLeadingMargin1 esriTrailingMargin025"\x3e\r\n                      \x3cinput type\x3d"text" class\x3d"" style\x3d"width:55%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true,value:0, smallDelta:1, constraints:{min:0,max:59,places:0}, required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_servStopsSecondsInput"\x3e\x3c/input\x3e\r\n                      ${i18n.secondsSmall}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.sevenLabel}\x3c/label\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin1" id\x3d"${id}.limitCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:_handleLimitMaxTimeCheckChange"  data-dojo-attach-point\x3d"_limitMaxTimeCheck"\x3e\x3c/div\x3e\r\n            \x3clabel for\x3d"${id}.limitCheck" data-dojo-attach-point\x3d"_limitMaxTimeLabel"\x3e${i18n.limitMaxTime}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"maxTotalRouteTime"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3ctable style\x3d"width:100%"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"esriLeadingMargin1 esriTrailingMargin025"\x3e\r\n                      \x3cinput type\x3d"text" class\x3d"" style\x3d"width:55%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true,value:8, smallDelta:1, constraints:{min:0,max:1000,places:0}, required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_hoursInput"\x3e\x3c/input\x3e\r\n                      ${i18n.hoursSmall}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"esriLeadingMargin1 esriTrailingMargin025"\x3e\r\n                      \x3cinput type\x3d"text" class\x3d"" style\x3d"width:55%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true,value:0, smallDelta:1, constraints:{min:0,max:59,places:0}, required:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_minutesInput"\x3e\x3c/input\x3e\r\n                      ${i18n.minutesSmall}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelThree" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.eightLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_resultlabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.resultLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"longTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"resultsLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"shortTextInput" colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 esriOutputText" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-event\x3d"_handleResultLyrInputChange" data-dojo-attach-point\x3d"_outputLayerInput"  value\x3d""\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e      \r\n       \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:_handleExtentCheckChange" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n        \x3ca href\x3d"#" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg" class\x3d"esriFloatTrailing esriAnalysisInfoPaneCloseIcon"\x3e\x3c/a\x3e\r\n        \x3c/a\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e      \r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/geoenrichment/DataBrowser/templates/DataCategoriesPage.html":'\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 0"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"countryDiv" class\x3d"DataCategoriesPage_Country"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-attach-point\x3d"countrySelect"\r\n            data-dojo-props\x3d"maxHeight: 151"\r\n            data-dojo-attach-event\x3d"onChange: _onCountryChanged"\x3e\r\n        \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cinput type\x3d"text"\r\n        data-dojo-type\x3d"esri/dijit/geoenrichment/DataBrowser/SearchTextBox"\r\n        data-dojo-attach-point\x3d"txbSearch"\r\n        data-dojo-props\x3d"prompt:\'${nls.search}\'"\r\n        data-dojo-attach-event\x3d"onSearch: _search"\r\n        class\x3d"DataCategoriesPage_Search" /\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"itemsPane" data-dojo-props\x3d"row: 1" class\x3d"DataCategoriesPage_Pagination"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/Pagination" data-dojo-attach-point\x3d"pagination" data-dojo-attach-event\x3d"onSelect: _onItemClick"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"progressDiv" class\x3d"Wizard_Progress"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 2"\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/AnalysisToolItem.html":'\x3cdiv class\x3d\'toolContainer\' data-dojo-attach-point\x3d"_toolCtr" style\x3d"cursor:pointer;cursor:hand;" data-dojo-attach-event\x3d"onclick:_handleToolIconClick"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d\'_toolIcon\'\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d\'esriLeadingMargin5 toolContent\'\x3e\r\n    \x3ca  href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"toolDescription" data-dojo-attach-point\x3d"_helpIconNode"\x3e\x3c/a\x3e\r\n  \t\x3clabel data-dojo-attach-point\x3d\'_toolNameLabel\' style\x3d"cursor:pointer;cursor:hand;"\x3e\x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d\'esriLeadingMargin2\' data-dojo-attach-point\x3d"optionsDiv" style\x3d"margin-top:0.5em;font-size:0.85em;"\x3e\x3clabel class\x3d"esriLeadingMargin5 comingSoonIcon"\x3e${i18n.comingSoonLabel}\x3c/label\x3e\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" dojoAttachPoint\x3d"focusNode" role\x3d"menuitemcheckbox" tabIndex\x3d"-1"\r\n\tdojoAttachEvent\x3d"ondijitclick:_onClick"\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\r\n\t\t\x3e\x3cdiv src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitMenuItemIcon ${_iconClass}" dojoAttachPoint\x3d"iconNode"\r\n\t\t\t\x3e\x3cinput class\x3d"dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint\x3d"inputNode" type\x3d"${_type.type}"\r\n\t\t/\x3e\x3c/div\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" dojoAttachPoint\x3d"containerNode,labelNode"\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" dojoAttachPoint\x3d"accelKeyNode"\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26nbsp;\x3c/td\r\n\x3e\x3c/tr\x3e',
"url:esri/dijit/analysis/templates/SummarizeWithin.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"sumWithinIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.summarizeWithin}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e               \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_aggregateToolDescription" \x3e${i18n.summarizeDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"sumWithinLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseSummarizeLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"Summarize"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e  \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"longInput esriLongLabel esriLeadingMargin1"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_layersSelect" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel" data-dojo-attach-point\x3d"_addStatsLabel"\x3e${i18n.addStats}\x3c/label\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_addStatsHelpLink" esriHelpTopic\x3d"StatisticsNoLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin1"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_sumMetricCheck" data-dojo-props\x3d"checked:\'true\', disabled:\'true\'"\x3e\x3c/div\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"_sumMetricLabel"\x3e\x3c/label\x3e\r\n              \x3c/label\x3e\r\n              \x3cselect class\x3d"mediumInput esriShortlabel" data-dojo-type\x3d"dijit.form.Select"  data-dojo-props\x3d"style:{tableLayout: \'fixed\', overflowX:\'hidden\'}" data-dojo-attach-event\x3d"onChange:_handleShapeUnitsChange" data-dojo-attach-point\x3d"_shapeUnitsSelect"\x3e\x3c/select\x3e\r\n           \x3c/td\x3e\r\n         \x3c/tr\x3e\r\n         \x3c!--\x3ctr\x3e\r\n           \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"longTextInput"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_addStatesCheck" data-dojo-attach-event\x3d"onChange:_handleStatsCheckChange" data-dojo-props\x3d"checked:\'true\'"\x3e\x3c/div\x3e\r\n                ${i18n.addStatsLabel}                \r\n              \x3c/label\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"KeepBoundaryNoPoints"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e           \r\n          \x3c/tr\x3e--\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_afterStatsRow"\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"  data-dojo-attach-point\x3d"_groupByLabel"\x3e${i18n.groupByLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"GroupBy"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cselect class\x3d"longInput esriLeadingMargin1" data-dojo-type\x3d"dijit.form.Select"  data-dojo-attach-point\x3d"_groupBySelect" data-dojo-attach-event\x3d"onChange:_handleGroupBySelectChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_minmajorityLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_minmajorityCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addMinMajorityLable}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MinorityMajority"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n          \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_percentPointsLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_percentPointsCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addPercentageLabel}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"PercentShape"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"ResultLayerName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"longInput esriLeadingMargin1" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:60%;"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e                                      \r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing closeIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n        \x3cimg src\x3d\'images/close.gif\' border\x3d\'0\'/\x3e \r\n      \x3c/a\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e        \r\n\x3c/div\x3e\r\n',
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:esri/dijit/analysis/templates/CalculateDensity.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"createDensitySurfaceIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.calculateDensity}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr  data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_interpolateToolDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.selectAttributesLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"field"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n            \x3cselect class\x3d"esriLeadingMargin1 longInput"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_fieldSelect" data-dojo-attach-event\x3d"onChange:_handleFieldChange"\x3e\x3c/select\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_optionsRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"optionsTd"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin1 optionsClose" data-dojo-attach-point\x3d"_optionsDiv"\x3e\r\n              \x3cdiv class\x3d"dijitTreeExpando" data-dojo-attach-event\x3d"onclick:_handleOptionsBtnClick"\x3e\x3clabel class\x3d"esriLeadingMargin2 noWrapLabel"\x3e${i18n.Options}\x3c/label\x3e\x3c/div\x3e\r\n              \x3ctable class\x3d"esriFormTable optionsTable"\x3e\r\n                \x3ctbody\x3e\r\n                 \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.searchDistance}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"radius"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e                    \r\n                  \x3c/tr\x3e                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n                      \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n                        \x3ctbody\x3e\r\n                          \x3ctr\x3e\r\n                          \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"onChange:_handleDistValueChange" data-dojo-props\x3d"intermediateChanges:true,placeHolder:\'${i18n.searchDistance}\'" data-dojo-attach-point\x3d"_searchDistanceInput" style\x3d"width:100%;"\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd colspan\x3d"2"\x3e\r\n                      \x3cselect class\x3d"longInput esriAnalysisSelect esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleDistUnitsChange" data-dojo-attach-point\x3d"_radiusUnitsSelect"\x3e\r\n                      \x3c/select\x3e\r\n                          \x3c/td\x3e\r\n                          \x3c/tr\x3e\r\n                        \x3c/tbody\x3e\r\n                      \x3c/table\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.interpolateWithin}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"boundingPolygonLayer"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e                    \r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:40%;"\x3e\r\n                      \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_boundingAreaSelect" data-dojo-attach-event\x3d"onChange:_handleBoundingSelectChange"\x3e\x3c/select\x3e                      \r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:9%;"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"_bndgPolyDrawBtn" class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon polygonIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleBoundingBtnChange"\x3e\x3c/div\x3e\r\n                    \x3c/td\x3e \r\n                  \x3c/tr\x3e      \r\n                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classifyLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"classificationType"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25;"\x3e\r\n                      \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel"  data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_classifySelect" data-dojo-attach-event\x3d"onChange:_handleClassifySelectChange" style\x3d"width:68%"\x3e\r\n                        \x3coption value\x3d"EqualInterval"\x3e${i18n.equalInterval}\x3c/option\x3e\r\n                        \x3coption value\x3d"EqualArea"\x3e ${i18n.quantile}\x3c/option\x3e\r\n                        \x3coption value\x3d"GeometricInterval"\x3e${i18n.geometricInterval}\x3c/option\x3e\r\n                        \x3coption value\x3d"NaturalBreaks"\x3e${i18n.naturalBreaks}\x3c/option\x3e\r\n                        \x3coption value\x3d"StandardDeviation"\x3e${i18n.standardDeviation}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_classifyOtherOptionLabelRow"\x3e \r\n                    \x3ctd colspan\x3d"2" style\x3d"padding-top:0.25;padding-bottom:0.25;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classesCountLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput" style\x3d"padding-top:0;padding-bottom:0;"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"numClasses"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_classifyOtherOptionInputRow"\x3e\r\n                     \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25;"\x3e\r\n                       \x3cinput data-dojo-type\x3d"dijit/form/NumberSpinner"  class\x3d "esriMediumlabel esriLeadingMargin2"  data-dojo-attach-point\x3d"_numClassesInput" data-dojo-props\x3d"value:${numClasses}, style: \'width:25%\',smallDelta:1,constraints: { min:3, max:32, places:0 }"/\x3e\r\n                     \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_manualOptionLabelRow" style\x3d"display:none;"\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25;padding-bottom:0.25;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classBreakValues}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3c!--\x3ctd class\x3d"shortTextInput" style\x3d"padding-top:0;padding-bottom:0;"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MeasurementMethod"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e--\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr  data-dojo-attach-point\x3d"_manualOptionInputRow" style\x3d"display:none;"\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25;"\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"intermediateChanges:true" data-dojo-attach-point\x3d"_classBreaksInput" class\x3d"esriLeadingMargin2"\x3e\r\n                      \x3cdiv\x3e\r\n                        \x3clabel class\x3d"esriLeadingMargin2 esriSmallLabel"\x3e${i18n.classBreaksHelp}\x3c/label\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:40%;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.outputAerealUnits}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"areaUnits"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e                    \r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"3"\x3e\r\n                        \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel"  data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_areaUnitsSelect" data-dojo-attach-event\x3d"onChange:_handleArealUnitsSelectChange" style\x3d"width:68%"\x3e\x3c/select\x3e\r\n                    \x3c/td\x3e   \r\n                  \x3c/tr\x3e                               \r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"outputName"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:55%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/FindSimilarLocations.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"findSimilarLocationsIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.findSimilarLocations}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_toolDescription" \x3e${i18n.toolDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e           \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e            \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayerSel"\x3e\x3c/a\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.labelOneText}\x3c/label\x3e\r\n              \x3cdiv class\x3d"esriLeadingMargin1 esriFloatTrailing"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.selectLabel}\',iconClass:\'esriAnalysisSelectFilterIcon\',showLabel:false" data-dojo-attach-point\x3d"_selectBtn" data-dojo-attach-event\x3d"onChange:_handleSelectionButtonClick"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button" class\x3d"esriActionButton" data-dojo-props\x3d"label:\'${i18n.queryLabel}\',iconClass:\'esriAnalysisAttributeFiltercon\',showLabel:false" data-dojo-attach-point\x3d"_queryBtn" data-dojo-attach-event\x3d"onClick:_handleQueryButtonClick"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3clabel class\x3d"esriLeadingMargin2" data-dojo-attach-point\x3d"_filterLabel"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.labelTwoText}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"searchLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"height:100%;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_candidateSelect" data-dojo-attach-event\x3d"onChange:_handleCandidateChange"\x3e\r\n                \x3coption value\x3d"search"\x3e${i18n.selectSearchLayer}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.labelThreeText}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"analysisFields"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3ctable style\x3d"width:100%;table-layout:fixed;"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd\x3e\r\n                      \x3cselect multiple\x3d"true"  class\x3d"esriLeadingMargin1" style\x3d"width:100%;" data-dojo-props\x3d"required:true" data-dojo-type\x3d"dojox/form/CheckedMultiSelect" data-dojo-attach-point\x3d"_attrSelect"\x3e\x3c/select\x3e        \r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.labelFourText}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"numberOfResults"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cdiv class\x3d"esriLeadingMargin1" style\x3d"width:100%;"\x3e\r\n                \x3clabel class\x3d"esriSelectLabel"\x3e\r\n                  \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_allRadioBtn" data-dojo-attach-event\x3d"onChange:_handleAllRankRadioChange" data-dojo-props\x3d"\'class\':\'esriSelectLabel\',checked:true" name\x3d"features"/\x3e\r\n                  ${i18n.allResults}\r\n                \x3c/label\x3e\r\n                \x3cbr/\x3e\r\n                \x3clabel class\x3d"esriSelectLabel"\x3e\r\n                  \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_toprankRadioBtn" data-dojo-attach-event\x3d"onChange:_handleTopRankRadioChange" data-dojo-props\x3d"\'class\':\'esriSelectLabel\'" name\x3d"features"/\x3e \r\n                  ${i18n.justShowTop}\r\n                  \x3cinput type\x3d"text" class\x3d"" style\x3d"width:20%" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-attach-event\x3d"onChange:_handleTopRankInputChange" data-dojo-props\x3d"disabled:true,intermediateChanges:true,value:1, smallDelta:1, constraints:{min:1,places:0}, required:true" data-dojo-attach-point\x3d"_ranksInput"\x3e\x3c/input\x3e\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fiveLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputName"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" dojotype\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n       \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.expression}" data-dojo-props\x3d"closable:false" data-dojo-attach-point\x3d"_expDialog" style\x3d"width:65em;"\x3e\r\n      \x3c!--\x3cdiv data-dojo-attach-point\x3d"_testdiv"\x3etesting\x3c/div\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_expressionForm" data-dojo-type\x3d"esri/dijit/analysis/ExpressionForm" data-dojo-props\x3d"showFirstRow:false,primaryActionButttonClass:\'${primaryActionButttonClass}\'"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e   \r\n    \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n      \x3c!--\x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing esriAnalysisCloseIcon" title\x3d\'${i18n.close}\'  data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\r\n      \x3c/a\x3e--\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e         \r\n  \x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/AggregatePoints.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"aggregateIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.aggregatePoints}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n       \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_aggregateTable"  style\x3d"border-collapse:collapse;border-spacing:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n         \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_aggregateToolDescription" \x3e${i18n.aggregateDefine}\x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"pointLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.chooseAreaLabel}\x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e  \r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"polygonLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_layersSelect" data-dojo-props\x3d"required:true" data-dojo-attach-event\x3d"onChange:_handleLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_keepPolygonsCheck" data-dojo-props\x3d"checked:\'true\'"\x3e\x3c/div\x3e\r\n               ${i18n.keepPolygonLabel}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"KeepBoundaryNoPoints"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.addStatsLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"SummaryFields"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_afterStatsRow"\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"  data-dojo-attach-point\x3d"_groupByLabel"\x3e${i18n.groupByLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"GroupByField"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cselect class\x3d"longInput esriLeadingMargin1" data-dojo-type\x3d"dijit.form.Select"  data-dojo-attach-point\x3d"_groupBySelect" data-dojo-attach-event\x3d"onChange:_handleGroupBySelectChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_minmajorityLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_minmajorityCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addMinMajorityLable}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MinorityMajority"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n         \x3ctr\x3e\r\n           \x3ctd colspan\x3d"2"\x3e\r\n             \x3clabel class\x3d"esriLeadingMargin2 esriSelectLabel" data-dojo-attach-point\x3d"_percentPointsLabel"\x3e\r\n               \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_percentPointsCheck" data-dojo-props\x3d"checked:false"\x3e\x3c/div\x3e\r\n               ${i18n.addPercentageLabel}\r\n             \x3c/label\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"PercentPoints"\x3e\x3c/a\x3e\r\n           \x3c/td\x3e\r\n          \x3c/tr\x3e    \r\n           \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e \r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"2"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputLayer"\x3e\x3c/a\x3e \r\n            \x3c/td\x3e             \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n              \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"trim:true,required:true" data-dojo-attach-point\x3d"_outputLayerInput" value\x3d""\x3e\x3c/input\x3e\r\n            \x3c/td\x3e                \r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3"\x3e\r\n               \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n                 \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n                 \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" dojotype\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n               \x3c/div\x3e              \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e         \r\n       \x3c/table\x3e\r\n     \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_aggregateToolContentButtons" style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           ${i18n.useMapExtent}\r\n       \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n  \x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/CreateViewshed.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"createViewshedIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.createViewshed}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"\x3e \r\n       \x3ctbody\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n          \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_interpolateToolDescription" \x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n          \x3ctd  colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:80%"\x3e  \r\n                \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:20%"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton"  data-dojo-attach-point\x3d"_analysisPointDrawBtn"  class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleInputDrawPointChange"\x3e\x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.viewshedOptionlabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.observerHghtLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"ObserverHeight"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e                    \r\n        \x3c/tr\x3e                  \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n            \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"value:${observerHeight},intermediateChanges:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_obsrHeightInput" style\x3d"width:100%;"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n            \x3cselect class\x3d"longInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_obsrUnitsSelect"\x3e\r\n            \x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.targetHghtLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"TargetHeight"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e                    \r\n        \x3c/tr\x3e                  \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n            \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"value:${targetHeight},intermediateChanges:true,invalidMessage:\'${i18n.distanceMsg}\'" data-dojo-attach-point\x3d"_targetHgtInput" style\x3d"width:100%;"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n            \x3cselect class\x3d"longInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_targetUnitsSelect"\x3e\r\n            \x3c/select\x3e\r\n                \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.maxDistanceLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"MaximumDistance"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e                    \r\n        \x3c/tr\x3e                   \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" style\x3d"padding:0;"\x3e\r\n            \x3ctable class\x3d"esriFormTable esriLeadingMargin2" style\x3d"width:90%;"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                \x3ctd  style\x3d"width:50%;padding-right:1em;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"value:${maximumDistance},intermediateChanges:true,invalidMessage:\'${i18n.maxdistanceInValidMsg}\', constraints:{place: \'0,0\'}" data-dojo-attach-point\x3d"_maximumDistanceInput" style\x3d"width:100%;" data-dojo-attach-event\x3d"onChange:_handleMaxDstChange"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd colspan\x3d"2"\x3e\r\n            \x3cselect class\x3d"longInput esriAnalysisSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_distanceUnitsSelect" data-dojo-attach-event\x3d"onChange:_handleMaxDstUnitsChange"\x3e\r\n            \x3c/select\x3e\r\n                \x3c/td\x3e\r\n               \x3c/tr\x3e                  \r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"OutputLayer"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:55%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/InterpolatePoints.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_hotspotsToolContentTitle" class\x3d"analysisTitle"\x3e\r\n         \x3ctable class\x3d"esriFormTable" \x3e \r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"createInterpolatedSurfaceIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n              \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e${i18n.interpolatePoints}\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                    \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                      \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                    \x3c/div\x3e              \r\n                \x3c/div\x3e  \r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n         \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n     \x3ctable class\x3d"esriFormTable"\x3e \r\n       \x3ctbody\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_titleRow"\x3e\r\n            \x3ctd  colspan\x3d"3" class\x3d"sectionHeader" data-dojo-attach-point\x3d"_interpolateToolDescription" \x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr data-dojo-attach-point\x3d"_analysisLabelRow" style\x3d"display:none;"\x3e\r\n            \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n              \x3clabel class\x3d"esriFloatLeading  esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n              \x3clabel class\x3d"esriAnalysisStepsLabel esriAnalysisStepsLabel"\x3e${i18n.analysisLayerLabel}\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"inputLayer"\x3e\x3c/a\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e         \r\n          \x3ctr data-dojo-attach-point\x3d"_selectAnalysisRow" style\x3d"display:none;"\x3e\r\n            \x3ctd  colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n              \x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel"  style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_analysisSelect" data-dojo-attach-event\x3d"onChange:_handleAnalysisLayerChange"\x3e\x3c/select\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e          \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2" style\x3d"padding-bottom:0;"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.selectAttributesLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"field"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n         \x3ctd colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n           \x3cselect class\x3d"esriLeadingMargin1 longInput"  style\x3d"margin-top:1.0em;width:68%;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_fieldSelect" data-dojo-attach-event\x3d"onChange:_handleFieldChange"\x3e\x3c/select\x3e\r\n         \x3c/td\x3e\r\n        \x3c/tr\x3e \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e         \r\n         \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_labelTwo" class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_measurelabel" class\x3d"esriAnalysisStepsLabel"\x3e${i18n.optimizeFor}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' data-dojo-attach-point\x3d"_analysisFieldHelpLink" esriHelpTopic\x3d"interpolateOption"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin1" data-dojo-props\x3d"value:5,intermediateChanges:false,showButtons:true,minimum:1,maximum:9,discreteValues:3,pageIncrement:1" style\x3d"width:90%;" data-dojo-attach-point\x3d"_optimizeSlider" data-dojo-attach-event\x3d"onChange:_handleOptimizeSliderChange" type\x3d"range" data-dojo-type\x3d"dijit/form/HorizontalSlider"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/HorizontalRule" data-dojo-props\x3d"container: \'topDecoration\',count: 3,style: \'height: 0.5em;\'"\x3e\x3c/div\x3e\r\n               \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels"  data-dojo-attach-point\x3d"_liveTimeRuleLabels" data-dojo-props\x3d"container: \'bottomDecoration\', count:3" style\x3d"margin-top:5px;height: 1em;"\x3e\r\n                  \x3cli\x3e${i18n.speed}\x3c/li\x3e\r\n                  \x3cli\x3e\x3c/li\x3e\r\n                  \x3cli\x3e${i18n.accuracy}\x3c/li\x3e\r\n                \x3c/ol\x3e  \r\n            \x3c/div\x3e\r\n             \x3c!-- create rules and labels below horizontal slider --\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e          \r\n         \r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriLeadingMargin1 esriSelectLabel"\x3e\r\n              \x3cdiv data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_outoutPredictionsErrCheck"\x3e\x3c/div\x3e\r\n              ${i18n.outputPredictionErrors}\r\n            \x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"outputPredictionError"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n         \x3c/tr\x3e \r\n        \x3ctr data-dojo-attach-point\x3d"_optionsRow"\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"optionsTd"\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin1 optionsClose" data-dojo-attach-point\x3d"_optionsDiv"\x3e\r\n              \x3cdiv class\x3d"dijitTreeExpando" data-dojo-attach-event\x3d"onclick:_handleOptionsBtnClick"\x3e\x3clabel class\x3d"esriLeadingMargin2 noWrapLabel"\x3e${i18n.Options}\x3c/label\x3e\x3c/div\x3e\r\n              \x3ctable class\x3d"esriFormTable optionsTable"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.interpolateWithin}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"boundingPolygonLayer"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e                    \r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:40%;"\x3e\r\n                      \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_boundingAreaSelect" data-dojo-attach-event\x3d"onChange:_handleBoundingSelectChange"\x3e\x3c/select\x3e                      \r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:9%;"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"_bndgPolyDrawBtn" class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon polygonIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handleBoundingBtnChange"\x3e\x3c/div\x3e\r\n                    \x3c/td\x3e \r\n                  \x3c/tr\x3e      \r\n                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classifyLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"classificationType"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding-bottom:0.25;"\x3e\r\n                      \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel"  data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_classifySelect" data-dojo-attach-event\x3d"onChange:_handleClassifySelectChange" style\x3d"width:68%"\x3e\r\n                        \x3coption value\x3d"GeometricInterval"\x3e${i18n.geometricInterval}\x3c/option\x3e\r\n                        \x3coption value\x3d"EqualArea"\x3e ${i18n.quantile}\x3c/option\x3e\r\n                        \x3coption value\x3d"EqualInterval"\x3e${i18n.equalInterval}\x3c/option\x3e\r\n                        \x3coption value\x3d"Manual"\x3e${i18n.manual}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_classifyOtherOptionLabelRow"\x3e \r\n                    \x3ctd colspan\x3d"2" style\x3d"padding-top:0.25;padding-bottom:0.25;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classesCountLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput" style\x3d"padding-top:0;padding-bottom:0;"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"numClasses"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_classifyOtherOptionInputRow"\x3e\r\n                     \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25;"\x3e\r\n                       \x3cinput data-dojo-type\x3d"dijit/form/NumberSpinner"  class\x3d "esriMediumlabel esriLeadingMargin2"  data-dojo-attach-point\x3d"_numClassesInput" data-dojo-props\x3d"value:${numClasses}, style: \'width:25%\',smallDelta:1,constraints: {places:0}"/\x3e\r\n                     \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr data-dojo-attach-point\x3d"_manualOptionLabelRow" style\x3d"display:none;"\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"padding-top:0.25;padding-bottom:0.25;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.classBreakValues}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput" style\x3d"padding-top:0;padding-bottom:0;"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"classBreaks"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr  data-dojo-attach-point\x3d"_manualOptionInputRow" style\x3d"display:none;"\x3e\r\n                    \x3ctd colspan\x3d"3" style\x3d"padding-top:0.25;"\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"intermediateChanges:true" data-dojo-attach-point\x3d"_classBreaksInput" class\x3d"esriLeadingMargin2"\x3e\r\n                      \x3cdiv\x3e\r\n                        \x3clabel class\x3d"esriLeadingMargin2 esriSmallLabel"\x3e${i18n.classBreaksHelp}\x3c/label\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e                  \r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2" style\x3d"width:40%;"\x3e\r\n                      \x3clabel class\x3d"esriLeadingMargin2"\x3e${i18n.predictLocLabel}\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd class\x3d"shortTextInput"\x3e\r\n                      \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"predictAtPointLayer"\x3e\x3c/a\x3e\r\n                    \x3c/td\x3e                    \r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd colspan\x3d"2"\x3e\r\n                        \x3cselect class\x3d"esriLeadingMargin2 longInput esriLongLabel"  data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_predictPointSelect" data-dojo-attach-event\x3d"onChange:_handlePredictPointSelectChange"\x3e\x3c/select\x3e\r\n                    \x3c/td\x3e   \r\n                    \x3ctd\x3e\r\n                      \x3cdiv data-dojo-type\x3d"dijit/form/ToggleButton"  data-dojo-attach-point\x3d"_predictPointDrawBtn"  class\x3d"esriFloatLeading esriActionButton" data-dojo-props\x3d"showLabel:false,iconClass:\'toolbarIcon esriPointIcon\',label:\'${i18n.drawLabel}\'" data-dojo-attach-event\x3d"onChange:_handlePredictPointChange"\x3e\x3c/div\x3e\r\n                    \x3c/td\x3e \r\n                  \x3c/tr\x3e                               \r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3" class\x3d"clear"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"2"\x3e\r\n            \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.outputLayerLabel}\x3c/label\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"shortTextInput"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"outputName"\x3e\x3c/a\x3e \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true" class\x3d"longTextInput esriLeadingMargin1" data-dojo-attach-point\x3d"_outputLayerInput"\x3e\x3c/input\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n             \x3cdiv data-dojo-attach-point\x3d"_chooseFolderRow" class\x3d"esriLeadingMargin1"\x3e\r\n               \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n               \x3cinput class\x3d"longInput" data-dojo-attach-point\x3d"_webMapFolderSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" trim\x3d"true" style\x3d"width:55%;"\x3e\x3c/input\x3e\r\n             \x3c/div\x3e              \r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n     \x3c/table\x3e\r\n   \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n    \x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n      \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n     \x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n       \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n         ${i18n.useMapExtent}\r\n     \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n        ${i18n.runAnalysis}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e    \r\n\x3c/div\x3e\r\n',
"url:esri/dijit/analysis/templates/CreditEstimator.html":'\x3cdiv class\x3d"esriAnalysis esriSimpleForm"\x3e\r\n  \x3ctable class\x3d"esriFormTable"  data-dojo-attach-point\x3d"_table"  style\x3d"border-collapse:collapse;border-spacing:5px;"\x3e\r\n     \x3c!--\x3ctr\x3e\r\n      \x3ctd\x3e\r\n        \x3clabel class\x3d"esriFloatLeading"\x3e${i18n.analysisLayersLabel}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e--\x3e\r\n     \x3ctr\x3e\r\n      \x3ctd\x3e\r\n        \x3clabel class\x3d"esriFloatLeading"\x3e${i18n.totalRecordsLabel}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"_totalRecordsNode"\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n     \x3c!--\x3ctr\x3e\r\n      \x3ctd\x3e\r\n        \x3clabel class\x3d"esriFloatLeading"\x3e${i18n.creditsAvailLabel}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e--\x3e\r\n     \x3ctr\x3e\r\n      \x3ctd\x3e\r\n        \x3clabel class\x3d"esriFloatLeading"\x3e${i18n.creditsReqLabel}\x3c/label\x3e\r\n      \x3c/td\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"_creditsReqNode"\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n  \x3c/table\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_messageDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/CheckedMultiSelect.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"comboButtonNode"\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"selectNode" class\x3d"dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event\x3d"onmousedown:_onMouseDown,onclick:focus"\r\n\t\t\x3e\x3cselect class\x3d"${baseClass}Select dojoxCheckedMultiSelectHidden" multiple\x3d"true" data-dojo-attach-point\x3d"containerNode,focusNode"\x3e\x3c/select\r\n\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"wrapperDiv"\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\x3e\x3c/div\x3e',
"*now":function(h){h(['dojo/i18n!*preload*arcgisonline/nls/analysis*["ar","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("arcgisonline/analysis",["dijit","dojo","dojox","dojo/require!arcgisonline/map/dijit/AnalysisCategory,arcgisonline/map/dijit/AnalysisTool"],function(h,d,a){d.provide("arcgisonline.analysis");d.require("arcgisonline.map.dijit.AnalysisCategory");d.require("arcgisonline.map.dijit.AnalysisTool")});