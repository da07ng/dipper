// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt for details.
//>>built
define("arcgisonline/sharing/dijit/FilterSet",["dijit","dojo","dojox"],function(c,b,e){b.provide("arcgisonline.sharing.dijit.FilterSet");b.declare("arcgisonline.sharing.dijit.FilterSet",[c._Widget,c._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"filterSet" id\x3d"${id}.filterSet"\x3e\r\n  \x3cdiv id\x3d"${id}.matchMsgSet" class\x3d"matchMsgSet esriFloatLeading esriLeadingPadding1"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setIcons esriFloatTrailing esriTrailingPadding1 esriLeadingPadding1"\x3e\r\n    \x3ca id\x3d"${id}.deleteSetLink" href\x3d"JavaScript:void(0);" class\x3d"esriAGOFilterRemoveIcon" title\x3d"${i18n.deleteSet}"\x3e\x3c/a\x3e\r\n    \x3ca id\x3d"${id}.addExpressionToSetLink" href\x3d"JavaScript:void(0);" class\x3d"esriAGOFilterAddExpToSetIcon" title\x3d"${i18n.addExpression}"\x3e\x3c/a\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoAttachPoint\x3d"allSetExpr" style\x3d"clear:both;" class\x3d"esriLeadingPadding1"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
expressionCount:1,enableEvents:!0,addEmptySet:!1,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;this.i18n=b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").FilterDlg)},postCreate:function(){this.inherited(arguments);var a=this.i18n.matchMsgSet.indexOf("${any_or_all}"),d=a+13,a=this.i18n.matchMsgSet.substring(0,a)+'\x3cselect id\x3d"'+this.id+'.allAnySet"\x3e\x3coption value\x3d"AND"\x3e'+this.i18n.all+
'\x3c/option\x3e\x3coption value\x3d"OR" selected\x3e'+this.i18n.any+"\x3c/option\x3e\x3c/select\x3e\x3cspan\x3e"+this.i18n.matchMsgSet.substring(d)+"\x3c/span\x3e";b.byId(this.id+".matchMsgSet").innerHTML=a;this.addEmptySet||(this.addExpression(),this.addExpression());b.connect(b.byId(this.id+".deleteSetLink"),"onclick",this,"onClickDeleteSet");b.connect(b.byId(this.id+".addExpressionToSetLink"),"onclick",this,"onAddExpression")},constructor:function(a,b){this.id=a.id||"";this.owner=a.owner;this.version=
a.version;this.addEmptySet=a.addEmptySet;!1===a.enableEvents&&(this.enableEvents=!1)},destroy:function(){this.inherited(arguments)},toJson:function(){var a=b.map(b.query(".singleFilter",this.allSetExpr),b.hitch(this,function(a){return c.byNode(a).toJson()}));return{logicalOperator:b.byId(this.id+".allAnySet").value,parts:a}},onClickDeleteSet:function(a){this.owner.deleteSet(this)},showDeleteIcon:function(){b.style(b.byId(this.id+".deleteSetLink"),"display",10>b.isIE?"inline":"")},hideDeleteIcon:function(){b.style(b.byId(this.id+
".deleteSetLink"),"display","none")},addExpression:function(a){a=new arcgisonline.sharing.dijit.SingleFilter({id:this.id+".exprSet_"+this.expressionCount,owner:this,version:this.version,enableEvents:this.enableEvents,part:a&&a.part},b.create("div",{},this.allSetExpr,"last"));this.expressionCount++;a.fillFieldsList(this.owner.fieldsStore);var d=b.query(".singleFilter",this.allSetExpr);2<d.length?(a.showDeleteIcon(),c.byNode(d[0]).showDeleteIcon(),c.byNode(d[1]).showDeleteIcon()):2==d.length&&(c.byNode(d[0]).hideDeleteIcon(),
c.byNode(d[1]).hideDeleteIcon());this.owner.disableOK();return a},deleteExpression:function(a){a.destroy();a=b.query(".singleFilter",this.allSetExpr);2<a.length?(c.byNode(a[0]).showDeleteIcon(),c.byNode(a[1]).showDeleteIcon()):2==a.length&&(c.byNode(a[0]).hideDeleteIcon(),c.byNode(a[1]).hideDeleteIcon());this.owner.checkOK()},onChangeField:function(a,b){this.owner.onChangeField(a,b,this)},onChangeOperator:function(a,b){this.owner.onChangeOperator(a,b,this)},onClickDeleteExpression:function(a){this.deleteExpression(a)},
onAddExpression:function(){var a=this.addExpression();setTimeout(b.hitch(this,function(){this.owner.defaultToValueOrUnique(null,a)}),1E3)},defaultToValueOrUnique:function(a,b){this.owner.defaultToValueOrUnique(a,b,this)},showValueInput:function(a,b){this.owner.showValueInput(a,b,this)},showFields:function(a,b){this.owner.showFields(a,b,this)},showUniqueList:function(a,b){this.owner.showUniqueList(a,b,this)}})});