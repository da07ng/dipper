// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define("esri/core/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/keys dijit/form/TextBox ./WebSceneEditorPaneBase webSceneViewer/widgets/BasemapGallery/BasemapGallery".split(" "),function(l,m,c,d,g,n,p,q,r){return l(q,{_basemaps:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap".split(" "),
constructor:function(){m.mixin(this,{id:"editBasemap",title:"Ground",actionButton:{title:"Done",action:"_navBackBtnNodeClickHandler"}});this._updateContent()},destroy:function(){this._basemapGallery&&this._basemapGallery.destroy()},onPaneSelected:function(){var a=Basemap.getCustomElevationLayer(),b=Basemap.getFusionElevationService();null!=a?(this._elevationDropDown.selectedIndex=3,this._customElevationUrl=a,this._customElevationURlTextBox.set("value",a),this._showUrlInput()):null!=b?(this._elevationDropDown.selectedIndex=
1,this._fusionElevationUrl=b,this._customElevationURlTextBox.set("value",b),this._showUrlInput()):0===Basemap.getElevationLayerCount()&&(this._elevationDropDown.selectedIndex=2)},_hideUrlInput:function(){d.add(this._customElevationURlTextBox.domNode,"hide");d.add(this._addLayerByUrlButton,"hide");this._customElevationURlTextBox.set("value","")},_showUrlInput:function(){d.remove(this._customElevationURlTextBox.domNode,"hide");d.remove(this._addLayerByUrlButton,"hide")},_updateContent:function(){var a=
this,b=c.create("div",{className:"editBasemapPane"});if(null==this.editor)c.place("\x3cp\x3einitialization problem\x3c/p\x3e",b);else{c.create("h3",{className:"paneSectionTitle"},b).textContent="Basemap";c.create("br",{},b);this._basemapGallery=new r({map:this.editor.map,webscene:this.editor.webScene},b);c.create("hr",{className:"separator"},b);c.create("h3",{className:"paneSectionTitle"},b).textContent="Elevation";c.create("br",{},b);this._elevationDropDown=c.create("select",{id:"elevationDropDown"},
b);c.create("option",{value:"worldElevation"},this._elevationDropDown).textContent="ArcGIS World Elevation";c.create("option",{value:"fusion"},this._elevationDropDown).textContent="ArcGIS World Elevation with fusion map";c.create("option",{value:"flat"},this._elevationDropDown).textContent="Flat ground";c.create("option",{value:"custom"},this._elevationDropDown).textContent="Custom elevation";c.create("br",{},b);c.create("br",{},b);this._customElevationURlTextBox=new p({className:"paneTextBox",placeHolder:"Enter your elevation service URL",
required:!0});this._customElevationURlTextBox.placeAt(b);g(this._customElevationURlTextBox,"keypress",function(a){(a.charOrCode||a.keyCode)==n.ENTER&&d()});this._addLayerByUrlButton=c.create("button",{className:"editorWideGrayButton small right "},b);this._addLayerByUrlButton.textContent="Add";g(this._addLayerByUrlButton,"click",function(){d()});g(this._elevationDropDown,"change",function(b){if(0<a._elevationDropDown.selectedOptions.length)switch(a._elevationDropDown.selectedOptions[0].value){case "worldElevation":e();
f();h();a._hideUrlInput();break;case "fusion":e();h();a._showUrlInput();break;case "flat":e();f();k();a._hideUrlInput();break;case "custom":k(),f(),a._showUrlInput()}});var d=function(){switch(a._elevationDropDown.selectedOptions[0].value){case "fusion":var b=a._customElevationURlTextBox.get("value");b&&(b.length&&0<b.length)&&("string"===typeof a._fusionElevationUrl&&0<a._fusionElevationUrl.length&&f(),a._fusionElevationUrl=b,Basemap.addFusionElevationService(b,0<b.indexOf("amazonaws.com/elevation-tiles-lerc/hiRes/rotterdam")?
{resourceInfo:{tileInfo:{format:"LERC",spatialReference:{wkid:102100,latestWkid:3857},lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8},{level:1,resolution:78271.51696399994,scale:2.95828763795777E8},{level:2,resolution:39135.75848200009,scale:1.47914381897889E8},{level:3,resolution:19567.87924099992,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,
scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},
{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:0.5971642835598172,scale:2256.994353},{level:19,resolution:0.29858214164761665,scale:1128.497176}]},fullExtent:{xmin:495883.6583427321,ymin:6780839.327628856,xmax:503049.6583427321,ymax:6786187.327628856,spatialReference:{wkid:3857}},minScale:288895.277144,maxScale:2256.994353}}:{}),a.editor.map.basemap.reloadElevationOnly(a.map));
break;case "custom":if((b=a._customElevationURlTextBox.get("value"))&&b.length&&0<b.length)"string"===typeof a._customElevationUrl&&0<a._customElevationUrl.length&&e(),a._customElevationUrl=b,Basemap.addFusionElevationService(b),a.editor.map.basemap.reloadElevationOnly(a.map)}},e=function(b){"string"===typeof a._customElevationUrl&&0<a._customElevationUrl.length&&(Basemap.removeFusionElevationService(a._customElevationUrl),a._customElevationUrl="",a.editor.map.basemap.reloadElevationOnly(a.map))},
k=function(){Basemap.removeFusionElevationService(Basemap.defaultArcGISWorldElevationService);a.editor.map.basemap.reloadElevationOnly(a.map)},h=function(){Basemap.removeFusionElevationService(a._fusionElevationUrl);Basemap.addFusionElevationService(Basemap.defaultArcGISWorldElevationService);a.editor.map.basemap.reloadElevationOnly(a.map)},f=function(){"string"===typeof a._fusionElevationUrl&&0<a._fusionElevationUrl.length&&(Basemap.removeFusionElevationService(a._fusionElevationUrl),a._fusionElevationUrl=
"",a.editor.map.basemap.reloadElevationOnly(a.map))};a._hideUrlInput()}this._addToContentNode(b)}})});