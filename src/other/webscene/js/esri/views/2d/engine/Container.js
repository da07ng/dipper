// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.0beta2/esri/copyright.txt for details.
//>>built
define(["../../../core/declare","./DisplayObject"],function(g,h){return g(h,{declaredClass:"esri.views.2D.engine.Container","-chains-":{childAdded:"after",childRemoved:"after"},constructor:function(){this.children=[];this.trash={children:[],ids:{}}},tag:"inherit",_stageSetter:function(a,b){b=this.stage;var c=this.children,d,e,f;this.inherited(arguments);if(b===a)return b;if(c){e=0;for(f=c.length;e<f;e++)d=c[e],d.stage=a}return a},_numChildrenGetter:function(){return this.children.length},addChild:function(a){return this.addChildAt(a,
this.children.length)},addChildAt:function(a,b){var c;if(this.contains(a))return a;(c=a.parent)&&c.removeChild(a);b=Math.min(this.children.length,b);this.children.splice(b,0,a);this.trash.ids[a.id]&&(this.trash.ids[a.id]=null,this.trash.children.splice(this.trash.children.indexOf(a),1));this.childAdded(a,b);this.notifyChange("numChildren");return a},childAdded:function(a,b){a.set({parent:this,stage:this.stage});this.requestRender()},removeAll:function(){for(;this.numChildren;)this.removeChildAt(0)},
removeChild:function(a){var b=this.children.indexOf(a);return-1<b?this.removeChildAt(b):a},removeChildAt:function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this.trash.ids[a.id]=a;this.trash.children.push(a);this.childRemoved(a);this.notifyChange("numChildren");return a},childRemoved:function(a){a.parent=null;a.stage=null;this.requestRender()},contains:function(a){return-1<this.getChildIndex(a)},getChildIndex:function(a){return this.children.indexOf(a)},getChildAt:function(a){return 0>
a||a>this.children.length?null:this.children[a]},setChildIndex:function(a,b){var c=this.getChildIndex(a);-1<c&&(this.children.splice(c,1),this.children.splice(b,0,a),this.requestRender())},requestChildRender:function(a){a&&a.parent===this&&this.requestRender()},reflow:function(a){var b=this.children,c=b.length,d;a.emptyTrash(this);a.pushParent(this);for(d=0;d<c;d++)a.reflowChild(b[d],d);a.popParent()},render:function(a){this.inherited(arguments);var b=this.children,c=b.length,d;a.pushParent(this);
for(d=0;d<c;d++)a.pushMatrix(),a.renderChild(b[d]),a.popMatrix();a.popParent()}})});